System.register("chunks:///Core/Utils/PlatformUtils.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Tools.js"],(function(e,t){var o,n,i,r,s;return{setters:[function(e){o=e.createClass,n=e.classCallCheck},function(e){i=e.cclegacy},function(e){r=e.Tools}],execute:function(){i._RF.push({},"8b3d5Sfu+xHEofcXEk5Hx48","PlatformUtils",void 0),(s=function(){function e(){n(this,e)}return o(e,null,[{key:"init",value:function(){this.initIsVibration()}},{key:"initIsVibration",value:function(){var t=localStorage.getItem(e.VibrationKey);e.isVibration=null==t||null==t||""==t||"1"==t}},{key:"vibration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;this.isVibration&&(window.tt?this.tt_vibration(e):window.wx?this.wx_vibration(e):"undefined"!=typeof qg?this.oppo_vibration(e):this.android_vibration(e))}},{key:"android_vibration",value:function(t){var o=this;if(e.isAndroid){var n=""+Math.floor(t);jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","vibrator","(Ljava/lang/String;)V",n),(t-=15)<=0||setTimeout((function(){o.android_vibration(t)}),15)}}},{key:"tt_vibration",value:function(e){var t=this;e-=15,window.tt.vibrateShort({}),e<=0||setTimeout((function(){t.tt_vibration(e)}),15)}},{key:"wx_vibration",value:function(e){var t=this;e-=15,window.wx.vibrateShort({}),e<=0||setTimeout((function(){t.wx_vibration(e)}),15)}},{key:"oppo_vibration",value:function(e){var t=this;e-=20,window.qg.vibrateShort({}),e<=0||setTimeout((function(){t.oppo_vibration(e)}),.02)}},{key:"isNetConnected",value:function(e){this.isOppo()||this.isVivo()?qg.getNetworkType({success:function(t){console.log(t.networkType),e(!0)},fail:function(){console.log(),e(!1)},complete:function(){}}):e(!0)}},{key:"startRecorderManager",value:function(){var t=this;if(null!=window.tt&&null!=window.tt){this.RecorderIsClose=!1,this.isRecorderTimeMin=!1,setTimeout((function(){t.isRecorderTimeMin=!0}),5e3);var o=window.tt.getGameRecorderManager();e.RecorderVideoPath="",o.start({duration:120}),o.onStart((function(){console.log("录制开始")})),o.onError((function(){console.log("视频录制失败")})),o.onStop((function(t){console.log("-------- on stopRecorderManager -------"),e.RecorderVideoPath=t.videoPath,console.log(t.videoPath),this.RecorderIsClose=!0}))}}},{key:"stopRecorderManager",value:function(){null!=window.tt&&(this.RecorderIsClose||(console.log("-------- stopRecorderManager -------"),window.tt.getGameRecorderManager().stop()))}},{key:"shareVideo",value:function(t){if(this.isRecorderTimeMin)if(null!=window.tt&&null!=window.tt){tt.shareAppMessage({channel:"video",title:"一起攻占海岛",desc:"收集小弟攻占海岛做老大",imageUrl:"https://qibzhgdl.leiting.com/patch/wx/share.png",templateId:"ubvmh6wt4i5bk2j17f",query:"",extra:{videoPath:e.RecorderVideoPath,videoTopics:["一起攻占海岛","收集小弟攻占海岛做老大"]},success:function(){console.log("分享视频成功"),t()},fail:function(e){console.log(e),console.log("分享视频失败"),r.ShowTip("已放弃发布")}})}else t();else r.ShowTip("录制时间小于5秒，不可分享")}},{key:"ttShare",value:function(e){if(null!=window.tt&&null!=window.tt){tt.shareAppMessage({title:"来追我鸭！",desc:"漂移，射击，所向无敌！",imageUrl:"Resources/UI/LoadingView/tu.png",query:"",success:function(){console.log("分享成功"),e()},fail:function(e){console.log("分享失败"),r.ShowTip("取消分享")}})}else e()}},{key:"showTip",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";if("undefined"!=typeof qg){if(void 0!==qg.getSystemInfoSync){var o=qg.getSystemInfoSync();"vivo"==o.brand?qg.showToast({message:e}):"OPPO"==o.brand&&qg.showToast({title:e})}}else"undefined"!=typeof wx?wx.showToast({title:e,icon:t}):r.ShowTip(e)}},{key:"isWx",value:function(){return"undefined"==typeof qq&&"undefined"!=typeof wx&&"undefined"==typeof tt}},{key:"isOppo",value:function(){if("undefined"!=typeof qg&&void 0!==qg.getSystemInfoSync){var e=qg.getSystemInfoSync();if("OPPO"==e.brand||"realme"==e.brand)return!0}return!1}},{key:"isVivo",value:function(){if("undefined"!=typeof qg&&(void 0!==qg.getSystemInfoSync&&"vivo"==qg.getSystemInfoSync().brand))return!0;return!1}},{key:"InstallShortcut",value:function(t){(e.isVivo()||e.isOppo())&&qg.hasShortcutInstalled({success:function(e){0==e&&qg.installShortcut({success:function(){t()},fail:function(e){},complete:function(){}})},fail:function(e){},complete:function(){}})}},{key:"hasInstallShortcuted",value:function(t){(e.isVivo()||e.isOppo())&&qg.hasShortcutInstalled({success:function(e){t(e)}})}},{key:"SceenIsTwoToOne",value:function(){if(this.isOppo())return!0;if("undefined"==typeof wx)return!1;var e=wx.getSystemInfoSync().screenWidth;return wx.getSystemInfoSync().screenHeight/e>=2}},{key:"IsVibration",get:function(){return this.isVibration},set:function(t){this.isVibration=t;var o="0";1==t&&(o="1"),localStorage.setItem(e.VibrationKey,o)}},{key:"isAndroid",get:function(){return"undefined"!=typeof jsb}},{key:"isQQ",get:function(){return"undefined"!=typeof qq}},{key:"isTT",get:function(){return"undefined"!=typeof tt}},{key:"rootObj",get:function(){return e.isWx()?wx:e.isOppo()?qg:e.isQQ?qq:e.isTT?tt:void 0}},{key:"IsIos",get:function(){return Boolean(navigator.userAgent.match(/iphone|ipod/gi))}}]),e}()).isVibration=!0,s.VibrationKey="VibrationKey",s.RecorderVideoPath="",s.isRecorderTimeMin=!1,s.RecorderIsClose=!1,s.BrowserInfo={userAgent:navigator.userAgent.toLowerCase(),IsAndroid:Boolean(navigator.userAgent.match(/android/gi)),IsIphone:Boolean(navigator.userAgent.match(/iphone|ipod/gi)),IsIpad:Boolean(navigator.userAgent.match(/ipad/gi)),IsWeixin:Boolean(navigator.userAgent.match(/MicroMessenger/gi))},i._RF.pop(),e("default",s)}}}));

System.register("chunks:///Core/Constants/Constant.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../Utils/PlatformUtils.js"],(function(e,o){var i,t,n,a,l,r,u,d,I,c,U,s,C,y,S,T,L,B,N,f,P;return e({AniName:void 0,TeamType:void 0,StateType:void 0,AttackType:void 0,MoveType:void 0,LevelType:void 0,RewardType:void 0,ViewType:void 0,LayerType:void 0,LocalStorageKey:void 0,ItemLockType:void 0,GameType:void 0,ExChangeType:void 0,SceneType:void 0}),{setters:[function(e){i=e.createClass,t=e.classCallCheck},function(e){n=e.cclegacy,a=e.view},function(e){l=e.default}],execute:function(){n._RF.push({},"85c9cF8K6lKrbHwfebQuca5","Constant",void 0),(r=function(){function e(){t(this,e)}return i(e,null,[{key:"init",value:function(){(l.isOppo()||l.isVivo())&&(this.LockHome=4,this.LockPVP=5,this.NoviceGift=5,this.LockSigIn=5,this.LockPassReward=5,this.LockStore=5,this.LockBounty=5,this.LockKongTou=5)}}]),e}()).Width=a.getVisibleSize().width,r.Height=a.getVisibleSize().height,r.VictoryBoxRewardTime=600,r.ChallengeMaxCount=10,r.SelfId=1e4,r.TurntableTime=600,r.TurntableBoxTime=432e3,r.DailyGoldCount=5,r.DailyDaimond=40,r.DailyGold=2e3,r.DailyWood=800,r.DailyDaimondOutArr=[30,20,10,5,5],r.DailyGoldOutArr=[1e3,800,500,300,300],r.DailyWoodOutArr=[500,300,200,100,100],r.BattleTime=120,r.PVPVictoryBoxMedal=5,r.KongtouRecieveCount=3,r.LevelGiftTime=3600,r.PVPReward=1e3,r.DefenseGoldReward=300,r.NoviceGiftCount=5,r.QQRoleScale=1.6,r.NoviceGift=4,r.LockHome=5,r.LockSigIn=6,r.LockPassReward=7,r.LockStore=8,r.LockPVP=10,r.LockBounty=20,r.LockKongTou=10,r.WoodId=-10,r.PVPPowerMin=.8,r.PVPPowerMax=1.1,function(e){e.IDLE="Idle",e.ATTACK="Attack",e.RUN="Run",e.SKILL="Skill",e.DEATH="Death",e.VICTORT="Victory"}(u||e("AniName",u={})),function(e){e[e.Blue=0]="Blue",e[e.Red=1]="Red"}(d||e("TeamType",d={})),function(e){e[e.NONE=0]="NONE",e[e.IDLE=1]="IDLE",e[e.WATCH=2]="WATCH",e[e.MOVE=3]="MOVE",e[e.ATTACK=4]="ATTACK",e[e.SKILL=5]="SKILL",e[e.DEATH=6]="DEATH"}(I||e("StateType",I={})),function(e){e[e.NONE=0]="NONE",e[e.MELEE=2]="MELEE",e[e.LONG=4]="LONG",e[e.RANGE=8]="RANGE"}(c||e("AttackType",c={})),function(e){e[e.NONE=0]="NONE",e[e.LINE=1]="LINE",e[e.LERP=2]="LERP"}(U||e("MoveType",U={})),function(e){e[e.NONE=0]="NONE",e[e.COIN=1]="COIN",e[e.MASONRY=2]="MASONRY",e[e.BOX=3]="BOX",e[e.BOSS=4]="BOSS"}(s||e("LevelType",s={})),function(e){e[e.COIN=0]="COIN",e[e.MASONRY=1]="MASONRY",e[e.BOX=2]="BOX",e[e.Soldier=3]="Soldier",e[e.Hero=4]="Hero",e[e.Wood=5]="Wood"}(C||e("RewardType",C={})),function(e){e[e.UIVictory=0]="UIVictory",e[e.UIRecruit=1]="UIRecruit",e[e.UILuck=2]="UILuck",e[e.UISoldiers=3]="UISoldiers",e[e.UISoldierInfo=4]="UISoldierInfo",e[e.UIHeroInfo=5]="UIHeroInfo",e[e.UIBuildInfo=6]="UIBuildInfo",e[e.UIBuildUpInfo=7]="UIBuildUpInfo",e[e.UIVictoryBox=8]="UIVictoryBox",e[e.UIPassReward=9]="UIPassReward",e[e.UISet=10]="UISet",e[e.UIBounty=11]="UIBounty",e[e.UIBattleLoading=12]="UIBattleLoading",e[e.UIStore=13]="UIStore",e[e.UICongratulations=14]="UICongratulations",e[e.UIPVP=15]="UIPVP",e[e.UINoviceGift=16]="UINoviceGift",e[e.UITurntable=17]="UITurntable",e[e.UIDailyDaimond=18]="UIDailyDaimond",e[e.UIDailyWood=19]="UIDailyWood",e[e.UIDailyGold=20]="UIDailyGold",e[e.UIGoldEnough=21]="UIGoldEnough",e[e.UIDaimondEnough=22]="UIDaimondEnough",e[e.UISignIn=23]="UISignIn",e[e.UIGuide=24]="UIGuide",e[e.UICollect=25]="UICollect",e[e.UIWoodEnough=26]="UIWoodEnough",e[e.UIChallengeLetter=27]="UIChallengeLetter",e[e.UINotice=28]="UINotice",e[e.UINewLock=29]="UINewLock",e[e.UIKongTou=30]="UIKongTou",e[e.UIWxMoreGamePanel=31]="UIWxMoreGamePanel",e[e.UILevelGift=32]="UILevelGift",e[e.UICrazyBox=33]="UICrazyBox",e[e.UIGetGoods=34]="UIGetGoods",e[e.UIShare=35]="UIShare",e[e.UIRecruitRate=36]="UIRecruitRate"}(y||e("ViewType",y={})),function(e){e[e.UI=0]="UI",e[e.PANEL=1]="PANEL",e[e.TOP=2]="TOP"}(S||e("LayerType",S={})),function(e){e[e.LuckValue=0]="LuckValue",e[e.LockSoldierIdArr=1]="LockSoldierIdArr",e[e.HeroCardCountArr=2]="HeroCardCountArr",e[e.NewLockSoldierArr=3]="NewLockSoldierArr",e[e.PassRewardArr=4]="PassRewardArr",e[e.BountyChallegeArr=5]="BountyChallegeArr",e[e.SotreExChangeData=6]="SotreExChangeData",e[e.ExChangeRefreshCount=7]="ExChangeRefreshCount",e[e.PVPMedal=8]="PVPMedal",e[e.PvpBoxHeroId=9]="PvpBoxHeroId",e[e.PvpBoxCount=10]="PvpBoxCount",e[e.PvpChallengeCount=11]="PvpChallengeCount",e[e.PVPVoDatas=12]="PVPVoDatas",e[e.RefreshPVPCupTime=13]="RefreshPVPCupTime",e[e.PVPSoldiers=14]="PVPSoldiers",e[e.TurntableTime=15]="TurntableTime",e[e.TurntableBoxTime=16]="TurntableBoxTime",e[e.TurntableLucky=17]="TurntableLucky",e[e.TurntableBoxReward=18]="TurntableBoxReward",e[e.DailyWoodCount=19]="DailyWoodCount",e[e.DailyGoldCount=20]="DailyGoldCount",e[e.DailyDaimondCount=21]="DailyDaimondCount",e[e.Quality=22]="Quality",e[e.KongtouRecieveCount=23]="KongtouRecieveCount",e[e.SignInCount=24]="SignInCount",e[e.SignInRewardCount=25]="SignInRewardCount",e[e.SignInDay=26]="SignInDay",e[e.BuildUpDatas=27]="BuildUpDatas",e[e.BuildDatas=28]="BuildDatas",e[e.GAME_LEVEL=29]="GAME_LEVEL",e[e.VictoryBoxCount=30]="VictoryBoxCount",e[e.VictoryBoxRewardTime=31]="VictoryBoxRewardTime",e[e.GoldColletTime=32]="GoldColletTime",e[e.SendEventIsNew=33]="SendEventIsNew",e[e.RewardMultiple=34]="RewardMultiple",e[e.IsFirstShowNoviceGift=35]="IsFirstShowNoviceGift",e[e.IsFirstShowUISign=36]="IsFirstShowUISign",e[e.OffLineTime=37]="OffLineTime",e[e.ShowCollectCount=38]="ShowCollectCount",e[e.IsShare=39]="IsShare",e[e.LevelGifeRecieve=40]="LevelGifeRecieve",e[e.LevelGifeTime=41]="LevelGifeTime",e[e.kongtouRecieveDatas=42]="kongtouRecieveDatas",e[e.KdBoxCount=43]="KdBoxCount",e[e.NoviceReceiveCount=44]="NoviceReceiveCount",e[e.LevelGiftTime=45]="LevelGiftTime"}(T||e("LocalStorageKey",T={})),function(e){e[e.NONE=0]="NONE",e[e.BOX=-100]="BOX",e[e.UnUse=-101]="UnUse"}(L||e("ItemLockType",L={})),function(e){e[e.None=0]="None",e[e.Game=1]="Game",e[e.Bounty=2]="Bounty",e[e.PVP=3]="PVP",e[e.Defense=4]="Defense"}(B||e("GameType",B={})),function(e){e[e.NONE=0]="NONE",e[e.FREE=1]="FREE",e[e.GOLD=2]="GOLD",e[e.DAIMOND=3]="DAIMOND",e[e.VIDEO=4]="VIDEO"}(N||e("ExChangeType",N={})),e("AudioName",f=function e(){t(this,e)}),f.Battle_Start="Battle_Start",f.BG="BGM_Mian",f.BG1="BGM_Mian1",f.BtnClick="BtnClick",f.BuyCard="BuyCard",f.BuyCardShow="BuyCardShow",f.Fail="Fail",f.Success="Success",f.Wood="wood",f.Daimond="Daimond",f.Gold="gold",f.Get="Get",f.Synthe="synthe",f.Pipei="Pipei",f.Building="Building",f.GetCard="getCard",f.BoatDrop="boat_drop",f.Bomb="zadanbing_bomb",function(e){e[e.BattleScene=0]="BattleScene",e[e.BoatScene=1]="BoatScene",e[e.HomeScene=2]="HomeScene"}(P||e("SceneType",P={})),n._RF.pop(),e("default",r)}}}));

System.register("chunks:///Core/Utils/Dictionary.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var s,i,n,c;return{setters:[function(e){s=e.createClass,i=e.classCallCheck},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"ed4c3O3uSVNobrFCyrDWrYt","Dictionary",void 0),c=function(){function e(){i(this,e),this.count=0,this.keys=new Array,this.values=new Array,this.get=function(e){var t=this.checkKeyId(e);return-1==t?null:this.values[t]},this.remove=function(e){var t=this.checkKeyId(e);-1!=t?(this.keys.splice(t,1),this.values.splice(t,1),--this.count):console.error(e+" does not exist")}}return s(e,[{key:"add",value:function(e,t){-1==this.checkKeyId(e)?(this.keys[this.count]=e,this.values[this.count]=t,++this.count):console.error(e+" is exit")}},{key:"set",value:function(e,t){var s=this.checkKeyId(e);-1!=s?this.values[s]=t:this.add(e,t)}},{key:"checkKeyId",value:function(e){for(var t=0;t<this.count;t++)if(e==this.keys[t])return t;return-1}},{key:"containKey",value:function(e){return-1!=this.checkKeyId(e)}},{key:"clear",value:function(){for(var e=this.count-1;e>=0;e--)this.keys.splice(e,1),this.values.splice(e,1),--this.count}},{key:"Count",get:function(){return this.count}},{key:"Keys",get:function(){return this.keys}}]),e}(),n._RF.pop(),e("default",c)}}}));

System.register("chunks:///Core/Utils/AudioManager.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../Constants/Constant.js","./Dictionary.js","../../Tools.js"],(function(t,e){var i,u,n,o,a,s,r,d,c,l,h,p,y,f,g,M,v,k,S,m,b;return t({_dec:void 0,_class:void 0,_class2:void 0,_temp:void 0}),{setters:[function(t){i=t.inherits,u=t.classCallCheck,n=t.possibleConstructorReturn,o=t.getPrototypeOf,a=t.createClass,s=t.asyncToGenerator},function(t){r=t.cclegacy,d=t._decorator,c=t.AudioSourceComponent,l=t.game,h=t.loader,p=t.Component,y=t.AudioClip},function(t){f=t.AudioName},function(t){g=t.default},function(t){M=t.Tools}],execute:function(){r._RF.push({},"0e618Fi4ytLSbH3zCurvcwq","AudioManager",void 0),b=d.ccclass,d.property,t("AudioManager",(v=b("AudioManager"),v((m=S=function(t){function e(){var t,i;u(this,e);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(i=n(this,(t=o(e)).call.apply(t,[this].concat(s)))).audioDic=new g,i.MutedKey="MutedKey",i.SoundMutedKey="SoundMutedKey",i.MusicMutedKey="MusicMutedKey",i.soldierDic=new g,i.daoIsPlaying=!1,i.stopT=1,i}var r,d,p;return i(e,t),a(e,[{key:"onLoad",value:function(){e.instance=this,this.audioSource=this.node.getComponent(c),this.initAudios(),this.init(),l.addPersistRootNode(this.node)}},{key:"start",value:function(){}},{key:"onEnable",value:function(){}},{key:"onDisable",value:function(){}},{key:"initAudios",value:function(){h.loadResArray(["audios/"+f.Battle_Start,"audios/"+f.BG,"audios/"+f.BG1,"audios/"+f.BtnClick,"audios/"+f.BuyCard,"audios/"+f.BuyCardShow,"audios/"+f.Fail,"audios/"+f.Success,"audios/"+f.Wood,"audios/"+f.Daimond,"audios/"+f.Gold,"audios/"+f.Get,"audios/"+f.Synthe,"audios/"+f.Pipei,"audios/"+f.Building,"audios/"+f.GetCard,"audios/"+f.BoatDrop,"audios/"+f.Bomb,"audios/daobing_attak"])}},{key:"init",value:function(){this.initMuted(),this.initSoundMuted(),this.initMusicMuted()}},{key:"initMuted",value:function(){var t=localStorage.getItem(this.MutedKey);this.muted=null!=t&&null!=t&&""!=t&&"0"!=t,this.muted||this.audioSource.play()}},{key:"initMusicMuted",value:function(){var t=localStorage.getItem(this.MusicMutedKey);this.musicMuted=null!=t&&null!=t&&""!=t&&"0"!=t}},{key:"initSoundMuted",value:function(){var t=localStorage.getItem(this.SoundMutedKey);this.soundMuted=null!=t&&null!=t&&""!=t&&"0"!=t}},{key:"playSound",value:(p=s(regeneratorRuntime.mark((function t(){var e,i,u,n,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o.length>0&&void 0!==o[0]?o[0]:"",i=!(o.length>1&&void 0!==o[1])||o[1],!this.Muted){t.next=4;break}return t.abrupt("return");case 4:if(!this.MusicMuted){t.next=6;break}return t.abrupt("return");case 6:if(""!=e){t.next=9;break}return this.audioSource.play(),t.abrupt("return");case 9:if(this.audioSource.stop(),u="audios/"+e,null!=(n=h.getRes(u))){t.next=16;break}return t.next=15,M.loadRes(u,y);case 15:n=t.sent;case 16:n.setLoop(i),this.audioSource.clip=n,this.audioSource.play();case 19:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"stopSound",value:function(){this.audioSource.stop()}},{key:"playOneShot",value:(d=s(regeneratorRuntime.mark((function t(e){var i,u,n,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=o.length>1&&void 0!==o[1]?o[1]:1,!this.Muted){t.next=3;break}return t.abrupt("return");case 3:if(!this.SoundMuted){t.next=5;break}return t.abrupt("return");case 5:if(u="audios/"+e,null!=(n=h.getRes(u))){t.next=11;break}return t.next=10,M.loadRes(u,y);case 10:n=t.sent;case 11:if(null!=n){t.next=15;break}return t.next=14,M.loadRes(u,y);case 14:n=t.sent;case 15:this.audioSource.playOneShot(n,i);case 16:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"playBattleOneShot",value:(r=s(regeneratorRuntime.mark((function t(e){var i,u,n,o,a=this,s=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=s.length>1&&void 0!==s[1]?s[1]:1,!this.Muted){t.next=3;break}return t.abrupt("return");case 3:if(!this.SoundMuted){t.next=5;break}return t.abrupt("return");case 5:if(u=0,this.soldierDic.containKey(e)&&(u=this.soldierDic.get(e)),!(u>4)){t.next=9;break}return t.abrupt("return");case 9:if(n="audios/"+e,null!=(o=h.getRes(n))){t.next=15;break}return t.next=14,M.loadRes(n,y);case 14:o=t.sent;case 15:this.audioSource.playOneShot(o,i),this.soldierDic.set(e,u+1),this.scheduleOnce((function(){var t=a.soldierDic.get(e);a.soldierDic.set(e,t-1)}),o.getDuration());case 18:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"playAudio",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.Muted&&!this.SoundMuted){var i="audios/"+t,u=null;return this.audioDic.containKey(t)?u=this.audioDic.get(t):(u=h.getRes(i),this.audioDic.add(t,u)),u.setLoop(e),u.play(),u}}},{key:"stopAudio",value:function(t){this.audioDic.containKey(t)&&this.audioDic.get(t).stop()}},{key:"playDaoBingAttak",value:function(t){if(t){if(this.stopT=1,this.daoIsPlaying)return;this.daoIsPlaying=!0,this.playAudio("daobing_attak",!0)}else this.stopAudio("daobing_attak"),this.daoIsPlaying=!1}},{key:"refreshStopT",value:function(t){this.stopT<=0||(this.stopT-=t,this.stopT<=0&&this.playDaoBingAttak(!1))}},{key:"update",value:function(t){this.refreshStopT(t)}},{key:"Muted",get:function(){return this.muted},set:function(t){this.muted=t;var e="0";1==t&&(e="1"),localStorage.setItem(this.MutedKey,e),1==this.Muted?this.audioSource.stop():this.audioSource.play()}},{key:"MusicMuted",get:function(){return this.musicMuted},set:function(t){this.musicMuted=t;var e="0";1==t&&(e="1"),localStorage.setItem(this.MusicMutedKey,e),localStorage.musicMuted=this.musicMuted,1==this.MusicMuted?this.audioSource.stop():this.audioSource.play()}},{key:"SoundMuted",get:function(){return this.soundMuted},set:function(t){this.soundMuted=t;var e="0";1==t&&(e="1"),localStorage.setItem(this.SoundMutedKey,e)}}],[{key:"Instance",get:function(){return this.instance}}]),e}(p),S.instance=null,k=m))||k)),r._RF.pop()}}}));

System.register("chunks:///UITip.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var i,n,o,r,s,l,a,c,u,p,d,h,v,f,b,y,_,g,m,w,C;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inherits,o=e.classCallCheck,r=e.possibleConstructorReturn,s=e.getPrototypeOf,l=e.initializerDefineProperty,a=e.assertThisInitialized,c=e.createClass},function(e){u=e.cclegacy,p=e._decorator,d=e.LabelComponent,h=e.Vec3,v=e.tween,f=e.Component}],execute:function(){u._RF.push({},"e69b4YTu2hNh7DhtEXb+ULk","UITip",void 0),w=p.ccclass,C=p.property,e("UITip",(b=w("UITip"),y=C(d),b((m=i((g=function(e){function t(){var e,i;o(this,t);for(var n=arguments.length,c=new Array(n),u=0;u<n;u++)c[u]=arguments[u];return i=r(this,(e=s(t)).call.apply(e,[this].concat(c))),l(i,"label",m,a(i)),i}return n(t,e),c(t,[{key:"init",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5;this.label.string=e,this.node.scale=new h(0,0,0),v(this.node).to(.1,{scale:new h(1,1,1)},{easing:"elasticInOut"}).union().start(),v(this.node).to(i,{position:new h(0,100,0)}).call((function(){t.node.removeFromParent(),t.node.destroy()})).start()}}]),t}(f)).prototype,"label",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=g))||_)),u._RF.pop()}}}));

System.register("chunks:///Tools.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Core/Utils/PlatformUtils.js","./Core/Constants/Constant.js","./Core/Utils/AudioManager.js","./UITip.js"],(function(e,n){var t,o,r,i,a,s,u,l,d,c,f,h,g,w,p,y,m,v,S,x,k,C,I,V;return{setters:[function(e){t=e.createClass,o=e.classCallCheck,r=e.asyncToGenerator},function(e){i=e.cclegacy,a=e.Vec3,s=e.tween,u=e.loader,l=e.SpriteFrame,d=e.EventHandler,c=e.Texture2D,f=e.Size,h=e.Prefab,g=e.instantiate,w=e.director,p=e.Node,y=e.game,m=e.AudioSourceComponent,v=e.AudioClip,S=e.find},function(e){x=e.default},function(e){k=e.AudioName},function(e){C=e.AudioManager},function(e){I=e.UITip}],execute:function(){i._RF.push({},"55d67zQlndDF5NJorAZNPaK","Tools",void 0),e("Tools",V=function(){function e(){o(this,e)}var n,i,V,b,q,A,R,P,T,B,M,O;return t(e,[{key:"setWechatImage",value:function(e,n){if("undefined"!=typeof wx){var t=wx.createImage();t.onload=function(){var n=cc.SpriteFrame.createWithImage(t);e.spriteFrame=n},t.src=n}}}],[{key:"rankArray",value:function(e){var n,t,o,r=e.length;for(n=0;n<=r-1;n++)for(t=n+1;t<=r;t++)e[t]<e[n]&&(o=e[t],e[t]=e[n],e[n]=o);console.log("最后的排序结果为",e)}},{key:"compareArray",value:function(e,n){return e.toString()==n.toString()}},{key:"waitForSec",value:(O=r(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){setTimeout((function(){e()}),1e3*n)})));case 1:case"end":return e.stop()}}),e)}))),function(e){return O.apply(this,arguments)})},{key:"ShowTip",value:(M=r(regeneratorRuntime.mark((function n(t){var o,r,i,a=arguments;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=a.length>1&&void 0!==a[1]?a[1]:1.5,n.next=3,e.loadRes("ui/UITip",h);case 3:r=n.sent,i=g(r),w.getScene().getChildByName("Canvas").addChild(i),i.getComponent(I).init(t,o);case 8:case"end":return n.stop()}}),n)}))),function(e){return M.apply(this,arguments)})},{key:"CreateUI",value:(B=r(regeneratorRuntime.mark((function n(t){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.loadRes(t,h);case 2:if(!(o=n.sent)){n.next=6;break}return r=g(o),n.abrupt("return",r);case 6:return n.abrupt("return",null);case 7:case"end":return n.stop()}}),n)}))),function(e){return B.apply(this,arguments)})},{key:"HttpGET",value:(T=r(regeneratorRuntime.mark((function e(n,t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){var r=new XMLHttpRequest;r.timeout=t||5e3,r.onreadystatechange=function(){4==r.readyState&&r.status>=200&&r.status<400?e(JSON.parse(r.responseText)):4==r.readyState&&0==r.status&&o(null)},r.open("GET",n,!0),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.send(),r.ontimeout=function(){o(null)}})));case 1:case"end":return e.stop()}}),e)}))),function(e,n){return T.apply(this,arguments)})},{key:"ShowUI",value:(P=r(regeneratorRuntime.mark((function n(t,o){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.loadRes(t,h);case 2:if(r=n.sent,!o||!r){n.next=7;break}return i=g(r),o.addChild(i),n.abrupt("return",i);case 7:return n.abrupt("return",null);case 8:case"end":return n.stop()}}),n)}))),function(e,n){return P.apply(this,arguments)})},{key:"joggle",value:function(e){s(e).to(.1,{eulerAngles:new a(0,0,-25)}).call((function(){s(e).to(.1,{eulerAngles:new a(0,0,25)}).call((function(){s(e).to(.1,{eulerAngles:new a(0,0,-25)}).call((function(){s(e).to(.1,{eulerAngles:new a(0,0,25)}).call((function(){s(e).to(.1,{eulerAngles:new a(0,0,0)}).call((function(){})).start()})).start()})).start()})).start()})).start()}},{key:"loadRes",value:(R=r(regeneratorRuntime.mark((function e(n,t){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t==l?n+="/spriteFrame":t==c&&(n+="/texture"),e.next=3,this._loadRes(n,t);case 3:if(o=e.sent){e.next=8;break}return e.next=7,this._loadRes(n,t);case 7:o=e.sent;case 8:if(o){e.next=12;break}return e.next=11,this._loadRes(n,t);case 11:o=e.sent;case 12:if(o){e.next=14;break}return e.abrupt("return",o);case 14:return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)}))),function(e,n){return R.apply(this,arguments)})},{key:"_loadRes",value:(A=r(regeneratorRuntime.mark((function e(n,t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){u.loadRes(n,t,(function(n,t){n?o(null):e(t)}))})));case 1:case"end":return e.stop()}}),e)}))),function(e,n){return A.apply(this,arguments)})},{key:"loadSpriteFrame",value:function(e,n){u.loadRes(e+"/spriteFrame",l,(function(t,o){if(t)return console.error("load spriteFrame fail path: "+e),void console.log(t);n(o)}))}},{key:"addClickEvent",value:function(e,n,t,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=new d;i.target=e,i.handler=t,i.component=o,i.customEventData=r,n.clickEvents.push(i)}},{key:"lerp",value:function(e,n,t){return e+(n-e)*(t=(t=t<0?0:t)>1?1:t)}},{key:"clampf",value:function(e,n,t){return e<n&&(e=n),e>t&&(e=t),e}},{key:"getRandomInt",value:function(e,n){return Math.floor(Math.random()*(n+1-e)+e)}},{key:"getRandom",value:function(e,n){return Math.random()*(n+1-e)+e}},{key:"elemetInArray",value:function(e,n){for(var t=0,o=0;o<n.length;o++)n[o]==e&&t++;return t}},{key:"getAngle",value:function(e,n){return 180*Math.atan2(e,n)/Math.PI}},{key:"timestampToTime",value:function(e){var n,t,o;return(n=Math.floor(e/60/60%24))<10&&(n="0"+n),(t=Math.floor(e/60%60))<10&&(t="0"+t),(o=Math.floor(e%60))<10&&(o="0"+o),n+":"+t+":"+o}},{key:"timestampToTime1",value:function(e){var n,t;return e=Math.floor(e),n=Math.floor(e/60%60),t=Math.floor(e%60),e<=0?"00:00":(n<10&&(n="0"+n),t<10&&(t="0"+t),n+":"+t)}},{key:"splitToNumber",value:function(e,n){if(!e||0==e.length)return[];for(var t=e.split(n),o=[],r=0;r<t.length;r++)o.push(Number(t[r]));return o}},{key:"setImage",value:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;n.indexOf("http")>-1?u.load({url:n,type:t},(function(t,r){if(e&&e.node&&!t){var i=new c;i.image=r;var a=new l;a.texture=i,e.spriteFrame=a,o&&(e.node.width=o.width,e.node.height=o.height)}else console.error("读取资源错误",n,t)})):(t==l?n+="/spriteFrame":t==c&&(n+="/texture"),u.loadRes(n,t,(function(r,i){if(r)console.error("读取资源错误",n,r);else if(e&&e.node)if(t==l)e.spriteFrame=i,o&&(e.node.width=o.width,e.node.height=o.height);else{var a=new l;a.texture=i,e.spriteFrame=a,o&&(e.node.width=o.width,e.node.height=o.height)}else console.log("icon已经消失",n,r)})))}},{key:"getCirclePoints",value:function(e,n,t,o){for(var r=[],i=Math.PI/180*Math.round(360/o),a=0;a<o;a++){var s=n+e*Math.sin(i*a),u=t+e*Math.cos(i*a);r.push({x:s,y:u})}return r}},{key:"getCirciePointAtIndex",value:function(e,n,t,o,r){var i=Math.PI/180*Math.round(360/o);return new a(n+e*Math.sin(i*r),0,t+e*Math.cos(i*r))}},{key:"getScreenPos",value:function(e,n,t){var o=new a;return e instanceof a?n.convertToUINode(e,t,o):n.convertToUINode(e.worldPosition,t,o),o.x+=cc.winSize.width/2,o.y+=cc.winSize.height/2,o}},{key:"isPointInCircularSector",value:function(e,n,t,o,r,i,a,s){var u=a-e,l=s-n,d=Math.sqrt(u*u+l*l);return!(d>r)&&(u/=d,l/=d,Math.acos(u*t+l*o)<i)}},{key:"playSound",value:(q=r(regeneratorRuntime.mark((function n(t){var o,r,i,a=arguments;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=a.length>1&&void 0!==a[1]&&a[1],e._audioSourceComponent||(r=new p,y.addPersistRootNode(r),e._audioSourceComponent=r.addComponent(m),e._bgmAudioSourceComponent=r.addComponent(m)),t="sounds/"+t+".mp3",n.next=5,e.loadRes(t,v);case 5:return i=n.sent,e._audioSourceComponent.clip=i,e._audioSourceComponent.clip.setLoop(o),e._audioSourceComponent.clip.playOneShot(1),n.abrupt("return",i);case 10:case"end":return n.stop()}}),n)}))),function(e){return q.apply(this,arguments)})},{key:"playBGMusic",value:(b=r(regeneratorRuntime.mark((function n(t){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e._bgmAudioSourceComponent||(o=new p,y.addPersistRootNode(o),e._audioSourceComponent=o.addComponent(m),e._bgmAudioSourceComponent=o.addComponent(m)),t="sounds/"+t+".mp3",n.next=4,e.loadRes(t,v);case 4:return r=n.sent,e._bgmAudioSourceComponent.clip=r,e._bgmAudioSourceComponent.clip.setLoop(!0),e._bgmAudioSourceComponent.clip.play(),n.abrupt("return",r);case 9:case"end":return n.stop()}}),n)}))),function(e){return b.apply(this,arguments)})},{key:"stopMusic",value:function(){e._bgmAudioSourceComponent&&e._bgmAudioSourceComponent.stop()}},{key:"shake",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];"undefined"!=typeof wx&&(e?wx.vibrateLong(null):wx.vibrateShort(null))}},{key:"splitToString1",value:function(e,n){if(!e||0==e.length)return[];for(var t=e.split(n),o="",r=0;r<t.length;r++)o=""==o?t[r]:o+"\n"+t[r];return o}},{key:"numberToEn",value:function(e){switch(e){case 1:return"1th";case 2:return"2nd";case 3:return"3rd";case 4:return"4th";case 5:return"5th";default:return"没有"}}},{key:"numberToStrKM",value:function(n){if(0===n)return"0";if(n<1e3)return Math.floor(n).toString();var t=Math.floor(Math.log(n)/Math.log(1e3));return(n/Math.pow(1e3,t)).toPrecision(3)+e._sizes[t]}},{key:"createVideo",value:function(n){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.wxVideoCb=o;var i=null;if("undefined"!=typeof qg){if(void 0!==qg.getSystemInfoSync){var a=qg.getSystemInfoSync();if("vivo"==a.brand){if(e.wxVideo)return void e.wxVideo.load();qg.createRewardedVideoAd&&(e.wxVideo=qg.createRewardedVideoAd({posId:n}),e.wxVideo.load(),e.wxVideo.onLoad((function(n){console.log("新视频加载完成 直接播放"),e.wxVideo.show()})),e.wxVideo.onError((function(n){console.log("激励视频错误",JSON.stringify(n)),e.ShowTip("广告正在加载中，请"+t.Timer+"秒后再尝试~"),e.wxVideoCb=null})),e.wxVideo.onClose((function(n){console.log("激励视频已关闭"),n&&n.isEnded?e.wxVideoCb&&e.wxVideoCb("ok"):(e.ShowTip("请完整观看"),e.wxVideoCb&&e.wxVideoCb("no")),e.wxVideoCb=null})))}else if("OPPO"==a.brand){if(e.wxVideo)return void e.wxVideo.load();a.platformVersionCode>=1040?e.wxVideo=qg.createRewardedVideoAd({posId:n}):a.platformVersionCode>=1051&&(e.wxVideo=qg.createRewardedVideoAd({adUnitId:n})),e.wxVideo.onLoad((function(n){console.log("新视频加载完成 直接播放"),e.wxVideo.show()})),e.wxVideo.onError((function(n){console.log("激励视频错误",JSON.stringify(n)),e.ShowTip("暂无视频"),e.wxVideoCb=null})),e.wxVideo.onClose((function(n){console.log("激励视频已关闭"),n&&n.isEnded?e.wxVideoCb&&e.wxVideoCb("ok"):(e.ShowTip("请完整观看"),e.wxVideoCb&&e.wxVideoCb("no")),e.wxVideoCb=null})),e.wxVideo.load()}}}else if("undefined"!=typeof tt){if(!tt.createRewardedVideoAd)return null;e.wxVideo||(e.wxVideo=tt.createRewardedVideoAd({adUnitId:n}),e.wxVideo.onClose((function(n){n.isEnded?n&&n.isEnded?e.wxVideoCb&&e.wxVideoCb("ok"):(e.ShowTip("请完整观看"),e.wxVideoCb&&e.wxVideoCb("no")):e.ShowTip("请完整观看")}))),e.wxVideo.load().then((function(){e.wxVideo.show()})).catch((function(n){"no advertisement"===n.errMsg?e.ShowTip("当前无广告填充，请您稍后再试"):e.ShowTip(n.errMsg)}))}else"undefined"!=typeof wx&&(e.wxVideo?e.wxVideo.show():(i=wx.createRewardedVideoAd({adUnitId:n,multiton:!0}),e.wxVideo=i,i.onLoad((function(e){r||(i.show(),i=null)})),i.onError((function(n){console.log("激励视频错误",JSON.stringify(n)),e.ShowTip("暂无视频"),e.wxVideoCb&&e.wxVideoCb("error"),e.wxVideo=null})),i.onClose((function(n){console.log("激励视频已关闭"),n&&n.isEnded?e.wxVideoCb&&e.wxVideoCb("ok"):(e.ShowTip("请完整观看"),e.wxVideoCb&&e.wxVideoCb("no"))})),i.load()))}},{key:"TimeDown",value:function(){this.Timer--}},{key:"showBanner",value:function(n){e.isShowBanner=n,n?e.wxBanner&&e.wxBanner.show():e.wxBanner&&e.wxBanner.hide()}},{key:"createBanner",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.isShowBanner=o,"undefined"!=typeof qg){if(void 0!==qg.getSystemInfoSync){var r=qg.getSystemInfoSync();if("vivo"==r.brand){t&&(t.hide(),t.destroy(),e.wxBanner=null);var i=qg.createBannerAd({posId:n,style:{}}),a=i.show();return a&&a.then((function(){console.log("banner广告展示成功")})).catch((function(n){switch(n.code){case 30003:console.log("新用户7天内不能曝光Banner，请将手机时间调整为7天后，退出游戏重新进入");break;case 30009:console.log("10秒内调用广告次数超过1次，10秒后再调用");break;case 30002:console.log("加载广告失败，重新加载广告"),setTimeout((function(){e.retryShow(i)}),11e3);break;default:console.log("banner广告展示失败"),console.log(JSON.stringify(n))}})),i.onLoad((function(n){console.log("-------",n),e.isShowBanner?i.show():i.hide()})),i}if("OPPO"==r.brand){t&&(t.hide(),t.destroy());var s=qg.getSystemInfoSync(),u=(s.screenWidth,s.screenHeight,qg.getSystemInfoSync().screenWidth),l=qg.getSystemInfoSync().screenHeight,d=new f(640,1136),c=u/d.width*d.height,h=u/d.width*100+(l-c)/2,g=qg.createBannerAd({adUnitId:n,style:{left:0,top:l-100,width:u,height:h}});return g.onLoad((function(e){})),g.onError((function(e){console.warn("-banner出错",JSON.stringify(e))})),e.isShowBanner?g.show():g.hide(),g}}}else{if("undefined"!=typeof tt){e.isShowBanner=o;var w=wx.getSystemInfoSync().screenWidth,p=wx.getSystemInfoSync().screenHeight,y=new f(750,1334),m=w/y.width*y.height;y.width;if(!tt.createBannerAd)return null;var v=tt.createBannerAd({adUnitId:n,style:{left:(w-y.width)/2,top:p-y.height,width:330}});return v.onResize((function(e){console.log("banner重置位置",v.style.realWidth,v.style.realHeight);v.style.realHeight;v.style.top=p-e.height,v.style.left=(w-e.width)/2})),v.onLoad((function(n){t&&(t.hide(),t.destroy()),e.isShowBanner?v.show():v.hide()})),v.onError((function(e){console.warn("头条banner出错",JSON.stringify(e))})),v}if("undefined"!=typeof wx){var S=wx.getSystemInfoSync().screenWidth,x=wx.getSystemInfoSync().screenHeight,k=new f(750,1334),C=S/k.width*k.height,I=S/k.width*100+(x-C)/2,V=wx.createBannerAd({adUnitId:n,style:{left:0,top:0,width:S}}),b=!1;return V.onResize((function(e){if(!b)if(b=!0,V.style.realHeight>I){b=!0;var n=S*I/V.style.realHeight;n=n<300?300:n,V.style.width=n,V.style.top=x-V.style.realHeight*(n/V.style.realWidth),V.style.left=(S-V.style.width)/2}else V.style.top=x-V.style.realHeight,x/S>2&&(V.style.top=V.style.top-34)})),V.onLoad((function(n){t&&(t.hide(),t.destroy()),e.isShowBanner?V.show():V.hide()})),V.onError((function(e){console.warn("微信banner出错",e)})),V}}}},{key:"retryShow",value:function(e){var n=qg.createBannerAd({posId:e,style:{}}).show();n&&n.catch((function(e){console.log("banner广告展示失败-重试"),console.log(JSON.stringify(e))}))}},{key:"createQQBanner",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=qq.getSystemInfoSync(),r=o.screenWidth;t&&t.destroy();var i=qq.createBannerAd({adUnitId:n,style:{left:0,top:o.screenHeight-100,width:r}});function a(){e.isShowBanner?i.show():i.hide(),i.offLoad(a)}function s(e){i.offError(this)}return i.onLoad(a),i.onError(s),i}},{key:"createTTBanner",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.isShowBanner=o;var r=wx.getSystemInfoSync();r.screenWidth,r.screenHeight;console.log("phone",r);var i=wx.getSystemInfoSync().screenWidth,a=wx.getSystemInfoSync().screenHeight,s=new f(750,1334),u=wx.createBannerAd({adUnitId:n,style:{left:(i-s.width)/2,top:a-s.height,width:330}});return u.onResize((function(e){console.log("banner重置位置",u.style.realWidth,u.style.realHeight);u.style.realHeight;u.style.top=a-e.height,u.style.left=(i-e.width)/2})),u.onLoad((function(n){t&&(t.hide(),t.destroy()),e.isShowBanner?u.show():u.hide()})),u.onError((function(e){console.warn("微信banner出错",e)})),u}},{key:"cacheInsertAd",value:function(n){var t=null;if("undefined"!=typeof qg){if(void 0!==qg.getSystemInfoSync){var o=qg.getSystemInfoSync();if("vivo"==o.brand){if(void 0!==qg.createInterstitialAd){var r=(t=qg.createInterstitialAd({posId:n})).show();r&&r.then((function(){console.log("普通插屏广告展示成功")})).catch((function(e){console.log("普通插屏广告展示失败",e.code)}))}}else"OPPO"==o.brand&&void 0!==qg.createInsertAd&&(t=qg.createInsertAd({adUnitId:n}),e.qgVideo=t)}}else"undefined"!=typeof wx&&wx.createInterstitialAd&&(t=wx.createInterstitialAd({adUnitId:n}),e.qgVideo=t)}},{key:"ShowInsertAd",value:function(){if("undefined"!=typeof qg){if(void 0!==qg.getSystemInfoSync){var n=qg.getSystemInfoSync();"vivo"==n.brand||"OPPO"==n.brand&&e.qgVideo&&(e.qgVideo.load(),e.isonLoad&&(e.isonLoad=!1,e.qgVideo.onLoad((function(n){e.qgVideo.show()})),e.qgVideo.onClose((function(e){})),e.qgVideo.onError((function(e){}))))}}else"undefined"!=typeof wx&&(console.log("展示插屏"),e.qgVideo?(e.isonLoad&&(e.isonLoad=!1,e.qgVideo.onLoad((function(n){e.qgVideo.show()})),e.qgVideo.onClose((function(e){})),e.qgVideo.onError((function(e){}))),e.qgVideo.load()):console.log("微信插屏不存在"))}},{key:"showOPPOBox9",value:function(){if("oppo"==e.platform)if(qg.getSystemInfoSync().platformVersionCode>=1076){var n=qg.createGamePortalAd({adUnitId:"232642"});n.load().then((function(){n.show().then((function(){})).catch((function(e){console.log("show fail with:"+e.errCode+","+e.errMsg)}))})).catch((function(e){console.log("load fail with:"+e.errCode+","+e.errMsg)}))}else console.log("快应用平台版本号低于1076，暂不支持互推盒子相关 API")}},{key:"showOPPOBoxBanner",value:function(){if("oppo"==e.platform){var n=null;return qg.getSystemInfoSync().platformVersionCode>=1076?(n=qg.createGameBannerAd({adUnitId:"232643"})).show().then((function(){console.log("show success")})).catch((function(e){console.log("show fail with:"+e.errCode+","+e.errMsg)})):console.log("快应用平台版本号低于1076，暂不支持互推盒子相关 API"),n}return null}},{key:"showOppoDestop",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(x.isOppo()||x.isVivo())&&qg.hasShortcutInstalled({success:function(t){0==t?qg.installShortcut({success:function(){},fail:function(e){},complete:function(){}}):n&&e.ShowTip("已添加桌面图标")},fail:function(e){},complete:function(){}})}},{key:"createOPPOGameBannerAd",value:function(e){"undefined"!=typeof qg&&qg.getSystemInfoSync().platformVersionCode>=1076?this.oppoGameBannerAd=qg.createGameBannerAd({adUnitId:e}):console.log("快应用平台版本号低于1076，暂不支持互推盒子相关 API")}},{key:"createOPPOGamePortalAd",value:function(n){"undefined"!=typeof qg&&(qg.getSystemInfoSync().platformVersionCode>=1076?e.gamePortalAd?e.gamePortalAd.load():(console.log("创建九宫格广告"),e.gamePortalAd=qg.createGamePortalAd({adUnitId:n}),e.gamePortalAd.onLoad((function(){e.gamePortalAd.show()})),e.gamePortalAd.onError((function(n){console.log("九宫格广告错误",JSON.stringify(n)),e.ShowTip("暂无更多游戏!!")}))):e.ShowTip("暂无更多游戏!"))}},{key:"createBlockAd",value:function(e,n,t,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"vertical";if("undefined"!=typeof qq&&qq.createBlockAd){console.log("创建积木广告");var i=qq.createBlockAd({adUnitId:e,size:o,orientation:r,style:{left:n,top:t}});return i.onError((function(e){console.error("积木广告错误",e)})),i.show(),i}}},{key:"share",value:function(){"undefined"!=typeof wx&&wx.shareAppMessage({title:"策略攻城，成为奇兵指挥官！",imageUrl:"https://qibzhgdl.leiting.com/patch/wx/share.png"})}},{key:"onShare",value:function(){"undefined"!=typeof wx&&(wx.showShareMenu({withShareTicket:!0}),wx.onShareAppMessage((function(){return{title:"策略攻城，成为奇兵指挥官！",imageUrl:"https://qibzhgdl.leiting.com/patch/wx/share.png"}})))}},{key:"getBezierPointList",value:function(e,n){if(e.length<3)return console.error("缺少[起点 控制点 终点]至少3个点"),null;for(var t=e.length,o=[1,1],r=3;r<t+1;r++){for(var i=[],s=0;s<o.length;s++)i.push(o[s]);o[0]=1,o[r-1]=1;for(var u=0;u<i.length-1;u++)o[u+1]=i[u]+i[u+1]}for(var l=[],d=0;d<n;d++){for(var c=d/n,f=new a(0,0,0),h=0;h<t;h++){var g=t-1-h,w=h,p=o[h]*Math.pow(1-c,g)*Math.pow(c,w);f.add(new a(e[h]).multiplyScalar(p))}l.push(f)}return l.push(e[e.length-1]),l}},{key:"getToTomorrowReduceTime",value:function(){return 86400-Math.ceil((new Date).getTime()/1e3)%86400}},{key:"getStandardizationAngle",value:function(e){var n=e%360;return n>=0?n:360+n}},{key:"flyGold",value:(V=r(regeneratorRuntime.mark((function n(){var t,o,r,i,u=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.loadRes("ui/Utils/gold",h);case 2:for(t=n.sent,o=S("Canvas"),C.Instance.playOneShot(k.Gold),r=function(e){var n=g(t);o.addChild(n);var r=u.getRandomInt(-100,100),i=u.getRandomInt(-100,-300);n.position=new a(r,i,0),n.scale=new a(0,0,0),s(n).to(.2,{scale:new a(1,1,1)}).to(.8,{worldPosition:u.goldCenterPos},{easing:"quadInOut"}).call((function(){n.removeFromParent(),n.destroy()})).start()},i=0;i<10;i++)r();setTimeout((function(){C.Instance.playOneShot(k.Gold)}),1e3),setTimeout((function(){C.Instance.playOneShot(k.Get)}),100);case 9:case"end":return n.stop()}}),n)}))),function(){return V.apply(this,arguments)})},{key:"flyDaimond",value:(i=r(regeneratorRuntime.mark((function n(){var t,o,r,i,u=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.loadRes("ui/Utils/daimond",h);case 2:for(t=n.sent,o=S("Canvas"),r=function(e){var n=g(t);o.addChild(n);var r=u.getRandomInt(-100,100),i=u.getRandomInt(-100,-300);n.position=new a(r,i,0),n.scale=new a(0,0,0),s(n).to(.2,{scale:new a(1,1,1)}).to(.8,{worldPosition:u.daimondCenterPos},{easing:"quadInOut"}).call((function(){n.removeFromParent(),n.destroy()})).start()},i=0;i<10;i++)r();setTimeout((function(){C.Instance.playOneShot(k.Daimond)}),1e3),setTimeout((function(){C.Instance.playOneShot(k.Get)}),100);case 8:case"end":return n.stop()}}),n)}))),function(){return i.apply(this,arguments)})},{key:"flyWood",value:(n=r(regeneratorRuntime.mark((function n(){var t,o,r,i,u=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.loadRes("ui/Utils/wood",h);case 2:for(t=n.sent,o=S("Canvas"),r=function(e){var n=g(t);o.addChild(n);var r=u.getRandomInt(-100,100),i=u.getRandomInt(-100,-300);n.position=new a(r,i,0),n.scale=new a(0,0,0),s(n).to(.2,{scale:new a(1,1,1)}).to(.8,{worldPosition:u.woodCenterPos},{easing:"quadInOut"}).call((function(){n.removeFromParent(),n.destroy()})).start()},i=0;i<10;i++)r();setTimeout((function(){C.Instance.playOneShot(k.Wood)}),1e3),setTimeout((function(){C.Instance.playOneShot(k.Get)}),100);case 8:case"end":return n.stop()}}),n)}))),function(){return n.apply(this,arguments)})},{key:"cleanUnuseRes",value:function(){}},{key:"getTimeStamp",value:function(){return Math.floor((new Date).getTime()/1e3)}},{key:"platform",get:function(){return"undefined"!=typeof qg?"vivo"==qg.getSystemInfoSync().brand?"vivo":"oppo":"undefined"!=typeof tt?"tt":"undefined"!=typeof qq?"qq":"undefined"!=typeof wx?"wx":"web"}}]),e}()),V.isContained=function(e,n){if(!(e instanceof Array&&n instanceof Array))return!1;if(e.length<n.length)return!1;for(var t=e.toString(),o=0,r=n.length;o<r;o++)if(-1==t.indexOf(n[o]))return!1;return!0},V._sizes=["","K","M","B","T"],V.wxVideo=null,V.wxVideoCb=null,V.wxadUnitId=null,V.Timer=60,V.isShowBanner=!1,V.canChangeBanner=!0,V.qgVideo=null,V.isonLoad=!0,V.oppoGameBannerAd=null,V.gamePortalAd=null,V.goldCenterPos=new a,V.daimondCenterPos=new a,V.woodCenterPos=new a,i._RF.pop()}}}));

System.register("chunks:///Cfg/BattleCfg.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Tools.js"],(function(t,e){var n,a,s,r,i,o,l,u,c;return{setters:[function(t){n=t.createClass,a=t.classCallCheck,s=t.asyncToGenerator},function(t){r=t.cclegacy,i=t.loader,o=t.JsonAsset},function(t){l=t.Tools}],execute:function(){r._RF.push({},"5c167X6o9pLxbIw1RQrVb+d","BattleCfg",void 0),(u=function(){function t(){a(this,t),this.dataArr=new Array,this.pvpDatas=new Array,this.bountyDatas=new Array,this.wallDatas=new Array}var e,r;return n(t,[{key:"init",value:(r=s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.initNormal(),this.initPvpDatas(),this.initBountyDatas(),this.initWallDatas();case 4:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"initNormal",value:function(){for(var t="configs/battle",e=i.getRes(t,o).json,n=0;n<e.length;n++){var a=new c(e[n]);this.dataArr[n]=a}i.releaseRes(t+".json")}},{key:"initBountyDatas",value:function(){for(var t="configs/bountyBattle",e=i.getRes(t,o).json,n=0;n<e.length;n++){var a=new c(e[n]);this.bountyDatas[n]=a}i.releaseRes(t+".json")}},{key:"initWallDatas",value:function(){for(var t=i.getRes("configs/wall",o).json,e=0;e<t.length;e++){var n=new c(t[e]);this.wallDatas[e]=n}i.releaseRes("configs/wall.json")}},{key:"initPvpDatas",value:(e=s(regeneratorRuntime.mark((function t(){var e,n,a,s,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="configs/pvpBattle",t.next=3,l.loadRes(e,o);case 3:for(n=t.sent,a=n.json,s=0;s<a.length;s++)r=new c(a[s]),this.pvpDatas[s]=r;i.releaseRes(e+".json");case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"getDataByLev",value:function(t){return this.dataArr[t-1]}},{key:"getPvpDataById",value:function(t){return this.pvpDatas[t-1]}},{key:"getBountyDataById",value:function(t){return this.bountyDatas[t-1]}},{key:"getRdWallData",value:function(){return this.wallDatas[l.getRandomInt(0,this.wallDatas.length-1)]}}],[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new t),this.instance}}]),t}()).instance=null,t("BattleCfgData",c=function t(e){a(this,t),this.id=e.id,this.soldiers=e.soldiers}),r._RF.pop(),t("default",u)}}}));

System.register("chunks:///Cfg/BountyCfg.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,n){var e,r,i,s,a,u,c,o;return{setters:[function(t){e=t.createClass,r=t.classCallCheck,i=t.asyncToGenerator},function(t){s=t.cclegacy,a=t.loader,u=t.JsonAsset}],execute:function(){s._RF.push({},"aa0b5jmQhhF2Z9iE9N78WE1","BountyCfg",void 0),(c=function(){function t(){r(this,t),this.dataArr=new Array}var n;return e(t,[{key:"init",value:(n=i(regeneratorRuntime.mark((function t(){var n,e,r,i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n="configs/bounty",e=a.getRes(n,u),r=e.json,i=0;i<r.length;i++)s=new o(r[i]),this.dataArr[i]=s;a.releaseRes(n+".json");case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"getBountyDatas",value:function(){return this.dataArr}},{key:"getDataByIndex",value:function(t){return this.dataArr[t]}}],[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new t),this.instance}}]),t}()).instance=null,t("BountyCfgData",o=function(){function t(n){r(this,t),this.init(n)}return e(t,[{key:"init",value:function(t){this.id=t.id,this.desc=t.desc,this.unlockLevel=t.unlockLevel,this.config=t.config,this.rewardNum=t.rewardNum}}]),t}()),s._RF.pop(),t("default",c)}}}));

System.register("chunks:///Cfg/LevelCfg.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js"],(function(t,e){var s,i,n,o,r,a,l,u,c;return{setters:[function(t){s=t.createClass,i=t.classCallCheck,n=t.asyncToGenerator},function(t){o=t.cclegacy,r=t.loader,a=t.JsonAsset},function(t){l=t.default}],execute:function(){o._RF.push({},"7a9d3Y0ojtDdJtaOUr/1NB0","LevelCfg",void 0),(u=function(){function t(){i(this,t),this.dataArr=new Array}var e;return s(t,[{key:"init",value:(e=n(regeneratorRuntime.mark((function t(){var e,s,i,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e="configs/level",(l.isOppo()||l.isVivo())&&(e="configs/oppolevel"),s=r.getRes(e,a),i=s.json,n=0;n<i.length;n++)o=new c(i[n]),this.dataArr[n]=o;r.releaseRes(e+".json");case 6:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"getLevelDataByLevel",value:function(t){return this.dataArr[t-1]}},{key:"getFirstBoxLevel",value:function(){for(var t=0;t<this.dataArr.length;t++){var e=this.dataArr[t];if(e.box>0)return e.id}}}],[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new t),this.instance}}]),t}()).instance=null,t("LevelCfgData",c=function(){function t(e){i(this,t),this.init(e)}return s(t,[{key:"init",value:function(t){this.id=t.id,this.type=t.type,this.configId=t.configId,this.wallId=t.wallId,this.initBossId(t.bossId),this.bossLv=t.bossLv,this.bossAttack=t.bossAttack,this.initTroopId(t.troopId),this.troopLevel=t.troopLevel,this.troopNum=t.troopNum,this.buildLevel=t.buildLevel,this.coin=t.coin,this.wood=t.wood,this.medal=t.medal,this.gem=t.gem,this.box=t.box}},{key:"initTroopId",value:function(t){var e=t.split("_");this.troopId=[];for(var s=0;s<e.length;s++)this.troopId.push(parseInt(e[s]))}},{key:"initBossId",value:function(t){var e=t.split("_");this.bossId=[];for(var s=0;s<e.length;s++)this.bossId.push(parseInt(e[s]))}}]),t}()),o._RF.pop(),t("default",u)}}}));

System.register("chunks:///Cfg/PassRewardCfg.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,e){var n,r,a,s,i,u,c,o;return{setters:[function(t){n=t.createClass,r=t.classCallCheck,a=t.asyncToGenerator},function(t){s=t.cclegacy,i=t.loader,u=t.JsonAsset}],execute:function(){s._RF.push({},"93adcdnFU1Gt4V3G8cxJ84O","PassRewardCfg",void 0),(c=function(){function t(){r(this,t),this.dataArr=new Array}var e;return n(t,[{key:"init",value:(e=a(regeneratorRuntime.mark((function t(){var e,n,r,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e="configs/passReward",n=i.getRes(e,u),r=n.json,a=0;a<r.length;a++)s=new o(r[a]),this.dataArr[a]=s;i.releaseRes(e+".json");case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"getRwardData",value:function(){return this.dataArr}},{key:"getDataByLevel",value:function(t){return this.dataArr[t-1]}}],[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new t),this.instance}}]),t}()).instance=null,t("PassRewardCfgData",o=function(){function t(e){r(this,t),this.init(e)}return n(t,[{key:"init",value:function(t){this.id=t.id,this.type1=t.type1,this.rewardId1=t.rewardId1,this.num1=t.num1,this.type2=t.type2,this.rewardId2=t.rewardId2,this.num2=t.num2}}]),t}()),s._RF.pop(),t("default",c)}}}));

System.register("chunks:///Cfg/TurntableCfg.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Tools.js"],(function(e,t){var n,r,a,s,i,u,c,o,l;return{setters:[function(e){n=e.createClass,r=e.classCallCheck,a=e.asyncToGenerator},function(e){s=e.cclegacy,i=e.JsonAsset,u=e.loader},function(e){c=e.Tools}],execute:function(){s._RF.push({},"b1995o99apJTaEyhLuz72Tt","TurntableCfg",void 0),(o=function(){function e(){r(this,e),this.dataArr=new Array}var t;return n(e,[{key:"init",value:(t=a(regeneratorRuntime.mark((function e(){var t,n,r,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="configs/turntable",e.next=3,c.loadRes(t,i);case 3:for(n=e.sent,r=n.json,a=0;a<r.length;a++)s=new l(r[a]),this.dataArr[a]=s;u.releaseRes(t+".json");case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getData",value:function(){return this.dataArr}},{key:"getDataById",value:function(e){return this.dataArr[e]}}],[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}()).instance=null,e("TurntableCfgData",l=function e(t){r(this,e),this.id=t.id,this.desc=t.desc,this.rewardType=t.rewardType,this.rewardId=t.rewardId,this.rewardNum=t.rewardNum,this.lucky=t.lucky}),s._RF.pop(),e("default",o)}}}));

System.register("chunks:///Config.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Core/Constants/Constant.js"],(function(e,a){var t,i,n,d,r,o,l,s,p,c,u,h;return{setters:[function(e){t=e.classCallCheck},function(e){i=e.cclegacy},function(e){n=e.ItemLockType,d=e.AttackType,r=e.MoveType,o=e.RewardType}],execute:function(){i._RF.push({},"0322cBJDV9H1ZVLgBQCh7k6","Config",void 0),e("PLATFORM_HAIWAI",!1),e("PLATFORM_H5",!0),e("PLATFORM_TYPE",l={ANDROID_HAIWAI_ENGLISH:"ANDROID_HAIWAI_ENGLISH",iOS_HAIWAI_ENGLISH:"iOS_HAIWAI_ENGLISH",ANDROID:"ANDROID"}),e("CUR_PLATFORM",l.ANDROID_HAIWAI_ENGLISH),e("CANGKU_POSY",475),e("ITEM_TYPE",s={FENCE_H:1,FENCE_V:2,ITEM:3}),e("ITEM_INFO",p=[{id:1,name:"Wall",lucky:0,power:50,lockLev:0,type:s.FENCE_H,width:3,height:1,count:[1,1,1,1,1,1,1,1,1,1],quality:1,prefab:"wall"},{id:2,name:"Wall",lucky:0,power:50,lockLev:0,type:s.FENCE_V,width:1,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:1,prefab:"wall"},{id:3,name:"Base Camp",lucky:0,power:300,lockLev:0,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:1,prefab:"item0"},{id:4,name:"Barracks",lucky:0,power:200,lockLev:0,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:1,prefab:"item1"},{id:5,name:"Gold Mine",lucky:0,power:150,lockLev:0,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:1,prefab:"item2"},{id:6,name:"Ballista",lucky:0,power:2e3,lockLev:0,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:1,prefab:"item5"},{id:7,name:"Catapult",lucky:0,power:2e3,lockLev:0,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:1,prefab:"item4"},{id:8,name:"Turret",lucky:0,power:2e3,lockLev:0,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:1,prefab:"item3"},{id:9,name:"Landmine",lucky:0,power:2e3,lockLev:0,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:1,prefab:"item6"},{id:101,name:"Swordsman",lucky:70,power:170,lockLev:1,type:s.ITEM,width:3,height:3,count:[3,5,7,9,9,9,9,9,9,9],quality:1,prefab:"solider0"},{id:102,name:"Archer",lucky:70,power:172,lockLev:3,type:s.ITEM,width:3,height:3,count:[3,5,7,9,9,9,9,9,9,9],quality:1,prefab:"solider1"},{id:103,name:"Gunner",lucky:40,power:205,lockLev:8,type:s.ITEM,width:3,height:3,count:[3,5,7,9,9,9,9,9,9,9],quality:2,prefab:"solider2"},{id:104,name:"Mage",lucky:40,power:235,lockLev:15,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:2,prefab:"solider4"},{id:105,name:"Wolf",lucky:40,power:221,lockLev:25,type:s.ITEM,width:3,height:3,count:[3,5,7,9,9,9,9,9,9,9],quality:2,prefab:"solider5"},{id:106,name:"Bomber",lucky:30,power:252,lockLev:35,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:3,prefab:"solider6"},{id:110,name:"Snowman",lucky:30,power:280,lockLev:45,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:3,prefab:"solider10"},{id:107,name:"Spike",lucky:30,power:265,lockLev:n.BOX,type:s.ITEM,width:3,height:3,count:[3,5,7,9,9,9,9,9,9,9],quality:3,prefab:"solider7"},{id:113,name:"Assassin",lucky:10,power:284,lockLev:55,type:s.ITEM,width:3,height:3,count:[3,5,7,9,9,9,9,9,9,9],quality:5,prefab:"solider13"},{id:114,name:"Giant",lucky:20,power:500,lockLev:65,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:4,prefab:"solider14"},{id:115,name:"Musketeers",lucky:20,power:295,lockLev:75,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:4,prefab:"solider3"},{id:109,name:"Halberdiers",lucky:30,power:246,lockLev:85,type:s.ITEM,width:3,height:3,count:[3,5,7,9,9,9,9,9,9,9],quality:3,prefab:"solider9"},{id:112,name:"Spearmen",lucky:20,power:304,lockLev:n.BOX,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:4,prefab:"solider12"},{id:108,name:"Wizard",lucky:10,power:365,lockLev:n.BOX,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:5,prefab:"solider8"},{id:111,name:"Berserker",lucky:10,power:500,lockLev:100,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:5,prefab:"solider11"},{id:151,name:"War Totem",lucky:10,power:383,lockLev:n.UnUse,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:2,prefab:"solider11"},{id:152,name:"Little Skull",lucky:10,power:383,lockLev:n.UnUse,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:3,prefab:"solider11"},{id:153,name:"Barbarian",lucky:10,power:383,lockLev:n.UnUse,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:4,prefab:"solider11"},{id:154,name:"Demon Warrior",lucky:10,power:383,lockLev:n.UnUse,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:5,prefab:"solider11"},{id:155,name:"Evil Archer",lucky:10,power:383,lockLev:n.UnUse,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:5,prefab:"solider11"},{id:201,name:"Juggernaut",lucky:70,power:1038,lockLev:n.BOX,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:1,prefab:"hero0"},{id:202,name:"Frost Archer",lucky:40,power:1050,lockLev:n.BOX,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:2,prefab:"hero1"},{id:203,name:"Wind Mage",lucky:30,power:1070,lockLev:n.BOX,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:3,prefab:"hero2"},{id:204,name:"Holy Priest",lucky:20,power:1094,lockLev:n.BOX,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:4,prefab:"hero3"},{id:205,name:"Ancient Giant",lucky:10,power:1153,lockLev:n.BOX,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:5,prefab:"hero4"},{id:251,name:"Prince Skeleton",lucky:10,power:853,lockLev:n.UnUse,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:2,prefab:"hero4"},{id:252,name:"Necron",lucky:10,power:853,lockLev:n.UnUse,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:3,prefab:"hero4"},{id:253,name:"Elf Knight",lucky:10,power:853,lockLev:n.UnUse,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:4,prefab:"hero4"},{id:254,name:"Oracle",lucky:10,power:853,lockLev:n.UnUse,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:5,prefab:"hero4"},{id:255,name:"Hellfire",lucky:10,power:853,lockLev:n.UnUse,type:s.ITEM,width:3,height:3,count:[1,1,1,1,1,1,1,1,1,1],quality:5,prefab:"hero4"}]),e("SOLDIER_INFO",c=[{id:1,name:"WALL",defense:100,attackType:d.NONE,hp:[600,1e3,1400,1800,2800,4e3,5200,6600,8e3,11e3],speed:5,attack:[0],attackR:0,duration:1,skillId:0,deathPrefab:"buildBomb",bullet:0,info:"Enclosure can block and slow down the enemy's ATK and protect your home",restrain:"空"},{id:2,name:"WALL",defense:100,attackType:d.NONE,hp:[600,1e3,1400,1800,2800,4e3,5200,6600,8e3,11e3],speed:5,attack:[0],attackR:0,duration:1,skillId:0,deathPrefab:"buildBomb",bullet:0,info:"Enclosure can block and slow down the enemy's ATK and protect your home",restrain:"空"},{id:3,name:"BASE CAMP",defense:100,attackType:d.NONE,hp:[1350,4500,8e3,11e3,14e3,16e3,18e3,2e4,22e3,24e3],speed:5,attack:[0,0,0,0,0,0,0,0,0,0],attackR:0,duration:1,skillId:0,deathPrefab:"buildBomb",bullet:0,info:"Base Camp is the most important building on the island. Upgrade it to accept more warships",restrain:"空"},{id:4,name:"BARRACKS",defense:100,attackType:d.NONE,hp:[750,1450,2310,2960,3360,3700,4200,4700,5300,6e3],speed:5,attack:[0,0,0,0,0,0,0,0,0,0],attackR:0,duration:1,skillId:0,deathPrefab:"buildBomb",bullet:0,info:"Barracks is the home of soldiers, upgrade it to increase the synthesis limit of soldiers and the level of airdrop soldiers",restrain:"空"},{id:5,name:"GOLD MINE",defense:100,attackType:d.NONE,hp:[1200,2200,3360,3650,4160,4680,5120,5440,6e3,6800],speed:5,attack:[0,0,0,0,0,0,0,0,0,0],attackR:10,duration:1,skillId:0,deathPrefab:"buildBomb",bullet:0,info:"Gold Mine can continuously produce gold coins and gems, upgrade it to increase the output speed",restrain:"空"},{id:6,name:"BALLISTA",defense:100,attackType:d.LONG,hp:[1560,2340,3120,3900,4680,5530,6500,7760,9200,12350],speed:5,attack:[268,311,386,465,567,680,823,989,1089,1312],attackR:20,duration:.3,skillId:0,deathPrefab:"buildBomb",bullet:3,info:"Ballista has a longer ATK range  and ATK power than archers",restrain:"空"},{id:7,name:"CATAPULT",defense:100,attackType:d.LONG,speed:5,hp:[1560,2340,3120,3900,4680,5530,6500,7760,9200,12350],attack:[134,167,276,368,435,548,664,802,960,1280],attackR:13,skillId:0,duration:1,deathPrefab:"buildBomb",bullet:7,info:"The catapult has a super long range, and the stone falls and has a range of DMG",restrain:"空"},{id:8,name:"TURRET",defense:100,attackType:d.LONG,speed:5,hp:[1560,2340,3120,3900,4680,5530,6500,7760,9200,12350],attack:[134,386,541,849,1130,1450,1800,2120,2450,3e3],attackR:13,skillId:0,duration:1,deathPrefab:"buildBomb",bullet:7,info:"The turret has super high ATK power with range DMG to mid-range targets",restrain:"空"},{id:9,name:"LANDMINE",defense:100,attackType:d.RANGE,hp:[100,200,300,400,500,600,700,800,900,1e3],speed:5,attack:[1800,2500,4800,8600,12400,16500,2e4,24500,29e3,35e3],attackR:5,duration:1,skillId:0,deathPrefab:"buildBomb",bullet:0,info:"When the enemy passes by,  Landmine will explode and cause super high area DMG",restrain:"空"},{id:101,name:"SWORDSMAN",defense:100,attackType:d.MELEE,hp:[550,600,800,1250,1600,2e3,2800,3600,4629,6e3],speed:5,attack:[100,140,215,350,400,450,500,600,720,900],attackR:1,duration:1,skillId:0,deathPrefab:"death",bullet:0,info:"Swordsman is good at melee combat",restrain:"+10% damage to Wolf"},{id:102,name:"ARCHER",defense:100,attackType:d.LONG,hp:[360,450,650,1150,1200,1500,1760,2115,2542,3200],speed:4.3,attack:[50,85,140,230,275,300,350,450,579,720],attackR:10,duration:1,skillId:0,deathPrefab:"death",bullet:1,info:"Archers can attack enemies from a distance",restrain:"+10% damage to Swordsman"},{id:103,name:"GUNNER",defense:100,attackType:d.MELEE,hp:[550,600,800,1250,1600,2e3,2800,3600,4629,6e3],speed:2.9,attack:[200,270,400,665,830,1e3,1200,1400,1633,1900],attackR:1,duration:2,skillId:0,deathPrefab:"death",bullet:0,info:"The Gunner's weapon deals piercing DMG to enemies",restrain:"Deals more damage to Melee unit"},{id:104,name:"MAGE",defense:100,attackType:d.LONG,hp:[800,1500,3e3,6e3,8e3,1e4,2e4,25e3,31250,4e4],speed:4.3,attack:[180,245,370,600,800,900,1075,1300,1572,1800],attackR:10,duration:2,skillId:0,deathPrefab:"death",bullet:2,info:"The fireball fired by the mage with high DMG in a small area",restrain:"Ignore the defense of Spike"},{id:105,name:"WOLF",defense:100,attackType:d.MELEE,hp:[800,1e3,1500,2500,3e3,3500,4e3,4500,5063,6e3],speed:11.4,attack:[150,200,300,500,600,700,800,1e3,1250,1500],attackR:1,duration:.75,skillId:0,deathPrefab:"death",bullet:0,info:"The wolf moves extremely fast and can quickly rush to the enemy to attack long-range units first.",restrain:"Attack faster to long-range soldiers"},{id:106,name:"BOMBER",defense:100,attackType:d.RANGE,hp:[700,1450,3e3,6e3,7e3,8500,1e4,12500,15625,19e3],speed:6.4,attack:[1500,3220,5550,8400,13650,18500,23e3,26500,32446,38e3],attackR:1,duration:1,skillId:0,deathPrefab:"zhadanBomb",bullet:0,info:"Bombers explode on death with high area DMG",restrain:"Cause direct damage to buildings"},{id:107,name:"SPIKE",defense:100,attackType:d.MELEE,hp:[1200,1400,2e3,2800,3e3,4e3,5e3,6e3,7200,8500],speed:3.6,attack:[300,380,550,900,1300,1400,1500,1800,2160,2500],attackR:1,duration:2.2,skillId:0,deathPrefab:"death",bullet:0,info:"Spikes hold maces and shields, which can effectively attack and defend",restrain:"Greatly reduce to the melee damage"},{id:108,name:"WIZARD",defense:100,attackType:d.MELEE,hp:[1120,1360,2e3,3200,3760,4560,5440,6560,7911,9e3],speed:4.3,attack:[100,120,180,280,320,400,470,570,691,850],attackR:1,duration:1,skillId:1,deathPrefab:"death",bullet:0,info:"The wizard's poisonous aura can cause continuous DMG to nearby enemies",restrain:"Poisonous aura deals double damage to assassins"},{id:109,name:"HALBERDIERS",defense:100,attackType:d.MELEE,hp:[800,1e3,1500,2500,3e3,3500,4e3,4500,5063,6e3],speed:5,attack:[150,180,260,400,550,800,1e3,1400,1960,2500],attackR:1,duration:1.2,skillId:0,deathPrefab:"death",bullet:0,info:"Halberdiers use halberds to attack close-range enemies, which is safer",restrain:"Deals more damage to wizard"},{id:110,name:"SNOWMAN",defense:100,attackType:d.LONG,hp:[800,1500,3e3,6e3,8e3,1e4,2e4,25e3,31250,4e4],speed:3.6,attack:[105,143,218,338,413,488,563,638,723,820],attackR:10,duration:2,skillId:2,deathPrefab:"death",bullet:4,info:"Snowmen throw snowballs, which have a chance to freeze enemies",restrain:"Increase freezing to Giants"},{id:111,name:"BERSERKER",defense:100,attackType:d.MELEE,hp:[5400,11e3,22500,46e3,55e3,66e3,8e4,95e3,112813,15e4],speed:5.7,attack:[280,570,1200,2400,2850,3500,4150,5e3,6024,7500],attackR:1,duration:.8,skillId:0,deathPrefab:"death",bullet:0,info:"Berserkers are bloodthirsty and lower HP and faster ATK-speed",restrain:"Gets more damage from Wolf"},{id:112,name:"SPEARMEN",defense:100,attackType:d.LONG,hp:[3e3,3500,4500,6e3,8e3,1e4,13e3,16e3,2e4,25e3],speed:5,attack:[350,400,500,600,700,900,1200,1500,1800,2300],attackR:10,duration:1.5,skillId:0,deathPrefab:"death",bullet:5,info:"Spearmen throwing spears in regular succession",restrain:"Spears can penetrate enemies"},{id:113,name:"ASSASSIN",defense:100,attackType:d.MELEE,hp:[960,1200,1800,3e3,3600,4200,4800,5400,6076,7e3],speed:8.6,attack:[125,167,250,417,500,583,667,833,1042,1400],attackR:1,duration:.8,skillId:0,deathPrefab:"death",bullet:0,info:"Assassins will rush to the enemy at the first time when the battle starts and giving priority to attacking long-range units",restrain:"Double the damage when attacking behind the enemy"},{id:114,name:"GIANT",defense:100,attackType:d.MELEE,hp:[8250,14e3,22e3,4e4,6e4,9e4,13e4,17e4,22e4,28e4],speed:2.2,attack:[700,900,1300,1700,2100,2500,3e3,3500,4e3,5e3],attackR:1,duration:2.2,skillId:0,deathPrefab:"death",bullet:0,info:"Giants have super HP and attacks can cause area DMG",restrain:"Greatly reduce to the melee damage"},{id:115,name:"MUSKTEERS",defense:100,attackType:d.LONG,hp:[360,450,650,1150,1200,1500,1760,2115,2542,3200],speed:4.3,attack:[50,85,140,230,275,300,350,450,579,720],attackR:5,duration:.75,skillId:5,deathPrefab:"death",bullet:0,info:"The musketeer's shotgun instantly fires two shells at regular intervals",restrain:"Deals more damage to Wolf"},{id:201,name:"JUGGERNAUT",defense:100,attackType:d.MELEE,hp:[6800,7480,8160,8840,9520,10200,10880,11560,12240,12920,13600,14280,14960,15640,16320,17e3,17680,18360,19040,19720,20400,21080,21760,22440,23120,23800,24480,25160,25840,26520,27200,27880,28560,29240,29920,30600,31280,31960,32640,33320,34e3,34680,35360,36040,36720,37400,38080,38760,39440,40120],speed:5,attack:[550,605,660,715,770,825,880,935,990,1045,1100,1155,1210,1265,1320,1375,1430,1485,1540,1595,1650,1705,1760,1815,1870,1925,1980,2035,2090,2145,2200,2255,2310,2365,2420,2475,2530,2585,2640,2695,2750,2805,2860,2915,2970,3025,3080,3135,3190,3245],attackR:1,duration:.8,skillId:3,deathPrefab:"death",bullet:0,info:"The Juggernaut launches multiple sprints in front of him with multiple slash DMG",restrain:"空"},{id:202,name:"FROST ARCHER",defense:80,attackType:d.LONG,hp:[3920,4370,4820,5270,5720,6170,6620,7070,7520,7970,8420,8870,9320,9770,10220,10670,11120,11570,12020,12470,12920,13370,13820,14270,14720,15170,15620,16070,16520,16970,17420,17870,18320,18770,19220,19670,20120,20570,21020,21470,21920,22370,22820,23270,23720,24170,24620,25070,25520,25970],speed:5,attack:[350,390,430,470,510,550,590,630,670,710,750,790,830,870,910,950,990,1030,1070,1110,1150,1190,1230,1270,1310,1350,1390,1430,1470,1510,1550,1590,1630,1670,1710,1750,1790,1830,1870,1910,1950,1990,2030,2070,2110,2150,2190,2230,2270,2310],attackR:10,duration:.75,skillId:4,deathPrefab:"death",bullet:6,info:"Frost Archer scatter arrow rain forward and freezing enemies hit",restrain:"空"},{id:203,name:"WIND MAGE",defense:70,attackType:d.LONG,hp:[3152,3602,4052,4502,4952,5402,5852,6302,6752,7202,7652,8102,8552,9002,9452,9902,10352,10802,11252,11702,12152,12602,13052,13502,13952,14402,14852,15302,15752,16202,16652,17102,17552,18002,18452,18902,19352,19802,20252,20702,21152,21602,22052,22502,22952,23402,23852,24302,24752,25202],speed:5,attack:[281,326,371,416,461,506,551,596,641,686,731,776,821,866,911,956,1001,1046,1091,1136,1181,1226,1271,1316,1361,1406,1451,1496,1541,1586,1631,1676,1721,1766,1811,1856,1901,1946,1991,2036,2081,2126,2171,2216,2261,2306,2351,2396,2441,2486],attackR:10,duration:1,skillId:6,deathPrefab:"death",bullet:9,info:"Wind Mage launches 3 tornadoes, causing super high DMG to passing enemies",restrain:"空"},{id:204,name:"HOLY PRIEST",defense:75,attackType:d.LONG,hp:[3700,4250,4800,5350,5900,6450,7e3,7550,8100,8650,9200,9750,10300,10850,11400,11950,12500,13050,13600,14150,14700,15250,15800,16350,16900,17450,18e3,18550,19100,19650,20200,20750,21300,21850,22400,22950,23500,24050,24600,25150,25700,26250,26800,27350,27900,28450,29e3,29550,30100,30650],speed:5,attack:[230,265,300,335,370,405,440,475,510,545,580,615,650,685,720,755,790,825,860,895,930,965,1e3,1035,1070,1105,1140,1175,1210,1245,1280,1315,1350,1385,1420,1455,1490,1525,1560,1595,1630,1665,1700,1735,1770,1805,1840,1875,1910,1945],attackR:10,duration:1,skillId:7,deathPrefab:"death",bullet:10,info:"The holy priest shines and heals the soldiers around him",restrain:"空"},{id:205,name:"ANCIENT GIANT",defense:150,attackType:d.LONG,hp:[6800,7480,8160,8840,9520,10200,10880,11560,12240,12920,13600,14280,14960,15640,16320,17e3,17680,18360,19040,19720,20400,21080,21760,22440,23120,23800,24480,25160,25840,26520,27200,27880,28560,29240,29920,30600,31280,31960,32640,33320,34e3,34680,35360,36040,36720,37400,38080,38760,39440,40120],speed:5,attack:[281,326,371,416,461,506,551,596,641,686,731,776,821,866,911,956,1001,1046,1091,1136,1181,1226,1271,1316,1361,1406,1451,1496,1541,1586,1631,1676,1721,1766,1811,1856,1901,1946,1991,2036,2081,2126,2171,2216,2261,2306,2351,2396,2441,2486],attackR:10,duration:2,skillId:8,deathPrefab:"death",bullet:11,info:"The ancient giant throws a huge meteorite with high area DMG",restrain:"空"}]),e("BULLET_INFO",[{id:1,name:"弓箭",moveType:r.LERP,attackType:d.NONE,attackR:0,bomb:"hit_exp",speed:20,prefab:"jian"},{id:2,name:"法球",moveType:r.LERP,attackType:d.NONE,attackR:0,bomb:"faqiuBomb",speed:20,prefab:"faqiu"},{id:3,name:"箭塔箭",moveType:r.LINE,attackType:d.NONE,attackR:0,bomb:"hit_exp",speed:60,prefab:"nvtajian"},{id:4,name:"雪球",moveType:r.LERP,attackType:d.NONE,attackR:0,bomb:"xueqiuBomb",speed:20,prefab:"xueqiu"},{id:5,name:"矛",moveType:r.LERP,attackType:d.NONE,attackR:0,bomb:"maoBomb",speed:20,prefab:"mao"},{id:6,name:"冰霜弓箭",moveType:r.LERP,attackType:d.NONE,attackR:4.5,bomb:"bingjian_exp",speed:20,prefab:"bingjian"},{id:7,name:"投石塔炮弹",moveType:r.LERP,attackType:d.NONE,attackR:4.5,bomb:"paodanBomb",speed:20,prefab:"paodan"},{id:8,name:"炮塔炮弹",moveType:r.LERP,attackType:d.NONE,attackR:4.5,bomb:"paotai_paodan_bome",speed:20,prefab:"paotai_paodan"},{id:9,name:"风",moveType:r.LINE,attackType:d.NONE,attackR:10,bomb:"",speed:10,prefab:"feng"},{id:10,name:"修女十字架",moveType:r.LINE,attackType:d.NONE,attackR:10,bomb:"",speed:10,prefab:"xiunv"},{id:11,name:"笨重巨人石头",moveType:r.LERP,attackType:d.NONE,attackR:4.5,bomb:"shitou_bomb",speed:10,prefab:"shitou"}]),e("SKILL_IFNO",u=[{id:1,name:"巫毒",duration:5,keepT:4.5,attack:[25,30,45,70,80,100,117.5,142.5,172.75,212.5],attackR:3.5,bomb:"wushiHurt",prefab:"wushiSkillEffect",info:"在身体周围生成毒圈，持续伤害敌人！"},{id:2,name:"雪球冷冻",duration:0,keepT:5,attack:[52.5,71.5,109,169,206.5,244,281.5,319,361.5,410],attackR:3.5,bomb:"",prefab:"bingdong",info:"投掷的雪球攻击时，有几率冰冻敌人！"},{id:3,name:"断空斩",duration:5,keepT:3,attack:[137.5,151.25,165,178.75,192.5,206.25,220,233.75,247.5,261.25,275,288.75,302.5,316.25,330,343.75,357.5,371.25,385,398.75,412.5,426.25,440,453.75,467.5,481.25,495,508.75,522.5,536.25,550,563.75,577.5,591.25,605,618.75,632.5,646.25,660,673.75,687.5,701.25,715,728.75,742.5,756.25,770,783.75,797.5,811.25],attackR:3.5,bomb:"",prefab:"",info:"The Juggernaut launches multiple sprintsin front of him with multiple slash DMG"},{id:4,name:"箭雨",duration:5,keepT:3.5,attack:[175,195,215,235,255,275,295,315,335,355,375,395,415,435,455,475,495,515,535,555,575,595,615,635,655,675,695,715,735,755,775,795,815,835,855,875,895,915,935,955,975,995,1015,1035,1055,1075,1095,1115,1135,1155],attackR:3.5,bomb:"",prefab:"skill_jianyu",info:"Frost Archer scatter arrow rain forward and freezing enemies hit"},{id:5,name:"火枪",duration:5,keepT:3.5,attack:[125,212.5,350,575,687.5,750,875,1125,1447.5,1800],attackR:3.5,bomb:"",prefab:"skill_huoqiang",info:"空"},{id:6,name:"风",duration:5,keepT:3.5,attack:[778,878,978,1078,1178,1278,1378,1478,1578,1678,1778,1878,1978,2078,2178,2278,2378,2478,2578,2678,2778,2878,2978,3078,3178,3278,3378,3478,3578,3678,3778,3878,3978,4078,4178,4278,4378,4478,4578,4678,4778,4878,4978,5078,5178,5278,5378,5478,5578,5678],attackR:25,bomb:"",prefab:"feng",info:"Wind Mage launches 3 tornadoes,causing super high DMG to passing enemies"},{id:7,name:"神圣牧师",duration:5,keepT:3,attack:[.1,.103,.106,.109,.112,.115,.118,.121,.124,.127,.13,.133,.136,.139,.142,.145,.148,.151,.154,.157,.16,.163,.166,.169,.172,.175,.178,.181,.184,.187,.19,.193,.196,.199,.202,.205,.208,.211,.214,.217,.22,.223,.226,.229,.232,.235,.238,.241,.244,.247],attackR:3,bomb:"",prefab:"skill_xiunv",info:"The holy priest shines andheals the soldiers around him"},{id:8,name:"石头",duration:5,keepT:3,attack:[.1],attackR:3,bomb:"shitou_bomb",prefab:"shitou",info:"The ancient giant throws a huge meteorite with high area DMG"}]),e("MAP_WIDTH",25),e("MAP_HEIGHT",25),e("HOME_MATRIX",[[0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0],[2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2],[2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2],[2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2],[0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0],[2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2],[2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2],[2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2],[0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0],[2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2],[2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2],[2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2],[0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0],[2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2],[2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2],[2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2],[0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0],[2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2],[2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2],[2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2],[0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0],[2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2],[2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2],[2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2,3,3,3,2],[0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0]]),e("LOCK_BOAT_LEVEL",[1,2,4,6,8,10]),e("BOAT_MATRIX",[[[3,3,0,0,0,0],[3,3,0,0,0,0],[3,3,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0]],[[3,3,3,3,0,0],[3,3,3,3,0,0],[3,3,3,3,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0]],[[3,3,3,3,3,3],[3,3,3,3,3,3],[3,3,3,3,3,3],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0]],[[3,3,3,3,3,3],[3,3,3,3,3,3],[3,3,3,3,3,3],[3,3,0,0,0,0],[3,3,0,0,0,0],[3,3,0,0,0,0]],[[3,3,3,3,3,3],[3,3,3,3,3,3],[3,3,3,3,3,3],[3,3,3,3,0,0],[3,3,3,3,0,0],[3,3,3,3,0,0]],[[3,3,3,3,3,3],[3,3,3,3,3,3],[3,3,3,3,3,3],[3,3,3,3,3,3],[3,3,3,3,3,3],[3,3,3,3,3,3]]]),e("SOLDIER_POS",[[],[0,0],[-1,0,1,0],[-1,0,0,0,1,0],[0,1,0,-1,1,0,-1,0],[0,1,0,-1,1,0,-1,0,0,0],[-1,1,0,1,1,1,-1,0,0,0,1,0],[-1,1,0,1,1,1,0,0,-1,-1,0,-1,1,-1],[-1,1,0,1,1,1,-1,0,0,0,1,0,-1,-1,0,-1],[-1,1,0,1,1,1,-1,0,0,0,1,0,-1,-1,0,-1,1,-1]]),e("BUILDING_INFO",[{id:1,name:"Wall",time:0,counts:[10,20,30],unlock:[1,4,7],price:250,upPrice:[500,750,1e3,1500,3e3,5e3,1e4,2e4,3e4],upTime:[0,0,0,0,0,0,0,0,0]},{id:6,name:"Ballista",time:180,counts:[1,2,3,4],unlock:[1,2,4,6],price:2e3,upPrice:[3e3,6e3,1e4,2e4,3e4,4e4,5e4,6e4,8e4],upTime:[60,180,240,300,600,900,1200,1800,2400]},{id:7,name:"Catapult",time:600,counts:[1,2,3,4],unlock:[4,5,6,7],price:3e3,upPrice:[5e3,7500,1e4,2e4,3e4,4e4,5e4,6e4,8e4],upTime:[60,180,240,300,600,900,1200,1800,2400]},{id:8,name:"Turret",time:600,counts:[1,2,3,4],unlock:[5,6,7,8],price:4e3,upPrice:[6e3,8e3,1e4,2e4,3e4,4e4,5e4,6e4,8e4],upTime:[60,180,240,300,600,900,1200,1800,2400]},{id:9,name:"Landmine",time:0,counts:[1,2,3,4],unlock:[6,7,8,9],price:2500,upPrice:[5e3,7500,1e4,2e4,3e4,4e4,5e4,6e4,8e4],upTime:[0,0,0,0,0,0,0,0,0]}]),e("BUILDUP_INFO",[{id:1,name:"Wall",upPrice:[500,750,1e3,1500,3e3,5e3,1e4,2e4,3e4],upTime:[0,0,0,0,0,0,0,0,0],type:0},{id:2,name:"Wall",upPrice:[500,750,1e3,1500,3e3,5e3,1e4,2e4,3e4],upTime:[0,0,0,0,0,0,0,0,0],type:0},{id:3,name:"Base Camp",upPrice:[500,2500,4e3,5e3,6e3,1e4,2e4,4e4,75e3],upTime:[120,360,900,1200,1500,1800,2400,3600,7200,7200],type:[1,2,2,3,3,4,4,5,5,6]},{id:4,name:"Barracks",upPrice:[500,2e3,2500,3500,5e3,6e3,8e3,12e3,24e3],upTime:[180,600,900,1200,1500,1800,2400,3600,7200],type:[[1,2,3,4,5,6,7,8,9,10],[2,4,6,7,8,9,10,10,10,10]]},{id:5,name:"Gold Mine",upPrice:[1500,4e3,6e3,7500,11e3,14500,18e3,23e3,35e3],upTime:[180,300,600,900,1200,1500,1800,2400,7200],type:[[200,500,800,1200,1700,2300,3e3,3800,4700,5700],[5,7,9,12,15,18,21,25,30,35]]},{id:6,name:"Ballista",upPrice:[3e3,6e3,1e4,2e4,3e4,4e4,5e4,6e4,8e4],upTime:[120,360,600,1200,1500,1800,2400,3600,7200],type:0},{id:7,name:"Catapult",upPrice:[5e3,7500,1e4,2e4,3e4,4e4,5e4,6e4,8e4],upTime:[120,360,600,1200,1500,1800,2400,3600,7200],type:0},{id:8,name:"Turret",upPrice:[6e3,8e3,1e4,2e4,3e4,4e4,5e4,6e4,8e4],upTime:[60,240,300,600,1200,1500,1800,2400,7200],type:0},{id:9,name:"Landmine",upPrice:[5e3,7500,1e4,2e4,3e4,4e4,5e4,6e4,8e4],upTime:[0,0,0,0,0,0,0,0,0,0],type:0}]),e("SIGNIN_INFO",[{id:1,disec:"Day 1",type:o.MASONRY,rewardId:0,num:20},{id:2,disec:"Day 2",type:o.Soldier,rewardId:107,num:3},{id:3,disec:"Day 3",type:o.MASONRY,rewardId:0,num:50},{id:4,disec:"Day 4",type:o.COIN,rewardId:0,num:5e4},{id:6,disec:"Day 5",type:o.Soldier,rewardId:112,num:3},{id:6,disec:"Day 6",type:o.MASONRY,rewardId:0,num:80},{id:7,disec:"Day 7",type:o.Hero,rewardId:205,num:1}]),e("LEVEL_GIFT",[{id:0,lev:15,type:[o.Soldier,o.COIN,o.Wood],rewardId:[108,0,0],num:[1,5e3,1e3]},{id:1,lev:25,type:[o.Soldier,o.MASONRY,o.Wood],rewardId:[202,0,0],num:[2,200,2e3]},{id:2,lev:35,type:[o.Soldier,o.Soldier,o.Wood],rewardId:[203,112,0],num:[2,5,2e3]},{id:3,lev:45,type:[o.Soldier,o.Soldier,o.Wood],rewardId:[201,114,0],num:[5,2,2e3]}]),e("CARD_PRICE",[300,400,600,800,1e3,1200,1300,1500,1700,1900,2100,2200,2400,2600,2800,3e3,3100,3300,3700,3800,3800,3900,4e3,4100,4300,4500,4800,5100,5400,5800,6100,6500,6800,7100,7300,7500,7600,7700,7800,7800,7900,7900,8e3,8500,8800,9100,9500,9800,10200,10500,10800,11100,11300,11500,11600,11700,11800,11800,11900,12e3,12e3,12200,12399,12624,12895,13207,13547,13903,14260,14601,14915,15189,15417,15596,15728,15821,15884,15932,15979,16040,16130,16260,16435,16659,16931,17242,17582,17938,18294,18636,18950,19225,19453,19632,19765,19858,19921,2e4]),(h=function e(){t(this,e)}).ITEM_INFO=p,h.SKILL_IFNO=u,h.SOLDIER_INFO=c,i._RF.pop(),e("default",h)}}}));

System.register("chunks:///Core/Utils/List.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,e){var u,n,s,i;return{setters:[function(t){u=t.createClass,n=t.classCallCheck},function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"64a8bMX/fNKqZSs70kvaAJR","List",void 0),i=function(){function t(){n(this,t),this.count=0,this.values=new Array}return u(t,[{key:"checkValue",value:function(t){for(var e=0;e<this.values.length;e++)if(this.values[e]==t)return e;return-1}},{key:"contains",value:function(t){for(var e=0;e<this.count;e++){if(this.values[e]==t)return!0}return!1}},{key:"add",value:function(t){this.values.push(t),this.count=this.count+1}},{key:"removeByIndex",value:function(t){this.values.splice(t,1),this.count=this.count-1}},{key:"remove",value:function(t){var e=this.checkValue(t);e>=0&&(this.values.splice(e,1),this.count=this.count-1)}},{key:"get",value:function(t){if(!(t>=this.count))return this.values[t];console.log("Array crossing")}},{key:"clear",value:function(){this.values.splice(0,this.count),this.count=0}},{key:"Count",get:function(){return this.count}}]),t}(),s._RF.pop(),t("default",i)}}}));

System.register("chunks:///Core/Event/EventCode.js",["cc"],(function(e,n){var o,t;return e("EventCode",void 0),{setters:[function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"4c64cRgS2BOsotF0du82TLZ","EventCode",void 0),function(e){e[e.OnGoldChange=0]="OnGoldChange",e[e.OnDiamondChange=1]="OnDiamondChange",e[e.OnWoodChange=2]="OnWoodChange",e[e.RefreshArmysScroll=3]="RefreshArmysScroll",e[e.ToBattleBoat=4]="ToBattleBoat",e[e.OnParatroopsCountChange=5]="OnParatroopsCountChange",e[e.OnSoldierClick=6]="OnSoldierClick",e[e.OnHomeInfoChange=7]="OnHomeInfoChange",e[e.OnVictoryBoxChange=8]="OnVictoryBoxChange",e[e.SetMeniuFunc=9]="SetMeniuFunc",e[e.OnTurntabaleTipShow=10]="OnTurntabaleTipShow",e[e.OnShowBattleShipInfo=11]="OnShowBattleShipInfo",e[e.OnHideBattleShipInfo=12]="OnHideBattleShipInfo",e[e.OnSignIn=13]="OnSignIn",e[e.OnBuildUpComplete=14]="OnBuildUpComplete",e[e.RefreshMenuRedPoint=15]="RefreshMenuRedPoint",e[e.RefreshUISoldiers=16]="RefreshUISoldiers",e[e.GuideStartGame1=17]="GuideStartGame1",e[e.GuideStartGame3=18]="GuideStartGame3",e[e.GuideZhaoMu1=19]="GuideZhaoMu1",e[e.ShowBuildGuide=20]="ShowBuildGuide",e[e.ShowBoatGuide=21]="ShowBoatGuide",e[e.RefreshChallengeBtn=22]="RefreshChallengeBtn",e[e.OnShowFinger=23]="OnShowFinger",e[e.StoreScrollToExchange=24]="StoreScrollToExchange",e[e.ShowCloseCangKuGuide=25]="ShowCloseCangKuGuide",e[e.OnGameEnd=26]="OnGameEnd",e[e.RefreshKongTouBox=27]="RefreshKongTouBox",e[e.RefreshWxCustomAd=28]="RefreshWxCustomAd"}(t||e("EventCode",t={})),o._RF.pop()}}}));

System.register("chunks:///Core/Event/EventBus.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../Utils/Dictionary.js","../Utils/List.js","./EventCode.js"],(function(e,t){var n,i,s,c,u,o,l;return{setters:[function(e){n=e.createClass,i=e.classCallCheck},function(e){s=e.cclegacy},function(e){c=e.default},function(e){u=e.default},function(e){o=e.EventCode}],execute:function(){s._RF.push({},"5fe3aEoM/dMio/FC5OT2tqQ","EventBus",void 0),(l=function(){function e(){i(this,e),this.eventDic=new c}return n(e,[{key:"addListener",value:function(e,t){var n=new u;this.checkCode(e)?(n=this.eventDic.get(e)).add(t):(n.add(t),this.eventDic.add(e,n))}},{key:"removeListener",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=t){var n=this.eventDic.get(e);n&&n.remove(t)}else this.eventDic.remove(e)}},{key:"pos",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.checkCode(e)){var n=new u;n=this.eventDic.get(e);for(var i=0;i<n.Count;i++)null==t?n.get(i)():n.get(i)(t)}else console.warn("Event Not Exist: "+o[e])}},{key:"checkCode",value:function(e){return!!this.eventDic.containKey(e)}}],[{key:"Instance",get:function(){return null==this.instace&&(this.instace=new e),this.instace}}]),e}()).instace=null,s._RF.pop(),e("default",l)}}}));

System.register("chunks:///Core/View/UIBase.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../Utils/PlatformUtils.js"],(function(t,e){var n,i,o,a,s,c,l,u,r,p,d,h,f,v,g;return t({_dec:void 0,_class:void 0}),{setters:[function(t){n=t.inherits,i=t.createClass,o=t.classCallCheck,a=t.possibleConstructorReturn,s=t.getPrototypeOf},function(t){c=t.cclegacy,l=t._decorator,u=t.Vec3,r=t.tween,p=t.WidgetComponent,d=t.Component},function(t){h=t.default}],execute:function(){c._RF.push({},"2f92aS6jX5Dv4rMpESisu2o","UIBase",void 0),g=l.ccclass,l.property,t("UIBase",(f=g("UIBase"),f(v=function(t){function e(){return o(this,e),a(this,s(e).apply(this,arguments))}return n(e,t),i(e,[{key:"start",value:function(){this.adaptation()}},{key:"showWindow",value:function(){var t=this,e=this.node.getChildByName("panel");null!=e&&(e.scale=new u(0,0,0),r(e).to(.7,{scale:new u(1,1,1)},{easing:"elasticInOut"}).call((function(){t.adaptation()})).start())}},{key:"adaptation",value:function(){var t=this.node.getChildByName("panel");null!=t&&(h.isAndroid?t.getComponent(p).top=60:t.getComponent(p).top=cc.winSize.height/cc.winSize.width>2?150:100)}},{key:"show",value:function(t){this.node.active=!0}}]),e}(d))||v)),c._RF.pop()}}}));

System.register("chunks:///Core/View/UIManager.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../Constants/Constant.js","../Utils/Dictionary.js","../../Tools.js","../Event/EventCode.js","../Event/EventBus.js","./UIBase.js"],(function(e,t){var i,n,a,o,s,c,r,u,l,h,v,f,d,y,g,w;return{setters:[function(e){i=e.createClass,n=e.classCallCheck,a=e.asyncToGenerator},function(e){o=e.cclegacy,s=e.find,c=e.UITransformComponent,r=e.Prefab,u=e.instantiate},function(e){l=e.LayerType,h=e.ViewType},function(e){v=e.default},function(e){f=e.Tools},function(e){d=e.EventCode},function(e){y=e.default},function(e){g=e.UIBase}],execute:function(){o._RF.push({},"cf3c3opQylCIb+OtSYJyBJ3","UIManager",void 0),(w=function(){function e(){n(this,e),this.uiDic=new v,this.prefabDic=new v}var t;return i(e,[{key:"getLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.UI,t=(s("Canvas").getComponent(c),s("Canvas/"+l[e]));return t||(console.error("not find layer:"+e),null)}},{key:"createView",value:(t=a(regeneratorRuntime.mark((function e(t){var i,n,a,o,s,c,v=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=v.length>1&&void 0!==v[1]?v[1]:l.UI,n=!(v.length>2&&void 0!==v[2])||v[2],a=v.length>3&&void 0!==v[3]?v[3]:null,console.log(111111),o=h[t],!this.prefabDic.containKey(o)){e.next=9;break}s=this.prefabDic.get(o),e.next=13;break;case 9:return e.next=11,f.loadRes("ui/"+o,r);case 11:s=e.sent,this.prefabDic.add(o,s);case 13:return this.uiDic.containKey(o)||(c=u(s),this.getLayer(i).addChild(c),this.uiDic.add(o,c),n?this.showView(t,i,a):c.active=!1),e.abrupt("return",this.uiDic.get(o));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"showView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.UI,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.showUILoadlingView(!0);var n=h[e],a=null;if(!this.uiDic.containKey(n))return console.log("type",e,"layer",t,"parameter",i),void this.createView(e,t,!0,i);a=this.uiDic.get(n),null==i?a.active=!0:a.getComponent(g).show(i),y.Instance.pos(d.RefreshWxCustomAd),this.showUILoadlingView(!1)}},{key:"hideView",value:function(e){var t=h[e];this.uiDic.containKey(t)?(this.uiDic.get(t).active=!1,y.Instance.pos(d.RefreshWxCustomAd)):console.error("not find view:"+t)}},{key:"destoryView",value:function(e){var t=h[e];this.uiDic.containKey(t)?(this.uiDic.get(t).destroy(),this.uiDic.remove(t)):console.error("view "+t+" is not exst")}},{key:"clearView",value:function(){console.log("clearView"),this.uiDic.clear()}},{key:"checkViewActive",value:function(e){return!!this.uiDic.containKey(h[e])&&this.uiDic.get(h[e]).active}},{key:"getView",value:function(e){return this.uiDic.containKey(h[e])?this.uiDic.get(h[e]):null}},{key:"showUILoadlingView",value:function(e){var t=s("Canvas/UILoadlingView");t&&(t.active=e),setTimeout((function(){t.active&&(t.active=!1)}),2e3)}}],[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}()).instance=null,o._RF.pop(),e("default",w)}}}));

System.register("chunks:///Core/AdUitls/AdManager.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../Utils/PlatformUtils.js","../Constants/Constant.js","../Utils/AudioManager.js","../../Tools.js","../../Config.js","../View/UIManager.js","../../DataManager.js"],(function(e,n){var o,t,i,a,d,s,r,l,c,u,h,f,v;return{setters:[function(e){o=e.createClass,t=e.classCallCheck},function(e){i=e.cclegacy,a=e.director,d=e.view},function(e){s=e.default},function(e){r=e.ViewType,l=e.LayerType},function(e){c=e.AudioManager},function(e){u=e.Tools},function(e){},function(e){h=e.default},function(e){f=e.DataManager}],execute:function(){i._RF.push({},"90ffb0bfSlCebsl6tThE2Tt","AdManager",void 0),(v=function(){function e(){t(this,e)}return o(e,null,[{key:"init",value:function(){var n=this;if(this.createBanner(),s.isOppo())console.log("当前oppo平台"),setInterval((function(){e.bannerAdTimer>=f.instance.oppoAdConfig.banner_refresh_time?(e.bannerAdTimer=0,e.createBanner()):e.bannerAdTimer+=1}),1e3),setInterval((function(){e.nativeAdTimer>=f.instance.oppoAdConfig.native_refresh_time?(e.nativeAdTimer=0,e.createNativeAd((function(n){n&&(e.nativeAdObj=n)})),e.createMiniOppoNativeAd((function(n){n&&(e.minNativeAdObj=n)}))):e.nativeAdTimer+=1}),1e3);else if(s.isVivo())console.log("当前vivo平台"),setInterval((function(){e.bannerAdTimer>=f.instance.vivoAdConfig.banner_refresh_time?(e.bannerAdTimer=0,e.createBanner()):e.bannerAdTimer+=1}),1e3),setInterval((function(){e.nativeAdTimer>=f.instance.vivoAdConfig.native_refresh_time?(e.nativeAdTimer=0,setTimeout((function(){e.createNativeAd((function(n){n&&(e.nativeAdObj=n)}))}),3e3),e.createVivoMiniNativeAd((function(n){n&&(e.minNativeAdObj=n)}))):e.nativeAdTimer+=1}),1e3);else if(s.isWx())console.log("当前微信平台"),e.videoAd=[],e.videoAd.push(e.creatWxVideoById(e.wxVideoId[0])),e.videoAd.push(e.creatWxVideoById(e.wxVideoId[1])),setInterval((function(){n.createBanner()}),12e4),e.createHengFuCustomAd(),e.createJuZhenCustomAd();else if(s.isQQ){console.log("当前QQ平台"),e.videoAd=[];for(var o=0;o<this.qqVideoId.length;o++)e.videoAd.push(e.creatQQVideoById(e.qqVideoId[o]));setInterval((function(){n.createBanner()}),12e4),e.createHengFuCustomAd(),e.createJuZhenCustomAd()}else if(s.isTT){console.log("当前TT平台"),e.videoAd=[];for(var t=0;t<this.ttVideoId.length;t++)e.videoAd.push(e.createTTVideoById(e.ttVideoId[t]));setInterval((function(){n.createBanner()}),12e4)}}},{key:"createBanner",value:function(){e.banner&&e.banner.destroy(),s.isOppo()?e._createOppoBanner():s.isVivo()?this._createVivoBanner():s.isTT?e._createTTBanner():s.isQQ?e._createQQBanner():s.isWx()&&e._createWxBanner()}},{key:"createVideo",value:function(){var n=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(f.IsDebug)null!=o&&o();else if(e.isCanCreateVideo){this.isCanCreateVideo=!1,setTimeout((function(){n.isCanCreateVideo=!0}),3e3),console.log("------ create video ------");var i=c.Instance.audioSource;if(window.MinigameAds){var a=window.MiniGameAds.isRewardvideoReady();i.volume=0,console.log("声音关"),a?window.MiniGameAds.showRewardedVideo().then((function(){console.info("新接口播放激励广告: 成功，声音开"),o(),i.volume=1})).catch((function(e){console.error("新接口播放激励广告: 失败，声音开，原因: "+e.message),t(),i.volume=1,u.ShowTip("Please watch the full video")})):(console.info("激励视频没有加载成功，无法播放，声音开"),t(),i.volume=1,u.ShowTip("Not enough video, please wait"))}}else u.ShowTip("Ads are loading")}},{key:"_createVivoVideo",value:function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.videoCb=o,e.videoAd?e.videoAd.load():qg.createRewardedVideoAd&&(e.videoAd=qg.createRewardedVideoAd({posId:n}),e.videoAd.load(),e.videoAd.onLoad((function(n){console.log("新视频加载完成 直接播放"),e.videoAd.show(),c.Instance.stopSound()})),e.videoAd.onError((function(n){console.log("激励视频错误",JSON.stringify(n)),e.videoCb=null})),e.videoAd.onClose((function(n){console.log("激励视频已关闭"),n&&n.isEnded?(console.log("激励视频播放完成 ok"),c.Instance.playSound(),null!=e.videoCb&&e.videoCb("ok")):(e.showTip("请完整观看"),c.Instance.playSound()),e.videoCb=null})))}},{key:"_createOppoVideo",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e.videoCb=n,e.videoAd?e.videoAd.load():(e.videoAd=qg.createRewardedVideoAd({adUnitId:e.oppoVideoId}),e.videoAd.onLoad((function(n){console.log("新视频加载完成 直接播放"),e.videoAd.show()})),e.videoAd.onError((function(n){console.log("激励视频错误",JSON.stringify(n)),s.showTip("暂无视频"),e.videoCb=null})),e.videoAd.onClose((function(n){console.log("激励视频已关闭"),n&&n.isEnded?e.videoCb&&e.videoCb("ok"):s.showTip("请完整观看"),e.videoCb=null})),e.videoAd.load())}},{key:"_createTTVideo",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.videoCb=n,e.failBack=o,e.videoIndex++,e.videoIndex>=e.ttVideoId.length&&(e.videoIndex=0),e.videoAd[e.videoIndex].show().catch((function(n){e.videoAd[e.videoIndex].load().then((function(){return e.videoAd[e.videoIndex].show()}))}))}},{key:"createTTVideoById",value:function(n){if(!tt.createRewardedVideoAd)return null;var o=tt.createRewardedVideoAd({adUnitId:n});return o.onClose((function(n){n.isEnded?n&&n.isEnded?(e.videoCb&&e.videoCb(),e.videoCb=null):(s.showTip("请完整观看"),e.failBack&&e.failBack()):s.showTip("请完整观看")})),o.load(),o}},{key:"_createWxVideo",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1?arguments[1]:void 0;e.videoCb=n,e.wxFailBack=o,e.wxVideoIndex++,e.wxVideoIndex>=e.wxVideoId.length&&(e.wxVideoIndex=0),e.videoAd[e.wxVideoIndex].show().catch((function(n){e.videoAd[e.wxVideoIndex].load().then((function(){return e.videoAd[e.wxVideoIndex].show()}))}))}},{key:"creatWxVideoById",value:function(n){var o=wx.createRewardedVideoAd({adUnitId:n,multiton:!0});return o.onLoad((function(e){})),o.onError((function(e){console.log("激励视频错误",JSON.stringify(e)),s.showTip("暂无视频")})),o.onClose((function(n){console.log("激励视频已关闭"),n&&n.isEnded?e.videoCb&&e.videoCb("ok"):(s.showTip("请完整观看"),a.resume(),e.wxFailBack&&(e.wxFailBack(),e.wxFailBack=null))})),o.load(),o}},{key:"_createQQVideo",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1?arguments[1]:void 0;e.videoCb=n,e.qqFailBack=o,e.qqVideoIndex++,e.qqVideoIndex>=e.qqVideoId.length&&(e.qqVideoIndex=0),e.videoAd[e.qqVideoIndex].show().catch((function(n){e.videoAd[e.qqVideoIndex].load().then((function(){return e.videoAd[e.qqVideoIndex].show()}))}))}},{key:"creatQQVideoById",value:function(n){var o=qq.createRewardedVideoAd({adUnitId:n,multiton:!0});return o.onLoad((function(e){})),o.onError((function(e){console.log("激励视频错误",JSON.stringify(e)),s.showTip("暂无视频")})),o.onClose((function(n){console.log("激励视频已关闭"),n&&n.isEnded?e.videoCb&&e.videoCb("ok"):(s.showTip("请完整观看"),a.resume(),e.qqFailBack&&(e.qqFailBack(),e.qqFailBack=null))})),o.load(),o}},{key:"_createVivoBanner",value:function(){e.banner&&(e.banner.destroy(),e.banner=null);var n=qg.createBannerAd({posId:e.vivoBannerId,style:{}});n.onLoad((function(e){console.log("-------",e)})),this.banner=n,e.isShowBanner?e.banner.show():e.banner.hide()}},{key:"_createOppoBanner",value:function(){console.log("--------- ：oppo banner");var n=qg.getSystemInfoSync().screenWidth,o=qg.getSystemInfoSync().screenHeight;e.banner=qg.createBannerAd({adUnitId:e.oppoBannerId,style:{left:0,top:o-100,width:n,height:100}});var t=!1;e.banner.onResize((function(e){t||(t=!0)})),e.banner.onLoad((function(e){console.log("------ banner load compelete ------")})),e.banner.onError((function(e){console.warn("-banner出错",JSON.stringify(e))})),e.isShowBanner?e.banner.show():e.banner.hide()}},{key:"_createWxBanner",value:function(){e.bannderIndex++,e.bannderIndex==e.wxBannerId.length&&(e.bannderIndex=0);var n=wx.getSystemInfoSync().screenWidth,o=wx.getSystemInfoSync().screenHeight,t=n,i=wx.createBannerAd({adUnitId:e.wxBannerId[e.bannderIndex],adIntervals:30,style:{left:0,top:0,width:t}}),a=!0;i.onResize((function(e){a&&(i&&i.style&&(i.style.left=(n-e.width)/2,i.style.top=o-e.height),a=!1)})),i.onLoad((function(e){})),i.onError((function(e){console.warn("微信banner出错",e)})),this.banner=i}},{key:"_createQQBanner",value:function(){var n=this;e.banner&&(e.banner.destroy(),e.banner=null),e.bannderIndex++,e.bannderIndex==e.qqBannerId.length&&(e.bannderIndex=0),console.log("qq banner create",e.bannderIndex);var o=qq.getSystemInfoSync().screenWidth,t=qq.getSystemInfoSync().screenHeight,i=o,a=qq.createBannerAd({adUnitId:e.qqBannerId[e.bannderIndex],style:{width:i,left:0,top:this.qqTop}});a.onResize((function(e){console.log("onResize",e),a&&a.style&&(a.style.left=(o-e.width)/2,a.style.top=t-e.height,n.qqTop=a.style.top)})),a.onLoad((function(n){console.log("onLoad",n),e.isShowBanner?a.show():a.hide()})),a.onError((function(e){console.error("qq banner 出错",e)})),this.banner=a}},{key:"resetBannerPosByXY",value:function(e,n){if(null!=this.banner&&s.isWx()){var o=wx.getSystemInfoSync().screenWidth,t=wx.getSystemInfoSync().screenHeight,i=(d.getVisibleSize().width,n*t/d.getVisibleSize().height);this.banner.style.left=0,this.banner.style.top=i-this.banner.style.realHeight/2,console.log(this.banner.style)}}},{key:"resetBannerPos",value:function(){if(null!=this.banner&&s.isWx()){var e=wx.getSystemInfoSync().screenWidth,n=wx.getSystemInfoSync().screenHeight;this.banner.style.left=(e-this.banner.style.width)/2,this.banner.style.top=n-this.banner.style.realHeight,console.log("resetBannerPos:",this.banner.style)}}},{key:"showBanner",value:function(e){window.MinigameAds&&(e?window.MinigameAds.isBannerReady()?window.MinigameAds.showBanner().then((function(){console.info("新接口播放横幅广告: 成功")})).catch((function(e){console.error("新接口播放横幅广告: 失败，原因: "+e.message)})):console.info("横幅广告没有加载成功，无法播放"):window.MiniGameAds.hideBanner().then((function(){console.info("新接口隐藏横幅广告: 成功")})).catch((function(e){console.error("新接口隐藏横幅广告: 失败，原因: "+e.message)})))}},{key:"_showBanner",value:function(n){var o=this;e.isShowBanner=n,null==e.banner&&n?this.createBanner():n?null!=e.banner&&e.banner.show().then((function(){console.log("show banner ok")})).catch((function(e){console.log("show banner error",e),s.isQQ&&o.createBanner()})):null!=e.banner&&(e.banner.hide(),e.banner.destroy(),e.banner=null,setTimeout((function(){o.createBanner()}),0))}},{key:"_createTTBanner",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e.banner&&(e.banner.hide(),e.banner.destroy()),e.bannderIndex++,e.bannderIndex==e.ttBannerId.length&&(e.bannderIndex=0);var o=tt.getSystemInfoSync().screenWidth,t=tt.getSystemInfoSync().screenHeight,i=200,a=(o-i)/2,d=tt.createBannerAd({adUnitId:e.ttBannerId[e.bannderIndex],style:{left:a,top:t-i/16*9,width:i}});d.onResize((function(e){console.log(e.width,e.height),d.style.top=t-e.height,d.style.left=(o-e.width)/2})),d.onLoad((function(o){n&&(n.hide(),n.destroy()),e.isShowBanner?d.show():d.hide()})),d.onError((function(e){console.warn("微信banner出错",e)})),this.banner=d}},{key:"retryShow",value:function(e){var n=qg.createBannerAd({posId:e,style:{}}).show();n&&n.catch((function(e){console.log("banner广告展示失败-重试"),console.log(JSON.stringify(e))}))}},{key:"showTip",value:function(e){}},{key:"createInterstitialAd",value:function(){if(window.MinigameAds){var e=window.MiniGameAds.isInterstitialReady();console.log("H5新接口插屏广告开关，是否可以展示广告",e),e?window.MiniGameAds.showInterstitial().then((function(){console.info("H5新接口播放插屏广告: 成功")})).catch((function(e){console.error("H5新接口播放插屏广告: 失败，原因: "+e.message)})):console.info("H5插屏广告没有加载成功，无法播放")}}},{key:"_createInterstitialAd",value:function(e){if("undefined"!=typeof qg&&void 0!==qg.getSystemInfoSync){var n,o=qg.getSystemInfoSync();"vivo"==o.brand?n=qg.createInterstitialAd({posId:e}):"OPPO"==o.brand&&(n=qg.createInterstitialAd({posId:e})),n.onError((function(e){console.log("插屏广告加载失败",e)})),n.show().then((function(){console.log("插屏广告展示完成")})).catch((function(e){console.log("插屏广告展示失败",JSON.stringify(e))})),n.show()}}},{key:"createTTInterstitialAd",value:function(){var n=tt.createInterstitialAd({adUnitId:e.ttInterstitialId});n.load().then((function(){n.show()})).catch((function(e){console.log(e)}))}},{key:"createNativeAd",value:function(e){this.nativeCallBack=e,s.isOppo()?this.createOppoNativeAd(e):s.isVivo()&&this.createVivoNativeAd(e)}},{key:"createVivoNativeAd",value:function(n){null==e.nativeAd&&(console.log("--------------- createVivoNativeAd -----------------"),e.nativeAd=qg.createNativeAd({posId:e.vivoNativeAdId}),this.nativeAd.onLoad((function(e){var o;console.log("原生广告加载完成-onload触发",JSON.stringify(e)),e&&e.adList&&(o=e.adList[0],n(o))})),this.nativeAd.onError((function(e){console.log("原生广告加载异常",e),console.log("原生广告加载异常",JSON.stringify(e))}))),console.log("加载原生广告"),this.nativeAd.load()}},{key:"createVivoMiniNativeAd",value:function(n){null==e.minNativeAd&&(console.log("--------------- createVivoMiniNativeAd -----------------"),e.minNativeAd=qg.createNativeAd({posId:e.vivoMiniNativeAdId}),this.minNativeAd.onLoad((function(e){var o;console.log("原生小广告加载完成-onload触发",JSON.stringify(e)),e&&e.adList&&(o=e.adList[0],console.log(JSON.stringify(o)),n(o))})),this.minNativeAd.onError((function(e){console.log("原生小广告加载异常",e),console.log("原生小广告加载异常",JSON.stringify(e))}))),console.log("加载原生小广告"),this.minNativeAd.load()}},{key:"createOppoNativeAd",value:function(n){console.log("----------- createOppoNativeAd ---------------"),null==e.nativeAd&&(e.nativeAd=qg.createNativeAd({adUnitId:e.oppoNativeAdId}),e.nativeAd.onLoad((function(o){var t;o&&o.adList&&(t=o.adList[0],console.log("原生广告",JSON.stringify(t)),n(t),e.nativeCallBack&&e.nativeCallBack(t))})),e.nativeAd.onError((function(e){console.log("原生广告加载异常",JSON.stringify(e))}))),e.nativeAd.load()}},{key:"clickNativeAd",value:function(){e.nativeAd&&e.nativeAd.reportAdClick({adId:e.nativeAdObj.adId})}},{key:"createMiniOppoNativeAd",value:function(n){console.log("----------- createMinOppoNativeAd ---------------"),null==e.minNativeAd&&(e.minNativeAd=qg.createNativeAd({adUnitId:e.oppoMiniNativeAdId}),e.minNativeAd.onLoad((function(e){var o;e&&e.adList&&(o=e.adList[0],console.log("原生小广告",JSON.stringify(o)),n(o))})),e.minNativeAd.onError((function(e){console.log("原生小广告加载异常",JSON.stringify(e))}))),e.minNativeAd.load()}},{key:"clickMiniNativeAd",value:function(){e.minNativeAd&&e.minNativeAd.reportAdClick({adId:e.minNativeAdObj.adId})}},{key:"createGameBannerAd",value:function(){s.isOppo()&&this._createOppoGamgeBannerAd()}},{key:"_createOppoGamgeBannerAd",value:function(){console.log("platformVersionCode:"+qg.getSystemInfoSync().platformVersionCode),qg.getSystemInfoSync().platformVersionCode>=1076?(this.gameBannerAd=qg.createGameBannerAd({adUnitId:this.oppoGameBannerId}),this.gameBannerAd.onLoad((function(){console.log("互推盒子横幅广告加载成功")}))):console.log("快应用平台版本号低于1076，暂不支持互推盒子相关 API")}},{key:"showGameBannerAd",value:function(n){console.log(" ------- showGameBannerAd ----------"),null==e.gamePortalAd&&this.createGameBannerAd(),n?this.gameBannerAd.show().then((function(){console.log("show success")})).catch((function(e){console.log("show fail with:"+e.errCode+","+e.errMsg)})):this.gameBannerAd&&this.gameBannerAd.hide()}},{key:"createGamePortalAd",value:function(){s.isOppo()&&this._createOppoGamePortalAd()}},{key:"_createOppoGamePortalAd",value:function(){null==e.gamePortalAd?qg.getSystemInfoSync().platformVersionCode>=1076?(e.gamePortalAd=qg.createGamePortalAd({adUnitId:this.oppoGamePortalId}),e.gamePortalAd.load(),e.gamePortalAd.onLoad((function(){console.log("互推盒子九宫格广告加载成功"),e.gamePortalAd.show()})),this.gamePortalAd.onError((function(e){console.log(JSON.stringify(e))}))):console.log("快应用平台版本号低于1076，暂不支持互推盒子相关 API"):this.gamePortalAd.load()}},{key:"showGamePortalAd",value:function(){e.gamePortalAd&&e.gamePortalAd.show().then((function(){console.log("show success")})).catch((function(e){console.log("show fail with:"+e.errCode+","+e.errMsg)}))}},{key:"createCustomAd",value:function(e,n,o){var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:375;return s.isWx()?this.createWxCustomAd(e,n,o,t):s.isQQ?this.createQQCustomAd(e,n,o):null}},{key:"createHengFuCustomAd",value:function(){s.isWx()&&this.createWxHengFuCustomAd(),s.isQQ&&this.createQQHengFuCustomAd()}},{key:"showHengFuCustomAd",value:function(e){(s.isWx()||s.isQQ)&&null!=this.hengFuCustomAd&&(s.isWx()&&(e?this.hengFuCustomAd.show().then((function(){return console.log("原生模板广告显示")})).catch((function(e){return console.log(e)})):this.hengFuCustomAd.hide().catch((function(e){return console.log(e)}))),s.isQQ&&(e?this.hengFuCustomAd.show():this.hengFuCustomAd.hide()))}},{key:"createJuZhenCustomAd",value:function(){this.juZhenCustomAd&&this.juZhenCustomAd.destroy(),s.isQQ&&this.createQQJuZhenCustomAd(),s.isWx()&&this.createWxJuZhenCustomAd()}},{key:"showJuZhenCustomAd",value:function(e){null!=this.juZhenCustomAd&&(s.isWx()&&(e?this.juZhenCustomAd.show().then((function(){console.log("原生模板广告显示"),h.Instance.showView(r.UIWxMoreGamePanel,l.TOP)})).catch((function(e){console.log(e),h.Instance.checkViewActive(r.UIWxMoreGamePanel)&&h.Instance.hideView(r.UIWxMoreGamePanel)})):this.juZhenCustomAd.hide()),s.isQQ&&(e?this.juZhenCustomAd.show():this.juZhenCustomAd.hide()))}},{key:"createWxHengFuCustomAd",value:function(){this.hengFuCustomAd&&this.hengFuCustomAd.destroy();var n=wx.getSystemInfoSync().screenWidth;this.hengFuCustomAd=wx.createCustomAd({adUnitId:e.wxCustomAdId2,style:{left:0,top:0,width:n,fixed:!0}}),this.hengFuCustomAd.onError((function(e){return console.log(e)}))}},{key:"createQQHengFuCustomAd",value:function(){var n=this;this.hengFuCustomAd&&this.hengFuCustomAd.destroy(),console.log("qq 横幅广告 初始化"),this.hengFuCustomAd=qq.createBlockAd({adUnitId:e.qqCustomAdId2,size:5,orientation:"landscape",style:{left:16,top:16}}),console.log(this.hengFuCustomAd),this.hengFuCustomAd.onLoad((function(e){console.log("矩阵广告",e),n.hengFuCustomAd&&n.hengFuCustomAd.style&&(s.IsIos||(n.hengFuCustomAd.style.left=qq.getSystemInfoSync().screenWidth/2-e.realWidth/2),n.hengFuCustomAd.style._top=0)})),this.hengFuCustomAd.onError((function(e){return console.error("横幅:",e)}))}},{key:"createWxJuZhenCustomAd",value:function(){this.juZhenCustomAd&&this.juZhenCustomAd.destroy();var n=wx.getSystemInfoSync().screenWidth,o=wx.getSystemInfoSync().screenHeight;this.juZhenCustomAd=wx.createCustomAd({adUnitId:e.wxCustomAdId3,style:{left:0,top:o/3,width:n,fixed:!0}}),this.juZhenCustomAd.onError((function(e){return console.error(e)}))}},{key:"createQQJuZhenCustomAd",value:function(){this.juZhenCustomAd&&this.juZhenCustomAd.destroy(),console.log("qq 矩阵广告 初始化"),this.juZhenCustomAd=qq.createAppBox({adUnitId:this.qqAppBox}),console.log(this.juZhenCustomAd),this.juZhenCustomAd.load()}},{key:"createWxCustomAd",value:function(e,n,o){var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:375,i=wx.createCustomAd({adUnitId:e,style:{left:o,top:n,width:t,fixed:!0}});return i.onError((function(e){return console.error(e)})),i.show().catch((function(e){return console.log(e)})),i}},{key:"createQQCustomAd",value:function(e,n,o){console.log("qq icon 单格子 初始化");var t=qq.createBlockAd({adUnitId:"e5141128594b23a11afc4edb07a5910f",size:1,orientation:"landscape",style:{left:16,top:16}});return t.onLoad((function(e){console.log("icon onload",e),t&&t.style&&(t.style.left=o,t.style.top=n),t.show()})),t.onError((function(e){console.error("icon ",e)})),t}}]),e}()).bannerAdTimer=99999,v.oppoBannerId="339642",v.vivoBannerId="051f6d304b744bf19d9d4a62d50dfeea",v.wxBannerId=["adunit-e09bbc8dd1dde4ef","adunit-c4abe92f0e900102","adunit-4376116fe9ca2fd0"],v.qqBannerId=["2ba86f3bb7b26c11f19d58816d6c3e43","4f79ee2f83dceaf7fcc0fb793c583ca3","8dc1fa8febbe5123703f77aaa1694555"],v.ttBannerId=["2rxtmssog1h1228adf","5873db9k0b137lmd16","2042i7i8d5e620f8g2"],v.oppoVideoId="339645",v.vivoVideoId="b69024de8a2b4c6ea5b5a46b248de1a9",v.wxVideoId=["adunit-a052365b29b2798a","adunit-2f4c9cf8479ae32d"],v.qqVideoId=["3e4f4ac13f147afafd3b538f739a3720","ef5b3ae21661dc7a0bfce2f9d4963d45","16702af22b65d05c87b83296e9734df3"],v.ttVideoId=["20l6tdrqn44oqeani0"],v.videoIndex=0,v.failBack=null,v.videoAd=null,v.videoCb=null,v.vidioAdUnitId=null,v.isCanCreateVideo=!0,v.wxVideoIndex=0,v.wxFailBack=null,v.qqVideoIndex=0,v.qqFailBack=null,v.changeBannerTimes=0,v.isShowBanner=!1,v.refreshBannerTimes=0,v.bannderIndex=0,v.qqTop=0,v.oppoInterstitialId="205068",v.vivoInterstitialId="c95c724ff7744d2f84588989e3600ae5",v.ttInterstitialId="2bpisbf4tumc4a20je",v.oppoNativeAdId="339653",v.vivoNativeAdId="4ad8e1b54c474d4b8ee0516c658767a5",v.oppoMiniNativeAdId="339648",v.vivoMiniNativeAdId="d426c579086642dc9873b695103447d1",v.nativeAdObj=null,v.minNativeAdObj=null,v.nativeAdTimer=99999,v.gameBannerAd=null,v.oppoGameBannerId="232058",v.gamePortalAd=null,v.oppoGamePortalId="339658",v.wxCustomAdId1="adunit-a93f4fc43923fd03",v.wxCustomAdId2="adunit-df658efa208252b3",v.wxCustomAdId3="adunit-b062defa0c16ca1c",v.qqCustomAdId1="e5141128594b23a11afc4edb07a5910f",v.qqCustomAdId2="5597c9205c99ee3599ead8aebf3d2b0a",v.qqCustomAdId3="8f29d80601d205513daf99da8c085b17",v.qqAppBox="ce70c57410f24f96fa2525e420488e78",v.hengFuCustomAd=null,v.juZhenCustomAd=null,i._RF.pop(),e("default",v)}}}));

System.register("chunks:///Core/Utils/AndroidUtils.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","./PlatformUtils.js"],(function(t,e){var i,c,l,a,n;return{setters:[function(t){i=t.createClass,c=t.classCallCheck},function(t){l=t.cclegacy},function(t){a=t.default}],execute:function(){l._RF.push({},"0fb7dsIledHnKALI/JR+5wy","AndroidUtils",void 0),(n=function(){function t(){c(this,t)}return i(t,null,[{key:"callStaticMethod",value:function(e){a.isAndroid&&(jsb.reflection.callStaticMethod(t.ActivePath,e),jsb.reflection.callStaticMethod(t.ActivePath,e,"()V"))}},{key:"callStaticMethodByStr",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";a.isAndroid&&jsb.reflection.callStaticMethod(t.ActivePath,e,"(Ljava/lang/String;)V",i)}},{key:"callStaticMethodByBoolean",value:function(e,i){a.isAndroid&&jsb.reflection.callStaticMethod(t.ActivePath,e,"(Z)V",i)}},{key:"getcallStaticMethod",value:function(e){return a.isAndroid?jsb.reflection.callStaticMethod(t.ActivePath,e,"()Ljava/lang/String;"):""}}]),t}()).ActivePath="org/cocos2dx/javascript/AppActivity",l._RF.pop(),t("default",n)}}}));

System.register("chunks:///Core/Utils/FileStream.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var n,c,l,u;return{setters:[function(e){n=e.createClass,c=e.classCallCheck},function(e){l=e.cclegacy}],execute:function(){l._RF.push({},"32532UYOf5E+Iz1c56f+AoB","FileStream",void 0),u=function(){function e(){c(this,e)}return n(e,null,[{key:"init",value:function(){}}]),e}(),l._RF.pop(),e("default",u)}}}));

System.register("chunks:///Core/Utils/OppoUtils/effendi_config.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,n){var i,c,s;return{setters:[function(e){i=e.classCallCheck},function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"e188bkgbcxIyat5VKuGQbxF","effendi_config",void 0),(s=function e(){i(this,e)}).game_id="SurpriseCommander",s.channel_id="oppo_mini",s.useOpen=!1,s.useLogger=!0,s.OpenId="",c._RF.pop(),e("default",s)}}}));

System.register("chunks:///Core/Utils/OppoUtils/effendi.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc","./effendi_config.js"],(function(e,t){var i,s,o,n,r,a;return{setters:[function(e){i=e.createClass,s=e.classCallCheck},function(e){o=e.cclegacy},function(e){n=e.default}],execute:function(){o._RF.push({},"d6b6eio0pxLDZnRvIRXpCkN","effendi",void 0),r=window.qg,(a=function(){function e(){s(this,e),this.sdkVersion=13,this.options={},this.fileManager=void 0!==r?r.getFileSystemManager():null,this.isSleep=!1,this.isDoing=!1}return i(e,[{key:"init",value:function(){this.initBaseInfo(),this.initConfigInfo(),this.loggerInfo(this.options),this.initListener(),this.gameStart(),this.startUploadDemo(),console.log("oppo sdk inited")}},{key:"setOpenId",value:function(e){this.options.openId=e,localStorage.setItem("effendi_openid",e)}},{key:"gameStart",value:function(){var e={type:1};this.options.queryParams&&this.options.queryParams.effendiShareId?e.shareId=this.options.queryParams.effendiShareId:e.shareId="",this.checkParams(e),this.addItem(e)}},{key:"pageOpen",value:function(){this.options.pageCount++;var e={type:2};this.checkParams(e),this.addItem(e)}},{key:"pageClose",value:function(){var e={type:3};this.checkParams(e),this.addItem(e)}},{key:"sendPage",value:function(e,t){e&&(this.options.prePageId=e),t&&(this.options.currentPageId=t);var i={type:10};i.prePageId=this.options.prePageId,i.pageId=this.options.currentPageId,i.event="",i.eventParam={},this.checkParams(i),this.addItem(i)}},{key:"sendEvent",value:function(e,t){var i={type:4};i.event=e,i.eventParam=t,this.checkParams(i),this.addItem(i)}},{key:"sendStage",value:function(e,t,i){var s={type:6};s.pageId=e,s.event=t,s.eventParam=i,this.checkParams(s),this.addItem(s)}},{key:"sendLevel",value:function(e,t,i){var s={type:7};s.levelId=e,s.event=t,s.eventParam=i,this.checkParams(s),this.addItem(s)}},{key:"sendPay",value:function(e,t,i,s){var o={type:8};o.pageId=e,o.levelId=t,o.event=i,o.eventParam=s,this.checkParams(o),this.addItem(o)}},{key:"sendHeatHeart",value:function(e){var t={type:5};1==e?(this.options.serialNumber++,t.serialNumber=this.options.serialNumber):t.serialNumber=2==e?-1:-2,t.pageId=this.options.currentPageId,this.checkParams(t),this.addItem(t)}},{key:"sendDuration",value:function(e){try{var t=this,i={type:11};i.duration=e,i.sdkVersion=this.sdkVersion,i.gameId=this.options.game_id,i.channelId=this.options.channel_id,i.requestId=this.wxuuid(),i.sessionId=this.options.sessionId+"_"+this.options.pageCount,i.clientTimestamp=(new Date).getTime()+Number(this.options.diffTime),i.userId=t.getUserId(),i.sourceId=t.options.sourceId,i.manufacture=t.options.manufacture,i.model=t.options.model,i.osType=t.options.osType,i.osCode=t.options.osCode,t.options.useOpen?i.openId=t.getLocalUserId():i.openId="";var s=[i];this.loggerReqeust({itemArray:s,success:function(e){t.loggerInfo(JSON.stringify(s)+";"+JSON.stringify(e))},fail:function(){}})}catch(e){this.loggerInfo(e)}}},{key:"getUserId",value:function(){if(this.options.currentUserId)return this.options.currentUserId;if(this.options.useOpen)this.options.openId?this.options.currentUserId=this.options.openId:this.options.currentUserId=localStorage.getItem("effendi_openid");else{var e=localStorage.getItem("effendi_userid");e||(e=this.readUserIdFromFile())&&localStorage.setItem("effendi_userid",e),e||(e=this.wxuuid(),localStorage.setItem("effendi_userid",e),this.writeUserToIdFile(e)),this.options.currentUserId=e,this.readUserIdFromFile()||this.writeUserToIdFile(this.options.currentUserId)}return this.options.currentUserId}},{key:"getLocalUserId",value:function(){if(this.options.localUserId)return this.options.localUserId;var e=localStorage.getItem("effendi_userid");return e||(e=this.readUserIdFromFile())&&localStorage.setItem("effendi_userid",e),e||(e=this.wxuuid(),localStorage.setItem("effendi_userid",e),this.writeUserToIdFile(e)),this.options.localUserId=e,this.readUserIdFromFile()||this.writeUserToIdFile(this.options.localUserId),this.options.localUserId}},{key:"writeUserToIdFile",value:function(e){try{this.fileManager.writeFileSync(this.options.effendiDir+"effendi_user.data",e,"utf-8",!1),this.loggerInfo("write userId:"+e)}catch(e){}}},{key:"readUserIdFromFile",value:function(){var e="";try{e=this.fileManager.readFileSync(this.options.effendiDir+"effendi_user.data","utf-8"),this.loggerInfo("read userId:"+e)}catch(e){}return e}},{key:"loggerInfo",value:function(e){this.options.useLogger&&console.log(e)}},{key:"initBaseInfo",value:function(){this.options.game_id=n.game_id,this.options.channel_id=n.channel_id,this.options.useOpen=n.useOpen,this.options.useLogger=n.useLogger;if(this.options.baseURL||(this.options.baseURL="https://openapi.jiegames.com"),!this.options.currentDir){var e="qgfile://usr/effendi/";try{this.fileManager.mkdirSync(e,"true")}catch(e){this.loggerInfo(e)}try{this.fileManager.mkdirSync("qgfile://usr/effendi/logs/","true")}catch(e){this.loggerInfo(e)}this.options.effendiDir=e,this.options.currentDir="qgfile://usr/effendi/logs/"}this.options.sessionId=this.wxuuid(),this.options.pageCount=0,this.options.prePageId="root",this.options.currentPageId="root",this.options.serialNumber=0;var t=r.getLaunchOptionsSync();t&&t.referrerInfo&&t.referrerInfo.package?this.options.sourceId=t.referrerInfo.package:this.options.sourceId="",this.options.queryParams=t.query;var i=r.getSystemInfoSync();this.options.manufacture=i.brand,this.options.model=i.model;var s=i.system;-1!=s.indexOf("iOS")?(this.options.osType=1,this.options.osCode=s):-1!=s.indexOf("Android")?(this.options.osType=0,this.options.osCode=s):(this.options.osType=2,this.options.osCode=s),this.options.isDeviceInfoReady=!0}},{key:"initConfigInfo",value:function(){var e=this,t=new XMLHttpRequest;t.setRequestHeader("content-type","application/json"),t.timeout=1e4,t.responseType="json";var i=e.options.baseURL+"/logger/getCurrentServerTimestamp";i+="?gameId="+e.options.game_id,i+="&channelId="+e.options.channel_id,t.open("GET",i),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&(200==t.response.code?(e.options.diffTime=Number(t.response.serverTimestamp)-(new Date).getTime(),localStorage.setItem("diffTime",e.options.diffTime)):e.options.diffTime=localStorage.getItem("diffTime"))},t.send()}},{key:"initListener",value:function(){try{var e=(new Date).getTime(),t=this;r.onShow&&r.onShow((function(){t.isSleep=!1,e=(new Date).getTime(),t.options.pageCount++,t.options.pageCount>0&&t.sendHeatHeart(2)})),r.onHide&&r.onHide((function(){t.isSleep=!0;var i=(new Date).getTime(),s=i-e;e>0&&i>0&&s>0&&s<864e5&&t.sendDuration(s)}))}catch(e){this.loggerInfo(e)}}},{key:"addItem",value:function(e){try{e.sdkVersion=this.sdkVersion,e.gameId=this.options.game_id,e.channelId=this.options.channel_id,e.requestId=this.wxuuid(),e.sessionId=this.options.sessionId+"_"+this.options.pageCount,this.options.diffTime?e.clientTimestamp=(new Date).getTime()+Number(this.options.diffTime):e.localTime=(new Date).getTime();var t=this.options.currentDir+this.getFileName();this.fileManager.writeFileSync(t,JSON.stringify(e),"utf-8",!1)}catch(e){this.loggerInfo(e)}}},{key:"getFileName",value:function(){var e=Math.floor(1e3*Math.random());return"log_"+(new Date).getTime()+"_"+e+".log"}},{key:"checkParams",value:function(e){if(!this.options.game_id)throw"游戏ID 不可以为空";if(!this.options.channel_id)throw"渠道ID 不可以为空";if(!e.type)throw"type 不可以为空";if(4==e.type||6==e.type||7==e.type||8==e.type){if(!e.event)throw"event 不可以为空";if(!e.eventParam)throw"eventParam 不可以为空"}if((6==e.type||8==e.type)&&!e.pageId)throw"stageId 不可以为空";if((7==e.type||8==e.type)&&!e.levelId)throw"levelId 不可以为空"}},{key:"wxuuid",value:function(){for(var e="af-"+(new Date).getTime()+"-",t=[],i=0;i<18;i++)t[i]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return e+t.join("")}},{key:"loggerReqeust",value:function(e){var t=new XMLHttpRequest;t.setRequestHeader("content-type","application/json"),t.timeout=1e4,t.responseType="json";var i=this.options.baseURL+"/logger/uploadGameInfoInner";t.open("POST",i),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&200==t.response.code?e&&e.success&&e.success(t.response):e&&e.fail&&e.fail()},t.send(JSON.stringify(e.itemArray))}},{key:"checkNeedParams",value:function(e){return new Promise((function(t,i){e.getUserId()?e.options.isDeviceInfoReady?e.options.diffTime?t(e):i("服务器间隔时间未准备好"):i("设备信息未准备好"):i("userId 或者openid 为空")}))}},{key:"readFiles",value:function(e){return new Promise((function(t,i){e.fileManager.readdir({dirPath:e.options.currentDir,success:function(i){t([e,i])},fail:function(e){i("read file error")}})}))}},{key:"sendData",value:function(e){var t=e[0],i=e[1];return new Promise((function(e,s){if(0!=i.files.length){for(var o=[],n=[],r=0;r<i.files.length;r++)try{var a=i.files[r];o.push(a);var d=t.fileManager.readFileSync(t.options.currentDir+a,"utf-8"),u=JSON.parse(d);u.userId=t.getUserId(),u.sourceId=t.options.sourceId,u.manufacture=t.options.manufacture,u.model=t.options.model,u.osType=t.options.osType,u.osCode=t.options.osCode,u.clientTimestamp||(u.clientTimestamp=Number(u.localTime)+Number(t.options.diffTime),delete u.localTime),t.options.useOpen?u.openId=t.getLocalUserId():u.openId="",n.push(u)}catch(e){t.loggerInfo(e)}n.sort((function(e,t){return e.clientTimestamp-t.clientTimestamp})),t.loggerInfo(n),t.loggerReqeust({itemArray:n,success:function(i){for(var s=0;s<o.length;s++){var n=o[s],r=t.options.currentDir+n;try{t.fileManager.unlinkSync(r)}catch(e){t.fileManager.unlink({filePath:r})}}e(i)},fail:function(){if(o.length>=200)for(var e=0;e<o.length;e++){var i=o[e],n=t.options.currentDir+i;t.fileManager.unlinkSync(n)}s("send error")}})}else s("no files")}))}},{key:"uploadDemo",value:function(){var e=this;if(!e.isDoing){e.isDoing=!0;try{var t=[e.checkNeedParams,e.readFiles,e.sendData],i=Promise.resolve(e);t.forEach((function(e){i=i.then(e)})),i.then((function(t){e.isDoing=!1,e.loggerInfo(t)})).catch((function(t){e.isDoing=!1,e.loggerInfo(t)}))}catch(t){e.isDoing=!1,e.loggerInfo(t)}}}},{key:"startUploadDemo",value:function(){for(var e=this,t=[],i=0;i<5;i++)t[i]=setTimeout((function(i){e.sendHeatHeart(1),e.uploadDemo(),clearTimeout(t[i])}),1e3*(i+1),i);setInterval((function(){e.isSleep||(e.sendHeatHeart(1),e.uploadDemo())}),1e4)}}],[{key:"getInstance",value:function(){return this._instance}}]),e}())._instance=new a,o._RF.pop(),e("default",a)}}}));

System.register("chunks:///Core/Utils/SendEventManager.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","./PlatformUtils.js","../Constants/Constant.js","./OppoUtils/effendi.js"],(function(e,i){var o,t,c,r,l,a,_;return e("EventId",void 0),{setters:[function(e){o=e.createClass,t=e.classCallCheck},function(e){c=e.cclegacy},function(e){r=e.default},function(e){l=e.LocalStorageKey},function(e){e.default}],execute:function(){c._RF.push({},"b43beG1Z8BCk6vPjQsXZxUv","SendEventManager",void 0),function(e){e[e.Guide=0]="Guide",e[e.NewLoad=1]="NewLoad",e[e.NewLoadComplete=2]="NewLoadComplete",e[e.GuideStart=3]="GuideStart",e[e.GuideMapSearch=4]="GuideMapSearch",e[e.GuideOutShip=5]="GuideOutShip",e[e.GuideVictory=6]="GuideVictory",e[e.GuideRecruit=7]="GuideRecruit",e[e.GuideGetHero=8]="GuideGetHero",e[e.GuideSynSoldier=9]="GuideSynSoldier",e[e.GuideSynHero=10]="GuideSynHero",e[e.GuideStart2=11]="GuideStart2",e[e.GuideMapSearch2=12]="GuideMapSearch2",e[e.GuideVictory2=13]="GuideVictory2",e[e.GuideGoBattleBtn=14]="GuideGoBattleBtn",e[e.GuideGoBattle=15]="GuideGoBattle",e[e.Load=16]="Load",e[e.LoadComplete=17]="LoadComplete",e[e.NewGameStart=18]="NewGameStart",e[e.NewGameEnd=19]="NewGameEnd",e[e.GameStart=20]="GameStart",e[e.GameEnd=21]="GameEnd",e[e.PassReward=22]="PassReward",e[e.GetPassReward=23]="GetPassReward",e[e.ClickBuildInfo=24]="ClickBuildInfo",e[e.Building=25]="Building",e[e.BuildingVideoUpBtn=26]="BuildingVideoUpBtn",e[e.Recruit=27]="Recruit",e[e.RecruitView=28]="RecruitView",e[e.Syn=29]="Syn",e[e.Sign=30]="Sign",e[e.NoviceGift=31]="NoviceGift",e[e.Turntable=32]="Turntable",e[e.DaliyWood=33]="DaliyWood",e[e.DaliyGold=34]="DaliyGold",e[e.DaliyDaimind=35]="DaliyDaimind",e[e.Search=36]="Search",e[e.SearchSuccess=37]="SearchSuccess",e[e.SearchCancel=38]="SearchCancel",e[e.EnterKongTou=39]="EnterKongTou",e[e.KongtouRecieve=40]="KongtouRecieve",e[e.PVPAddCount=41]="PVPAddCount",e[e.ChanllengVideoBattle=42]="ChanllengVideoBattle",e[e.Store=43]="Store",e[e.RankShare=44]="RankShare",e[e.VictoryBox=45]="VictoryBox",e[e.VictoryBoxVideoOpen=46]="VictoryBoxVideoOpen",e[e.Settlement=47]="Settlement",e[e.InGame=48]="InGame",e[e.LuckRward=49]="LuckRward",e[e.LimitedGift=50]="LimitedGift",e[e.Bounty=51]="Bounty",e[e.HangUpReward=52]="HangUpReward",e[e.KongTou=53]="KongTou",e[e.ChallengeLetter=54]="ChallengeLetter",e[e.Notice=55]="Notice",e[e.BoatStartClick=56]="BoatStartClick",e[e.BoatHomeClick=57]="BoatHomeClick",e[e.BoatStoreClick=58]="BoatStoreClick",e[e.BoatArmysClick=59]="BoatArmysClick",e[e.BoatMainClick=60]="BoatMainClick",e[e.BoatBountyClick=61]="BoatBountyClick",e[e.BoatPvpClick=62]="BoatPvpClick",e[e.PVP=63]="PVP",e[e.HomeBoatClick=64]="HomeBoatClick",e[e.HomeWallClick=65]="HomeWallClick",e[e.HomeBuildClick=66]="HomeBuildClick",e[e.Soldier=67]="Soldier",e[e.BoatLockClick=68]="BoatLockClick",e[e.BoatGoClick=69]="BoatGoClick",e[e.CrazyBox=70]="CrazyBox",e[e.goldBuyHero=71]="goldBuyHero",e[e.buyHeroAgain_appear=72]="buyHeroAgain_appear",e[e.buyHeroAgain_click=73]="buyHeroAgain_click",e[e.buyHeroAgain_clickOk=74]="buyHeroAgain_clickOk",e[e.buyHeroAgain_complete=75]="buyHeroAgain_complete",e[e.lockSuperArm_click=76]="lockSuperArm_click",e[e.lockSuperArm_clickOk=77]="lockSuperArm_clickOk",e[e.lockSuperArm_complete=78]="lockSuperArm_complete",e[e.useArm=79]="useArm",e[e.useSuperArm=80]="useSuperArm",e[e.cardLucky_appear=81]="cardLucky_appear",e[e.cardLucky_getFree=82]="cardLucky_getFree",e[e.cardLucky_ADArm_click=83]="cardLucky_ADArm_click",e[e.cardLucky_ADArm_clickOk=84]="cardLucky_ADArm_clickOk",e[e.cardLucky_ADArm_complete=85]="cardLucky_ADArm_complete",e[e.reward_normal=86]="reward_normal",e[e.reward_double_appear=87]="reward_double_appear",e[e.reward_double_click=88]="reward_double_click",e[e.reward_double_clickOk=89]="reward_double_clickOk",e[e.reward_double_complete=90]="reward_double_complete",e[e.reward_three_appear=91]="reward_three_appear",e[e.reward_three_click=92]="reward_three_click",e[e.reward_three_clickOk=93]="reward_three_clickOk",e[e.reward_three_complete=94]="reward_three_complete",e[e.reward_five_appear=95]="reward_five_appear",e[e.reward_five_click=96]="reward_five_click",e[e.reward_five_clickOk=97]="reward_five_clickOk",e[e.reward_five_complete=98]="reward_five_complete",e[e.buildNow_appear=99]="buildNow_appear",e[e.buildNow_click=100]="buildNow_click",e[e.buildNow_clickOk=101]="buildNow_clickOk",e[e.buildNow_complete=102]="buildNow_complete",e[e.dailyCoin_appear=103]="dailyCoin_appear",e[e.dailyCoin_click=104]="dailyCoin_click",e[e.dailyCoin_clickOk=105]="dailyCoin_clickOk",e[e.dailyCoin_complete=106]="dailyCoin_complete",e[e.dailyGem_appear=107]="dailyGem_appear",e[e.dailyGem_click=108]="dailyGem_click",e[e.dailyGem_clickOk=109]="dailyGem_clickOk",e[e.dailyGem_complete=110]="dailyGem_complete",e[e.dailyWood_appear=111]="dailyWood_appear",e[e.dailyWood_click=112]="dailyWood_click",e[e.dailyWood_clickOk=113]="dailyWood_clickOk",e[e.dailyWood_complete=114]="dailyWood_complete",e[e.limitGift_appear=115]="limitGift_appear",e[e.limitGift_click=116]="limitGift_click",e[e.limitGift_clickOk=117]="limitGift_clickOk",e[e.limitGift_complete=118]="limitGift_complete",e[e.offerLow_normal=119]="offerLow_normal",e[e.offerLow_Ad_appear=120]="offerLow_Ad_appear",e[e.offerLow_Ad_click=121]="offerLow_Ad_click",e[e.offerLow_Ad_clickOk=122]="offerLow_Ad_clickOk",e[e.offerLow_Ad_complete=123]="offerLow_Ad_complete",e[e.offerMid_normal=124]="offerMid_normal",e[e.offerMid_Ad_appear=125]="offerMid_Ad_appear",e[e.offerMid_Ad_click=126]="offerMid_Ad_click",e[e.offerMid_Ad_clickOk=127]="offerMid_Ad_clickOk",e[e.offerMid_Ad_complete=128]="offerMid_Ad_complete",e[e.offerHigh_normal=129]="offerHigh_normal",e[e.offerHigh_Ad_appear=130]="offerHigh_Ad_appear",e[e.offerHigh_Ad_click=131]="offerHigh_Ad_click",e[e.offerHigh_Ad_clickOk=132]="offerHigh_Ad_clickOk",e[e.offerHigh_Ad_complete=133]="offerHigh_Ad_complete",e[e.offerReward_appear=134]="offerReward_appear",e[e.offerReward_click=135]="offerReward_click",e[e.offerReward_clickOk=136]="offerReward_clickOk",e[e.offerReward_complete=137]="offerReward_complete",e[e.storeBuyArm=138]="storeBuyArm",e[e.storeBuyHero=139]="storeBuyHero",e[e.storeGoLucky=140]="storeGoLucky",e[e.storeGetFree=141]="storeGetFree",e[e.storeCoinGetArm_appear=142]="storeCoinGetArm_appear",e[e.storeCoinGetArm_complete=143]="storeCoinGetArm_complete",e[e.storeGemGetArm_appear=144]="storeGemGetArm_appear",e[e.storeGemGetArm_complete=145]="storeGemGetArm_complete",e[e.storeGemGetWood_appear=146]="storeGemGetWood_appear",e[e.storeGemGetWood_complete=147]="storeGemGetWood_complete",e[e.storeAdGetArm_appear=148]="storeAdGetArm_appear",e[e.storeAdGetArm_click=149]="storeAdGetArm_click",e[e.storeAdGetArm_clickOk=150]="storeAdGetArm_clickOk",e[e.storeAdGetArm_complete=151]="storeAdGetArm_complete",e[e.storeAdGetWood_appear=152]="storeAdGetWood_appear",e[e.storeAdGetWood_click=153]="storeAdGetWood_click",e[e.storeAdGetWood_clickOk=154]="storeAdGetWood_clickOk",e[e.storeAdGetWood_complete=155]="storeAdGetWood_complete",e[e.storeAdGetHero_appear=156]="storeAdGetHero_appear",e[e.storeAdGetHero_click=157]="storeAdGetHero_click",e[e.storeAdGetHero_clickOk=158]="storeAdGetHero_clickOk",e[e.storeAdGetHero_complete=159]="storeAdGetHero_complete",e[e.storeFreeRefresh=160]="storeFreeRefresh",e[e.storeAdRefresh_appear=161]="storeAdRefresh_appear",e[e.storeAdRefresh_click=162]="storeAdRefresh_click",e[e.storeAdRefresh_clickOk=163]="storeAdRefresh_clickOk",e[e.storeAdRefresh_complete=164]="storeAdRefresh_complete",e[e.storeGetCoin_click=165]="storeGetCoin_click",e[e.storeGetCoin_clickOk=166]="storeGetCoin_clickOk",e[e.storeGetCoin_complete=167]="storeGetCoin_complete",e[e.storeGetGem_click=168]="storeGetGem_click",e[e.storeGetGem_clickOk=169]="storeGetGem_clickOk",e[e.storeGetGem_complete=170]="storeGetGem_complete",e[e.idleReward_normal=171]="idleReward_normal",e[e.idleReward_Double_appear=172]="idleReward_Double_appear",e[e.idleReward_Double_click=173]="idleReward_Double_click",e[e.idleReward_Double_clickOk=174]="idleReward_Double_clickOk",e[e.idleReward_Double_complete=175]="idleReward_Double_complete",e[e.airdropIcon_appear=176]="airdropIcon_appear",e[e.airdropIcon_click=177]="airdropIcon_click",e[e.airdropModel_appear=178]="airdropModel_appear",e[e.airdropModel_click=179]="airdropModel_click",e[e.airdropGetWood_appear=180]="airdropGetWood_appear",e[e.airdropGetWood_click=181]="airdropGetWood_click",e[e.airdropGetWood_clickOk=182]="airdropGetWood_clickOk",e[e.airdropGetWood_complete=183]="airdropGetWood_complete",e[e.airdropGetCoin_appear=184]="airdropGetCoin_appear",e[e.airdropGetCoin_click=185]="airdropGetCoin_click",e[e.airdropGetCoin_clickOk=186]="airdropGetCoin_clickOk",e[e.airdropGetCoin_complete=187]="airdropGetCoin_complete",e[e.airdropGetArm_appear=188]="airdropGetArm_appear",e[e.airdropGetArm_click=189]="airdropGetArm_click",e[e.airdropGetArm_clickOk=190]="airdropGetArm_clickOk",e[e.airdropGetArm_complete=191]="airdropGetArm_complete",e[e.airdropGetHero_appear=192]="airdropGetHero_appear",e[e.airdropGetHero_click=193]="airdropGetHero_click",e[e.airdropGetHero_clickOk=194]="airdropGetHero_clickOk",e[e.airdropGetHero_complete=195]="airdropGetHero_complete",e[e.newGiftOpen=196]="newGiftOpen",e[e.newGift_1_click=197]="newGift_1_click",e[e.newGift_1_clickOk=198]="newGift_1_clickOk",e[e.newGift_1_complete=199]="newGift_1_complete",e[e.newGift_2_click=200]="newGift_2_click",e[e.newGift_2_clickOk=201]="newGift_2_clickOk",e[e.newGift_2_complete=202]="newGift_2_complete",e[e.newGift_3_click=203]="newGift_3_click",e[e.newGift_3_clickOk=204]="newGift_3_clickOk",e[e.newGift_3_complete=205]="newGift_3_complete",e[e.newGift_4_click=206]="newGift_4_click",e[e.newGift_4_clickOk=207]="newGift_4_clickOk",e[e.newGift_4_complete=208]="newGift_4_complete",e[e.newGift_5_click=209]="newGift_5_click",e[e.newGift_5_clickOk=210]="newGift_5_clickOk",e[e.newGift_5_complete=211]="newGift_5_complete",e[e.mailIcon_appear=212]="mailIcon_appear",e[e.mailIcon_click=213]="mailIcon_click",e[e.mail_normal=214]="mail_normal",e[e.mail_cancel=215]="mail_cancel",e[e.mail_Ad_click=216]="mail_Ad_click",e[e.mail_Ad_clickOk=217]="mail_Ad_clickOk",e[e.mail_Ad_complete=218]="mail_Ad_complete",e[e.stageRewardIcon_click=219]="stageRewardIcon_click",e[e.stageReward_normal=220]="stageReward_normal",e[e.stageReward_Ad_click=221]="stageReward_Ad_click",e[e.stageReward_Ad_clickOk=222]="stageReward_Ad_clickOk",e[e.stageReward_Ad_complete=223]="stageReward_Ad_complete",e[e.signIcon_click=224]="signIcon_click",e[e.sign_normal=225]="sign_normal",e[e.sign_Double_click=226]="sign_Double_click",e[e.sign_Double_clickOk=227]="sign_Double_clickOk",e[e.sign_Double_complete=228]="sign_Double_complete",e[e.sign_Again_click=229]="sign_Again_click",e[e.sign_Again_clickOk=230]="sign_Again_clickOk",e[e.sign_Again_complete=231]="sign_Again_complete",e[e.boxIcon_click=232]="boxIcon_click",e[e.boxOpen_gem=233]="boxOpen_gem",e[e.boxOpen_Ad_click=234]="boxOpen_Ad_click",e[e.boxOpen_Ad_clickOk=235]="boxOpen_Ad_clickOk",e[e.boxOpen_Ad_complete=236]="boxOpen_Ad_complete",e[e.PVP_free=237]="PVP_free",e[e.PVP_Ad_appear=238]="PVP_Ad_appear",e[e.PVP_Ad_click=239]="PVP_Ad_click",e[e.PVP_Ad_clickOk=240]="PVP_Ad_clickOk",e[e.PVP_Ad_complete=241]="PVP_Ad_complete",e[e.PVP_Double_appear=242]="PVP_Double_appear",e[e.PVP_Double_click=243]="PVP_Double_click",e[e.PVP_Double_clickOk=244]="PVP_Double_clickOk",e[e.PVP_Double_complete=245]="PVP_Double_complete",e[e.PVP_share=246]="PVP_share",e[e.swardHeroLevel=247]="swardHeroLevel",e[e.archHeroLevel=248]="archHeroLevel",e[e.masterHeroLevel=249]="masterHeroLevel",e[e.ministerHeroLevel=250]="ministerHeroLevel",e[e.giantHeroLevel=251]="giantHeroLevel"}(a||e("EventId",a={})),(_=function(){function e(){t(this,e),this.isNew=!1}return o(e,[{key:"init",value:function(){this.isNew=0==parseInt(localStorage.getItem(l[l.SendEventIsNew])||"0"),localStorage.setItem(l[l.SendEventIsNew],"1")}},{key:"sendEvent",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.sendEventAld(e,i),this.sendEventUma(e,i),this.oppoSendEvent(e,i),this.androidSendEvent(e,i)}},{key:"androidSendEvent",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r.isAndroid&&jsb)if(null==i)jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","ylhLogAction","(Ljava/lang/String;Ljava/lang/String;)V",e,"");else{var o=JSON.stringify(i);console.log("EventParam: "+o),jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","ylhLogAction","(Ljava/lang/String;Ljava/lang/String;)V",e,o)}}},{key:"sendEventAld",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r.isWx()&&(null==i?(console.log("eventname:",e),wx.aldSendEvent(e)):(console.log("eventname:",e," msg:",JSON.stringify(i)),wx.aldSendEvent(e,i)))}},{key:"sendEventUma",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r.isWx()&&(null==i?(console.log("eventname:",e),wx.uma.trackEvent(e)):(console.log("eventname:",e," msg:",JSON.stringify(i)),wx.uma.trackEvent(e,i)))}},{key:"oppoSendEvent",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"sendLoaing",value:function(){this.sendEvent(this.isNew?a[a.NewLoad]:a[a.Load])}},{key:"sendLoaingComplete",value:function(){this.sendEvent(this.isNew?a[a.NewLoadComplete]:a[a.LoadComplete])}},{key:"sendGuide",value:function(e){var i={name:e};this.sendEvent(a[a.Guide],i)}},{key:"gameStart",value:function(e,i){var o={name:e,level:i.toString()},t=this.isNew?a[a.NewGameStart]:a[a.GameStart];this.sendEvent(t,o)}},{key:"gameEnd",value:function(e,i,o){this.isNew;var t={name:e,level:i.toString(),success:o},c=this.isNew?a[a.NewGameEnd]:a[a.GameEnd];this.sendEvent(c,t)}},{key:"clickBuildInfo",value:function(e){var i={name:e};this.sendEvent(a[a.ClickBuildInfo],i)}},{key:"clickBuilding",value:function(e){var i={name:e};this.sendEvent(a[a.ClickBuildInfo],i)}},{key:"building",value:function(e,i){var o={name:e+"_"+i.toString(),level:i.toString()};this.sendEvent(a[a.Building],o)}},{key:"clickPassReward",value:function(e,i){var o={level:e.toString(),isVideo:i};this.sendEvent(a[a.GetPassReward],o)}},{key:"drawCard",value:function(){this.sendEvent(a[a.Recruit])}},{key:"synth",value:function(){this.sendEvent(a[a.Syn])}},{key:"pvpAddChallengeCount",value:function(){this.sendEvent(a[a.PVPAddCount])}},{key:"bountVideoChallenge",value:function(e){this.sendEvent(a[a.ChanllengVideoBattle],{name:e})}},{key:"storeEvent",value:function(e,i,o){this.sendEvent(a[a.Store],{title:e,type:i,content:o})}},{key:"signEvent",value:function(e){this.sendEvent(a[a.Sign],{type:e})}}],[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new e,this.instance.init()),this.instance}}]),e}()).instance=null,c._RF.pop(),e("default",_)}}}));

System.register("chunks:///Core/Utils/ObjectPool.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","./Dictionary.js"],(function(t,e){var n,l,i,c,o;return{setters:[function(t){n=t.createClass,l=t.classCallCheck},function(t){i=t.cclegacy},function(t){c=t.default}],execute:function(){i._RF.push({},"ab287t/ZQpKma6Q1yqx3bdE","ObjectPool",void 0),(o=function(){function t(){l(this,t),this.poolDic=new c}return n(t,[{key:"get",value:function(t){var e=this.poolDic.get(t);return null==e?null:0==e.length?null:e.pop()}},{key:"push",value:function(t,e){var n=this.poolDic.get(t);null==n&&(n=new Array,this.poolDic.add(t,n)),n.push(e)}},{key:"clear",value:function(t){null!=this.poolDic.get(t)&&this.poolDic.remove(t)}},{key:"clearAll",value:function(){this.poolDic=null,this.poolDic=new c}},{key:"init",value:function(){}}],[{key:"Instance",get:function(){return null==this.instace&&(this.instace=new t),this.instace}}]),t}()).instace=null,i._RF.pop(),t("default",o)}}}));

System.register("chunks:///Soldiers/Bullet/Bullet.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Core/Constants/Constant.js","../../Tools.js","../../Core/Utils/ObjectPool.js","../../Data/BattleData.js","../../Data/GameData.js"],(function(t,e){var o,i,s,n,l,a,r,h,u,c,f,d,v,m,y,p,g,P,b;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){o=t.inherits,i=t.classCallCheck,s=t.possibleConstructorReturn,n=t.getPrototypeOf,l=t.createClass},function(t){a=t.cclegacy,r=t._decorator,h=t.Vec3,u=t.ParticleSystemComponent,c=t.tween,f=t.Component},function(t){d=t.MoveType},function(t){v=t.Tools},function(t){m=t.default},function(t){y=t.default},function(t){p=t.default}],execute:function(){a._RF.push({},"0fdbczl9txDh7XyganLULDm","Bullet",void 0),b=r.ccclass,r.property,t("Bullet",(g=b("Bullet"),g(P=function(t){function e(){var t,o;i(this,e);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(o=s(this,(t=n(e)).call.apply(t,[this].concat(a)))).runTime=0,o.g=0,o.lerp_pos=new h,o}return o(e,t),l(e,[{key:"start",value:function(){}},{key:"update",value:function(t){this.bulletInfo&&this.moveToTargetLerp(t)}},{key:"onEnable",value:function(){this.clearTur();var t=this.node.getChildByName("tuowei");t&&(t.active=p.Instance.openTuoWeiEffect)}},{key:"onDisable",value:function(){}},{key:"clearTur",value:function(){var t=this.node.getComponentsInChildren(u);if(t)for(var e=0;e<t.length;e++)t[e].clear()}},{key:"init",value:function(t,e){var o=this;this.bulletInfo=t,this.soldier=e,this.runTime=0,this.startPos=this.node.worldPosition.clone(),null!=e.enemy&&(this.target=e.enemy,this.targetPos=e.enemy.node.worldPosition.clone(),this.dis=h.distance(this.node.worldPosition,this.targetPos),this.fly_time=this.dis/this.bulletInfo.speed,this.scheduleOnce((function(){o.dis=h.distance(o.node.worldPosition,new h(o.targetPos.x,o.node.worldPosition.y,o.targetPos.z)),o.fly_time=o.dis/o.bulletInfo.speed,o.node.lookAt(e.enemy.node.worldPosition),o.moveToTargetSLerp(),o.bulletInfo.moveType==d.LINE&&o.scheduleOnce((function(){o.finish()}),o.fly_time)}),0))}},{key:"moveNext",value:function(t,e,o){var i=this;if(t.length<=e)this.finish();else if(this&&this.node){var s=t[e];s&&(this.node.lookAt(s),c(this.node).to(o,{worldPosition:s}).call((function(){i&&i.node&&(e++,i.moveNext(t,e,o))})).start())}}},{key:"moveToTargetLerp",value:function(t){this.bulletInfo.moveType==d.LINE&&(this.runTime+=t,h.lerp(this.lerp_pos,this.startPos,this.targetPos,Math.min(1,this.runTime/this.fly_time)),this.node.worldPosition=this.lerp_pos)}},{key:"moveToTargetSLerp",value:function(){if(this.bulletInfo.moveType==d.LERP){var t=15*this.fly_time,e=new h((this.targetPos.x+this.startPos.x)/2,t,(this.targetPos.z+this.startPos.z)/2),o=[this.startPos,e,this.targetPos],i=v.getBezierPointList(o,20);this.moveNext(i,1,this.fly_time/20)}}},{key:"finish",value:function(){this.target&&this.target.Hp>0&&(this.target.Hp-=this.soldier.getAttack()),this.hitFly(),this.createBombEffet(),this.node.active=!1,m.Instance.push(this.node.name,this.node)}},{key:"hitFly",value:function(){if(7==this.bulletInfo.id||8==this.bulletInfo.id||11==this.bulletInfo.id)for(var t=y.Instance.getEnemySoldiersByTeam(this.soldier.team),e=0;e<t.Count;e++){var o=t.get(e);o.IsActive&&(h.distance(this.targetPos,o.node.worldPosition)<this.bulletInfo.attackR&&(o.hitFly(this.targetPos,4,1),o.Hp-=this.soldier.getAttack()))}}},{key:"lockAtPos",value:function(t){var e=t.x-this.node.worldPosition.x,o=t.z-this.node.worldPosition.z,i=180*Math.atan2(o,e)/Math.PI;this.node.eulerAngles=new h(0,i,0)}},{key:"createBombEffet",value:function(){p.Instance.openEffect&&""!=this.bulletInfo.bomb&&-1==this.bulletInfo.bomb.indexOf("hit_exp")&&y.Instance.createEffects(this.bulletInfo.bomb,this.targetPos.clone())}}]),e}(f))||P)),a._RF.pop()}}}));

System.register("chunks:///Soldiers/Effects/EffectBase.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Core/Utils/ObjectPool.js"],(function(e,t){var n,s,i,o,l,c,a,r,u,f,h,p,d,v;return e({_dec:void 0,_class:void 0}),{setters:[function(e){n=e.inherits,s=e.createClass,i=e.classCallCheck,o=e.possibleConstructorReturn,l=e.getPrototypeOf},function(e){c=e.cclegacy,a=e._decorator,r=e.SkeletalAnimationComponent,u=e.ParticleSystemComponent,f=e.Component},function(e){h=e.default}],execute:function(){c._RF.push({},"a5f1aEDweVCa7KcTvHdtMhn","EffectBase",void 0),v=a.ccclass,a.property,e("EffectBase",(p=v("EffectBase"),p(d=function(e){function t(){return i(this,t),o(this,l(t).apply(this,arguments))}return n(t,e),s(t,[{key:"start",value:function(){this.skAnis=this.node.getComponentsInChildren(r),this.particles=this.node.getComponentsInChildren(u)}},{key:"onDisable",value:function(){}},{key:"play",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=this.skAnis)for(var s=0;s<this.skAnis.length;s++){var i=this.skAnis[s];i.play()}if(null!=this.particles)for(var o=0;o<this.particles.length;o++){var l=this.particles[o];l.play()}this.scheduleOnce((function(){e.node.active=!1,h.Instance.push(e.node.name,e.node),n&&n()}),t)}}]),t}(f))||d)),c._RF.pop()}}}));

System.register("chunks:///Core/Utils/Astar/AstarUitls.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,n){var i,r,e,a,o,s;return{setters:[function(t){i=t.createClass,r=t.classCallCheck},function(t){e=t.cclegacy,a=t.Vec2,o=t.Vec3}],execute:function(){e._RF.push({},"e3303Thg+hLrbHcGnmfCi1o","AstarUitls",void 0),(s=function(){function t(){r(this,t)}return i(t,null,[{key:"initAstar",value:function(){var t=window.PathFinding.Grid,n=window.PathFinding.AStarFinder;this.grid=new t(this.matrix),this.finder=new n({allowDiagonal:!0})}},{key:"initMatrix",value:function(){this.matrix=new Array;for(var n=0;n<t.W;n++){for(var i=[],r=0;r<t.W;r++)i.push(0);this.matrix.push(i)}}},{key:"getAstarPos",value:function(n,i){var r=t.W,e=Math.round(n)+Math.floor(t.W/2),o=Math.round(i)+Math.floor(t.W/2);return e<0&&(e=0),o<0&&(o=0),e>=r&&(e=r-1),o>=r&&(o=r-1),new a(o,e)}},{key:"getWoldPos",value:function(n,i){return new o(i-Math.floor(t.W/2),0,n-Math.floor(t.W/2))}},{key:"findPath",value:function(t,n,i,r){var e=new(0,window.PathFinding.Grid)(this.matrix);return this.finder.findPath(t,n,i,r,e)}}]),t}()).W=27,e._RF.pop(),t("default",s)}}}));

System.register("chunks:///Core/Utils/Astar/NavMeshAgent.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc","./AstarUitls.js"],(function(t,e){var i,n,r,o,a,s,h,l,f,u,v,x,y,c,d;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){i=t.inherits,n=t.classCallCheck,r=t.possibleConstructorReturn,o=t.getPrototypeOf,a=t.createClass},function(t){s=t.cclegacy,h=t._decorator,l=t.Tween,f=t.Vec3,u=t.Vec2,v=t.Component},function(t){x=t.default}],execute:function(){s._RF.push({},"7c6d0wid+JAoYkmb8QAXB5m","NavMeshAgent",void 0),d=h.ccclass,h.property,t("NavMeshAgent",(y=d("NavMeshAgent"),y(c=function(t){function e(){var t,i;n(this,e);for(var a=arguments.length,s=new Array(a),h=0;h<a;h++)s[h]=arguments[h];return(i=r(this,(t=o(e)).call.apply(t,[this].concat(s)))).paths=[],i.index=1,i.refreshT=0,i.isStop=!1,i.r=3,i.speed=1,i.t=0,i}return i(e,t),a(e,[{key:"start",value:function(){}},{key:"update",value:function(t){this.deltaTime=t,this.move(),this.refreshT+=t}},{key:"move",value:function(){}},{key:"setNextPos",value:function(){var t=this;if(!this.isStop){if(this.index>=this.paths.length)return this.isStop=!0,this.paths=[],void(this.index=1);var e=this.paths[this.index],i=x.getWoldPos(e[1],e[0]);this.node.lookAt(i),this.tween=new l(this.node),this.tween.to(f.distance(this.node.position,i)/this.speed,{position:i}),this.tween.call((function(){t.index++,t.setNextPos()})),this.tween.start()}}},{key:"lockAtPos",value:function(t){var e=t.x-this.node.position.x,i=t.z-this.node.position.z,n=180*Math.atan2(i,e)/Math.PI;this.node.eulerAngles=new f(0,n,0)}},{key:"setDestination",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!(this.refreshT<1)){this.refreshT=0,this.isStop=!1;var n=this.node.position,r=x.getAstarPos(n.z,n.x),o=this.getEndPos(t,r,e);null!=o||null==i?(this.index=1,this.t=0,o&&(this.paths=x.findPath(r.x,r.y,o.x,o.y)),this.setNextPos()):i()}}},{key:"getPath",value:function(t,e){for(var i=x.getAstarPos(e.z,e.x),n=1;;){var r=i.x-Math.floor(n/2),o=i.y-Math.floor(n/2);if(n>7)return[];for(var a=0;a<n;a++)for(var s=0;s<n;s++)if(o+s>=0&&r+a>=0&&o+s<x.W&&r+a<x.W&&0==x.matrix[o+s][r+a]){var h=new u(r+a,o+s);if(0==x.matrix[h.x][h.y]){var l=x.findPath(t.x,t.y,h.x,h.y);if(l.length>0)return l}}n+=2}}},{key:"_getEndPos",value:function(t){for(var e=x.getAstarPos(t.z,t.x),i=3;;){for(var n=e.x-Math.floor(i/2),r=e.y-Math.floor(i/2),o=0;o<i;o++)for(var a=0;a<i;a++)if(r+a>=0&&n+o>=0&&r+a<=24&&n+o<=24&&0==x.matrix[r+a][n+o]){var s=new u(n+o,r+a);if(0==x.matrix[s.x][s.y])return s}i+=2}}},{key:"getEndPos",value:function(t,e,i){var n=x.getAstarPos(t.z,t.x),r=x.getAstarPos(this.node.worldPosition.z,this.node.worldPosition.x),o=1e3;if(0==x.matrix[n.y][n.x]){var a=x.findPath(e.x,e.y,n.x,n.y);if(null!=a&&a.length>0)return n}for(var s=null,h=i;;){for(var l=-h;l<=h;l++){var f=n.x+l,v=n.y-h;if(!(f>=x.W||f<0)&&(!(v>=x.W||v<0)&&0==x.matrix[v][f])){var y=x.findPath(e.x,e.y,f,v);if(null==y||0==y.length)continue;var c=Math.pow(r.x-f,2)+Math.pow(r.y-v,2);c<o&&(s=new u(f,v),o=c)}}for(var d=-h;d<=h;d++){var p=n.x+d,w=n.y+h;if(!(p>=x.W||p<0)&&(!(w>=x.W||w<0)&&0==x.matrix[w][p])){var g=x.findPath(e.x,e.y,p,w);if(null==g||0==g.length)continue;var P=Math.pow(r.x-p,2)+Math.pow(r.y-w,2);P<o&&(s=new u(p,w),o=P)}}for(var M=1-h;M<=h-1;M++){var W=n.x-h,m=n.y+M;if(!(W>=x.W||W<0)&&(!(m>=x.W||m<0)&&0==x.matrix[m][W])){var A=x.findPath(e.x,e.y,W,m);if(null==A||0==A.length)continue;var k=Math.pow(r.x-W,2)+Math.pow(r.y-m,2);k<o&&(s=new u(W,m),o=k)}}for(var z=1-h;z<=h-1;z++){var _=n.x+h,N=n.y+z;if(!(_>=x.W||_<0)&&(!(N>=x.W||N<0)&&0==x.matrix[N][_])){var S=x.findPath(e.x,e.y,_,N);if(null==S||0==S.length)continue;var T=Math.pow(r.x-_,2)+Math.pow(r.y-N,2);T<o&&(s=new u(_,N),o=T)}}if(s)break;if(++h>i)return null}return s}},{key:"stop",value:function(){this.isStop=!0,this.paths=[],null!=this.tween&&this.tween.stop()}},{key:"hasToNextMove",value:function(){return this.index<this.paths.length}},{key:"canArriveByWidth",value:function(t,e){var i=this.node.position,n=x.getAstarPos(i.z,i.x);if(n.x<0||n.x>=x.W)return!0;if(n.y<0||n.y>=x.W)return!0;for(var r=x.getAstarPos(t.z,t.x),o=x.getAstarPos(this.node.worldPosition.z,this.node.worldPosition.x),a=1e3,s=null,h=1;;){for(var l=-h;l<=h;l++){var f=r.x+l,v=r.y-h;if(!(f>=x.W||f<0)&&(!(v>=x.W||v<0)&&0==x.matrix[f][v])){var y=x.findPath(n.x,n.y,f,v);if(null==y||0==y.length)continue;var c=Math.pow(o.x-f,2)+Math.pow(o.y-v,2);c<a&&(s=new u(f,v),a=c)}}for(var d=-h;d<=h;d++){var p=r.x+d,w=r.y+h;if(!(p>=x.W||p<0)&&(!(w>=x.W||w<0)&&0==x.matrix[p][w])){var g=x.findPath(n.x,n.y,p,w);if(null==g||0==g.length)continue;var P=Math.pow(o.x-p,2)+Math.pow(o.y-w,2);P<a&&(s=new u(p,w),a=P)}}for(var M=1-h;M<=h-1;M++){var W=r.x-h,m=r.y+M;if(!(W>=x.W||W<0)&&(!(m>=x.W||m<0)&&0==x.matrix[W][m])){var A=x.findPath(n.x,n.y,W,m);if(null==A||0==A.length)continue;var k=Math.pow(o.x-W,2)+Math.pow(o.y-m,2);k<a&&(s=new u(W,m),a=k)}}for(var z=1-h;z<=h-1;z++){var _=r.x+h,N=r.y+z;if(!(_>=x.W||_<0)&&(!(N>=x.W||N<0)&&0==x.matrix[_][N])){var S=x.findPath(n.x,n.y,_,N);if(null==S||0==S.length)continue;var T=Math.pow(o.x-_,2)+Math.pow(o.y-N,2);T<a&&(s=new u(_,N),a=T)}}if(s)return!0;if(++h>e)return!1}}},{key:"IsStop",get:function(){return this.isStop}}]),e}(v))||c)),s._RF.pop()}}}));

System.register("chunks:///Data/SoldierData.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Constants/Constant.js","../Tools.js","../Config.js","../Core/Event/EventCode.js","../Core/Event/EventBus.js","../Core/View/UIManager.js","./BattleData.js","./GameData.js","../DataManager.js"],(function(e,t){var r,n,o,i,a,I,u,l,c,s,d,f,h,k,g,v,y,N;return{setters:[function(e){r=e.createClass,n=e.classCallCheck},function(e){o=e.cclegacy,i=e.director},function(e){a=e.LocalStorageKey,I=e.ItemLockType,u=e.TeamType,l=e.ViewType,c=e.LayerType},function(e){s=e.Tools},function(e){d=e.default},function(e){f=e.EventCode},function(e){h=e.default},function(e){k=e.default},function(e){g=e.default},function(e){v=e.default},function(e){y=e.DataManager}],execute:function(){o._RF.push({},"7fd90/r/sVNDLoDKMVB0bY4","SoldierData",void 0),(N=function(){function e(){n(this,e),this.luckValue=0,this.LuckaddNum=0,this.heroCardCountArr=[],this.newLockSoldierArr=[],this.redPower=0}return r(e,[{key:"init",value:function(){this.luckValue=parseInt(localStorage.getItem(a[a.LuckValue])||"0"),this.lockIdArr=JSON.parse(localStorage.getItem(a[a.LockSoldierIdArr])||"[]"),this.heroCardCountArr=JSON.parse(localStorage.getItem(a[a.HeroCardCountArr])||"[]"),this.newLockSoldierArr=JSON.parse(localStorage.getItem(a[a.NewLockSoldierArr])||"[101]")}},{key:"getSoldiersData",value:function(){for(var e=[],t=0;t<d.ITEM_INFO.length;t++)d.ITEM_INFO[t].id>100&&d.ITEM_INFO[t].id<=200&&e.push(d.ITEM_INFO[t]);return e}},{key:"getLevelLockSoldiersData",value:function(){for(var e=[],t=0;t<d.ITEM_INFO.length;t++)if(d.ITEM_INFO[t].id>100&&d.ITEM_INFO[t].id<=200){if(d.ITEM_INFO[t].lockLev==I.BOX)continue;if(d.ITEM_INFO[t].lockLev==I.UnUse)continue;d.ITEM_INFO[t].lockLev<=v.Instance.Level&&e.push(d.ITEM_INFO[t])}return e}},{key:"getLuckSoldiersData",value:function(){for(var e=[],t=0;t<d.ITEM_INFO.length;t++)d.ITEM_INFO[t].id>100&&d.ITEM_INFO[t].id<=200&&(d.ITEM_INFO[t].lockLev<=v.Instance.Level||d.ITEM_INFO[t].lockLev==I.BOX)&&e.push(d.ITEM_INFO[t]);return e}},{key:"getLuckSoldiersData1",value:function(){var e=[],t=Math.random(),r=2;0<=t&&t<.4?r=2:.4<=t&&t<.7?r=3:.7<=t&&t<.9?r=4:.9<=t&&t<1&&(r=5);for(var n=0;n<d.ITEM_INFO.length;n++)if(d.ITEM_INFO[n].id>100&&d.ITEM_INFO[n].id<=200){if(r!=d.ITEM_INFO[n].quality)continue;(d.ITEM_INFO[n].lockLev>15||d.ITEM_INFO[n].lockLev==I.BOX)&&e.push(d.ITEM_INFO[n])}return e}},{key:"getLockSoldiersData",value:function(){for(var e=[],t=0;t<d.ITEM_INFO.length;t++)d.ITEM_INFO[t].id>100&&d.ITEM_INFO[t].id<=200&&this.getSoldierIsLockByItemInfo(d.ITEM_INFO[t])&&e.push(d.ITEM_INFO[t]);return e}},{key:"getUnLockSoldiersData",value:function(){for(var e=[],t=0;t<d.ITEM_INFO.length;t++)d.ITEM_INFO[t].id>100&&d.ITEM_INFO[t].id<=200&&(this.getSoldierIsLockByItemInfo(d.ITEM_INFO[t])||e.push(d.ITEM_INFO[t]));return e}},{key:"getDrawSoldiersData",value:function(){for(var e=[],t=0;t<d.ITEM_INFO.length;t++)d.ITEM_INFO[t].id>100&&d.ITEM_INFO[t].id<=200&&(this.getSoldierIsLockByItemInfo(d.ITEM_INFO[t])||d.ITEM_INFO[t].lockLev==I.BOX)&&e.push(d.ITEM_INFO[t]);return e}},{key:"getHerosData",value:function(){for(var e=[],t=0;t<d.ITEM_INFO.length;t++)d.ITEM_INFO[t].id>200&&e.push(d.ITEM_INFO[t]);return e}},{key:"getLockHeroData",value:function(){for(var e=[],t=0;t<d.ITEM_INFO.length;t++)if(d.ITEM_INFO[t].id>200){if(d.ITEM_INFO[t].lockLev==I.UnUse)continue;this.getSoldierIsLockByItemInfo(d.ITEM_INFO[t])&&e.push(d.ITEM_INFO[t])}return e}},{key:"getUnLockHeroData",value:function(){for(var e=[],t=0;t<d.ITEM_INFO.length;t++)d.ITEM_INFO[t].id>200&&(this.getSoldierIsLockByItemInfo(d.ITEM_INFO[t])||e.push(d.ITEM_INFO[t]));return e}},{key:"getDrawHeroData",value:function(){for(var e=[],t=0;t<d.ITEM_INFO.length;t++)if(d.ITEM_INFO[t].id>200&&(this.getSoldierIsLockByItemInfo(d.ITEM_INFO[t])||d.ITEM_INFO[t].lockLev==I.BOX)){if(204==d.ITEM_INFO[t].id||205==d.ITEM_INFO[t].id&&!this.getSoldierIsLockByItemInfo(d.ITEM_INFO[t]))continue;e.push(d.ITEM_INFO[t])}return e}},{key:"getSoldierIsLockById",value:function(e){var t=y.instance.getItemConstInfoByID(e);if(t.lockLev==I.UnUse)return!1;for(var r=0;r<this.lockIdArr.length;r++)if(this.lockIdArr[r]==e)return!0;return t.lockLev!=I.BOX&&v.Instance.Level>=t.lockLev}},{key:"getSoldierIsLockByItemInfo",value:function(e){if(e.lockLev==I.UnUse)return!1;for(var t=0;t<this.lockIdArr.length;t++)if(this.lockIdArr[t]==e.id)return!0;return e.lockLev!=I.BOX&&v.Instance.Level>=e.lockLev}},{key:"getSoldierInfoById",value:function(e){for(var t=0;t<d.SOLDIER_INFO.length;t++){var r=d.SOLDIER_INFO[t];if(r.id==e)return r}return null}},{key:"getSoldierIdByPrefabName",value:function(e){for(var t=0;t<d.ITEM_INFO.length;t++)if(d.ITEM_INFO[t].prefab==e.split("_")[0])return d.ITEM_INFO[t].id;return null}},{key:"getSoldierSmallIconPathById",value:function(e){return"textures/soldierIcom/icon_"+e}},{key:"getSoldierIconPathById",value:function(e){return"textures/soldiers/icon_"+e}},{key:"onLuckValueChange",value:function(){localStorage.setItem(a[a.LuckValue],this.luckValue.toString())}},{key:"addLuckValue",value:function(){var e=s.getRandomInt(0,100)<50?5:10;this.LuckaddNum=e,this.LuckValue=Math.min(50,this.luckValue+e)}},{key:"lockSoldierById",value:function(e){for(var t=0;t<this.lockIdArr.length;t++)if(this.lockIdArr[t]==e)return;this.lockIdArr.push(e),localStorage.setItem(a[a.LockSoldierIdArr],JSON.stringify(this.lockIdArr))}},{key:"getBattleItems",value:function(){for(var e=[],t=0;t<y.instance.homeInfo.length;t++){var r=y.instance.homeInfo[t];null==r.boatMatrix||r.boatMatrix.length<=0||e.push(r)}return e}},{key:"getBluePower",value:function(){for(var e=0,t=this.getBattleItems(),r=0;r<t.length;r++)t[r].id<100||(e+=this.getPowerById(t[r].id,t[r].lv));return e}},{key:"getLandPower",value:function(){for(var t=0,r=0;r<y.instance.homeInfo.length;r++){var n=y.instance.homeInfo[r];n.matrix&&n.matrix.length>0&&(t+=e.Instance.getPowerById(n.id,n.lv))}return t}},{key:"getPowerById",value:function(e,t){var r=y.instance.getItemConstInfoByID(e);return e>=200?r.power*(t+1):r.power*Math.pow(2,t)}},{key:"getRedPower",value:function(){for(var e=0,t=g.Instance.getSoldiersByTeam(u.Red),r=0;r<t.Count;r++){var n=t.get(r);n.id>5&&(e+=this.getPowerById(n.id,n.lv))}return e}},{key:"getHeroCardCountById",value:function(e){for(var t=0;t<this.heroCardCountArr.length;t++)if(this.heroCardCountArr[t][0]==e)return this.heroCardCountArr[t][1];return 0}},{key:"setHeroCardCountById",value:function(e,t){for(var r=!1,n=0;n<this.heroCardCountArr.length;n++)if(this.heroCardCountArr[n][0]==e){this.heroCardCountArr[n][1]=t,r=!0;break}r||this.heroCardCountArr.push([e,t]),h.Instance.pos(f.RefreshMenuRedPoint),localStorage.setItem(a[a.HeroCardCountArr],JSON.stringify(this.heroCardCountArr))}},{key:"addCardById",value:function(e){e>200?this.addHeroById(e):this.addSoldierById(e)}},{key:"addHeroById",value:function(t){if(y.instance.getItemsCountByID(t)>0){var r=e.Instance.getHeroCardCountById(t)+1;e.Instance.setHeroCardCountById(t,r)}else i.getScene().emit("CREAT_ITEM",t,u.Blue,0),e.Instance.lockSoldierById(t)}},{key:"addSoldierById",value:function(t){i.getScene().emit("CREAT_ITEM",t,u.Blue,0),e.Instance.lockSoldierById(t)}},{key:"getHeroUpFragmentCountById",value:function(e){return 2}},{key:"hasCanUpHero",value:function(){for(var t=this.getLockHeroData(),r=0;r<t.length;r++){var n=e.Instance.getHeroUpFragmentCountById(t[r].id);if(e.Instance.getHeroCardCountById(t[r].id)>=n)return!0}return!1}},{key:"hasSoldirById",value:function(e){for(var t=0;t<this.lockIdArr.length;t++)if(this.lockIdArr[t]==e)return!0;return!1}},{key:"refreshNewLockSoldier",value:function(){for(var e=0,t=0;t<d.ITEM_INFO.length;t++)if(d.ITEM_INFO[t].lockLev==v.Instance.Level){e=d.ITEM_INFO[t].id;break}for(var r=0;r<this.newLockSoldierArr.length;r++){if(e==this.newLockSoldierArr[r])return}0!=e&&(this.newLockSoldierArr.push(e),localStorage.setItem(a[a.NewLockSoldierArr],JSON.stringify(this.newLockSoldierArr)),k.Instance.showView(l.UINewLock,c.TOP,e))}},{key:"LuckValue",get:function(){return this.luckValue},set:function(e){this.luckValue=e,this.onLuckValueChange()}},{key:"SelectSoldierId",get:function(){return this.selectSoldierId},set:function(e){this.selectSoldierId=e,this.selectSoldierId>200?k.Instance.showView(l.UIHeroInfo,c.PANEL):k.Instance.showView(l.UISoldierInfo,c.PANEL)}}],[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}()).instance=null,o._RF.pop(),e("default",N)}}}));

System.register("chunks:///Soldiers/Bullet/SkillAddBlood.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Core/Utils/Dictionary.js","../../Core/Utils/ObjectPool.js","../../Data/BattleData.js"],(function(t,e){var i,s,a,n,o,l,d,c,r,u,h,f,p,v,k;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){i=t.inherits,s=t.classCallCheck,a=t.possibleConstructorReturn,n=t.getPrototypeOf,o=t.createClass},function(t){l=t.cclegacy,d=t._decorator,c=t.Vec3,r=t.Component},function(t){u=t.default},function(t){h=t.default},function(t){f=t.default}],execute:function(){l._RF.push({},"67937LtDg5HeLsrAaLWkTvo","SkillAddBlood",void 0),k=d.ccclass,d.property,t("SkillAddBlood",(p=k("SkillAddBlood"),p(v=function(t){function e(){var t,i;s(this,e);for(var o=arguments.length,l=new Array(o),d=0;d<o;d++)l[d]=arguments[d];return(i=a(this,(t=n(e)).call.apply(t,[this].concat(l)))).attack=0,i.r=0,i.t=.2,i.rate=.2,i.adds=new u,i}return i(e,t),o(e,[{key:"start",value:function(){}},{key:"update",value:function(t){if(this.t+=t,!(this.t<this.rate)){this.t=0;for(var e=f.Instance.getSoldiersByTeam(this.team),i=0;i<e.Count;i++){var s=e.get(i);if(c.distance(this.node.worldPosition,s.node.worldPosition)<this.r){if(this.checkAddLimit(s))continue;var a=s.allHp*this.attack;s.Hp+=a,s.Hp>s.allHp?s.Hp=s.allHp:this.adds.containKey(s)?this.adds.set(s,this.adds.get(s)+a):this.adds.add(s,a)}}}}},{key:"checkAddLimit",value:function(t){return!!this.adds.containKey(t)&&this.adds.get(t)>.3*t.allHp}},{key:"init",value:function(t,e,i,s){var a=this;this.attack=t,this.r=e,this.team=s,this.adds=new u,this.scheduleOnce((function(){a.node.active=!1,h.Instance.push(a.node.name,a.node)}),i)}}]),e}(r))||v)),l._RF.pop()}}}));

System.register("chunks:///Soldiers/Bullet/Wind.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Core/Utils/List.js","../../Data/BattleData.js"],(function(t,e){var n,i,s,o,a,r,c,u,l,d,h,v,y,f,p;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){n=t.inherits,i=t.classCallCheck,s=t.possibleConstructorReturn,o=t.getPrototypeOf,a=t.createClass},function(t){r=t.cclegacy,c=t._decorator,u=t.Vec3,l=t.tween,d=t.Component},function(t){h=t.default},function(t){v=t.default}],execute:function(){r._RF.push({},"83168VG4YlH17vfs2jXIB1/","Wind",void 0),p=c.ccclass,c.property,t("Wind",(y=p("Wind"),y(f=function(t){function e(){var t,n;i(this,e);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=s(this,(t=o(e)).call.apply(t,[this].concat(r)))).enemys=new h,n}return n(e,t),a(e,[{key:"start",value:function(){}},{key:"update",value:function(t){this.hurt()}},{key:"hurt",value:function(){for(var t=0;t<this.enemys.Count;t++)for(var e=0;e<this.enemys.Count;e++){var n=this.enemys.get(e);if(n&&!(n.Hp<=0)&&n.node)u.distance(n.node.position,this.node.position)<2&&(n.Hp-=this.attack,this.enemys.removeByIndex(e))}}},{key:"init",value:function(t,e,n,i){var s=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.attack=t;var a=u.distance(this.node.position.clone(),n);null!=o&&(a=o);var r=a/e;this.initEnemys(i),l(this.node).to(r,{position:n}).call((function(){s.node.removeFromParent(),s.node.destroy()})).start()}},{key:"initEnemys",value:function(t){var e=v.Instance.getEnemySoldiersByTeam(t);this.enemys=new h;for(var n=0;n<e.Count;n++)this.enemys.add(e.get(n))}}]),e}(d))||f)),r._RF.pop()}}}));

System.register("chunks:///Soldiers/Soldier.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Core/Constants/Constant.js","../Core/Utils/AudioManager.js","../Tools.js","../Config.js","../Core/Utils/List.js","../Core/Utils/Astar/AstarUitls.js","../Core/Utils/Astar/NavMeshAgent.js","../Data/SoldierData.js","./Bullet/SkillAddBlood.js","./Bullet/Wind.js","../Data/BattleData.js","../Data/GameData.js","../DataManager.js"],(function(t,e){var i,n,s,a,o,r,h,l,c,d,u,f,k,v,m,y,p,g,I,A,S,w,b,P,B,T,E,C,R,x,H,M,_,L,D,z,W,O,N,j,F,K;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){i=t.inherits,n=t.classCallCheck,s=t.possibleConstructorReturn,a=t.getPrototypeOf,o=t.createClass,r=t.asyncToGenerator},function(t){h=t.cclegacy,l=t._decorator,c=t.SkeletalAnimationComponent,d=t.Vec3,u=t.Node,f=t.tween,k=t.ParticleSystemComponent,v=t.AnimationComponent,m=t.Component,y=t.Prefab,p=t.instantiate,g=t.find,I=t.SpriteComponent},function(t){A=t.default},function(t){S=t.StateType,w=t.TeamType,b=t.GameType,P=t.AttackType,B=t.AniName,T=t.AudioName},function(t){E=t.AudioManager},function(t){C=t.Tools},function(t){R=t.default,x=t.BULLET_INFO},function(t){H=t.default},function(t){M=t.default},function(t){_=t.NavMeshAgent},function(t){L=t.default},function(t){D=t.SkillAddBlood},function(t){z=t.Wind},function(t){W=t.default},function(t){O=t.default},function(t){N=t.DataManager}],execute:function(){h._RF.push({},"82395A+iLVA4YQiZoMtlfZu","Soldier",void 0),K=l.ccclass,l.property,t("Soldier",(j=K("Soldier"),j(F=function(t){function e(){var t,i;n(this,e);for(var o=arguments.length,r=new Array(o),h=0;h<o;h++)r[h]=arguments[h];return(i=s(this,(t=a(e)).call.apply(t,[this].concat(r)))).ani=null,i.isBeFrozen=!1,i.isInAStarRange=!0,i.speed=5,i.soldierInfo=null,i.state=S.NONE,i.attackDuration=0,i.deltaTime=0,i.outAstartT=0,i.noArrive=!1,i.w_t=0,i.noArriveEnemy=new H,i.skill_t=0,i.isFlash=!1,i.bar=null,i.booldBarHideT=0,i.barActive=!1,i.skillAttack=-100,i.isScaling=!1,i}var h,l,m,j,F,K,U,G,Q,V;return i(e,t),o(e,[{key:"onLoad",value:function(){this.rank=this.node.getChildByName("rank"),this.agent=this.node.addComponent(_),this.attackPos=this.node.getChildByName("attackPos")}},{key:"start",value:function(){this.ani=this.node.getComponentInChildren(c)}},{key:"init",value:function(t,e,i){this.id=e,this.lv=i,this.team=t,this.ani=this.node.getComponentInChildren(c),this.isBeFrozen=!1,this.itemInfo=N.instance.getItemConstInfoByID(e),this.soldierInfo=L.Instance.getSoldierInfoById(e),this.hp=W.Instance.getSoldierHpByIdAndLv(e,i),t==w.Red&&b.Defense!=O.Instance.GameType&&(this.hp*=.8),1==O.Instance.Level&&t==w.Red&&A.isOppo()&&(this.hp=.5*this.hp),this.initAttackR(),this.initAttack(),this.allHp=this.hp,this.setState(S.IDLE),2!=e&&1!=e?W.Instance.addSoldier(this):W.Instance.walls.add(this),t==w.Blue&&(this.isInAStarRange=!1),this.agent.speed=this.speed,this.agent.r=e<100?1.5:.5,0!=this.soldierInfo.skillId&&(this.skillInfo=R.SKILL_IFNO[this.soldierInfo.skillId-1]),this.createBooldBar(),this.showQuaity()}},{key:"initAttack",value:function(){var t=W.Instance.getSoldierAttackByIdAndLv(this.id,this.lv)*(this.team==w.Blue?1:.8);if(1==O.Instance._BattleScene.skyType){if(110==this.id||202==this.id||203==this.id)return void(this.attack=1.1*t);if(7==this.id||8==this.id||9==this.id)return void(this.attack=.9*t)}O.Instance.GameType==b.Defense&&this.team==w.Red&&O.Instance.IsAddPower&&(this.attack*=1.2),this.attack=t}},{key:"initAttackR",value:function(){0==O.Instance._BattleScene.skyType&&this.soldierInfo.attackType==P.LONG?this.attackR=1.2*this.soldierInfo.attackR:this.attackR=this.soldierInfo.attackR}},{key:"playAnimation",value:function(t){var e=this;if(null!=this.ani&&this.tmpAniName!=t){this.ani.play(t),this.tmpAniName=t;var i=this.ani.getState(t);null!=i&&(6!=this.id&&106!=this.id&&(i.speed=this.getAttackSpeedOffset()),this.scheduleOnce((function(){e.onPlayCompelte(t)}),i.duration/this.getAttackSpeedOffset()/i.speed))}}},{key:"onPlayCompelte",value:function(t){switch(t){case B.ATTACK:if(106==this.itemInfo.id)return void(this.Hp=0);this.setState(S.MOVE);break;case B.SKILL:this.setState(S.MOVE);break;case B.DEATH:}}},{key:"update",value:function(t){O.Instance.IsGameOver||(this.deltaTime=t,this.isActive&&(this.refreshDuration(),this.refreshSkill(),this.watchEnemy(),this.move(t),this.checkMine(),this.booldBarHideT+=t,this.booldBarHideT>=5&&this.showBar(!1)))}},{key:"lateUpdate",value:function(){this.refrsehBoolBarPos()}},{key:"move",value:function(t){if(S.MOVE==this.state&&!(this.isBeFrozen||this.itemInfo.id<=100))if(this.enemyIsExit()){if(this.isCanAttack())return this.setAttackState(),void this.agent.stop();if(!this.isInAttackRange()){this.moveNor(t),this.moveAStar();var e=Math.floor(M.W/2);Math.abs(this.node.worldPosition.x)<e&&Math.abs(this.node.worldPosition.z)<e?this.outAstartT>.2&&(this.isInAStarRange=!0):(this.outAstartT=0,this.isInAStarRange=!1,this.agent.stop()),this.isInAStarRange||(this.outAstartT+=t)}}else this.setState(S.WATCH)}},{key:"moveAStar",value:function(){var t=this;this.isInAStarRange&&(this.preEnemy==this.enemy&&this.agent.hasToNextMove()||(this.preEnemy=this.enemy,this.agent.setDestination(this.enemy.node.worldPosition,this.enemy.id<100?2:1,(function(){t.enemy.team==w.Red&&(t.enemy.noArrive=!0,t.setState(S.WATCH))}))))}},{key:"getAround",value:function(t){var e=C.getRandomInt(0,360)*Math.PI/180,i=1.5*Math.cos(e)+t.x,n=1.5*Math.sign(e)+ +t.z;return new d(i,0,n)}},{key:"moveNor",value:function(t){this.isInAStarRange||(this.lookAtEnemy(),this.node.translate(this.node.forward.multiplyScalar(this.speed*t),u.NodeSpace.WORLD))}},{key:"checkInMatrix",value:function(){if(!this.isInAStarRange){-12<this.node.worldPosition.x&&this.node.worldPosition.x<12&&(-12<this.node.worldPosition.z&&this.node.worldPosition.z<12?this.isInAStarRange=!0:this.isInAStarRange=!1)}}},{key:"setState",value:function(t){var e=this;switch(this.state=t,this.state){case S.IDLE:if(this.team==w.Red)return void this.setState(S.WATCH);this.playAnimation(B.IDLE);break;case S.WATCH:this.playAnimation(B.IDLE);break;case S.MOVE:if(!this.enemyIsExit())return void this.setState(S.WATCH);this.playAnimation(B.RUN);break;case S.ATTACK:this.attackDuration=0,this.lookAtEnemy(),this.playAnimation(B.ATTACK);var i=.4;110==this.soldierInfo.id&&(i=.5),this.scheduleOnce((function(){e.onAttack()}),i),114==this.soldierInfo.id&&this.scheduleOnce((function(){e.zadi()}),2);break;case S.SKILL:this.playAnimation(B.SKILL),this.onSkill();break;case S.DEATH:this.onDeath()}}},{key:"onHpChange",value:function(){this.hp<=0&&this.setState(S.DEATH)}},{key:"watchEnemy",value:function(){this.isBeFrozen||(this.w_t+=this.deltaTime,this.w_t<1||S.IDLE!=this.state&&S.ATTACK!=this.state&&this.state!=S.SKILL&&this.addWatchEnemySoldier())}},{key:"watch",value:function(){if(S.IDLE!=this.state&&S.ATTACK!=this.state&&this.state!=S.SKILL&&!(this.w_t<1||this.isBeFrozen)){var t=this.getEffectiveEnemys(),e=this.sortByDisUp(t);105!=this.id&&113!=this.id||(e=this.sortByLong(e));for(var i=0;i<e.length;i++){var n=e[i];if(n.isActive&&!(n.Hp<=0||n.beAttackCount>5))return void this.setEnemy(n)}if(e.length>0){if(105==this.id||113==this.id)return e[e.length-1];for(var s=0;s<e.length;s++){var a=e[s];if(a.isActive&&!(a.Hp<=0))return void this.setEnemy(a)}}else this.enemy=null}}},{key:"addWatchEnemySoldier",value:function(){W.Instance.addWatchEnemySoldier(this)}},{key:"setEnemy",value:function(t){this.enemyIsExit()&&this.enemy.beAttackCount--,this.enemy=t,t.beAttackCount++,this.itemInfo.id>100?(this.flash(),this.setState(S.MOVE)):6!=this.itemInfo.id&&7!=this.itemInfo.id&&8!=this.itemInfo.id||this.isCanAttack()&&this.setState(S.ATTACK)}},{key:"setNoArriveEnemy",value:function(t){var e=t.id<100?2:1;return!this.agent.canArriveByWidth(t.node.worldPosition,e)&&(this.noArriveEnemy.add(t),!0)}},{key:"getEffectiveEnemys",value:function(){for(var t=new Array,e=W.Instance.getEnemySoldiersByTeam(this.team),i=0;i<e.Count;i++){var n=e.get(i);n.isActive&&(n.Hp<=0||n.noArrive||t.push(n))}if(this.team==w.Blue&&e.Count>0&&0==t.length)for(var s=W.Instance.walls,a=0;a<s.Count;a++){var o=s.get(a);o.Hp<=0||(o.noArrive||t.push(o))}return t}},{key:"sortByDisUp",value:function(t){for(var e=t,i=0;i<e.length;i++){for(var n=i,s=this.getToSoldierDis(e[i]),a=i+1;a<e.length;a++){var o=this.getToSoldierDis(e[a]);s>o&&(n=a,s=o)}if(n!=i){var r=e[i];e[i]=e[n],e[n]=r}}return e}},{key:"sortByLong",value:function(t){for(var e=[],i=[],n=0;n<t.length;n++)t[n].soldierInfo.attackType==P.LONG?e.push(t[n]):i.push(t[n]);return e.concat(i)}},{key:"getToSoldierDis",value:function(t){return d.distance(t.node.worldPosition,this.node.worldPosition)}},{key:"getAttackSpeedOffset",value:function(){return 111==this.soldierInfo.id?1-this.Hp/this.allHp+1:1}},{key:"enemyIsExit",value:function(){return null!=this.enemy&&!(this.enemy.hp<=0)}},{key:"enemyInSkillRange",value:function(){return!!this.enemyIsExit()}},{key:"isInAttackRange",value:function(){return!!this.enemyIsExit()&&d.distance(this.node.getWorldPosition(),this.enemy.node.getWorldPosition())<=this.attackR+this.agent.r+this.enemy.agent.r}},{key:"setAttackState",value:function(){this.state!=S.SKILL&&(this.setState(S.ATTACK),this.attackDuration=0)}},{key:"isCanAttack",value:function(){return this.attackDuration>=this.soldierInfo.duration/this.getAttackSpeedOffset()&&this.isInAttackRange()}},{key:"refreshDuration",value:function(){this.attackDuration>=this.soldierInfo.duration||(this.attackDuration+=this.deltaTime)}},{key:"lookAtEnemy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(7!=this.itemInfo.id)if(6!=this.itemInfo.id&&8!=this.itemInfo.id){var e=this.enemy.node.worldPosition;null!=t&&(e=t),this.node.lookAt(e)}else this.node.children[0].lookAt(this.enemy.node.getWorldPosition())}},{key:"hurtEnemy",value:function(){this.enemyIsExit()&&(this.enemy.Hp-=this.getAttack())}},{key:"getAttack",value:function(){var t=this.attack;return 109==this.itemInfo.id&&this.enemy.soldierInfo.attackType&P.MELEE&&(t=1.2*this.attack),t}},{key:"onAttack",value:function(){if(this.playAttackAudio(),103!=this.soldierInfo.id){if(this.soldierInfo.attackType&P.LONG)if(203==this.soldierInfo.id){var t=this.node.worldPosition,e=this.soldierInfo.attackR+1,i=this.node.forward.normalize(),n=t.clone().add(i.clone().multiplyScalar(e));this.createWind(n)}else{if(0!=this.soldierInfo.bullet){var s=this.node.getWorldPosition();null!=this.attackPos&&(s=this.attackPos.getWorldPosition()),W.Instance.createBullet(this.soldierInfo.bullet,s,this)}this.huoQiangAttack()}else this.soldierInfo.attackType&P.RANGE||this.soldierInfo.attackType&P.MELEE&&(this.enemy&&O.Instance.openHitEffect&&O.Instance.openEffect&&W.Instance.createEffects("hit_exp",this.enemy.node.worldPosition.clone()),this.hurtEnemy());this.xurenBingdong()}else this.qiangBingAttack()}},{key:"onSkill",value:function(){switch(this.skillInfo.id){case 1:this.wushiSkill();break;case 2:break;case 3:this.shengQiShiSkill();break;case 4:this.jianyuSkill();break;case 5:this.huoQiangSkill();break;case 6:this.fengSkill();break;case 7:this.xiunvSkill();break;case 8:this.shitouSkill()}}},{key:"zhadan",value:function(){if(106==this.id)for(var t=W.Instance.getEnemySoldiersByTeam(this.team),e=0;e<t.Count;e++){var i=t.get(e);i.IsActive&&(d.distance(this.node.worldPosition,i.node.worldPosition)<5&&(i.hitFly(this.node.worldPosition,4,1),i.Hp-=this.getAttack()))}}},{key:"onDeath",value:function(){if(this.zhadan(),this.mineBomb(),this.id<100){for(var t=M.getAstarPos(this.node.worldPosition.z,this.node.worldPosition.x),e=t.x-1,i=t.y-1,n=0;n<3;n++)for(var s=0;s<3;s++)M.matrix[i+s][e+n]=0;A.vibration(),E.Instance.playOneShot(T.Bomb)}var a=this.soldierInfo.deathPrefab;this.itemInfo.id>100&&106!=this.itemInfo.id&&(a+=this.team==w.Blue?"_blue":"_red",O.Instance.GameType==b.Defense&&(a=this.soldierInfo.deathPrefab+(this.team==w.Red?"_blue":"_red"))),W.Instance.createEffects(a,this.node.worldPosition),this.node.active=!1,this.id>2?(W.Instance.removeSoldier(this),O.Instance.checkGameOver()):W.Instance.walls.remove(this),this.bar&&(this.bar.node.parent.destroy(),this.bar=null),this.setNoArrive()}},{key:"setNoArrive",value:function(){for(var t=W.Instance.getSoldiersByTeam(w.Blue),e=0;e<t.Count;e++){t.get(e).noArrive=!1}for(var i=W.Instance.getSoldiersByTeam(w.Red),n=0;n<i.Count;n++){i.get(n).noArrive=!1}}},{key:"huoQiangAttack",value:(V=r(regeneratorRuntime.mark((function t(){var e,i,n,s,a,o,r,h,l,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(115==this.soldierInfo.id){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,W.Instance.createEffects("huoQiang",this.node.getWorldPosition());case 4:t.sent.lookAt(this.enemy.node.worldPosition),e=W.Instance.getEnemySoldiersByTeam(this.team),i=0;case 8:if(!(i<e.Count)){t.next=23;break}if((n=e.get(i)).IsActive){t.next=12;break}return t.abrupt("continue",20);case 12:s=this.node.forward.normalize(),a=n.node.worldPosition.clone().subtract(this.node.worldPosition.clone()),o=a.length(),r=d.dot(s,a.normalize()),h=Math.acos(r),l=o*Math.sin(h),c=o*r,Math.abs(l)<2&&c<5&&(n.Hp-=this.Attack);case 20:i++,t.next=8;break;case 23:case"end":return t.stop()}}),t,this)}))),function(){return V.apply(this,arguments)})},{key:"qiangBingAttack",value:function(){for(var t=W.Instance.getEnemySoldiersByTeam(this.team),e=0;e<t.Count;e++){var i=t.get(e);if(i.IsActive){var n=this.node.forward.normalize(),s=i.node.worldPosition.clone().subtract(this.node.worldPosition.clone()),a=s.length(),o=d.dot(n,s.normalize()),r=Math.acos(o),h=a*Math.sin(r),l=a*o;Math.abs(h)<1&&l<3&&(i.Hp-=this.getAttack())}}}},{key:"zadi",value:function(){if(114==this.soldierInfo.id){W.Instance.createEffects("jurenZadi",this.attackPos.getWorldPosition());for(var t=W.Instance.getEnemySoldiersByTeam(this.team),e=0;e<t.Count;e++){var i=t.get(e);i.IsActive&&(d.distance(this.node.worldPosition,i.node.worldPosition)<5&&(i.hitFly(this.node.worldPosition,5,1),i.Hp-=this.Attack))}}}},{key:"hitFly",value:function(t,e,i){if(!(this.soldierInfo.id<=100)){var n=this.node.worldPosition.clone().subtract(t),s=n.length(),a=n.x/s,o=n.z/s,r=t.x+a*e,h=t.z+o*e,l=new d(r,0,h);f(this.node).to(i,{worldPosition:l},{easing:"expoOut"}).start()}}},{key:"refreshSkill",value:function(){if(null!=this.skillInfo&&this.state!=S.SKILL&&!(this.skillInfo.duration<=0||(this.skill_t+=this.deltaTime,this.skill_t<this.skillInfo.duration||this.state==S.ATTACK)))return 7==this.skillInfo.id?(this.setState(S.SKILL),void(this.skill_t=0)):void(this.isInAttackRange()&&(this.setState(S.SKILL),this.skill_t=0))}},{key:"wushiSkill",value:(Q=r(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W.Instance.createEffects(this.skillInfo.prefab,new d(0,0,0),this.node,this.skillInfo.keepT);case 2:this.skillEffect=t.sent,this.wushiSkillAttack();case 4:case"end":return t.stop()}}),t,this)}))),function(){return Q.apply(this,arguments)})},{key:"wushiSkillAttack",value:function(){var t=this;this.skillEffect.active&&this.scheduleOnce((function(){for(var e=W.Instance.getEnemySoldiersByTeam(t.team),i=0;i<e.Count;i++){var n=e.get(i);n.IsActive&&(d.distance(t.node.worldPosition,n.node.worldPosition)<=3.5&&(t.Hp-=t.getSkillAttack(),t.zhongdu(n.node)))}t.wushiSkillAttack()}),.5)}},{key:"zhongdu",value:function(t){W.Instance.createEffects(this.skillInfo.bomb,new d(0,0,0),t,.5)}},{key:"xurenBingdong",value:(G=r(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(C.getRandom(0,100)>20)){t.next=3;break}return t.abrupt("return");case 3:if(!this.isBeFrozen){t.next=5;break}return t.abrupt("return");case 5:this.skillInfo&&2==this.skillInfo.id&&(this.enemy.setBeFrozen(this.skillInfo.keepT),W.Instance.createEffects(this.skillInfo.prefab,new d(0,0,0),this.enemy.node,this.skillInfo.keepT));case 6:case"end":return t.stop()}}),t,this)}))),function(){return G.apply(this,arguments)})},{key:"setBeFrozen",value:function(t){var e=this;this.isBeFrozen||(this.isBeFrozen=!0,this.agent&&this.agent.stop(),this.ani&&this.ani.stop(),this.scheduleOnce((function(){e.isBeFrozen=!1,e.hp>0&&e.setState(S.WATCH)}),t))}},{key:"flash",value:function(){if(113==this.soldierInfo.id&&!this.isFlash){this.isFlash=!0;var t=C.getRandom(0,360),e=this.enemy.node.worldPosition.x+Math.cos(t*Math.PI/180),i=this.enemy.node.worldPosition.z+Math.sin(t*Math.PI/180);W.Instance.createEffects("cikeFlash",new d(e,0,i)),this.node.worldPosition=new d(e,0,i)}}},{key:"shengQiShiSkill",value:function(){var t=this;console.log("圣骑士技能"),this.scheduleOnce((function(){for(var e=t.node.getChildByName("skill").getComponentsInChildren(k),i=0;i<e.length;i++)e[i].play()}),.1),this.schedule((function(){for(var e=W.Instance.getEnemySoldiersByTeam(t.team),i=0;i<e.Count;i++){var n=e.get(i);if(n.IsActive){t.node.forward.normalize();n.node.worldPosition.clone().subtract(t.node.worldPosition.clone()).length()<8&&(n.Hp-=t.getSkillAttack())}}}),.5,3,0)}},{key:"jianyuSkill",value:function(){var t=this;W.Instance.createEffects(this.skillInfo.prefab,this.enemy.node.worldPosition.clone(),null,this.skillInfo.keepT);var e=W.Instance.getEnemySoldiersByTeam(this.team);this.schedule((function(){if(t.node&&t.node.active&&e)for(var i=0;i<e.Count;i++){var n=e.get(i);if(n.IsActive&&d.distance(t.enemy.node.worldPosition,n.node.worldPosition)<=t.skillInfo.attackR){if(!n.node)continue;W.Instance.createEffects("bingdong",new d(0,0,0),n.node,1),n.setBeFrozen(1),n.Hp-=t.getSkillAttack()}}}),.5,6)}},{key:"shitouSkill",value:(U=r(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.node.getWorldPosition(),null!=this.attackPos&&(e=this.attackPos.getWorldPosition()),W.Instance.createBullet(this.soldierInfo.bullet,e,this);case 3:case"end":return t.stop()}}),t,this)}))),function(){return U.apply(this,arguments)})},{key:"xiunvSkill",value:(K=r(regeneratorRuntime.mark((function t(){var e,i,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=W.Instance.getSoldiersByTeam(this.team),i=0;case 2:if(!(i<e.Count)){t.next=10;break}if(!((n=e.get(i)).isActive&&n!=this&&n.Hp<n.allHp)){t.next=7;break}return this.createXiuNvHuiXue(n.node.worldPosition.clone()),t.abrupt("return");case 7:i++,t.next=2;break;case 10:case"end":return t.stop()}}),t,this)}))),function(){return K.apply(this,arguments)})},{key:"createXiuNvHuiXue",value:(F=r(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W.Instance.createEffects(this.skillInfo.prefab,e);case 2:t.sent.getComponent(D).init(this.getSkillAttack(),3,this.skillInfo.keepT,this.team);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return F.apply(this,arguments)})},{key:"fengSkill",value:(j=r(regeneratorRuntime.mark((function t(){var e,i,n,s,a,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.node.worldPosition,i=this.skillInfo.attackR,n=this.node.forward.normalize(),s=180*Math.atan2(n.z,n.x)/Math.PI,a=e.clone().add(n.clone().multiplyScalar(i)),o=e.clone().add(new d(i*Math.cos((s-15)*Math.PI/180),e.y,i*Math.sin((s-15)*Math.PI/180))),r=e.clone().add(new d(i*Math.cos((s+15)*Math.PI/180),e.y,i*Math.sin((s+15)*Math.PI/180))),this.createWind(a),this.createWind(o),this.createWind(r);case 10:case"end":return t.stop()}}),t,this)}))),function(){return j.apply(this,arguments)})},{key:"createWind",value:(m=r(regeneratorRuntime.mark((function t(e){var i,n,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.loadRes("prefabs/effects/feng",y);case 2:if(i=t.sent,O.Instance._BattleScene.effects){t.next=5;break}return t.abrupt("return");case 5:n=p(i),O.Instance._BattleScene.effects.addChild(n),n.worldPosition=this.node.worldPosition.clone(),s=x[this.soldierInfo.bullet-1],n.getComponent(z).init(this.attack,s.speed,e,this.team);case 10:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)})},{key:"huoQiangSkill",value:(l=r(regeneratorRuntime.mark((function t(){var e,i,n,s,a,o,r,h,l,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W.Instance.createEffects("huoQiang",this.node.getWorldPosition());case 2:t.sent.lookAt(this.enemy.node.worldPosition),e=W.Instance.getEnemySoldiersByTeam(this.team),i=0;case 6:if(!(i<e.Count)){t.next=21;break}if((n=e.get(i)).IsActive){t.next=10;break}return t.abrupt("continue",18);case 10:s=this.node.forward.normalize(),a=n.node.worldPosition.clone().subtract(this.node.worldPosition.clone()),o=a.length(),r=d.dot(s,a.normalize()),h=Math.acos(r),l=o*Math.sin(h),c=o*r,Math.abs(l)<4&&c<8&&(n.Hp-=this.getSkillAttack());case 18:i++,t.next=6;break;case 21:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"playAttackAudio",value:function(){var t="dao_attack1";switch(this.soldierInfo.id){case 1:case 2:case 3:case 4:case 5:break;case 6:t="gong_attack";break;case 7:case 8:break;case 9:t="zadanbing_bomb";break;case 101:return void E.Instance.playDaoBingAttak(!0);case 102:case 103:t="gong_attack";break;case 104:t="famu_attack";break;case 105:break;case 106:t="zadanbing_bomb";break;case 107:case 108:case 109:case 111:case 112:case 113:break;case 114:t="junren_attack";break;case 201:t="jiansheng_attack";break;case 202:t="gongjian_hero_attack";break;case 203:case 204:t="famu_attack";break;case 205:t="junren_attack"}E.Instance.playBattleOneShot(t)}},{key:"createBooldBar",value:(h=r(regeneratorRuntime.mark((function t(){var e,i,n,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(A.isQQ||A.isWx()||A.isOppo()||A.isVivo()||A.isTT)||!A.IsIos){t.next=3;break}if(!(this.id>100)){t.next=3;break}return t.abrupt("return");case 3:return e=this.team==w.Blue,O.Instance.GameType==b.Defense&&(e=!e),i=e?"ui/booldBar":"ui/booldBar1",t.next=8,C.loadRes(i,y);case 8:n=t.sent,s=p(n),g("Canvas/UI/UIBattle").addChild(s),this.bar=s.getComponentInChildren(I),s.active=!1,this.id>100&&(s.scale=new d(.9,.9,.9));case 14:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"refrsehBoolBarPos",value:function(){if(null!=this.bar)if(this.Hp!=this.allHp){var t=this.Hp/this.allHp;this.bar.fillRange=t;var e=C.getScreenPos(this.node,O.Instance._BattleScene.camera,O.Instance._BattleScene.canvas),i=1-O.Instance._BattleScene.camera.node.position.z/100;this.bar.node.parent.setScale(i,i,1),this.bar.node.parent.setWorldPosition(e.x,e.y+100*i,0),this.bar.node.parent.active=!0}else this.bar.node.parent.active=!1}},{key:"showBar",value:function(t){null!=this.bar&&this.barActive!=t&&(this.barActive=t,t?this.bar.node.parent.getComponent(v).play("barshow"):this.bar.node.parent.getComponent(v).play("barhide"))}},{key:"getSkillAttack",value:function(){if(this.skillAttack<0){var t=this.lv;this.lv>=this.skillInfo.attack.length&&(t=this.skillInfo.attack.length-1),this.skillAttack=this.skillInfo.attack[t]}return this.skillAttack}},{key:"attackScaleEffect",value:function(){var t=this;this.id<3||this.id>8||this.isScaling||f(this.node).to(.1,{scale:new d(.9,.9,.9)}).to(.1,{scale:new d(1,1,1)}).call((function(){t.isScaling=!1})).start()}},{key:"showQuaity",value:function(){var t=this.node.getChildByName("rank");if(null!=t)for(var e=0;e<t.children.length;e++){var i=t.children[e];if(this.lv<4)i.active=0==e;else{var n=this.lv-3;i.active=n==e}}}},{key:"checkMine",value:function(){if(9==this.id&&!(this.Hp<=0))for(var t=W.Instance.getEnemySoldiersByTeam(this.team),e=0;e<t.Count;e++){var i=t.get(e);if(i.IsActive&&d.distance(this.node.worldPosition,i.node.worldPosition)<this.attackR)return void(this.Hp=0)}}},{key:"mineBomb",value:function(){if(9==this.id)for(var t=W.Instance.getEnemySoldiersByTeam(this.team),e=0;e<t.Count;e++){var i=t.get(e);i.IsActive&&(d.distance(this.node.worldPosition,i.node.worldPosition)<this.attackR&&(i.Hp-=this.getAttack()))}}},{key:"IsActive",get:function(){return this.isActive},set:function(t){this.isActive=t,this.isActive&&this.setState(S.WATCH)}},{key:"Hp",get:function(){return this.hp},set:function(t){this.hp<=0&&t<=0||(this.hp<this.allHp&&(this.booldBarHideT=0),t<this.hp&&(this.showBar(!0),this.attackScaleEffect()),this.hp=t,this.onHpChange())}},{key:"Attack",get:function(){return this.attack}}]),e}(m))||F)),h._RF.pop()}}}));

System.register("chunks:///UI/UISoldierCardItem.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Constants/Constant.js","../Tools.js","../Data/SoldierData.js","../Data/GuideData.js","../DataManager.js"],(function(e,t){var i,n,r,o,a,c,s,l,u,d,h,f,p,v,I,g,y,k,m,b,C,_,L,S,D,U,P,w,B,j,F,R,z;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inherits,r=e.classCallCheck,o=e.possibleConstructorReturn,a=e.getPrototypeOf,c=e.initializerDefineProperty,s=e.assertThisInitialized,l=e.createClass,u=e.asyncToGenerator},function(e){d=e.cclegacy,h=e._decorator,f=e.SpriteComponent,p=e.LabelComponent,v=e.Node,I=e.Component},function(e){g=e.ItemLockType},function(e){y=e.Tools},function(e){k=e.default},function(e){m=e.default},function(e){b=e.DataManager}],execute:function(){d._RF.push({},"b2cf6EV2NtIu4AeHP9IfY6L","UISoldierCardItem",void 0),R=h.ccclass,z=h.property,e("UISoldierCardItem",(C=R("UISoldierCardItem"),_=z(f),L=z(f),S=z(p),D=z(v),C((w=i((P=function(e){function t(){var e,i;r(this,t);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return i=o(this,(e=a(t)).call.apply(e,[this].concat(l))),c(i,"bg",w,s(i)),c(i,"icon",B,s(i)),c(i,"nameLab",j,s(i)),c(i,"redPoint",F,s(i)),i}var i;return n(t,e),l(t,[{key:"start",value:function(){}},{key:"onEnable",value:function(){this.node.on("click",this.onClick,this)}},{key:"onDisable",value:function(){this.node.off("click",this.onClick,this)}},{key:"onClick",value:function(){if(!this.isLock()){var e=b.instance.getItemConstInfoByID(this.id),t=e.lockLev==g.BOX?"Unlock hero card bag\nor stage treasure chest":"You can recruit after reaching the "+e.lockLev+" th level";return e.lockLev==g.UnUse&&(t="Unlock hero card bag\nor treasure chest"),void y.ShowTip(t)}m.Instance.guideClickHeroCard(),k.Instance.SelectSoldierId=this.id}},{key:"setId",value:function(e){this.id=e,this.refreshUI()}},{key:"refreshUI",value:(i=u(regeneratorRuntime.mark((function e(){var t,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=b.instance.getItemConstInfoByID(this.id),this.nameLab.string=t.name,this.bg.grayscale=!this.isLock(),y.loadSpriteFrame("textures/recruit/card_"+t.quality,(function(e){i.bg.spriteFrame=e})),y.loadSpriteFrame(k.Instance.getSoldierIconPathById(this.id),(function(e){i.icon.spriteFrame=e})),this.icon.grayscale=!this.isLock(),this.refreshRedPoint();case 7:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"isLock",value:function(){return k.Instance.getSoldierIsLockById(this.id)}},{key:"refreshRedPoint",value:function(){var e=this.id>200,t=k.Instance.getHeroUpFragmentCountById(this.id),i=k.Instance.getHeroCardCountById(this.id)>=t;this.redPoint.active=e&&i}}]),t}(I)).prototype,"bg",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(P.prototype,"icon",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(P.prototype,"nameLab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(P.prototype,"redPoint",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=P))||U)),d._RF.pop()}}}));

System.register("chunks:///UI/guide/UIGuide.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Core/Utils/PlatformUtils.js","../../Core/Constants/Constant.js","../../Tools.js","../../Core/Event/EventCode.js","../../Core/Event/EventBus.js","../UISoldierCardItem.js","../../Data/GuideData.js","../../BoatScene.js"],(function(e,i){var t,n,o,r,a,s,l,c,u,d,h,p,v,f,g,y,m,b,T,k,w,_,C,P,B,I,S,A,z,N,G,U,E,M,F,j,R,D,K,V,W,O,x,H,L,q,Z,J,Q,X,Y,$,ee,ie,te,ne,oe,re,ae,se,le,ce,ue,de,he,pe,ve,fe,ge,ye,me,be,Te,ke,we,_e,Ce;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_dec10:void 0,_dec11:void 0,_dec12:void 0,_dec13:void 0,_dec14:void 0,_dec15:void 0,_dec16:void 0,_dec17:void 0,_dec18:void 0,_dec19:void 0,_dec20:void 0,_dec21:void 0,_dec22:void 0,_dec23:void 0,_dec24:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_descriptor9:void 0,_descriptor10:void 0,_descriptor11:void 0,_descriptor12:void 0,_descriptor13:void 0,_descriptor14:void 0,_descriptor15:void 0,_descriptor16:void 0,_descriptor17:void 0,_descriptor18:void 0,_descriptor19:void 0,_descriptor20:void 0,_descriptor21:void 0,_descriptor22:void 0,_descriptor23:void 0,_temp:void 0}),{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inherits,o=e.classCallCheck,r=e.possibleConstructorReturn,a=e.getPrototypeOf,s=e.initializerDefineProperty,l=e.assertThisInitialized,c=e.createClass},function(e){u=e.cclegacy,d=e._decorator,h=e.Node,p=e.UITransformComponent,v=e.find,f=e.tween,g=e.Vec3,y=e.LabelComponent,m=e.Component},function(e){b=e.default},function(e){T=e.default},function(e){k=e.Tools},function(e){w=e.EventCode},function(e){_=e.default},function(e){C=e.UISoldierCardItem},function(e){P=e.default,B=e.GuideId},function(e){I=e.BoatScene}],execute:function(){u._RF.push({},"f5f5eWjNKFKq46xCATM8Gtg","UIGuide",void 0),_e=d.ccclass,Ce=d.property,e("UIGuide",(S=_e("UIGuide"),A=Ce(h),z=Ce(h),N=Ce(h),G=Ce(h),U=Ce(h),E=Ce(h),M=Ce(h),F=Ce(h),j=Ce(h),R=Ce(h),D=Ce(h),K=Ce(h),V=Ce(h),W=Ce(h),O=Ce(h),x=Ce(h),H=Ce(h),L=Ce(h),q=Ce(h),Z=Ce(h),J=Ce(h),Q=Ce(h),X=Ce(C),S((ee=t(($=function(e){function i(){var e,t;o(this,i);for(var n=arguments.length,c=new Array(n),u=0;u<n;u++)c[u]=arguments[u];return t=r(this,(e=a(i)).call.apply(e,[this].concat(c))),s(t,"finger",ee,l(t)),s(t,"fingerNoAni",ie,l(t)),s(t,"mask",te,l(t)),s(t,"clickGrond",ne,l(t)),s(t,"synthPanel",oe,l(t)),s(t,"cangkuPanel",re,l(t)),s(t,"victoryReward",ae,l(t)),s(t,"buildMovePanel",se,l(t)),s(t,"kongTouTip",le,l(t)),s(t,"bountyTip",ce,l(t)),s(t,"pvpTip",ue,l(t)),s(t,"armyBtn",de,l(t)),s(t,"buildingTip",he,l(t)),s(t,"heroUpTip",pe,l(t)),s(t,"storeTip",ve,l(t)),s(t,"battleTip",fe,l(t)),s(t,"zhaomuTip",ge,l(t)),s(t,"homeTip",ye,l(t)),s(t,"sythTip",me,l(t)),s(t,"defenseTip",be,l(t)),s(t,"defenseSuccessTip",Te,l(t)),s(t,"caKuTip",ke,l(t)),s(t,"soldierCardItem",we,l(t)),t}return n(i,e),c(i,[{key:"start",value:function(){}},{key:"onDisable",value:function(){this.hideFinger()}},{key:"hideAll",value:function(){this.show();for(var e=0;e<this.node.children.length;e++)this.node.children[e].active=!1}},{key:"showFinger",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.hideAll();var t=e.getWorldPosition();this.targertBtnParent=e.parent,this.targetBtn=e,e.setParent(this.node,!0),this.finger.worldPosition=t,this.mask.active=i,this.finger.active=!0,this.finger.getComponent(p).priority=100}},{key:"hideFinger",value:function(){null!=this.targertBtnParent&&(this.targetBtn.setParent(this.targertBtnParent,!0),this.targertBtnParent=null,this.targetBtn=null,this.node.active=!1)}},{key:"showClickGround",value:function(){this.hideAll(),this.clickGrond.active=!0,this.clickGrond.getChildByName("Mask").active=b.isOppo()||b.isVivo()}},{key:"showSynthPanel",value:function(){this.hideAll(),this.mask.active=!0,this.synthPanel.active=!0,this.synthPanel.getChildByName("closeBtn").once("click",(function(){P.Instance.guideSynthTip()}),this)}},{key:"showHeCheng",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:102;this.hideAll();var i=I.instance.getItemsById(e);if(i.length<2)P.Instance.TmpGuideId=B.None;else{var t=k.getScreenPos(i[0].node,I.instance.camera,v("Canvas")),n=k.getScreenPos(i[1].node,I.instance.camera,v("Canvas"));this.fingerNoAni.active=!0,this.playSynthEffect(t,n,1,0),this.showSythTip()}}},{key:"playSynthEffect",value:function(e,i,t,n){var o=this;this.fingerNoAni.getComponent(p).priority=100,this.fingerNoAni.worldPosition=e.clone(),this.schedule((function(){o.fingerNoAni.worldPosition=e.clone(),f(o.fingerNoAni).to(1,{worldPosition:i}).start()}),t,cc.macro.REPEAT_FORERVER,n)}},{key:"playSynthEffect1",value:function(e,i,t,n){var o=this;0!=this.fingerNoAni.active&&(this.fingerNoAni.getComponent(p).priority=100,this.fingerNoAni.worldPosition=e.clone(),this.scheduleOnce((function(){f(o.fingerNoAni).to(1,{worldPosition:i}).call((function(){o.playSynthEffect1(e,i,t,n)})).start()}),n))}},{key:"showCankuPanel",value:function(e){this.hideAll(),this.cangkuPanel.active=!0;var i=e,t=I.instance.items[0].node.getWorldPosition();k.getScreenPos(new g(t.x,t.y,t.z+6),I.instance.camera,v("Canvas"));this.finger.worldPosition=i,this.finger.active=!0}},{key:"showVictoryReward",value:function(){this.victoryReward.active=!0}},{key:"show",value:function(){this.node.active=!0}},{key:"showBuildMovePanel",value:function(){this.hideAll(),this.mask.active=!0,this.buildMovePanel.active=!0,this.buildMovePanel.getChildByName("closeBtn").once("click",(function(){P.Instance.guideBuildMove(),_.Instance.pos(w.ShowBuildGuide)}),this)}},{key:"showKongTouTip",value:function(){this.hideAll(),this.kongTouTip.active=!0}},{key:"showBountyTip",value:function(){this.hideAll(),this.bountyTip.active=!0,this.mask.active=!0,this.bountyTip.getChildByName("bountyBtn").once("click",(function(){P.Instance.guideBountyTip(),_.Instance.pos(w.SetMeniuFunc,4)}),this)}},{key:"showPVPTip",value:function(){this.hideAll(),this.pvpTip.active=!0,this.mask.active=!0,this.pvpTip.getChildByName("pvpBtn").once("click",(function(){P.Instance.guidePVPTip(),_.Instance.pos(w.SetMeniuFunc,5)}),this)}},{key:"showArmyBtnTip",value:function(){this.hideAll(),this.armyBtn.active=!0,this.mask.active=!0,this.armyBtn.getChildByName("armyBtn").once("click",(function(){P.Instance.guideClickArmys(),_.Instance.pos(w.SetMeniuFunc,2)}),this)}},{key:"showSoldierCardItem",value:function(e,i){this.hideAll(),this.mask.active=!0,this.soldierCardItem.node.active=!0,this.finger.active=!0,this.finger.setWorldPosition(e),this.soldierCardItem.node.setWorldPosition(e),this.soldierCardItem.setId(i),this.finger.getComponent(p).priority=100}},{key:"showBuildingTip",value:function(e){this.showFinger(e,!0),this.buildingTip.active=!0}},{key:"showHeroUpTip",value:function(){this.heroUpTip.active=!0}},{key:"showStoreTip",value:function(){this.hideAll(),this.storeTip.active=!0,this.mask.active=!0,this.storeTip.getChildByName("storeBtn").once("click",(function(){P.Instance.guideStoreBtn(),_.Instance.pos(w.SetMeniuFunc,1)}),this)}},{key:"showCaKuTip",value:function(){this.caKuTip.active=!0}},{key:"showBattleTip",value:function(e){this.battleTip.active=!0,this.battleTip.getComponentInChildren(y).string=e}},{key:"showZhaomuTip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Click cards to expand the team's\ncombat power";this.zhaomuTip.active=!0,this.zhaomuTip.getComponentInChildren(y).string=e}},{key:"showHomeTip",value:function(){this.homeTip.active=!0}},{key:"showSythTip",value:function(){this.sythTip.active=!0;var e=this.sythTip.getChildByName("Mask"),i=k.getScreenPos(I.instance.ships[0],I.instance.camera,v("Canvas"));e.worldPosition=i,this.finger.worldPosition=i}},{key:"showdefenseTip",value:function(){this.hideAll(),this.defenseTip.active=!0,this.node.active=!0,this.mask.active=!0,this.defenseTip.getChildByName("sureBtn").once("click",(function(){P.Instance.guideDefenseTip()}),this.defenseTip)}},{key:"showdefenseSuccessTip",value:function(){this.hideAll(),this.defenseSuccessTip.active=!0,this.node.active=!0,this.mask.active=!0,this.defenseSuccessTip.getChildByName("sureBtn").once("click",(function(){P.Instance.guideDefenseSuccessTip()}),this.defenseSuccessTip);var e="Congrats! We defended our island successful!  But beware！Other players will attack our island after Stage "+T.LockPVP+". Prepare early!";this.defenseSuccessTip.getComponentInChildren(y).string=e}},{key:"hide",value:function(){this.node.active=!1}}]),i}(m)).prototype,"finger",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t($.prototype,"fingerNoAni",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t($.prototype,"mask",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t($.prototype,"clickGrond",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t($.prototype,"synthPanel",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t($.prototype,"cangkuPanel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t($.prototype,"victoryReward",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t($.prototype,"buildMovePanel",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t($.prototype,"kongTouTip",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t($.prototype,"bountyTip",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t($.prototype,"pvpTip",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t($.prototype,"armyBtn",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t($.prototype,"buildingTip",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t($.prototype,"heroUpTip",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t($.prototype,"storeTip",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t($.prototype,"battleTip",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t($.prototype,"zhaomuTip",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=t($.prototype,"homeTip",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=t($.prototype,"sythTip",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t($.prototype,"defenseTip",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=t($.prototype,"defenseSuccessTip",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=t($.prototype,"caKuTip",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=t($.prototype,"soldierCardItem",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=$))||Y)),u._RF.pop()}}}));

System.register("chunks:///Data/BuildData.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Constants/Constant.js","../Core/Utils/AudioManager.js","../Core/Utils/List.js","../DataManager.js"],(function(e,t){var i,a,n,s,u,l,o,d,r,c,f;return{setters:[function(e){i=e.createClass,a=e.classCallCheck},function(e){n=e.cclegacy,s=e.director},function(e){u=e.LocalStorageKey,l=e.AudioName},function(e){o=e.AudioManager},function(e){d=e.default},function(e){r=e.DataManager}],execute:function(){n._RF.push({},"fada07CKjFN/a9jYYORQ3vs","BuildData",void 0),(c=function(){function e(){a(this,e)}return i(e,[{key:"init",value:function(){this.initUpData(),this.initBuildDatas();var e=localStorage.getItem(u[u.GoldColletTime]);e&&e.length>0?this.collectTime=parseFloat(e):this.resetColletTime()}},{key:"initUpData",value:function(){var e=localStorage.getItem(u[u.BuildUpDatas]);if(this.upDatas=new d,null==e||""==e);else for(var t=JSON.parse(e),i=0;i<t.length;i++)this.upDatas.add(new f(t[i].sid,t[i].endT))}},{key:"initBuildDatas",value:function(){var e=localStorage.getItem(u[u.BuildDatas]);if(this.buildDatas=new d,null==e||""==e);else for(var t=JSON.parse(e),i=0;i<t.length;i++)this.buildDatas.add(new f(t[i].sid,t[i].endT))}},{key:"resetColletTime",value:function(){this.collectTime=Math.ceil((new Date).getTime()/1e3),localStorage.setItem(u[u.GoldColletTime],this.collectTime.toString())}},{key:"getGoldMineProduce",value:function(){var e=Math.ceil((new Date).getTime()/1e3)-this.collectTime;e=Math.min(e,28800);var t=r.instance.getGoldMine(),i=r.instance.getBuildUpInfoById(t.id),a=i.type[0],n=i.type[1],s=e/3600*a[t.lv],u=e/3600*n[t.lv];return[Math.floor(s),Math.floor(u)]}},{key:"getReduceTimeBySid",value:function(e){var t=this.getBuildUpVoDataBySid(e);if(null==t)return 0;var i=t.endT-Math.floor((new Date).getTime()/1e3);return i<0?0:i}},{key:"getBuildReduceTimeBySid",value:function(e){var t=this.getBuildingVoDataBySid(e);if(null==t)return 0;var i=t.endT-Math.floor((new Date).getTime()/1e3);return i<0?0:i}},{key:"getBuildingVoDataBySid",value:function(e){for(var t=0;t<this.buildDatas.Count;t++){var i=this.buildDatas.get(t);if(i.sid==e)return i}return null}},{key:"hasIsBuilingById",value:function(e){for(var t=0;t<this.buildDatas.Count;t++){var i=this.buildDatas.get(t);if(r.instance.getItemInfoBySid(i.sid)==e)return!0}return!1}},{key:"getBuildUpVoDataBySid",value:function(e){for(var t=0;t<this.upDatas.Count;t++){var i=this.upDatas.get(t);if(i.sid==e)return i}return null}},{key:"buildScessBySid",value:function(e){var t=this.getBuildingVoDataBySid(e);this.buildDatas.remove(t),this.saveBuildDatas(),s.getScene().emit("REFRSHBOAT"),s.getScene().emit("RefreshItemByInfo")}},{key:"upScessBySid",value:function(e){var t=this.getBuildUpVoDataBySid(e);this.upDatas.remove(t);var i=r.instance.getItemInfoBySid(e);r.instance.setItemInfoLvbySid(e,i.lv+1),this.saveUpDatas(),s.getScene().emit("REFRSHBOAT"),s.getScene().emit("RefreshItemByInfo")}},{key:"upBuildBySid",value:function(e){var t=r.instance.getItemInfoBySid(e),i=r.instance.getBuildUpInfoById(t.id),a=Math.floor((new Date).getTime()/1e3)+i.upTime[t.lv];this.upDatas.add(new f(e,a)),this.saveUpDatas(),o.Instance.playOneShot(l.Building),s.getScene().emit("RefreshItemByInfo")}},{key:"addBuildBySid",value:function(e){var t=r.instance.getItemInfoBySid(e),i=r.instance.getBuildingInfoById(t.id);if(0!=i.time){var a=Math.floor((new Date).getTime()/1e3)+i.time;this.buildDatas.add(new f(e,a)),this.saveBuildDatas(),o.Instance.playOneShot(l.Building),s.getScene().emit("RefreshItemByInfo")}}},{key:"saveBuildDatas",value:function(){localStorage.setItem(u[u.BuildDatas],JSON.stringify(this.buildDatas.values))}},{key:"saveUpDatas",value:function(){localStorage.setItem(u[u.BuildUpDatas],JSON.stringify(this.upDatas.values))}},{key:"getBuildSucessNeedDaimondByTime",value:function(e){return 5*Math.ceil(e/60)}},{key:"refreshBuildingUpComplete",value:function(){if(this.upDatas.Count>0)for(var e=this.upDatas.Count-1;e>=0;e--){var t=this.upDatas.get(e);this.getReduceTimeBySid(t.sid)<=0&&this.upScessBySid(t.sid)}if(this.buildDatas.Count>0)for(var i=this.buildDatas.Count-1;i>=0;i--){var a=this.buildDatas.get(i);this.getBuildReduceTimeBySid(a.sid)<=0&&this.buildScessBySid(a.sid)}}}],[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}()).instance=null,e("BuildUpVoData",f=function e(t,i){a(this,e),this.sid=t,this.endT=i}),n._RF.pop(),e("default",c)}}}));

System.register("chunks:///Data/GuideData.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Core/Constants/Constant.js","../Cfg/LevelCfg.js","../Core/Event/EventCode.js","../Core/Event/EventBus.js","../Core/View/UIManager.js","../Core/Utils/SendEventManager.js","./SoldierData.js","../UI/guide/UIGuide.js","./BuildData.js","./BattleData.js","./GameData.js","../DataManager.js"],(function(e,t){var r,n,a,u,i,s,o,c,d,p,h,g,l,f,I,m,G,k,x,w,y,b,v;return e("GuideId",void 0),{setters:[function(e){r=e.createClass,n=e.classCallCheck,a=e.asyncToGenerator},function(e){u=e.cclegacy},function(e){i=e.default},function(e){s=e.default,o=e.ViewType,c=e.GameType,d=e.LayerType},function(e){p=e.default},function(e){h=e.EventCode},function(e){g=e.default},function(e){l=e.default},function(e){f=e.default,I=e.EventId},function(e){m=e.default},function(e){G=e.UIGuide},function(e){k=e.default},function(e){x=e.default},function(e){w=e.default},function(e){y=e.DataManager}],execute:function(){u._RF.push({},"6ab0cuF8G1LBLp6NJyjz510","GuideData",void 0),function(e){e[e.None=0]="None",e[e.Guide_StartGame=1]="Guide_StartGame",e[e.Guide_StartGame1=2]="Guide_StartGame1",e[e.Guide_StartGame3=3]="Guide_StartGame3",e[e.Guide_GuideSynthTip=4]="Guide_GuideSynthTip",e[e.Guide_ZhaoMu=5]="Guide_ZhaoMu",e[e.ShangZhen=6]="ShangZhen",e[e.CloseCangKu=7]="CloseCangKu",e[e.Guide_ZhaoMu1=8]="Guide_ZhaoMu1",e[e.HeCheng=9]="HeCheng",e[e.HeCheng1=10]="HeCheng1"}(b||e("GuideId",b={})),(v=function(){function e(){n(this,e),this.TmpGuideId=b.None}var t,u,v,S,R,_,B,T,C,U,V,H,L,F,Z,M,D,P,E,K,A,O,j,N,W,q,z,J,Q,X,Y,$,ee,te,re,ne,ae,ue,ie,se,oe,ce,de,pe,he,ge,le,fe,Ie,me,Ge,ke,xe,we,ye,be,ve,Se,Re;return r(e,[{key:"isGuideByGuideId",value:function(e){return 1==parseInt(localStorage.getItem(b[e])||"0")}},{key:"guideCompleteByGuideId",value:function(e){localStorage.setItem(b[e],"1"),this.TmpGuideId=b.None}},{key:"showGuideStartGame",value:(Re=a(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=w.Instance.Level){e.next=7;break}return e.next=3,this.getUIGuide();case 3:(r=e.sent).showFinger(t,!0),r.showBattleTip("Start the road to conquest!"),f.Instance.sendGuide("点击第1关的开始按钮");case 7:case"end":return e.stop()}}),e,this)}))),function(e){return Re.apply(this,arguments)})},{key:"guideStartGame",value:(Se=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:1==w.Instance.Level&&(l.Instance.hideView(o.UIGuide),localStorage.setItem("Guide_StartGame","1"),f.Instance.sendGuide("地图搜索"));case 1:case"end":return e.stop()}}),e)}))),function(){return Se.apply(this,arguments)})},{key:"showGuideStartGame1",value:(ve=a(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isGuideByGuideId(b.HeCheng)){e.next=2;break}return e.abrupt("return");case 2:if(2==w.Instance.Level){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.getUIGuide();case 6:(r=e.sent).showFinger(t,!0),r.showBattleTip("The soldiers are stronger now,\nlet's try the next move!"),f.Instance.sendGuide("第二次开始"),f.Instance.oppoSendEvent(I[I.GuideStart2]),this.TmpGuideId=b.Guide_StartGame1;case 12:case"end":return e.stop()}}),e,this)}))),function(e){return ve.apply(this,arguments)})},{key:"guideStartGame1",value:(be=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2==w.Instance.Level){e.next=2;break}return e.abrupt("return");case 2:if(1!=parseInt(localStorage.getItem("Guide_StartGame1")||"0")){e.next=5;break}return e.abrupt("return");case 5:l.Instance.hideView(o.UIGuide),localStorage.setItem("Guide_StartGame1","1"),this.TmpGuideId=b.None;case 8:case"end":return e.stop()}}),e,this)}))),function(){return be.apply(this,arguments)})},{key:"showGuideClickGround",value:(ye=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=parseInt(localStorage.getItem("Guide_GuideClickGround")||"0")){e.next=7;break}return e.next=4,this.getUIGuide();case 4:e.sent.showClickGround(),f.Instance.sendGuide("点击派遣战船");case 7:case"end":return e.stop()}}),e,this)}))),function(){return ye.apply(this,arguments)})},{key:"guideClickGround",value:function(){1!=parseInt(localStorage.getItem("Guide_GuideClickGround")||"0")&&(l.Instance.hideView(o.UIGuide),localStorage.setItem("Guide_GuideClickGround","1"))}},{key:"showGuideZhaoMu",value:(we=a(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2==w.Instance.Level){e.next=2;break}return e.abrupt("return");case 2:if(0!=parseInt(localStorage.getItem("Guide_StartGame")||"0")){e.next=5;break}return e.abrupt("return");case 5:if(0!=parseInt(localStorage.getItem("Guide_ZhaoMu")||"0")){e.next=15;break}return e.next=9,this.getUIGuide();case 9:(r=e.sent).showFinger(t,!0),r.showZhaomuTip(),f.Instance.sendGuide("首次点击抽卡按钮"),f.Instance.oppoSendEvent(I[I.GuideRecruit]),this.TmpGuideId=b.Guide_ZhaoMu;case 15:case"end":return e.stop()}}),e,this)}))),function(e){return we.apply(this,arguments)})},{key:"guideZhaoMu",value:(xe=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=parseInt(localStorage.getItem("Guide_StartGame")||"0")){e.next=3;break}return e.abrupt("return");case 3:if(1!=parseInt(localStorage.getItem("Guide_ZhaoMu")||"0")){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this.getUIGuide();case 8:e.sent.hideFinger(),l.Instance.hideView(o.UIGuide),localStorage.setItem("Guide_ZhaoMu","1"),f.Instance.sendGuide("恭喜获得士兵"),this.TmpGuideId=b.None,f.Instance.oppoSendEvent(I[I.GuideGetHero]);case 15:case"end":return e.stop()}}),e,this)}))),function(){return xe.apply(this,arguments)})},{key:"showGuideSynthTip",value:(ke=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(w.Instance.Level>3)){e.next=2;break}return e.abrupt("return");case 2:if(this.isGuideByGuideId(b.Guide_ZhaoMu)){e.next=4;break}return e.abrupt("return");case 4:if(0!=parseInt(localStorage.getItem("Guide_GuideSynthTip")||"0")){e.next=13;break}return e.next=8,this.getUIGuide();case 8:e.sent.showSynthPanel(),f.Instance.sendGuide("合成提示弹窗"),f.Instance.oppoSendEvent(I[I.GuideSynSoldier]),this.TmpGuideId=b.Guide_GuideSynthTip;case 13:case"end":return e.stop()}}),e,this)}))),function(){return ke.apply(this,arguments)})},{key:"guideSynthTip",value:function(){this.TmpGuideId==b.Guide_GuideSynthTip&&(1!=parseInt(localStorage.getItem("Guide_GuideSynthTip")||"0")&&(localStorage.setItem("Guide_GuideSynthTip","1"),this.TmpGuideId=b.None,l.Instance.hideView(o.UIGuide),f.Instance.oppoSendEvent(I[I.GuideSynHero]),this.showHeCheng()))}},{key:"showArmys",value:(Ge=a(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(3==w.Instance.Level){e.next=2;break}return e.abrupt("return");case 2:if(this.isGuideByGuideId(b.Guide_StartGame1)){e.next=4;break}return e.abrupt("return");case 4:if(0!=parseInt(localStorage.getItem("Guide_GuideSynthTip")||"0")){e.next=7;break}return e.abrupt("return");case 7:if(0!=parseInt(localStorage.getItem("Guide_Armys")||"0")){e.next=14;break}return e.next=11,this.getUIGuide();case 11:(r=e.sent).showFinger(t,!0),r.showCaKuTip();case 14:case"end":return e.stop()}}),e,this)}))),function(e){return Ge.apply(this,arguments)})},{key:"guideArmys",value:(me=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(3==w.Instance.Level){e.next=2;break}return e.abrupt("return");case 2:if(1!=parseInt(localStorage.getItem("Guide_Armys")||"0")){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.getUIGuide();case 7:e.sent.hide(),localStorage.setItem("Guide_Armys","1"),f.Instance.sendGuide("上阵引导"),f.Instance.oppoSendEvent(I[I.GuideGoBattleBtn]),this.showShangZhen(t);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return me.apply(this,arguments)})},{key:"showShangZhen",value:(Ie=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(3==w.Instance.Level){e.next=2;break}return e.abrupt("return");case 2:if(!this.isGuideByGuideId(b.ShangZhen)){e.next=4;break}return e.abrupt("return");case 4:return this.TmpGuideId=b.ShangZhen,e.next=7,this.getUIGuide();case 7:e.sent.showCankuPanel(t),f.Instance.sendGuide("点击兵营内士兵上阵");case 10:case"end":return e.stop()}}),e,this)}))),function(e){return Ie.apply(this,arguments)})},{key:"guideShangZhen",value:(fe=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.TmpGuideId==b.ShangZhen){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getUIGuide();case 4:e.sent.hide(),this.guideCompleteByGuideId(b.ShangZhen),g.Instance.pos(h.ShowCloseCangKuGuide),f.Instance.oppoSendEvent(I[I.GuideGoBattle]);case 9:case"end":return e.stop()}}),e,this)}))),function(){return fe.apply(this,arguments)})},{key:"showCloseCangKu",value:(le=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(3==w.Instance.Level){e.next=2;break}return e.abrupt("return");case 2:if(!this.isGuideByGuideId(b.CloseCangKu)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.getUIGuide();case 6:e.sent.showFinger(t,!0),this.TmpGuideId=b.CloseCangKu,f.Instance.sendGuide("点击兵营的关闭按钮");case 10:case"end":return e.stop()}}),e,this)}))),function(e){return le.apply(this,arguments)})},{key:"guideCloseCangKu",value:(ge=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(3==w.Instance.Level){e.next=2;break}return e.abrupt("return");case 2:if(this.TmpGuideId==b.CloseCangKu){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.getUIGuide();case 6:e.sent.hide(),this.guideCompleteByGuideId(b.CloseCangKu),g.Instance.pos(h.GuideZhaoMu1);case 10:case"end":return e.stop()}}),e,this)}))),function(){return ge.apply(this,arguments)})},{key:"showGuideZhaoMu1",value:(he=a(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(3==w.Instance.Level){e.next=2;break}return e.abrupt("return");case 2:if(!this.isGuideByGuideId(b.Guide_ZhaoMu1)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.getUIGuide();case 6:(r=e.sent).showFinger(t,!0),r.showZhaomuTip("Recruit a new soldier"),f.Instance.sendGuide("再次点击抽卡按钮"),this.TmpGuideId=b.Guide_ZhaoMu1;case 11:case"end":return e.stop()}}),e,this)}))),function(e){return he.apply(this,arguments)})},{key:"guideZhaoMu1",value:(pe=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.TmpGuideId==b.Guide_ZhaoMu1){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getUIGuide();case 4:e.sent.hide(),this.guideCompleteByGuideId(b.Guide_ZhaoMu1);case 7:case"end":return e.stop()}}),e,this)}))),function(){return pe.apply(this,arguments)})},{key:"showHeCheng",value:(de=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(w.Instance.Level>3)){e.next=2;break}return e.abrupt("return");case 2:if(this.isGuideByGuideId(b.Guide_GuideSynthTip)){e.next=4;break}return e.abrupt("return");case 4:if(!this.isGuideByGuideId(b.HeCheng)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this.getUIGuide();case 8:e.sent.showHeCheng(101),f.Instance.sendGuide("第一次合成引导"),this.TmpGuideId=b.HeCheng;case 12:case"end":return e.stop()}}),e,this)}))),function(){return de.apply(this,arguments)})},{key:"guideHeCheng",value:(ce=a(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.TmpGuideId==b.HeCheng){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getUIGuide();case 4:e.sent.hide(),setTimeout((function(){t.guideCompleteByGuideId(b.HeCheng),g.Instance.pos(h.GuideStartGame1)}),1e3);case 7:case"end":return e.stop()}}),e,this)}))),function(){return ce.apply(this,arguments)})},{key:"showHeCheng1",value:(oe=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(3==w.Instance.Level){e.next=2;break}return e.abrupt("return");case 2:if(this.isGuideByGuideId(b.HeCheng)){e.next=4;break}return e.abrupt("return");case 4:if(!this.isGuideByGuideId(b.HeCheng1)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this.getUIGuide();case 8:e.sent.showHeCheng(),f.Instance.sendGuide("第二次合成引导"),this.TmpGuideId=b.HeCheng1;case 12:case"end":return e.stop()}}),e,this)}))),function(){return oe.apply(this,arguments)})},{key:"guideHeCheng1",value:(se=a(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.TmpGuideId==b.HeCheng1){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getUIGuide();case 4:e.sent.hide(),setTimeout((function(){g.Instance.pos(h.GuideStartGame3),t.guideCompleteByGuideId(b.HeCheng1)}),1e3);case 7:case"end":return e.stop()}}),e,this)}))),function(){return se.apply(this,arguments)})},{key:"showGuideStartGame3",value:(ie=a(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(w.Instance.Level>3)){e.next=2;break}return e.abrupt("return");case 2:if(!this.isGuideByGuideId(b.Guide_StartGame3)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.getUIGuide();case 6:(r=e.sent).showFinger(t,!0),r.showBattleTip("Let's see the power\nof your new soldiers"),f.Instance.sendGuide("第三次开始"),this.TmpGuideId=b.Guide_StartGame3;case 11:case"end":return e.stop()}}),e,this)}))),function(e){return ie.apply(this,arguments)})},{key:"guideStartGame3",value:(ue=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.TmpGuideId==b.Guide_StartGame3){e.next=2;break}return e.abrupt("return");case 2:l.Instance.hideView(o.UIGuide),this.guideCompleteByGuideId(b.Guide_StartGame3);case 4:case"end":return e.stop()}}),e,this)}))),function(){return ue.apply(this,arguments)})},{key:"showGuideVictoryBox",value:(ae=a(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.isOppo()){e.next=2;break}return e.abrupt("return");case 2:if(!(w.Instance.Level<s.LockPassReward)){e.next=4;break}return e.abrupt("return");case 4:if(0!=parseInt(localStorage.getItem("Guide_Armys")||"0")){e.next=7;break}return e.abrupt("return");case 7:if(0!=parseInt(localStorage.getItem("Guide_VictoryBox")||"0")){e.next=15;break}return e.next=11,this.getUIGuide();case 11:(r=e.sent).showFinger(t,!0),r.showVictoryReward(),f.Instance.sendGuide("点击闯关奖励按钮");case 15:case"end":return e.stop()}}),e,this)}))),function(e){return ae.apply(this,arguments)})},{key:"guideVictoryBox",value:(ne=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.isOppo()){e.next=2;break}return e.abrupt("return");case 2:if(1!=parseInt(localStorage.getItem("Guide_VictoryBox")||"0")){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.getUIGuide();case 7:e.sent.hideFinger(),localStorage.setItem("Guide_VictoryBox","1");case 10:case"end":return e.stop()}}),e,this)}))),function(){return ne.apply(this,arguments)})},{key:"showGuideLevelReward",value:(re=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=parseInt(localStorage.getItem("Guide_GuideLevelReward")||"0")){e.next=7;break}return e.next=4,this.getUIGuide();case 4:e.sent.showFinger(t,!0),f.Instance.sendGuide("点击闯关奖励内第一个奖励");case 7:case"end":return e.stop()}}),e,this)}))),function(e){return re.apply(this,arguments)})},{key:"guideLevelReward",value:(te=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=parseInt(localStorage.getItem("Guide_GuideLevelReward")||"0")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.getUIGuide();case 5:e.sent.hideFinger(),localStorage.setItem("Guide_GuideLevelReward","1");case 8:case"end":return e.stop()}}),e,this)}))),function(){return te.apply(this,arguments)})},{key:"showHomeScene",value:(ee=a(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w.Instance.Level==s.LockHome){e.next=2;break}return e.abrupt("return");case 2:if(0!=parseInt(localStorage.getItem("Guide_HomeScene")||"0")){e.next=10;break}return e.next=6,this.getUIGuide();case 6:(r=e.sent).showFinger(t,!0),r.showHomeTip(),f.Instance.sendGuide("点击家园按钮");case 10:case"end":return e.stop()}}),e,this)}))),function(e){return ee.apply(this,arguments)})},{key:"guideHomeScene",value:($=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=parseInt(localStorage.getItem("Guide_HomeScene")||"0")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.getUIGuide();case 5:e.sent.hideFinger(),localStorage.setItem("Guide_HomeScene","1");case 8:case"end":return e.stop()}}),e,this)}))),function(){return $.apply(this,arguments)})},{key:"showBuildMovePanel",value:(Y=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=parseInt(localStorage.getItem("Guide_BuildMove")||"0")){e.next=7;break}return e.next=4,this.getUIGuide();case 4:e.sent.showBuildMovePanel(),f.Instance.sendGuide("建筑移动提示");case 7:case"end":return e.stop()}}),e,this)}))),function(){return Y.apply(this,arguments)})},{key:"guideBuildMove",value:function(){1!=parseInt(localStorage.getItem("Guide_BuildMove")||"0")&&localStorage.setItem("Guide_BuildMove","1")}},{key:"showBuildBtnGuide",value:(X=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=parseInt(localStorage.getItem("Guide_BuildBtn")||"0")){e.next=7;break}return e.next=4,this.getUIGuide();case 4:e.sent.showBuildingTip(t),f.Instance.sendGuide("点击建造按钮");case 7:case"end":return e.stop()}}),e,this)}))),function(e){return X.apply(this,arguments)})},{key:"guideBuildBtn",value:(Q=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=parseInt(localStorage.getItem("Guide_BuildBtn")||"0")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.getUIGuide();case 5:e.sent.hideFinger(),localStorage.setItem("Guide_BuildBtn","1");case 8:case"end":return e.stop()}}),e,this)}))),function(){return Q.apply(this,arguments)})},{key:"showBuildWall",value:(J=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=parseInt(localStorage.getItem("Guide_BuildWall")||"0")){e.next=8;break}return y.instance.wood+=2e3,e.next=5,this.getUIGuide();case 5:e.sent.showFinger(t,!0),f.Instance.sendGuide("点击弩塔的建造按钮");case 8:case"end":return e.stop()}}),e,this)}))),function(e){return J.apply(this,arguments)})},{key:"guideBuildWall",value:(z=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=parseInt(localStorage.getItem("Guide_BuildWall")||"0")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.getUIGuide();case 5:e.sent.hideFinger(),localStorage.setItem("Guide_BuildWall","1"),k.Instance.buildScessBySid(t),this.showDefenseTip();case 10:case"end":return e.stop()}}),e,this)}))),function(e){return z.apply(this,arguments)})},{key:"showDefenseTip",value:(q=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=parseInt(localStorage.getItem("Guide_DefenseTip")||"0")){e.next=7;break}return e.next=4,this.getUIGuide();case 4:e.sent.showdefenseTip(),f.Instance.sendGuide("点击海盗来了界面的确定按钮");case 7:case"end":return e.stop()}}),e,this)}))),function(){return q.apply(this,arguments)})},{key:"guideDefenseTip",value:(W=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=parseInt(localStorage.getItem("Guide_DefenseTip")||"0")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.getUIGuide();case 5:e.sent.hide(),localStorage.setItem("Guide_DefenseTip","1"),x.Instance.initGuideDefenseEnemys(),w.Instance.GameType=c.Defense;case 10:case"end":return e.stop()}}),e,this)}))),function(){return W.apply(this,arguments)})},{key:"showDefenseSuccessTip",value:(N=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=parseInt(localStorage.getItem("Guide_DefenseTip")||"0")){e.next=3;break}return e.abrupt("return");case 3:if(0!=parseInt(localStorage.getItem("Guide_DefenseSuccessTip")||"0")){e.next=10;break}return e.next=7,this.getUIGuide();case 7:e.sent.showdefenseSuccessTip(),f.Instance.sendGuide("点击守卫成功界面的确定按钮");case 10:case"end":return e.stop()}}),e,this)}))),function(){return N.apply(this,arguments)})},{key:"guideDefenseSuccessTip",value:(j=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=parseInt(localStorage.getItem("Guide_DefenseSuccessTip")||"0")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.getUIGuide();case 5:e.sent.hide(),localStorage.setItem("Guide_DefenseSuccessTip","1"),g.Instance.pos(h.ShowBoatGuide);case 9:case"end":return e.stop()}}),e,this)}))),function(){return j.apply(this,arguments)})},{key:"showBoatBtn",value:(O=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=parseInt(localStorage.getItem("Guide_GuideBackBoat")||"0")){e.next=7;break}return e.next=4,this.getUIGuide();case 4:e.sent.showFinger(t,!0),f.Instance.sendGuide("点击战船按钮");case 7:case"end":return e.stop()}}),e,this)}))),function(e){return O.apply(this,arguments)})},{key:"guideBackBoat",value:(A=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=parseInt(localStorage.getItem("Guide_GuideBackBoat")||"0")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.getUIGuide();case 5:e.sent.hideFinger(),localStorage.setItem("Guide_GuideBackBoat","1");case 8:case"end":return e.stop()}}),e,this)}))),function(){return A.apply(this,arguments)})},{key:"showVictoryBox",value:(K=a(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.Instance.getFirstBoxLevel()+1,w.Instance.Level==r){e.next=3;break}return e.abrupt("return");case 3:if(0!=parseInt(localStorage.getItem("Guide_VictoryBox1")||"0")){e.next=10;break}return e.next=7,this.getUIGuide();case 7:e.sent.showFinger(t,!0),f.Instance.sendGuide("点击胜利宝箱");case 10:case"end":return e.stop()}}),e,this)}))),function(e){return K.apply(this,arguments)})},{key:"guideVictoryBox1",value:(E=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=parseInt(localStorage.getItem("Guide_VictoryBox1")||"0")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.getUIGuide();case 5:e.sent.hideFinger(),localStorage.setItem("Guide_VictoryBox1","1");case 8:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"showVictoryBoxOpen",value:(P=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=parseInt(localStorage.getItem("Guide_VictoryBoxOpen")||"0")){e.next=7;break}return e.next=4,this.getUIGuide();case 4:e.sent.showFinger(t,!0),f.Instance.sendGuide("点击宝箱界面的打开按钮");case 7:case"end":return e.stop()}}),e,this)}))),function(e){return P.apply(this,arguments)})},{key:"guideVictoryBoxOpen",value:(D=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=parseInt(localStorage.getItem("Guide_VictoryBoxOpen")||"0")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.getUIGuide();case 5:e.sent.hideFinger(),localStorage.setItem("Guide_VictoryBoxOpen","1");case 8:case"end":return e.stop()}}),e,this)}))),function(){return D.apply(this,arguments)})},{key:"showKongTouTip",value:(M=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w.Instance.GameType!=c.Defense){e.next=2;break}return e.abrupt("return");case 2:if(w.Instance.Level==s.LockKongTou){e.next=4;break}return e.abrupt("return");case 4:if(0!=parseInt(localStorage.getItem("Guide_KongTouTip")||"0")){e.next=10;break}return e.next=8,this.getUIGuide();case 8:e.sent.showKongTouTip();case 10:case"end":return e.stop()}}),e,this)}))),function(){return M.apply(this,arguments)})},{key:"guideKongTouTip",value:(Z=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=parseInt(localStorage.getItem("Guide_KongTouTip")||"0")){e.next=3;break}return e.abrupt("return");case 3:l.Instance.hideView(o.UIGuide),localStorage.setItem("Guide_KongTouTip","1");case 5:case"end":return e.stop()}}),e)}))),function(){return Z.apply(this,arguments)})},{key:"showBountyTip",value:(F=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.isOppo()){e.next=2;break}return e.abrupt("return");case 2:if(w.Instance.Level==s.LockBounty){e.next=4;break}return e.abrupt("return");case 4:if(0!=parseInt(localStorage.getItem("Guide_BountyTip")||"0")){e.next=10;break}return e.next=8,this.getUIGuide();case 8:e.sent.showBountyTip();case 10:case"end":return e.stop()}}),e,this)}))),function(){return F.apply(this,arguments)})},{key:"guideBountyTip",value:(L=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.isOppo()){e.next=2;break}return e.abrupt("return");case 2:if(1!=parseInt(localStorage.getItem("Guide_BountyTip")||"0")){e.next=5;break}return e.abrupt("return");case 5:l.Instance.hideView(o.UIGuide),localStorage.setItem("Guide_BountyTip","1");case 7:case"end":return e.stop()}}),e)}))),function(){return L.apply(this,arguments)})},{key:"showPVPTip",value:(H=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w.Instance.Level==s.LockPVP){e.next=2;break}return e.abrupt("return");case 2:if(0!=parseInt(localStorage.getItem("Guide_PVP")||"0")){e.next=9;break}return e.next=6,this.getUIGuide();case 6:e.sent.showPVPTip(),f.Instance.sendGuide("点击竞技场按钮");case 9:case"end":return e.stop()}}),e,this)}))),function(){return H.apply(this,arguments)})},{key:"guidePVPTip",value:(V=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=parseInt(localStorage.getItem("Guide_PVP")||"0")){e.next=3;break}return e.abrupt("return");case 3:l.Instance.hideView(o.UIGuide),localStorage.setItem("Guide_PVP","1");case 5:case"end":return e.stop()}}),e)}))),function(){return V.apply(this,arguments)})},{key:"showClickArmys",value:(U=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(y.instance.gold<1e3)){e.next=2;break}return e.abrupt("return");case 2:if(m.Instance.hasCanUpHero()){e.next=4;break}return e.abrupt("return");case 4:if(!y.instance.kongTouIsShow&&!l.Instance.checkViewActive(o.UIKongTou)){e.next=6;break}return e.abrupt("return");case 6:if(0!=parseInt(localStorage.getItem("Guide_ClickArmys")||"0")){e.next=15;break}return l.Instance.checkViewActive(o.UITurntable)&&l.Instance.hideView(o.UITurntable),l.Instance.checkViewActive(o.UIPassReward)&&l.Instance.hideView(o.UIPassReward),e.next=12,this.getUIGuide();case 12:e.sent.showArmyBtnTip(),f.Instance.sendGuide("点击队伍按钮");case 15:case"end":return e.stop()}}),e,this)}))),function(){return U.apply(this,arguments)})},{key:"guideClickArmys",value:(C=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=parseInt(localStorage.getItem("Guide_ClickArmys")||"0")){e.next=3;break}return e.abrupt("return");case 3:l.Instance.hideView(o.UIGuide),localStorage.setItem("Guide_ClickArmys","1");case 5:case"end":return e.stop()}}),e)}))),function(){return C.apply(this,arguments)})},{key:"showClickHeroCard",value:(T=a(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.isOppo()){e.next=2;break}return e.abrupt("return");case 2:if(!y.instance.kongTouIsShow&&!l.Instance.checkViewActive(o.UIKongTou)){e.next=4;break}return e.abrupt("return");case 4:if(0!=parseInt(localStorage.getItem("Guide_ClickArmys")||"0")){e.next=7;break}return e.abrupt("return");case 7:if(0!=parseInt(localStorage.getItem("Guide_ClickHeroCard")||"0")){e.next=15;break}return e.next=11,this.getUIGuide();case 11:(n=e.sent).showSoldierCardItem(t,r),n.showHeroUpTip(),f.Instance.sendGuide("点击能升级的英雄");case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return T.apply(this,arguments)})},{key:"guideClickHeroCard",value:(B=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.isOppo()){e.next=2;break}return e.abrupt("return");case 2:if(0!=parseInt(localStorage.getItem("Guide_ClickArmys")||"0")){e.next=5;break}return e.abrupt("return");case 5:if(1!=parseInt(localStorage.getItem("Guide_ClickHeroCard")||"0")){e.next=8;break}return e.abrupt("return");case 8:l.Instance.hideView(o.UIGuide),localStorage.setItem("Guide_ClickHeroCard","1");case 10:case"end":return e.stop()}}),e)}))),function(){return B.apply(this,arguments)})},{key:"showHeroUpBtn",value:(_=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.isOppo()){e.next=2;break}return e.abrupt("return");case 2:if(!y.instance.kongTouIsShow&&!l.Instance.checkViewActive(o.UIKongTou)){e.next=4;break}return e.abrupt("return");case 4:if(0!=parseInt(localStorage.getItem("Guide_ClickHeroCard")||"0")){e.next=7;break}return e.abrupt("return");case 7:if(0!=parseInt(localStorage.getItem("Guide_HeroUpBtn")||"0")){e.next=14;break}return e.next=11,this.getUIGuide();case 11:e.sent.showFinger(t,!0),f.Instance.sendGuide("点击英雄的升级按钮");case 14:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)})},{key:"guideHeroUp",value:(R=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.isOppo()){e.next=2;break}return e.abrupt("return");case 2:if(0!=parseInt(localStorage.getItem("Guide_ClickHeroCard")||"0")){e.next=5;break}return e.abrupt("return");case 5:if(1!=parseInt(localStorage.getItem("Guide_HeroUpBtn")||"0")){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,this.getUIGuide();case 10:e.sent.hideFinger(),localStorage.setItem("Guide_HeroUpBtn","1");case 13:case"end":return e.stop()}}),e,this)}))),function(){return R.apply(this,arguments)})},{key:"showStoreBtn",value:(S=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.isOppo()){e.next=2;break}return e.abrupt("return");case 2:if(!(w.Instance.Level<s.LockStore)){e.next=4;break}return e.abrupt("return");case 4:if(0!=parseInt(localStorage.getItem("Guide_StoreBtn")||"0")){e.next=11;break}return e.next=8,this.getUIGuide();case 8:e.sent.showStoreTip(),f.Instance.sendGuide("点击商店按钮");case 11:case"end":return e.stop()}}),e,this)}))),function(){return S.apply(this,arguments)})},{key:"guideStoreBtn",value:(v=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.isOppo()){e.next=2;break}return e.abrupt("return");case 2:if(1!=parseInt(localStorage.getItem("Guide_StoreBtn")||"0")){e.next=5;break}return e.abrupt("return");case 5:l.Instance.hideView(o.UIGuide),localStorage.setItem("Guide_StoreBtn","1");case 7:case"end":return e.stop()}}),e)}))),function(){return v.apply(this,arguments)})},{key:"showStoreExchangeBtn",value:(u=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.isOppo()){e.next=2;break}return e.abrupt("return");case 2:if(0!=parseInt(localStorage.getItem("Guide_StoreExchangeBtn")||"0")){e.next=10;break}return g.Instance.pos(h.StoreScrollToExchange),e.next=7,this.getUIGuide();case 7:e.sent.showFinger(t,!0),f.Instance.sendGuide("点击商店神秘兑换免费按钮");case 10:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"guideStoreExchangeBtn",value:function(){i.isOppo()||1!=parseInt(localStorage.getItem("Guide_StoreExchangeBtn")||"0")&&(l.Instance.hideView(o.UIGuide),localStorage.setItem("Guide_StoreExchangeBtn","1"))}},{key:"getUIGuide",value:(t=a(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.Instance.getView(o.UIGuide)){e.next=6;break}return l.Instance.showUILoadlingView(!0),e.next=5,l.Instance.createView(o.UIGuide,d.TOP);case 5:t=e.sent;case 6:return e.abrupt("return",t.getComponent(G));case 7:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}],[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}()).instance=null,u._RF.pop(),e("default",v)}}}));

System.register("chunks:///Data/StoreData.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Constants/Constant.js","../Tools.js","../Core/Event/EventCode.js","../Core/Event/EventBus.js","../Core/View/UIManager.js","./SoldierData.js","./GameData.js","../DataManager.js"],(function(e,t){var a,n,s,r,i,h,o,u,D,l,g,c,I,f,d,v,R;return{setters:[function(e){a=e.createClass,n=e.classCallCheck},function(e){s=e.cclegacy},function(e){r=e.default,i=e.LocalStorageKey,h=e.ViewType,o=e.LayerType,u=e.ExChangeType},function(e){D=e.Tools},function(e){l=e.EventCode},function(e){g=e.default},function(e){c=e.default},function(e){I=e.default},function(e){f=e.default},function(e){d=e.DataManager}],execute:function(){s._RF.push({},"e904e7iawZAR7fX0/23Bbrd","StoreData",void 0),(v=function(){function e(){n(this,e),this.SOLDIERID2_5=[112,107,110,114,115,108],this.SOLDIERID2_5_RD=[35,30,25,20,15,10],this.SOLDIERID6=[114,115,108,202,203,204,205],this.SOLDIERID6_RD=[30,20,10,20,15,10,5],this.exChangeRefreshCount=0}return a(e,[{key:"init",value:function(){this.exChangeRefreshCount=parseInt(localStorage.getItem(i[i.ExChangeRefreshCount])||"10"),d.instance.day!=(new Date).getDate()&&(this.ExChangeRefreshCount=10),this.initExChangeData()}},{key:"rewardSoldierGit",value:function(){for(var e=I.Instance.getDrawSoldiersData(),t=0;t<3;t++){var a=this.getRdSoldierId(e);f.Instance.congratulationsId.add(a),I.Instance.addSoldierById(a)}c.Instance.showView(h.UICongratulations,o.TOP)}},{key:"rewardHeroGit",value:function(){var e=I.Instance.getDrawHeroData(),t=this.getRdSoldierId(e);f.Instance.congratulationsId.add(t),I.Instance.addHeroById(t),c.Instance.showView(h.UICongratulations,o.TOP)}},{key:"getRdSoldierId",value:function(e){for(var t=Math.random(),a=0,n=0;n<e.length;n++)a+=e[n].lucky;var s=new Array;s[0]=e[0].lucky/a;for(var r=1;r<e.length;r++)if(s[r]=s[r-1]+e[r].lucky/a,s[r-1]>=t)return e[r-1].id;return e[e.length-1].id}},{key:"initExChangeData",value:function(){var e=localStorage.getItem(i[i.SotreExChangeData]);if(null==e||null==e||""==e||d.instance.day!=(new Date).getDate())this.refreshExchangeData(!0);else{this.exChangeDatas=new Array;for(var t=JSON.parse(e),a=0;a<t.length;a++)this.exChangeDatas.push(new R(t[a].id,t[a].type,t[a].num,t[a].isReward,t[a].count));this.exChangeDatas.length<6&&this.refreshExchangeData()}}},{key:"refreshExchangeData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.exChangeDatas=new Array;for(var t=0;t<6;t++){var a=void 0,n=Math.random()<.3;if(n&&0!=t&&5!=t){var s=0,i=Math.random(),h=0;i>.5?(h=100,s=200,a=u.DAIMOND):(s=1e3,a=u.VIDEO),e&&0==t&&(a=u.FREE),this.exChangeDatas.push(new R(r.WoodId,a,h,!1,s))}else{var o=101,l=(o=0<t&&t<5?this.getSoldierId2_5():this.getSoldierId6())>200;if(a=this.getExchangeType(l),0==t){var g=I.Instance.getLevelLockSoldiersData(),c=g[D.getRandomInt(0,g.length-1)];o=c.id,e&&(a=u.FREE)}5==t&&(a=u.VIDEO);var f=0;switch(a){case u.GOLD:f=l?3e4:15e3;break;case u.DAIMOND:f=l?150:80}this.exChangeDatas.push(new R(o,a,f,!1))}}this.saveExChangeDatas()}},{key:"getSoldierId2_5",value:function(){for(var e=0,t=0;t<this.SOLDIERID2_5_RD.length;t++)e+=this.SOLDIERID2_5_RD[t];for(var a=D.getRandomInt(0,e),n=0,s=0;s<this.SOLDIERID2_5_RD.length;s++)if(a<=(n+=this.SOLDIERID2_5_RD[s]))return this.SOLDIERID2_5[s];this.SOLDIERID2_5[0]}},{key:"getSoldierId6",value:function(){var e=0,t=[],a=[];if(f.Instance.Level<15)for(var n=0;n<this.SOLDIERID6.length;n++){var s=this.SOLDIERID6[n];s<200&&(t.push(s),a.push(this.SOLDIERID6_RD[n]))}else for(var r=0;r<this.SOLDIERID6.length;r++){var i=this.SOLDIERID6[r];i<200?(t.push(i),a.push(this.SOLDIERID6_RD[r])):I.Instance.getSoldierIsLockById(i)&&(t.push(i),a.push(this.SOLDIERID6_RD[r]))}for(var h=0;h<a.length;h++)e+=a[h];for(var o=D.getRandomInt(0,e),u=0,l=0;l<a.length;l++)if(o<=(u+=a[l]))return t[l]}},{key:"getExchangeType",value:function(e){var t=Math.random();if(e){if(t<=.2)return u.GOLD;if(t<=.9)return u.DAIMOND;if(t<=1)return u.VIDEO}else{if(t<=.3)return u.GOLD;if(t<=.8)return u.DAIMOND;if(t<=1)return u.VIDEO}}},{key:"saveExChangeDatas",value:function(){g.Instance.pos(l.RefreshMenuRedPoint),localStorage.setItem(i[i.SotreExChangeData],JSON.stringify(this.exChangeDatas))}},{key:"ExChangeDatas",get:function(){return this.exChangeDatas}},{key:"ExChangeRefreshCount",get:function(){return this.exChangeRefreshCount},set:function(e){this.exChangeRefreshCount=e,localStorage.setItem(i[i.ExChangeRefreshCount],this.exChangeRefreshCount.toString())}}],[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}()).instance=null,e("StoreExChangeData",R=function e(t,a,s,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;n(this,e),this.count=1,this.id=t,this.type=a,this.num=s,this.isReward=r,this.count=i}),s._RF.pop(),e("default",v)}}}));

System.register("chunks:///Data/PVPData.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Constants/Constant.js","../Tools.js","../Config.js","../Core/Utils/List.js","../Core/Event/EventCode.js","../Core/Event/EventBus.js","./SoldierData.js","./StoreData.js","./GameData.js","../DataManager.js"],(function(t,e){var a,n,o,s,i,r,u,h,p,l,v,f,c,d,g,P,I,V,D,m,C,y;return{setters:[function(t){a=t.createClass,n=t.classCallCheck,o=t.asyncToGenerator},function(t){s=t.cclegacy,i=t.Vec3,r=t.JsonAsset},function(t){u=t.default,h=t.LocalStorageKey,p=t.GameType},function(t){l=t.Tools},function(t){v=t.CUR_PLATFORM,f=t.PLATFORM_TYPE},function(t){c=t.default},function(t){d=t.EventCode},function(t){g=t.default},function(t){P=t.default},function(t){I=t.default},function(t){V=t.default},function(t){D=t.DataManager}],execute:function(){s._RF.push({},"9e862HuDCVOiYWE6kkYov5g","PVPData",void 0),(m=function(){function t(){n(this,t),this.soldiers=[],this.medal=0,this.pvpBoxHeroId=0,this.pvpBoxCount=null,this.posList=null,this.hasHeros=[]}var e,s;return a(t,[{key:"init",value:function(){this.initPvpCfgDatas(),this.medal=parseInt(localStorage.getItem(h[h.PVPMedal])||"0"),this.pvpBoxCount=parseInt(localStorage.getItem(h[h.PvpBoxCount])||"0"),this.refreshPVPCupTime=parseInt(localStorage.getItem(h[h.RefreshPVPCupTime])||"0"),this.soldiers=JSON.parse(localStorage.getItem(h[h.PVPSoldiers])||"[]"),this.initPvpBoxHeroId(),this.initChallengeCount(),this.initPvpVoData()}},{key:"initPvpBoxHeroId",value:function(){var t=this;this.pvpBoxHeroId=parseInt(localStorage.getItem(h[h.PvpBoxHeroId])||"0"),0==this.pvpBoxHeroId&&setTimeout((function(){t.refreshPvpBoxHeroId()}),1e3)}},{key:"refreshPvpBoxHeroId",value:function(){var t=P.Instance.getDrawHeroData();this.pvpBoxHeroId=I.Instance.getRdSoldierId(t),localStorage.setItem(h[h.PvpBoxHeroId],this.pvpBoxHeroId.toString())}},{key:"addMedal",value:function(t){this.Medal+=t,this.Medal>=u.PVPVictoryBoxMedal&&(this.Medal=0,this.addPvpBoxCount(1))}},{key:"addPvpBoxCount",value:function(t){this.pvpBoxCount+=t,g.Instance.checkCode(d.RefreshMenuRedPoint)&&g.Instance.pos(d.RefreshMenuRedPoint),localStorage.setItem(h[h.PvpBoxCount],this.pvpBoxCount.toString())}},{key:"initChallengeCount",value:function(){this.challengeCount=parseInt(localStorage.getItem(h[h.PvpChallengeCount])||u.ChallengeMaxCount.toString()),D.instance.day!=(new Date).getDate()&&(this.ChallengeCount=u.ChallengeMaxCount)}},{key:"initPvpVoData",value:(s=o(regeneratorRuntime.mark((function t(){var e,a,n,o,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=localStorage.getItem(h[h.PVPVoDatas]),this.pvpVoData=new Array,null!=e&&""!=e&&null!=e){t.next=13;break}return t.next=6,l.loadRes("configs/rank",r);case 6:for(a=t.sent,n=a.json,o=0;o<n.length;o++)s=new C(n[o].id,n[o].name,n[o].power,n[o].cup,o+1),this.pvpVoData.push(s);v==f.ANDROID_HAIWAI_ENGLISH||v==f.iOS_HAIWAI_ENGLISH?this.pvpVoData.push(new C(u.SelfId,"Player Name"+l.getRandomInt(1e4,2e4),0,0,n.length+1)):this.pvpVoData.push(new C(u.SelfId,"玩家昵称"+l.getRandomInt(1e4,2e4),0,0,n.length+1)),this.savePvpVoData(),t.next=14;break;case 13:this.pvpVoData=JSON.parse(e);case 14:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"addSelfCup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.getPVPVoDataById(u.SelfId);e.cup+=15*t,this.sortRank()}},{key:"reducdeSelfCup",value:function(){var t=this.getPVPVoDataById(u.SelfId);t.cup-=3,t.cup<0&&(t.cup=0),this.sortRank()}},{key:"refreshCup",value:function(){console.log("refresh cup--------------");for(var t=this.pvpVoData.length,e=0;e<t;e++){var a=l.getRandomInt(e,this.pvpVoData.length-1);this.pvpVoData[a]&&this.pvpVoData[a].id!=u.SelfId&&this.exchange(this.pvpVoData,e,a)}for(var n=0;n<t;n++)this.pvpVoData[n].id!=u.SelfId&&(this.pvpVoData[n].cup-=6,this.pvpVoData[n].cup<0&&(this.pvpVoData[n].cup=0));for(var o=t;o<this.pvpVoData.length;o++)this.pvpVoData[o].id!=u.SelfId&&(this.pvpVoData[o].cup+=15);this.sortRank()}},{key:"exchange",value:function(t,e,a){var n=t[e];t[e]=t[a],t[a]=n}},{key:"sortRank",value:function(){for(var t=this.pvpVoData,e=0;e<t.length;e++){for(var a=e,n=t[e].cup,o=e+1;o<t.length;o++)t[o].cup>n&&(a=o,n=t[o].cup);if(a!=e){var s=t[e];t[e]=t[a],t[a]=s}}for(var i=0;i<this.pvpVoData.length;i++){this.pvpVoData[i].rank=i+1}this.savePvpVoData()}},{key:"savePvpVoData",value:function(){localStorage.setItem(h[h.PVPVoDatas],JSON.stringify(this.pvpVoData))}},{key:"getPVPDatasByStartIndexAndCount",value:function(t,e){var a=e;t+e>this.pvpVoData.length&&(a=this.pvpVoData.length-t);for(var n=new Array,o=0;o<a;o++)n.push(this.pvpVoData[t+o]);return n}},{key:"getPVPVoDataById",value:function(t){for(var e=null,a=0;a<this.pvpVoData.length;a++)if(this.pvpVoData[a].id==t){e=this.pvpVoData[a];break}return e}},{key:"resetRefreshPVPCupTime",value:function(){var t=(new Date).getTime()/1e3;t-this.refreshPVPCupTime>600&&(this.refreshPVPCupTime=t,this.refreshCup(),this.saveRefreshPVPCupTime())}},{key:"saveRefreshPVPCupTime",value:function(){localStorage.setItem(h[h.RefreshPVPCupTime],this.refreshPVPCupTime.toString())}},{key:"getNearPVPVoDataDataByRank",value:function(t,e){var a=[],n=t+15,o=t-15;n>this.pvpVoData.length?o=o+(n=this.pvpVoData.length)-this.pvpVoData.length:o<1&&(n+=1-(o=1));for(var s=[],i=0;i<e;i++){for(var r=void 0;;)if(r=l.getRandomInt(o,n)-1,!this.refreshRepeat(s,r)&&this.pvpVoData[r].id!=u.SelfId){s[i]=r;break}a[i]=this.pvpVoData[r]}return a}},{key:"refreshRepeat",value:function(t,e){for(var a=0;a<t.Length;a++)if(t[a]==e)return!0;return!1}},{key:"startBattle",value:function(){V.Instance.GameType=p.PVP}},{key:"getRdSoldiersById",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.initPosList();var a=this.getPvpCfgDataById(t),n=[],o=a.troopNum;if(e){var s=this.getRdPos(),i=this.getRdPos(),r=this.getRdPos();n.push([3,a.buildLevel-1,s.x,s.z]),n.push([4,a.buildLevel-1,i.x,i.z]),n.push([5,a.buildLevel-1,r.x,r.z])}else o=parseInt(a.troopNum.toString())+3+parseInt(a.buildNum.toString());this.hasHeros=[];for(var u=0;u<a.heroNum;u++){var p=this.getHeroIdByPower(a.power),v=a.troopLevel-1,f=this.getRdPos();n.push([p,v,f.x,f.z])}for(var c=0;c<o;c++){var d=l.getRandomInt(0,a.troopId.length-1),g=a.troopId[d],P=a.troopLevel-1,I=this.getRdPos();n.push([g,P,I.x,I.z])}if(e)for(var V=0;V<a.buildNum;V++){var D=l.getRandomInt(0,a.build.length-1),m=a.build[D];0==V&&(m=6);var C=a.troopLevel-1,y=this.getRdPos();n.push([m,C,y.x,y.z])}return this.soldiers.push({id:t,soldiers:n}),localStorage.setItem(h[h.PVPSoldiers],JSON.stringify(this.soldiers)),n}},{key:"initPosList",value:function(){this.posList=new c;for(var t=-10;t<=10;t+=4)for(var e=-10;e<=10;e+=4)this.posList.add(new i(t,0,e))}},{key:"getRdPos",value:function(){var t=l.getRandomInt(0,this.posList.Count-1),e=this.posList.get(t);return this.posList.removeByIndex(t),e}},{key:"getHeroIdByPower",value:function(t){var e=0;e=t<2e4?l.getRandomInt(201,203):l.getRandomInt(201,205);for(var a=0;a<this.hasHeros.length;a++)if(this.hasHeros[a]==e)return this.getHeroIdByPower(t);return this.hasHeros.push(e),e}},{key:"initPvpCfgDatas",value:(e=o(regeneratorRuntime.mark((function t(){var e,a,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.pvpcfgDatas=new Array,t.next=4,l.loadRes("configs/rank",r);case 4:for(e=t.sent,a=e.json,n=0;n<a.length;n++)o=new y(a[n]),this.pvpcfgDatas.push(o);case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"getPvpCfgDataById",value:function(t){return this.pvpcfgDatas[t]}},{key:"setSelfName",value:function(t){this.getPVPVoDataById(u.SelfId).name=t,this.savePvpVoData()}},{key:"getRdPvpCfgDataByPower",value:function(t){for(var e=Math.floor(t*u.PVPPowerMin),a=Math.floor(t*u.PVPPowerMax),n=[],o=0;o<this.pvpcfgDatas.length;o++){var s=this.pvpcfgDatas[o];s.power<e||(s.power>a||n.push(s))}if(0==n.length)for(var i=0;i<20;i++)n.push(this.pvpcfgDatas[i]);return n[l.getRandomInt(0,n.length-1)]}},{key:"Medal",set:function(t){this.medal=t,localStorage.setItem(h[h.PVPMedal],this.medal.toString())},get:function(){return this.medal}},{key:"PvpBoxCount",get:function(){return this.pvpBoxCount}},{key:"ChallengeCount",get:function(){return this.challengeCount},set:function(t){this.challengeCount=t,localStorage.setItem(h[h.PvpChallengeCount],this.challengeCount.toString())}},{key:"ChallengeId",get:function(){return this.challengeId},set:function(t){this.challengeId=t,this.startBattle()}}],[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new t),this.instance}}]),t}()).instance=null,t("PVPVoData",C=function t(e,a,o,s,i){n(this,t),this.id=e,this.name=a,this.power=parseInt(o.toString()),this.cup=parseInt(s.toString()),this.rank=i}),t("PVPCfgData",y=function(){function t(e){n(this,t),this.configId=0,this.id=e.id,this.name=e.name,this.power=parseInt(e.power),this.cup=parseInt(e.cup),this.troopLevel=e.troopLevel,this.buildNum=e.buildNum,this.buildLevel=e.buildLevel,this.heroNum=e.heroNum,this.troopNum=e.troopNum,this.initTroopId(e.troopId),this.initBuild(e.build)}return a(t,[{key:"initTroopId",value:function(t){var e=t.split(",");this.troopId=[];for(var a=0;a<e.length;a++)this.troopId.push(parseInt(e[a]))}},{key:"initBuild",value:function(t){var e=t.split(",");this.build=[];for(var a=0;a<e.length;a++)this.build.push(parseInt(e[a]))}}]),t}()),s._RF.pop(),t("default",m)}}}));

System.register("chunks:///Data/BattleData.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Core/Constants/Constant.js","../Core/Utils/AudioManager.js","../Tools.js","../Cfg/BattleCfg.js","../Cfg/LevelCfg.js","../Config.js","../Core/Utils/List.js","../Core/Event/EventCode.js","../Core/Event/EventBus.js","../Core/Utils/SendEventManager.js","../Core/Utils/ObjectPool.js","../Soldiers/Bullet/Bullet.js","../Soldiers/Effects/EffectBase.js","./SoldierData.js","../Soldiers/Soldier.js","./GuideData.js","./PVPData.js","./GameData.js","./BountyData.js","../DataManager.js"],(function(e,t){var n,a,r,s,o,i,u,l,c,d,f,p,h,v,I,y,m,g,S,B,b,C,k,w,x,_,E,P,R,A,D,O,L,T,j,M,N,F;return{setters:[function(e){n=e.createClass,a=e.classCallCheck,r=e.asyncToGenerator},function(e){s=e.cclegacy,o=e.Vec3,i=e.Prefab,u=e.instantiate,l=e.tween,c=e.SkeletalAnimationComponent},function(e){d=e.default},function(e){f=e.default,p=e.TeamType,h=e.AudioName,v=e.GameType},function(e){I=e.AudioManager},function(e){y=e.Tools},function(e){m=e.default},function(e){g=e.default},function(e){S=e.default,B=e.BULLET_INFO,b=e.CUR_PLATFORM,C=e.PLATFORM_TYPE},function(e){k=e.default},function(e){w=e.EventCode},function(e){x=e.default},function(e){_=e.default,E=e.EventId},function(e){P=e.default},function(e){R=e.Bullet},function(e){A=e.EffectBase},function(e){D=e.default},function(e){O=e.Soldier},function(e){L=e.default},function(e){T=e.default},function(e){j=e.default},function(e){M=e.default},function(e){N=e.DataManager}],execute:function(){s._RF.push({},"d318b8E4cdOpqFpfNEtlbt5","BattleData",void 0),(F=function(){function e(){a(this,e),this.selectBoatIndex=0,this.ParatroopsMaxCount=3,this.paratroopsCount=3,this.paratroops_t=0,this.paratroops=new o(0,0,0),this.IsSenior=!1,this.senior_paratroopsCount=3,this.senior_ParatroopsMaxCount=3,this.senior_paratroops_t=0,this.battleTime=f.BattleTime,this.isStart=!1,this.BattleLevel=0,this.idArr=new k,this.watchEnemyDatas=new k,this.defenseEnemys=[],this.defenseEnemyName="",this.defenseEnemyPower=0}var t,s,F,G,U,H,Q;return n(e,[{key:"init",value:function(){P.Instance.clearAll(),this.initidArr(),this.watchEnemyDatas.clear()}},{key:"getInBoatArmys",value:function(){for(var e=N.instance.homeInfo,t=[],n=0;n<e.length;n++)null!=e[n].boatMatrix&&0!=e[n].boatMatrix.length&&t.push(e[n]);return t}},{key:"getSoldierHpByIdAndLv",value:function(e,t){for(var n=0;n<S.SOLDIER_INFO.length;n++){var a=S.SOLDIER_INFO[n];if(a.id==e)return t>=a.hp.length&&(t=a.hp.length-1),a.hp[t]}return null}},{key:"getSoldierAttackByIdAndLv",value:function(e,t){console.log(t);for(var n=0;n<S.SOLDIER_INFO.length;n++){var a=S.SOLDIER_INFO[n];if(a.id==e)return t>=a.attack.length&&(t=a.attack.length-1),a.attack[t]}return null}},{key:"getSoldierHpByIdAndLv1",value:function(e,t){for(var n=0;n<S.SOLDIER_INFO.length;n++){var a=S.SOLDIER_INFO[n];if(a.id==e)return t>=a.hp.length&&(t=a.hp.length-1),a.hp[t-1]}return null}},{key:"getSoldierAttackByIdAndLv1",value:function(e,t){for(var n=0;n<S.SOLDIER_INFO.length;n++){var a=S.SOLDIER_INFO[n];if(a.id==e)return t>=a.attack.length&&(t=a.attack.length-1),a.attack[Math.min(0,t-1)]}return null}},{key:"clearSoldier",value:function(){this.blueSoldiers=new k,this.redSoldiers=new k,this.walls=new k}},{key:"addSoldier",value:function(e){e.team==p.Blue?this.blueSoldiers.add(e):this.redSoldiers.add(e)}},{key:"removeSoldier",value:function(e){e.team==p.Blue?this.blueSoldiers.remove(e):this.redSoldiers.remove(e)}},{key:"getSoldiersByTeam",value:function(e){return e==p.Blue?this.blueSoldiers:this.redSoldiers}},{key:"getEnemySoldiersByTeam",value:function(e){return e==p.Blue?this.redSoldiers:this.blueSoldiers}},{key:"createEffects",value:(Q=r(regeneratorRuntime.mark((function e(t,n){var a,r,s,o,l,c,d,f=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=f.length>2&&void 0!==f[2]?f[2]:null,r=f.length>3&&void 0!==f[3]?f[3]:3,s=f.length>4&&void 0!==f[4]?f[4]:null,o=t,null!=(l=P.Instance.get(o))){e.next=11;break}return e.next=8,y.loadRes("prefabs/effects/"+t,i);case 8:c=e.sent,(l=u(c)).name=o;case 11:return null==l.parent&&(null!=a?a.addChild(l):null==l.parent&&j.Instance._BattleScene.effects&&j.Instance._BattleScene.effects.addChild(l)),l.position=n,l.active=!0,(d=l.getComponent(A))&&d.play(r,s),e.abrupt("return",l);case 17:case"end":return e.stop()}}),e)}))),function(e,t){return Q.apply(this,arguments)})},{key:"createBullet",value:(H=r(regeneratorRuntime.mark((function e(t,n,a){var r,s,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=B[t-1],s=r.prefab,null!=(o=P.Instance.get(s))){e.next=9;break}return e.next=6,y.loadRes("prefabs/effects/"+s,i);case 6:l=e.sent,(o=u(l)).name=s;case 9:null==o.parent&&j.Instance._BattleScene.effects&&j.Instance._BattleScene.effects.addChild(o),o.position=n,o.active=!0,o.getComponent(R).init(r,a);case 14:case"end":return e.stop()}}),e)}))),function(e,t,n){return H.apply(this,arguments)})},{key:"hasItemInShip",value:function(t){for(var n=e.Instance.getInBoatArmys(),a=0,r=0;r<n.length;r++){var s=n[r];this.isArmyInShipByMatrix(s.boatMatrix,t)&&a++}return a>0}},{key:"isArmyInShipByMatrix",value:function(e,t){var n,a,r,s,o=0,i=0;return t>0&&(o=t%3,i=Math.floor(t/3)),r=(n=2*o)+1,s=(a=3*i)+2,e[0]>=n&&e[0]<=r&&e[1]>=a&&e[1]<=s}},{key:"getShipIndexByMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.isArmyInShipByMatrix(e,t);return n?t:this.getShipIndexByMatrix(e,++t)}},{key:"getArmysByIndex",value:function(t){for(var n=e.Instance.getInBoatArmys(),a=[],r=n.length-1;r>=0;r--){var s=n[r];this.isArmyInShipByMatrix(s.boatMatrix,t)&&a.push(s)}return a}},{key:"createParatroops",value:(U=r(regeneratorRuntime.mark((function e(t){var n,a,r,s,c,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.IsSenior){e.next=3;break}return this.createSeniorParatroops(t),e.abrupt("return");case 3:if(!(this.paratroopsCount<=0)){e.next=5;break}return e.abrupt("return");case 5:if(null!=t){e.next=7;break}return e.abrupt("return");case 7:return this.paratroops=t.clone(),this.ParatroopsCount--,e.next=11,y.loadRes("prefabs/ballute",i);case 11:return n=e.sent,a=u(n),j.Instance._BattleScene.effects.addChild(a),a.setWorldPosition(new o(t.x,10,t.z)),this.createFlag(t.clone()),r=N.instance.getBarracks(),s=N.instance.getBuildUpInfoById(r.id),c=s.type[0][r.lv]-1,e.next=21,this.createSoldier(101,new o(0,0,0),a,p.Blue,c,!1);case 21:f=e.sent,l(a).to(2.5,{position:new o(t.x,0,t.z)}).call((function(){f.node.position=new o(f.node.position.x,0,f.node.position.z),f.node.setParent(j.Instance._BattleScene.land,!0),setTimeout((function(){f.IsActive=!0,a.active=!1}),0)})).start(),L.Instance.guideKongTouTip(),d.vibration(),x.Instance.pos(w.OnHideBattleShipInfo),_.Instance.sendEvent(E[E.InGame],{name:"关卡内召唤空投兵"}),_.Instance.sendEvent(E[E.useArm]);case 28:case"end":return e.stop()}}),e,this)}))),function(e){return U.apply(this,arguments)})},{key:"createFlag",value:(G=r(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.flag||null==this.flag.parent){e.next=3;break}return this.flag.position=t,e.abrupt("return");case 3:return e.next=5,y.loadRes("prefabs/flag",i);case 5:n=e.sent,a=u(n),j.Instance._BattleScene.effects.addChild(a),a.position=t,this.flag=a;case 10:case"end":return e.stop()}}),e,this)}))),function(e){return G.apply(this,arguments)})},{key:"resetParatroopsCount",value:function(){this.ParatroopsCount=this.ParatroopsMaxCount}},{key:"refreshParatroops_t",value:function(e){this.paratroopsCount!=this.ParatroopsMaxCount&&(this.paratroops_t+=e,this.paratroops_t>3&&(this.paratroops_t=0,this.ParatroopsCount++))}},{key:"resetSeniorParatroopsCount",value:function(){this.SeniorParatroopsCount=this.senior_ParatroopsMaxCount}},{key:"refreshSeniorParatroops_t",value:function(e){this.senior_paratroopsCount!=this.senior_ParatroopsMaxCount&&(this.senior_paratroops_t+=e,this.senior_paratroops_t>3&&(this.senior_paratroops_t=0,this.SeniorParatroopsCount++))}},{key:"createSeniorParatroops",value:(F=r(regeneratorRuntime.mark((function e(t){var n,a,r,s,c,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.senior_paratroopsCount<=0)){e.next=2;break}return e.abrupt("return");case 2:if(null!=t){e.next=4;break}return e.abrupt("return");case 4:return this.paratroops=t.clone(),this.SeniorParatroopsCount--,e.next=8,y.loadRes("prefabs/ballute",i);case 8:return n=e.sent,a=u(n),j.Instance._BattleScene.effects.addChild(a),a.setWorldPosition(new o(t.x,10,t.z)),this.createFlag(t.clone()),r=N.instance.getBarracks(),s=N.instance.getBuildUpInfoById(r.id),c=s.type[0][r.lv]-1,e.next=18,this.createSoldier(112,new o(0,0,0),a,p.Blue,c,!1);case 18:f=e.sent,l(a).to(2.5,{position:new o(t.x,0,t.z)}).call((function(){f.node.position=new o(f.node.position.x,0,f.node.position.z),f.node.setParent(j.Instance._BattleScene.land,!0),setTimeout((function(){f.IsActive=!0,a.active=!1}),0)})).start(),d.vibration(),_.Instance.sendEvent(E[E.InGame],{name:"关卡内召唤投矛兵"}),_.Instance.sendEvent(E[E.useSuperArm]);case 23:case"end":return e.stop()}}),e,this)}))),function(e){return F.apply(this,arguments)})},{key:"createSoldier",value:(s=r(regeneratorRuntime.mark((function e(t,n,a,r,s,l){var h,v,I,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=N.instance.getItemConstInfoByID(t),e.next=3,y.loadRes("prefabs/"+h.prefab+(r==p.Blue?"_blue":"_red"),i);case 3:return v=e.sent,I=u(v),a.addChild(I),d.isQQ&&d.IsIos&&(I.setScale(new o(f.QQRoleScale,f.QQRoleScale,f.QQRoleScale)),I.getComponentInChildren(c).playOnLoad=!1),I.position=n,(m=I.addComponent(O)).init(r,t,s),m.IsActive=l,e.abrupt("return",m);case 12:case"end":return e.stop()}}),e)}))),function(e,t,n,a,r,o){return s.apply(this,arguments)})},{key:"initBattleTime",value:function(){this.isStart=!1,this.battleTime=f.BattleTime}},{key:"startRefreshBattleTime",value:function(){this.isStart||(this.battleTime=f.BattleTime,this.isStart=!0,I.Instance.playOneShot(h.Battle_Start))}},{key:"refreshBattleTime",value:function(e){this.isStart&&(this.battleTime-=e)}},{key:"initidArr",value:function(){for(var e=N.instance.getBoatItems(),t=0;t<e.length;t++){e[t];this.idArr.add(e[t].id)}if(j.Instance.GameType==v.Game){var n=j.Instance.Level;n>100&&(n=y.getRandomInt(80,100)),this.BattleLevel=n;for(var a=g.Instance.getLevelDataByLevel(n),r=m.Instance.getDataByLev(a.id),s=0;s<r.soldiers.length;s++){var o=r.soldiers[s].id;this.addIdArr(o)}}else if(j.Instance.GameType==v.PVP)for(var i=T.Instance.getRdSoldiersById(T.Instance.ChallengeId),u=0;u<i.length;u++){var l=i[u][0];this.addIdArr(l)}else if(j.Instance.GameType==v.Bounty)for(var c=M.Instance.getChallengeLv(),d=m.Instance.getBountyDataById(c),f=0;f<d.soldiers.length;f++){var p=d.soldiers[f].id;this.addIdArr(p)}this.initObject()}},{key:"addIdArr",value:function(e){this.idArr.contains(e)||this.idArr.add(e)}},{key:"initObject",value:function(){for(var e=new k,t=0;t<this.idArr.Count;t++){var n=this.idArr.get(t),a=D.Instance.getSoldierInfoById(n),r=null,s=null;0!=a.bullet&&(r=B[a.bullet-1]),0!=a.skillId&&(s=S.SKILL_IFNO[a.skillId-1]),r&&(e.contains(r.prefab)||e.add(r.prefab),""==r.bomb||e.contains(r.bomb)||e.add(r.bomb)),s&&(e.contains(s.prefab)||e.add(s.prefab),""==s.bomb||e.contains(s.bomb)||e.add(s.bomb))}for(var o=0;o<e.Count;o++)this.addObjectPool(e.get(o))}},{key:"addObjectPool",value:(t=r(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,y.loadRes("prefabs/effects/"+t,i);case 4:for(n=e.sent,a=0;a<50;a++)(r=u(n)).name=t,r.active=!1,P.Instance.push(t,r);case 6:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"addWatchEnemySoldier",value:function(e){this.watchEnemyDatas.contains(e)||this.watchEnemyDatas.add(e)}},{key:"updateWatch",value:function(){for(var e=Math.min(10,this.watchEnemyDatas.Count)-1;e>=0;e--){this.watchEnemyDatas.get(e).watch(),this.watchEnemyDatas.removeByIndex(e)}}},{key:"initDefenseEnemys",value:function(){for(var e=0,t=N.instance.getHomeItems(),n=0;n<t.length;n++){var a=t[n];e+=D.Instance.getPowerById(a.id,a.lv)}for(var r=T.Instance.getRdPvpCfgDataByPower(e),s=T.Instance.getRdSoldiersById(r.id,!1),o=[],i=0;i<s.length;i++){s[i][0]<100||o.push(s[i])}for(var u=0;u<o.length;u++){var l=o[u][0],c=o[u][1];D.Instance.getPowerById(l,c)}this.defenseEnemyName=r.name,this.defenseEnemyPower=r.power;var d=1;0<=r.power&&r.power<5e3?d=1:5e3<=r.power&&r.power<1e4?d=2:1e4<=r.power&&r.power<15e3?d=3:15e3<=r.power&&r.power<25e3?d=4:25e3<=r.power&&r.power<35e3?d=5:35e3<=r.power&&r.power<5e4?d=5:5e4<=r.power&&r.power<1e5?d=5:1e5<=r.power&&r.power<22e4&&(d=6);var f=Math.ceil(o.length/d);f>6&&(f=6);var p=o.length-f*(d-1);p>6&&(p=6);for(var h=[],v=0,I=0;I<d;I++){var y=[],m=f;I==d-1&&(m=p);for(var g=0;g<m;g++){var S=o[v][0],B=o[v][1];y.push({id:S,lv:B,inBoatIndex:g}),v+=1}h.push(y)}this.defenseEnemys=h}},{key:"initGuideDefenseEnemys",value:function(){var e=[];e.push({id:101,lv:0,inBoatIndex:0}),e.push({id:102,lv:0,inBoatIndex:1}),this.defenseEnemys=[e],b==C.ANDROID_HAIWAI_ENGLISH||b==C.iOS_HAIWAI_ENGLISH?this.defenseEnemyName="Commander"+y.getRandomInt(1e4,2e4):this.defenseEnemyName="指挥官"+y.getRandomInt(1e4,2e4),this.defenseEnemyPower=D.Instance.getPowerById(101,0)+D.Instance.getPowerById(102,0)}},{key:"SelectBoatIndex",get:function(){return this.selectBoatIndex},set:function(e){this.selectBoatIndex=e,x.Instance.pos(w.RefreshArmysScroll)}},{key:"ParatroopsCount",get:function(){return this.paratroopsCount},set:function(e){this.paratroopsCount=e,x.Instance.pos(w.OnParatroopsCountChange)}},{key:"SeniorParatroopsCount",get:function(){return this.senior_paratroopsCount},set:function(e){this.senior_paratroopsCount=e,x.Instance.pos(w.OnParatroopsCountChange)}}],[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}()).instance=null,s._RF.pop(),e("default",F)}}}));

System.register("chunks:///Data/GameData.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Core/Constants/Constant.js","../Tools.js","../Cfg/BountyCfg.js","../Cfg/LevelCfg.js","../Config.js","../Core/Utils/List.js","../Core/Event/EventCode.js","../Core/Event/EventBus.js","../Core/View/UIManager.js","../Core/Utils/SendEventManager.js","./PVPData.js","./BattleData.js","./BountyData.js","../DataManager.js"],(function(e,t){var n,i,a,o,s,r,l,c,u,h,f,v,g,d,m,y,I,p,S,w,T,C,B,k,G,L,x,R;return{setters:[function(e){n=e.createClass,i=e.classCallCheck},function(e){a=e.cclegacy,o=e.director,s=e.loader},function(e){r=e.default},function(e){l=e.default,c=e.SceneType,u=e.GameType,h=e.LocalStorageKey,f=e.TeamType,v=e.ViewType,g=e.LayerType},function(e){d=e.Tools},function(e){m=e.default},function(e){y=e.default},function(e){I=e.LEVEL_GIFT,p=e.LOCK_BOAT_LEVEL},function(e){S=e.default},function(e){w=e.EventCode},function(e){T=e.default},function(e){C=e.default},function(e){B=e.default},function(e){k=e.default},function(e){G=e.default},function(e){L=e.default},function(e){x=e.DataManager}],execute:function(){a._RF.push({},"340efj0xMBBV7M+ni/dxLjL","GameData",void 0),(R=function(){function e(){i(this,e),this.IsBebug=!1,this.openEffect=!0,this.openHitEffect=!0,this.openTuoWeiEffect=!0,this.level=1,this._BattleScene=null,this.IsVictory=!1,this.IsGameOver=!1,this.victoryBoxCount=0,this.victoryBoxRewardTime=0,this.menuFuncType=3,this.TmpScene=c.BoatScene,this.gameType=u.None,this.congratulationsId=new S,this.rewardMultiple=[3,2,5,3,2,3,2],this.isFirstShowNoviceGift=!1,this.isFirstShowUISign=!1,this.ChallengeLetterTime=0,this.IsAddPower=!1,this.levelGiftRecieve=[],this.levelGiftTime=0,this.touchCrazyCount=0,this.IsCanCel=!1,this.t=0,this.lodingComplete=!1,this.rewardArr=[0,0,0,0,0]}return n(e,[{key:"refreshTime",value:function(){var e=this.getLevelGiftIndex();-1!=e&&I[e].lev==this.Level&&(this.levelGiftTime=d.getTimeStamp()+l.LevelGiftTime,localStorage.setItem(h[h.LevelGiftTime],this.levelGiftTime.toString()))}},{key:"initLevelGifeRecieve",value:function(){var e=localStorage.getItem(h[h.LevelGifeRecieve]);if(e&&""!=e)this.levelGiftRecieve=JSON.parse(e);else for(var t=0;t<I.length;t++)this.levelGiftRecieve.push(!1)}},{key:"refreshChallengeLetterTime",value:function(){var e=this;this.ChallengeLetterTime>0||(this.ChallengeLetterTime=d.getRandomInt(60,120),setTimeout((function(){e.ChallengeLetterTime=0,T.Instance.pos(w.OnHomeInfoChange),T.Instance.pos(w.RefreshChallengeBtn)}),1e3*this.ChallengeLetterTime))}},{key:"setFirstShowNovice",value:function(){this.isFirstShowNoviceGift=!1,localStorage.setItem(h[h.IsFirstShowNoviceGift],"1")}},{key:"setFirstShowUISign",value:function(){this.isFirstShowUISign=!1,localStorage.setItem(h[h.IsFirstShowUISign],"1")}},{key:"init",value:function(){this.level=parseInt(localStorage.getItem(h[h.GAME_LEVEL])||"1"),this.victoryBoxCount=parseInt(localStorage.getItem(h[h.VictoryBoxCount])||"0"),this.victoryBoxRewardTime=parseInt(localStorage.getItem(h[h.VictoryBoxRewardTime])||"0"),this.isFirstShowNoviceGift=0==parseInt(localStorage.getItem(h[h.IsFirstShowNoviceGift])||"0"),this.isFirstShowUISign=0==parseInt(localStorage.getItem(h[h.IsFirstShowUISign])||"0"),this.levelGiftTime=parseInt(localStorage.getItem(h[h.LevelGiftTime])||"0"),this.initRewardMultiple(),this.refreshChallengeLetterTime(),this.initLevelGifeRecieve()}},{key:"initRewardMultiple",value:function(){if(x.instance.day!=(new Date).getDate())this.rewardMultiple=[3,2,5,3,2,3,2],this.saveRewardMultiple();else{var e=localStorage.getItem(h[h.RewardMultiple]);null!=e&&""!=e&&(this.rewardMultiple=JSON.parse(e))}}},{key:"getRewardMultipleNum",value:function(){for(var e=0;e<this.rewardMultiple.length;e++){var t=this.rewardMultiple[e];if(0!=t)return t}return 2}},{key:"getRewardMultipleRemainCount",value:function(e){for(var t=0,n=0;n<this.rewardMultiple.length;n++){this.rewardMultiple[n]==e&&t++}return t}},{key:"onRewardMultiple",value:function(){for(var e=0;e<this.rewardMultiple.length;e++){if(0!=this.rewardMultiple[e])return this.rewardMultiple[e]=0,void this.saveRewardMultiple()}}},{key:"saveRewardMultiple",value:function(){localStorage.setItem(h[h.RewardMultiple],JSON.stringify(this.rewardMultiple))}},{key:"saveLevel",value:function(){this.refreshTime(),localStorage.setItem(h[h.GAME_LEVEL],this.level.toString())}},{key:"getBoatMatrixLockIndex",value:function(){for(var e=0,t=0;t<p.length;t++)x.instance.getMainHouseLv()>=p[t]&&(e=t);return e}},{key:"getBoatMatrix",value:function(){for(var e=0;e<this.getBoatMatrixLockIndex();e++)x.instance.UnlockBoat[e]=1;localStorage.setItem("UnlockBoat",JSON.stringify(x.instance.UnlockBoat));for(var t=[[3,3,0,0,0,0],[3,3,0,0,0,0],[3,3,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0]],n=JSON.parse(localStorage.getItem("UnlockBoat")),i=0;i<n.length-3;i++)1==n[i]&&(t[0][2*i]=3,t[0][2*i+1]=3,t[1][2*i]=3,t[1][2*i+1]=3,t[2][2*i]=3,t[2][2*i+1]=3);for(var a=3;a<n.length;a++)1==n[a]&&(t[3][2*(a-3)]=3,t[3][2*(a-3)+1]=3,t[4][2*(a-3)]=3,t[4][2*(a-3)+1]=3,t[5][2*(a-3)]=3,t[5][2*(a-3)+1]=3);var o=this.getBoatMatrixLockIndex();console.log("获取由家园等级确定解锁几只船:",o);for(var s=0;s<=o;s++)s<=2?(t[0][2*s]=3,t[0][2*s+1]=3,t[1][2*s]=3,t[1][2*s+1]=3,t[2][2*s]=3,t[2][2*s+1]=3):(t[3][2*(s-3)]=3,t[3][2*(s-3)+1]=3,t[4][2*(s-3)]=3,t[4][2*(s-3)+1]=3,t[5][2*(s-3)]=3,t[5][2*(s-3)+1]=3);return console.log("船只解锁列表：",t),t}},{key:"checkBoatMatrixIsLockByPos",value:function(e,t){return 0!=this.getBoatMatrix()[e][t]}},{key:"checkGameOver",value:function(){if(!this.IsGameOver){var t=G.Instance.getSoldiersByTeam(f.Red);if(e.Instance.GameType!=u.Bounty){for(var n=0,i=0;i<t.Count;i++)3!=t.get(i).id&&4!=t.get(i).id&&5!=t.get(i).id||(n|=t.get(i).id);if(0==(7&n))return void(this.GameType==u.Defense?this.onFail():this.onVictory())}else if(0==G.Instance.getSoldiersByTeam(f.Red).Count)return void this.onVictory();this.GameType==u.Defense?0==G.Instance.getSoldiersByTeam(f.Blue).Count&&this.onVictory():0==G.Instance.getSoldiersByTeam(f.Blue).Count&&-1==G.Instance.SelectBoatIndex&&this.onFail()}}},{key:"gameEndSendEvent",value:function(e){switch(T.Instance.pos(w.OnGameEnd),this.gameType){case u.Game:B.Instance.gameEnd("普通关卡",this.Level,e);break;case u.Bounty:var t=m.Instance.getDataByIndex(L.Instance.SelectIndex);B.Instance.gameEnd("赏金"+t.desc,L.Instance.getChallengeLv(),e);break;case u.PVP:B.Instance.gameEnd("pvp",k.Instance.getPVPVoDataById(l.SelfId).power,e)}}},{key:"onVictory",value:function(){var t=this;if(this.showTTShare(),x.instance.adroid_settlement_count++,this.touchCrazyCount++,this.gameEndSendEvent(!0),this.IsGameOver=!0,this.IsVictory=!0,e.Instance.GameType==u.Game){var n=y.Instance.getLevelDataByLevel(G.Instance.BattleLevel);n.box>0&&this.addVictoryBoxCount(n.box)}setTimeout((function(){if(r.isWx()&&x.instance.WXConfig.touch&&x.instance.WXConfig.kd_box_show_count<t.touchCrazyCount&&x.instance.KdBoxCount<x.instance.WXConfig.kd_box_daily_count)return t.touchCrazyCount=0,C.Instance.showView(v.UICrazyBox),void x.instance.KdBoxCount++;C.Instance.showView(v.UIVictory)}),1500)}},{key:"onFail",value:function(){this.showTTShare(),x.instance.adroid_settlement_count++,this.touchCrazyCount++,this.gameEndSendEvent(!1),this.IsGameOver=!0,this.IsVictory=!1,setTimeout((function(){C.Instance.showView(v.UIVictory)}),1e3)}},{key:"addVictoryBoxCount",value:function(e){this.victoryBoxCount+=e,(e<0||1==this.victoryBoxCount&&1==e)&&this.setVictoryBoxRewardTime(),T.Instance.pos(w.OnVictoryBoxChange),localStorage.setItem(h[h.VictoryBoxCount],this.victoryBoxCount.toString())}},{key:"setVictoryBoxRewardTime",value:function(){this.victoryBoxRewardTime=(new Date).getTime()+1e3*l.VictoryBoxRewardTime,localStorage.setItem(h[h.VictoryBoxRewardTime],this.victoryBoxRewardTime.toString())}},{key:"getOpenVictoryBoxReduceTime",value:function(){var e=(this.victoryBoxRewardTime-(new Date).getTime())/1e3,t=Math.max(0,e);return Math.floor(t)}},{key:"getOpenVictortBoxDiamondCount",value:function(){return Math.floor(this.getOpenVictoryBoxReduceTime()/60*20)}},{key:"OnGameTypeChange",value:function(){switch(this.gameType){case u.Game:B.Instance.gameStart("普通关卡",this.Level),this.IsGameOver=!1,this.loadScene();break;case u.Bounty:var e=m.Instance.getDataByIndex(L.Instance.SelectIndex);B.Instance.gameStart("赏金"+e.desc,L.Instance.getChallengeLv()),this.IsGameOver=!1,this.loadScene();break;case u.PVP:B.Instance.gameStart("pvp",k.Instance.getPVPVoDataById(l.SelfId).power),this.IsGameOver=!1,this.loadScene();break;case u.Defense:B.Instance.gameStart("防守战",this.Level),this.IsGameOver=!1,this.loadScene()}this.refreshReward()}},{key:"loadScene",value:function(){var e=this;this.IsCanCel=!1,G.Instance.init(),this.loadPassReweadRes(),C.Instance.showView(v.UIBattleLoading,g.TOP),setTimeout((function(){o.preloadScene("BattleScene",(function(){setTimeout((function(){e.IsCanCel||(e.t=0,e.changeScene())}),1e3)}))}),500)}},{key:"changeScene",value:function(){var e=this;if(!this.lodingComplete&&this.t<8)return this.t+=1,void setTimeout((function(){e.changeScene()}),0);C.Instance.checkViewActive(v.UIBattleLoading)&&d.cleanUnuseRes(),o.loadScene("BattleScene")}},{key:"loadPassReweadRes",value:function(){for(var e=this,t=["prefabs/effects/death_blue","prefabs/effects/death_red","prefabs/effects/buildBomb","prefabs/ship","prefabs/solider0_blue","prefabs/solider0_red","prefabs/item0_red","prefabs/wall","prefabs/effects/cikeFlash","prefabs/effects/hit_exp"],n=0,i=0;i<t.length;i++)s.loadRes(t[i],null,null,null,(function(){++n==t.length&&(e.lodingComplete=!0)}))}},{key:"getLevelGiftIndex",value:function(){for(var e=-1,t=0;t<I.length;t++)this.Level>=I[t].lev&&(e=t);return-1==e?-1:this.levelGiftRecieve[e]?-1:e}},{key:"getLevelGiftTime",value:function(){var e=this.levelGiftTime-d.getTimeStamp();return Math.max(0,e)}},{key:"setLevelGiftRecieve",value:function(){var e=this.getLevelGiftIndex();-1!=e&&(this.levelGiftRecieve[e]=!0,localStorage.setItem(h[h.LevelGifeRecieve],JSON.stringify(this.levelGiftRecieve)))}},{key:"showTTShare",value:function(){r.isTT&&(r.stopRecorderManager(),this.Level>=5&&C.Instance.showView(v.UIShare,g.TOP))}},{key:"refreshReward",value:function(){if(e.Instance.GameType==u.Game){var t=Math.floor(x.instance.getZhaomuMoneyCount()*d.getRandomInt(25,35)/100),n=y.Instance.getLevelDataByLevel(G.Instance.BattleLevel);this.rewardArr=[t,n.wood,n.medal,n.gem,0]}else if(e.Instance.GameType==u.Bounty){var i=L.Instance.getRewardData();this.rewardArr=[i[0],i[2],0,i[1],0]}else if(e.Instance.GameType==u.PVP){var a=Math.floor(x.instance.getZhaomuMoneyCount()*d.getRandomInt(25,35)/100);this.rewardArr=[a,0,1,5,15]}else if(e.Instance.GameType==u.Defense){var o=Math.floor(x.instance.getZhaomuMoneyCount()*d.getRandomInt(15,25)/100);this.rewardArr=[o,100,2,0,0]}}},{key:"RewardMultiple",get:function(){return this.rewardMultiple}},{key:"Level",get:function(){return this.level},set:function(e){this.level=e,this.saveLevel()}},{key:"VictoryBoxCount",get:function(){return this.victoryBoxCount}},{key:"GameType",get:function(){return this.gameType},set:function(e){this.gameType=e,this.OnGameTypeChange()}},{key:"RewardData",get:function(){return this.rewardArr}}],[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}()).instance=null,a._RF.pop(),e("default",R)}}}));

System.register("chunks:///Data/BountyData.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Constants/Constant.js","../Cfg/BountyCfg.js","./GameData.js","../DataManager.js"],(function(e,t){var n,a,l,r,s,c,i,u,h;return{setters:[function(e){n=e.createClass,a=e.classCallCheck},function(e){l=e.cclegacy},function(e){r=e.LocalStorageKey,s=e.GameType},function(e){c=e.default},function(e){i=e.default},function(e){u=e.DataManager}],execute:function(){l._RF.push({},"ff603+RODVAF7WfUL5PZgJF","BountyData",void 0),(h=function(){function e(){a(this,e)}return n(e,[{key:"init",value:function(){var e=localStorage.getItem(r[r.BountyChallegeArr]);""==e||u.instance.day!=(new Date).getDate()?this.resetChallegeArr():this.challegeArr=JSON.parse(e)}},{key:"resetChallegeArr",value:function(){this.challegeArr=new Array;for(var e=c.Instance.getBountyDatas(),t=0;t<e.length;t++)this.challegeArr.push([e[t].id,0]);this.saveChallengeData()}},{key:"saveChallengeData",value:function(){localStorage.setItem(r[r.BountyChallegeArr],JSON.stringify(this.challegeArr))}},{key:"getChellengeCountById",value:function(e){for(var t=0;t<this.challegeArr.length;t++)if(this.challegeArr[t][0]==e)return this.challegeArr[t][1];return 0}},{key:"onSelectIndexChange",value:function(){i.Instance.GameType=s.Bounty}},{key:"getRewardData",value:function(){var t=this.getChellengeCountById(this.selectIndex);return c.Instance.getDataByIndex(e.Instance.SelectIndex).rewardNum[t%5]}},{key:"getChallengeLv",value:function(){var t=this.getChellengeCountById(this.selectIndex);return c.Instance.getDataByIndex(e.Instance.SelectIndex).config[t%5]}},{key:"addChellengeCount",value:function(){for(var e=0;e<this.challegeArr.length;e++)if(this.challegeArr[e][0]==this.selectIndex){this.challegeArr[e][1]+=1;break}console.log(this.challegeArr),this.saveChallengeData()}},{key:"SelectIndex",get:function(){return this.selectIndex},set:function(e){this.selectIndex=e,this.onSelectIndexChange()}}],[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}()).instance=null,l._RF.pop(),e("default",h)}}}));

System.register("chunks:///Data/PassRewardData.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Constants/Constant.js","../Cfg/PassRewardCfg.js","../DataManager.js"],(function(a,t){var e,r,n,s,i,d,u;return{setters:[function(a){e=a.createClass,r=a.classCallCheck},function(a){n=a.cclegacy},function(a){s=a.LocalStorageKey},function(a){i=a.default},function(a){d=a.DataManager}],execute:function(){n._RF.push({},"dc2c5z4ouRCSYdfwyYH4ziK","PassRewardData",void 0),(u=function(){function a(){r(this,a)}return e(a,[{key:"init",value:function(){this.rewardData=JSON.parse(localStorage.getItem(s[s.PassRewardArr])||"[]")}},{key:"getIsRewardByIdAndIsVideo",value:function(a,t){for(var e=0;e<this.rewardData.length;e++){var r=this.rewardData[e];if(r[0]==a)return t?1==r[1]:1==r[2]}return!1}},{key:"setRewardDataByIdAndIsVideo",value:function(a,t){for(var e=0;e<this.rewardData.length;e++){var r=this.rewardData[e];if(r[0]==a)return t?r[1]=1:r[2]=1,void this.saveRewardData()}t?this.rewardData.push([a,1,0]):this.rewardData.push([a,0,1]),this.saveRewardData()}},{key:"saveRewardData",value:function(){localStorage.setItem(s[s.PassRewardArr],JSON.stringify(this.rewardData))}},{key:"hasRewardData",value:function(){for(var a=i.Instance.getRwardData(),t=0;t<a.length;t++){var e=a[t],r=this.getIsRewardByIdAndIsVideo(e.id,!1)&&this.getIsRewardByIdAndIsVideo(e.id,!0);if(e.id<=Math.floor(d.instance.medal/10)&&!r)return!0}return!1}}],[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new a),this.instance}}]),a}()).instance=null,n._RF.pop(),a("default",u)}}}));

System.register("chunks:///Data/SignInData.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Constants/Constant.js","../Config.js","../Core/Event/EventCode.js","../Core/Event/EventBus.js","../Core/View/UIManager.js","./SoldierData.js","./GameData.js","../DataManager.js"],(function(n,t){var e,i,a,o,s,u,g,r,c,I,l,h,C,y,d,S;return n("SignInType",void 0),{setters:[function(n){e=n.createClass,i=n.classCallCheck},function(n){a=n.cclegacy},function(n){o=n.LocalStorageKey,s=n.RewardType,u=n.ViewType,g=n.LayerType},function(n){r=n.SIGNIN_INFO},function(n){c=n.EventCode},function(n){I=n.default},function(n){l=n.default},function(n){h=n.default},function(n){C=n.default},function(n){y=n.DataManager}],execute:function(){a._RF.push({},"c499f5ND99Ht7cT0KiKwv7g","SignInData",void 0),(d=function(){function n(){i(this,n),this.addMasonry=100,this.addCoin=1e3,this.loopCount=7,this.rewardCount=0}return e(n,[{key:"init",value:function(){this.initDay(),this.initSignInCount(),this.rewardCount=parseInt(localStorage.getItem(o[o.SignInRewardCount])||"0"),y.instance.day!=(new Date).getDate()&&this.setRewardCount(0)}},{key:"setRewardCount",value:function(n){this.rewardCount=n,localStorage.setItem(o[o.SignInRewardCount],this.rewardCount.toString())}},{key:"initSignInCount",value:function(){var n=localStorage.getItem(o[o.SignInCount]);this.signInCount=null==n||null==n||""==n?0:parseInt(n),this.signInCount=this.getSignInedCount()}},{key:"initDay",value:function(){var n=localStorage.getItem(o[o.SignInDay]);this.signInDay=null==n||null==n||""==n?0:parseInt(n)}},{key:"onSignInCountChange",value:function(){localStorage.setItem(o[o.SignInCount],this.signInCount.toString())}},{key:"getNowDayData",value:function(){return r[this.getNowDay()-1]}},{key:"onSignInDayChange",value:function(){localStorage.setItem(o[o.SignInDay],this.signInDay.toString())}},{key:"getNowDay",value:function(){return this.signInDay!=(new Date).getDate()?this.signInCount+1:this.signInCount}},{key:"getIsSignInedByDay",value:function(n){return this.getNowDay()>n||this.signInCount==n&&this.signInDay==(new Date).getDate()}},{key:"getNowDataSignIned",value:function(){return this.signInDay==(new Date).getDate()}},{key:"addSignInCount",value:function(){this.SignInCount==this.loopCount?this.SignInCount=1:this.SignInCount++}},{key:"getSignInedCount",value:function(){return this.signInCount!=this.loopCount||this.getNowDataSignIned()?this.signInCount:0}},{key:"sign",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.getNowDayData(),e=t.num*n;switch(t.type){case s.COIN:y.instance.gold+=e;break;case s.MASONRY:y.instance.diamond+=e;break;case s.Soldier:case s.Hero:this.rewardSoldier(t.rewardId,e)}this.SignInDay=(new Date).getDate(),0==this.rewardCount&&this.addSignInCount(),this.setRewardCount(this.rewardCount+n),I.Instance.pos(c.OnHomeInfoChange)}},{key:"rewardSoldier",value:function(n,t){for(var e=0;e<t;e++)h.Instance.addCardById(n),C.Instance.congratulationsId.add(n);l.Instance.showView(u.UICongratulations,g.TOP)}},{key:"SignInCount",get:function(){return this.signInCount},set:function(n){this.signInCount=n,this.onSignInCountChange()}},{key:"SignInDay",get:function(){return this.signInDay},set:function(n){this.signInDay=n,this.onSignInDayChange()}}],[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new n),this.instance}}]),n}()).instance=null,n("SigInVoData",(function n(t,e,a,o){i(this,n),this.day=t,this.type=e,this.count=a,this.skin=o})),function(n){n[n.Coin=0]="Coin",n[n.Masonry=1]="Masonry",n[n.Car=2]="Car",n[n.Arms=3]="Arms"}(S||n("SignInType",S={})),a._RF.pop(),n("default",d)}}}));

System.register("chunks:///Data/TurntableData.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Constants/Constant.js","../Cfg/TurntableCfg.js","../Core/View/UIManager.js","./SoldierData.js","./GameData.js","../DataManager.js"],(function(e,t){var a,n,r,s,o,i,u,c,l,d,h,f,I;return{setters:[function(e){a=e.createClass,n=e.classCallCheck},function(e){r=e.cclegacy},function(e){s=e.default,o=e.LocalStorageKey,i=e.ViewType,u=e.LayerType},function(e){c=e.default},function(e){l=e.default},function(e){d=e.default},function(e){h=e.default},function(e){f=e.DataManager}],execute:function(){r._RF.push({},"d0135hBkahO4IvrWZ7vOM+s","TurntableData",void 0),(I=function(){function e(){n(this,e),this.lucky=0,this.boxIsReward=[0,0,0,0,0],this.boxLuckyArr=[3,6,10,15,20],this.boxReward=[[115,1],[108,2],[201,2],[202,3],[203,4]]}return a(e,[{key:"init",value:function(){this.t=parseFloat(localStorage.getItem(o[o.TurntableTime])||"0"),this.boxT=parseFloat(localStorage.getItem(o[o.TurntableBoxTime])||"0"),0==this.boxT&&this.refreshBoxT(),this.lucky=parseInt(localStorage.getItem(o[o.TurntableLucky])||"0");var e=localStorage.getItem(o[o.TurntableBoxReward]);null!=e&&""!=e&&(this.boxIsReward=JSON.parse(e))}},{key:"refreshBoxIsReward",value:function(){this.boxIsReward=[0,0,0,0,0],this.saveBoxIsReward()}},{key:"saveBoxIsReward",value:function(){localStorage.setItem(o[o.TurntableBoxReward],JSON.stringify(this.boxIsReward))}},{key:"refreshT",value:function(){this.t=(new Date).getTime()/1e3+s.TurntableTime,localStorage.setItem(o[o.TurntableTime],this.t.toString())}},{key:"refreshBoxT",value:function(){this.boxT=(new Date).getTime()/1e3+s.TurntableBoxTime,localStorage.setItem(o[o.TurntableBoxTime],this.boxT.toString())}},{key:"getReduceTime",value:function(){var e=this.t-Math.floor((new Date).getTime()/1e3);return Math.max(0,e)}},{key:"getReduceBoxTime",value:function(){var e=this.boxT-Math.floor((new Date).getTime()/1e3);return Math.max(0,e)}},{key:"refreshLucky",value:function(){this.getReduceBoxTime()<=0&&(this.Lucky=0,this.refreshBoxT(),this.refreshBoxIsReward())}},{key:"getBoxIsRewardById",value:function(e){return 1==this.boxIsReward[e]}},{key:"rewardBoxById",value:function(e){this.boxIsReward[e]=1;for(var t=this.boxReward[e][0],a=this.boxReward[e][1],n=0;n<a;n++)d.Instance.addCardById(t),h.Instance.congratulationsId.add(t);l.Instance.showView(i.UICongratulations,u.TOP),this.saveBoxIsReward()}},{key:"rewardById",value:function(e){var t=c.Instance.getDataById(e);switch(this.Lucky+=1,t.rewardType){case 0:f.instance.gold+=t.rewardNum;break;case 1:f.instance.diamond+=t.rewardNum;break;case 2:f.instance.wood+=t.rewardNum;break;default:for(var a=0;a<t.rewardNum;a++)d.Instance.addCardById(t.rewardId),h.Instance.congratulationsId.add(t.rewardId);l.Instance.showView(i.UICongratulations,u.TOP)}}},{key:"Lucky",get:function(){return this.lucky},set:function(e){this.lucky=e,localStorage.setItem(o[o.TurntableLucky],this.lucky.toString())}}],[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}()).instance=null,r._RF.pop(),e("default",I)}}}));

System.register("chunks:///DataManager.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Core/Utils/PlatformUtils.js","./Core/Constants/Constant.js","./Tools.js","./Cfg/BattleCfg.js","./Cfg/BountyCfg.js","./Cfg/LevelCfg.js","./Cfg/PassRewardCfg.js","./Cfg/TurntableCfg.js","./Config.js","./Core/Event/EventCode.js","./Core/Event/EventBus.js","./Core/View/UIManager.js","./Core/AdUitls/AdManager.js","./Core/Utils/AndroidUtils.js","./Core/Utils/FileStream.js","./Data/SoldierData.js","./Data/BuildData.js","./Data/StoreData.js","./Data/PVPData.js","./Data/GameData.js","./Data/BountyData.js","./Data/PassRewardData.js","./Data/SignInData.js","./Data/TurntableData.js"],(function(t,e){var o,i,n,a,s,r,h,d,l,u,c,f,g,_,m,v,I,C,T,k,y,S,p,w,x,O,b,R,D,Q,A,V,N,G,W,q,B,L,K,M,E,j,X,F,U;return t({_dec:void 0,_class:void 0,_class2:void 0,_temp:void 0}),{setters:[function(t){o=t.createClass,i=t.classCallCheck,n=t.asyncToGenerator},function(t){a=t.cclegacy,s=t._decorator,r=t.loader,h=t.director,d=t.JsonAsset},function(t){l=t.default},function(t){u=t.default,c=t.RewardType,f=t.LocalStorageKey,g=t.ViewType,_=t.LayerType},function(t){m=t.Tools},function(t){v=t.default},function(t){I=t.default},function(t){C=t.default},function(t){T=t.default},function(t){k=t.default},function(t){y=t.default,S=t.CARD_PRICE,p=t.BUILDING_INFO,w=t.BUILDUP_INFO,x=t.HOME_MATRIX},function(t){O=t.EventCode},function(t){b=t.default},function(t){R=t.default},function(t){D=t.default},function(t){Q=t.default},function(t){A=t.default},function(t){V=t.default},function(t){N=t.default},function(t){G=t.default},function(t){W=t.default},function(t){q=t.default},function(t){B=t.default},function(t){L=t.default},function(t){K=t.default},function(t){M=t.default}],execute:function(){a._RF.push({},"7a506RzudZMbIQv5KV/DsqB","DataManager",void 0),U=s.ccclass,s.property,t("DataManager",(E=U("DataManager"),E((F=X=function(){function t(){i(this,t),this._day=-100,this.cheatOpen=!0,this.homeInfo=[],this._sidCounter=0,this._gold=0,this._wood=100,this._medal=0,this._diamond=0,this._zhaomuTimes=0,this.videoCount=0,this.noviceReceiveCount=0,this.isRewardNoviceGift=0,this.dailyWoodCount=0,this.dailyGoldCount=0,this.dailyDaimondCount=0,this.quality=1,this.kongtouRecieveCount=0,this.kongtouRecieveDatas={id:101,type:c.COIN,count:1},this.kongTouIsShow=!1,this.offLineTime=0,this.showCollectCount=0,this.IsShowCollect=!1,this.isShare=!1,this.kdBoxCount=0,this.IsScelectMainHouse=!1,this.KONGTOUCFG={wood1:2e3,wood2:4e3,wood_rd1:.35,wood_rd2:.25,wood_rd3:.18,addwood:1e3,gold_rd1:.25,gold_rd2:.15,addGold:3,SOLDIERID:[105,106,110,113,114,115,109,111,107,112,108,201,202,203,204,205],SOLDIERID_RD:[40,30,30,10,20,20,30,10,30,20,10,45,30,20,10,5]},this.WXConfig={touch:!0,sceneIds:"1045,1046,1048,1037,1095,1007,1008",area:!1,rate_settlement:.2,rate_pass_level:.5,rate_home:0,rate_draw:.1,rate_store:0,rate_truntable:0,rate_sign:1,rate_gold:.5,rate_daimond:.5,rate_wood:.5,rate_airdrop:.5,video_time:30,start_level:5,rate_kd_box:1,rate_kd_box_video:.5,kd_box_show_count:5,kd_box_daily_count:10,kt_show_dration:60,"1.0.1":!0,"1.0.2":!0,"1.0.3":!0},this.WX_VERSION="1.0.3",this.wxVideoTouchTime=0,this.wxSceneId=-1,this.configloadComplete=!1,this.oppoAdConfig={native_report:60,native_close_jump:0,normal_btn_show_native:0,normal_btn_delay_show_second:0,native_word_change:0,native_refresh_time:20,banner_refresh_time:30,"2.0.1":!0,"2.0.2":!0,"2.0.3":!0,"2.0.4":!0,"2.0.5":!0},this.OPPO_VERSION="2.0.5",this.vivoAdConfig={enable:!0,native_report:60,native_close_jump:0,normal_btn_show_native:0,normal_btn_delay_show_second:0,native_word_change:0,native_refresh_time:20,banner_refresh_time:30,rate_Interstitial:.5,"1.0.0":!0},this.VIVO_VERSION="1.0.0",this.resArr=["configs/bounty","configs/level","configs/oppolevel","configs/passReward","configs/battle","configs/bountyBattle","configs/pvpBattle","configs/wall","ui/UIGuide"],this.progress=0,this.onClickOne=0,this.AndroidConfig={touch:!0,area:"北京,天津",video_time_min:30,video_time_max:50,settlement_level:5,rate_settlement:1,rate_gold:.5,rate_daimond:.5,rate_wood:.5,rate_airdrop:.5,rate_draw:.1,rate_truntable:.2,rate_sign:1,rate_store_refresh:.5,rate_victory_box:.5,start_level:5,kt_show_dration:120,"1.0.1":!0},this.adroid_settlement_count=0,this.ANDROID_VERSION="1.0.1",this.androidVideoTouchTime=this.AndroidConfig.video_time_min,this.tmpAndroidVideoTouchTime=0,this.nativeRewardVideoSuccessCB=null,this.nativeRewardVideoFailedCB=null,this.nativeInterstitialCB=null,this.nativeInterstitialFailCB=null,this.QQConfig={touch:!0,area:!1,rate_settlement:.2,rate_pass_level:.5,rate_home:0,rate_draw:.1,rate_store:0,rate_truntable:0,rate_sign:1,rate_gold:.5,rate_daimond:.5,rate_wood:.5,rate_airdrop:.5,video_time:30,start_level:5,rate_kd_box:1,rate_kd_box_video:.5,kd_box_show_count:5,kd_box_daily_count:10,kt_show_dration:60,"1.0.0":!0},this.QQ_VERSION="1.0.0",this.qqVideoTouchTime=0,this.qqSceneId=-1,this.TTConfig={touch:!1,area:!1,rate_settlement_Interstitial:.5,rate_settlement:.2,rate_pass_level:.5,rate_home:0,rate_draw:.1,rate_store:0,rate_truntable:0,rate_sign:1,rate_gold:.5,rate_daimond:.5,rate_wood:.5,rate_airdrop:.5,video_time:30,start_level:5,rate_kd_box:1,rate_kd_box_video:.5,kd_box_show_count:5,kd_box_daily_count:10,kt_show_dration:60,share_gold:.5,share_daimond:10,"1.0.0":!0},this.TT_VERSION="1.0.0",this.ttVideoTouchTime=0,this.ttSceneId=-1,this.kongTouShowTime=0,t._instance=this,this.init()}var e,a,s,E,j,X,F,U;return o(t,null,[{key:"instance",get:function(){return t._instance||new t,window.DataManager=t._instance,t._instance}}]),o(t,[{key:"rewardNoviceGift",value:function(){this.isRewardNoviceGift=1,localStorage.setItem("IsRewardNoviceGift","1")}},{key:"initKONGTOUCFG",value:(U=n(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=8;break;case 4:e=t.sent,this.KONGTOUCFG=e,t.next=8;break;case 8:case"end":return t.stop()}}),t,this)}))),function(){return U.apply(this,arguments)})},{key:"initWxCfg",value:(F=n(regeneratorRuntime.mark((function t(){var e,o,i,n,a,s,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l.isWx()){t.next=2;break}return t.abrupt("return");case 2:return e="https://qibzhgdl.leiting.com/islandwar_wx_configs_1.json?r="+m.getRandomInt(0,99999),o="wx",t.next=6,m.HttpGET(e);case 6:if(!(i=t.sent)){t.next=49;break}if(console.log(o+" config",JSON.stringify(i)),this.WXConfig.touch=i.touch,this.WXConfig.sceneIds=i.sceneIds,this.WXConfig.area=i.area,this.WXConfig.rate_settlement=i.rate_settlement,this.WXConfig.rate_pass_level=i.rate_pass_level,this.WXConfig.rate_home=i.rate_home,this.WXConfig.rate_draw=i.rate_draw,this.WXConfig.rate_store=i.rate_store,this.WXConfig.rate_truntable=i.rate_truntable,this.WXConfig.rate_sign=i.rate_sign,this.WXConfig.rate_gold=i.rate_gold,this.WXConfig.rate_daimond=i.rate_daimond,this.WXConfig.rate_wood=i.rate_wood,this.WXConfig.rate_airdrop=i.rate_airdrop,this.WXConfig.video_time=i.video_time,this.WXConfig.start_level=i.start_level,this.WXConfig.rate_kd_box=i.rate_kd_box,this.WXConfig.rate_kd_box_video=i.rate_kd_box_video,this.WXConfig.kd_box_show_count=i.kd_box_show_count,this.WXConfig.kd_box_daily_count=i.kd_box_daily_count,this.WXConfig.kt_show_dration=i.kt_show_dration,this.WXConfig[this.WX_VERSION]=i[this.WX_VERSION],this.WXConfig.touch&&(this.WXConfig.touch=this.WXConfig.touch&&this.WXConfig[this.WX_VERSION]),!this.WXConfig.touch){t.next=46;break}n=this.WXConfig.sceneIds.split(","),a=!1,s=0;case 36:if(!(s<n.length)){t.next=45;break}if(r=n[s],parseInt(r)!=this.wxSceneId){t.next=42;break}return a=!0,console.log("场景值开启误触!"),t.abrupt("break",45);case 42:s++,t.next=36;break;case 45:this.WXConfig.touch=a;case 46:console.log(this.wxSceneId,this.WXConfig.touch),t.next=50;break;case 49:console.error(o+"配置文件读取错误");case 50:case"end":return t.stop()}}),t,this)}))),function(){return F.apply(this,arguments)})},{key:"showWxTouch",value:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t.IsDebug)return!1;if(!l.isWx())return!1;if(q.Instance.Level<this.WXConfig.start_level)return!1;if(this.wxVideoTouchTime<this.WXConfig.video_time)return!1;if(this.wxVideoTouchTime=0,!t.instance.WXConfig.touch)return!1;var n=!1;return e>0&&Math.random()<=e&&(n=!0,this.wxVideoTouchTime=0,D.createVideo((function(){o&&o()}),(function(){i&&i()}))),n}},{key:"initWxData",value:function(){if(l.isWx()){var t=localStorage.getItem("WxSceneId");null!=t&&""!=t?this.wxSceneId=parseInt(t):(this.wxSceneId=wx.getLaunchOptionsSync().scene,console.log("init scene id : "+this.wxSceneId),localStorage.setItem("WxSceneId",this.wxSceneId.toString())),this.initWxCfg()}}},{key:"refreshOffLine",value:function(){var t=this;setInterval((function(){t.OffLineTime=m.getTimeStamp()}),6e4)}},{key:"refreshKongTouIsShow",value:function(){var t=this;this.kongTouIsShow=!1,b.Instance.pos(O.RefreshKongTouBox),setTimeout((function(){t.refreshKongtouRecieveDatas(),t.kongTouIsShow=!0,b.Instance.pos(O.OnHomeInfoChange),b.Instance.pos(O.RefreshKongTouBox)}),4e4)}},{key:"initKongtouRecieveDatas",value:function(){var t=localStorage.getItem(f[f.kongtouRecieveDatas]);null!=t&&""!=t&&(this.kongtouRecieveDatas=JSON.parse(t))}},{key:"saveKongtouData",value:function(){localStorage.setItem(f[f.kongtouRecieveDatas],JSON.stringify(this.kongtouRecieveDatas))}},{key:"refreshKongtouRecieveDatas",value:function(){if(t.instance.wood<this.KONGTOUCFG.wood1){if(Math.random()<this.KONGTOUCFG.wood_rd1)return this.kongtouRecieveDatas={id:100,type:c.Wood,count:1e3},void this.saveKongtouData()}else if(this.KONGTOUCFG.wood1<=t.instance.wood&&t.instance.wood<this.KONGTOUCFG.wood2){if(Math.random()<this.KONGTOUCFG.wood_rd1)return this.kongtouRecieveDatas={id:100,type:c.Wood,count:this.KONGTOUCFG.addwood},void this.saveKongtouData()}else if(Math.random()<this.KONGTOUCFG.wood_rd3)return this.kongtouRecieveDatas={id:100,type:c.Wood,count:1e3},void this.saveKongtouData();var e=t.instance.getZhaomuMoneyCount(),o=Math.ceil(this.KONGTOUCFG.addGold*e);if(t.instance.gold<e){if(Math.random()<this.KONGTOUCFG.gold_rd1)return this.kongtouRecieveDatas={id:100,type:c.COIN,count:o},void this.saveKongtouData()}else if(Math.random()<this.KONGTOUCFG.gold_rd2)return this.kongtouRecieveDatas={id:100,type:c.COIN,count:o},void this.saveKongtouData();var i=this.getKongTouSoldierId();this.kongtouRecieveDatas={id:i,type:c.Soldier,count:1},this.saveKongtouData()}},{key:"getKongTouSoldierId",value:function(){for(var t=0,e=[],o=[],i=this.KONGTOUCFG.SOLDIERID,n=this.KONGTOUCFG.SOLDIERID_RD,a=0;a<i.length;a++){var s=i[a];s<200?(e.push(s),o.push(n[a])):V.Instance.getSoldierIsLockById(s)&&(e.push(s),o.push(n[a]))}for(var r=0;r<o.length;r++)t+=o[r];for(var h=m.getRandomInt(0,t),d=0,l=0;l<o.length;l++)if(h<=(d+=o[l]))return e[l]}},{key:"load",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.progress=e,e!=this.resArr.length?r.loadRes(this.resArr[e],null,null,null,(function(){t.load(++e)})):this._onLoadCompelete()}},{key:"onLoading",value:function(t,e,o){console.log(t,e,o)}},{key:"_onLoadCompelete",value:function(){this.initCfg(),this.configloadComplete=!0}},{key:"loadOppoConfig",value:(X=n(regeneratorRuntime.mark((function t(){var e,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l.isOppo()){t.next=6;break}return e=m.getRandomInt(1,999999),t.next=4,m.HttpGET("https://czy7n02.jiegames.com/qibing/islandwar_oppo_config_204.json?r="+e);case 4:(o=t.sent)?(this.oppoAdConfig=o,console.log("oppo config",JSON.stringify(o))):console.error("oppo配置文件读取错误");case 6:case"end":return t.stop()}}),t,this)}))),function(){return X.apply(this,arguments)})},{key:"loadVivoConfig",value:(j=n(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l.isVivo()){t.next=5;break}return t.next=3,m.HttpGET("https://czy7n02.jiegames.com/qibing/islandwar_vivo_config.json?r="+m.getRandomInt(0,99999));case 3:(e=t.sent)?(console.log("vivo config",JSON.stringify(e)),this.vivoAdConfig.native_report=e.native_report,this.vivoAdConfig.native_close_jump=e.native_close_jump,this.vivoAdConfig.normal_btn_show_native=e.normal_btn_show_native,this.vivoAdConfig.normal_btn_delay_show_second=e.normal_btn_delay_show_second,this.vivoAdConfig.native_word_change=e.native_word_change,this.vivoAdConfig.native_refresh_time=e.native_refresh_time,this.vivoAdConfig.banner_refresh_time=e.banner_refresh_time,this.vivoAdConfig.rate_Interstitial=e.rate_Interstitial,this.vivoAdConfig[this.VIVO_VERSION]=e[this.VIVO_VERSION],this.vivoAdConfig.enable=this.vivoAdConfig[this.VIVO_VERSION]):console.error("oppo配置文件读取错误");case 5:case"end":return t.stop()}}),t,this)}))),function(){return j.apply(this,arguments)})},{key:"isCanShowNative",value:function(){return null!=D.nativeAdObj&&(l.isOppo()?this.oppoAdConfig[this.OPPO_VERSION]:!!l.isVivo()&&this.vivoAdConfig[this.VIVO_VERSION])}},{key:"showInterstitialAd",value:function(){D.createInterstitialAd()}},{key:"isShowNativeWword_0",value:function(){return l.isOppo()?0==t.instance.oppoAdConfig.native_word_change:!!l.isVivo()&&0==t.instance.vivoAdConfig.native_word_change}},{key:"init",value:function(){this.initGameConfig(),u.init(),this._day=parseInt(localStorage.getItem("day")||"-100"),l.init(),localStorage.getItem("release")||(localStorage.clear(),localStorage.setItem("release","1.0")),this.UnlockBoat=JSON.parse(localStorage.getItem("UnlockBoat")||"[1,0,0,0,0,0]"),this._gold=parseInt(localStorage.getItem("gold")||"1000"),this._wood=parseInt(localStorage.getItem("wood")||"500"),this._medal=parseInt(localStorage.getItem("medal")||"0"),this._diamond=parseInt(localStorage.getItem("diamond")||"100"),this._zhaomuTimes=parseInt(localStorage.getItem("zhaomuTimes")||"0"),this._sidCounter=parseInt(localStorage.getItem("sidCounter")||"0"),this.videoCount=parseInt(localStorage.getItem("VideoCount")||"0"),this.isRewardNoviceGift=parseInt(localStorage.getItem("IsRewardNoviceGift")||"0"),this.dailyWoodCount=parseInt(localStorage.getItem(f[f.DailyWoodCount])||u.DailyGoldCount.toString()),this.dailyGoldCount=parseInt(localStorage.getItem(f[f.DailyGoldCount])||u.DailyGoldCount.toString()),this.dailyDaimondCount=parseInt(localStorage.getItem(f[f.DailyDaimondCount])||u.DailyGoldCount.toString()),this.quality=parseInt(localStorage.getItem(f[f.Quality])||this.quality.toString()),this.kongtouRecieveCount=parseInt(localStorage.getItem(f[f.KongtouRecieveCount])||"0"),this.offLineTime=parseInt(localStorage.getItem(f[f.OffLineTime])||m.getTimeStamp().toString()),this.showCollectCount=parseInt(localStorage.getItem(f[f.ShowCollectCount])||"0"),this.isShare=0!=parseInt(localStorage.getItem(f[f.IsShare])||"0"),this.kdBoxCount=parseInt(localStorage.getItem(f[f.KdBoxCount])||"0"),this.noviceReceiveCount=parseInt(localStorage.getItem(f[f.NoviceReceiveCount])||"0"),t.IsDebug&&(this._gold=9999999),t.IsDebug&&(this._wood=9999999),t.IsDebug&&(this._diamond=99999),this.initKongtouRecieveDatas(),this._day!=(new Date).getDate()&&(this.DailyGoldCount=u.DailyGoldCount,this.dailyDaimondCount=u.DailyGoldCount,this.KongtouRecieveCount=0,this.ShowCollectCount=0,this.IsShare=!1,this.KdBoxCount=0),m.getTimeStamp()-this.offLineTime>300&&this.ShowCollectCount<3&&(this.ShowCollectCount++,this.IsShowCollect=!0),this.refreshKongTouIsShow(),this.refreshOffLine(),this.homeInfo=JSON.parse(localStorage.getItem("homeInfo")||"[]"),0==this.homeInfo.length&&this.initHomeInfo(),q.Instance.init(),A.init(),this.load(),D.init(),this.loadOppoConfig(),this.loadVivoConfig(),this.initWxData(),this.initTTData(),this.initQQData(),this.initAndroidCfg(),this.initKONGTOUCFG()}},{key:"initCfg",value:function(){C.Instance.init(),T.Instance.init(),I.Instance.init(),v.Instance.init(),k.Instance.init(),N.Instance.init(),K.Instance.init(),W.Instance.init(),V.Instance.init(),B.Instance.init(),L.Instance.init(),G.Instance.init(),M.Instance.init(),this.day=(new Date).getDate()}},{key:"initHomeInfo",value:function(){this.homeInfo.push({id:3,sid:-1,lv:0,matrix:[9,9,9,10,9,11,10,9,10,10,10,11,11,9,11,10,11,11],boatMatrix:[]}),this.homeInfo.push({id:4,sid:-2,lv:0,matrix:[17,9,17,10,17,11,18,9,18,10,18,11,19,9,19,10,19,11],boatMatrix:[]}),this.homeInfo.push({id:5,sid:-3,lv:0,matrix:[9,17,9,18,9,19,10,17,10,18,10,19,11,17,11,18,11,19],boatMatrix:[]}),this.homeInfo.push({id:101,sid:-4,lv:0,matrix:[1,1,1,2,1,3,2,1,2,2,2,3,3,1,3,2,3,3],boatMatrix:[0,0]}),this.homeInfo.push({id:102,sid:-5,lv:0,matrix:[1,5,1,6,1,7,2,5,2,6,2,7,3,5,3,6,3,7],boatMatrix:[]}),localStorage.setItem("homeInfo",JSON.stringify(this.homeInfo))}},{key:"getZhaomuMoneyCount",value:function(){return S[Math.min(S.length,this.zhaomuTimes)]}},{key:"generateSid",value:function(){return this.sidCounter+=1,this.sidCounter}},{key:"saveItemNewMatrix",value:function(t,e,o){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=0;n<this.homeInfo.length;n++){var a=this.homeInfo[n];if(a.sid==t){a.id=e,o&&(a.matrix=o),i&&(a.boatMatrix=i);break}}this.saveHomeInfo()}},{key:"setItemInfoLvbySid",value:function(t,e){this.getItemInfoBySid(t).lv=e,this.saveHomeInfo()}},{key:"addHomeInfo",value:function(t){this.homeInfo.push(t),this.saveHomeInfo()}},{key:"saveHomeInfo",value:function(){b.Instance.checkCode(O.OnHomeInfoChange)&&b.Instance.pos(O.OnHomeInfoChange),localStorage.setItem("homeInfo",JSON.stringify(this.homeInfo))}},{key:"getItemConstInfoByID",value:function(t){for(var e=0;e<y.ITEM_INFO.length;e++)if(y.ITEM_INFO[e].id==t)return y.ITEM_INFO[e];return null}},{key:"getItemInfoBySid",value:function(t){for(var e=0;e<this.homeInfo.length;e++)if(this.homeInfo[e].sid==t)return this.homeInfo[e];return null}},{key:"getItemsCountByID",value:function(t){var e=0;if(1==t||2==t)for(var o=0;o<this.homeInfo.length;o++)1!=this.homeInfo[o].id&&2!=this.homeInfo[o].id||e++;else for(var i=0;i<this.homeInfo.length;i++)this.homeInfo[i].id==t&&e++;return e}},{key:"getItemsCountByIDAndLv",value:function(t,e){var o=0;if(1==t||2==t)for(var i=0;i<this.homeInfo.length;i++)1!=this.homeInfo[i].id&&2!=this.homeInfo[i].id||e==this.homeInfo[i].lv&&o++;else for(var n=0;n<this.homeInfo.length;n++)this.homeInfo[n].id==t&&e==this.homeInfo[n].lv&&o++;return o}},{key:"getHeroInfoById",value:function(e){for(var o=0;o<t.instance.homeInfo.length;o++)if(t.instance.homeInfo[o].id==e)return t.instance.homeInfo[o];return console.error("获得英雄信息失败"),0}},{key:"getGoldMine",value:function(){for(var e=0;e<t.instance.homeInfo.length;e++)if(5==t.instance.homeInfo[e].id)return t.instance.homeInfo[e];return console.error("获得金矿信息失败"),0}},{key:"getBarracks",value:function(){for(var e=0;e<t.instance.homeInfo.length;e++)if(4==t.instance.homeInfo[e].id)return t.instance.homeInfo[e];return console.error("获得金矿信息失败"),0}},{key:"getMainHouseLv",value:function(){for(var e=0;e<t.instance.homeInfo.length;e++)if(3==t.instance.homeInfo[e].id)return t.instance.homeInfo[e].lv+1;return console.error("获得大本营信息失败"),0}},{key:"getMainHouseInfo",value:function(){for(var e=0;e<t.instance.homeInfo.length;e++)if(3==t.instance.homeInfo[e].id)return t.instance.homeInfo[e];return console.error("获得大本营信息失败"),null}},{key:"getBuildingInfoById",value:function(t){2==t&&(t=1);for(var e=0;e<p.length;e++)if(p[e].id==t)return p[e];return console.error("未找到建造数据 id: "+t),null}},{key:"getBuildUpInfoById",value:function(t){for(var e=0;e<w.length;e++)if(w[e].id==t)return w[e];return console.error("未找到建造数据 id: "+t),null}},{key:"getInCaKuDatas",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=[];if(0==e)for(var i=0;i<t.instance.homeInfo.length;i++){var n=t.instance.homeInfo[i];0==n.matrix.length&&o.push(n)}else for(var a=0;a<t.instance.homeInfo.length;a++){var s=t.instance.homeInfo[a];0==s.boatMatrix.length&&s.id>100&&o.push(s)}return o}},{key:"getHomeItems",value:function(){for(var e=[],o=0;o<t.instance.homeInfo.length;o++){var i=t.instance.homeInfo[o];i.matrix.length>0&&e.push(i)}return e}},{key:"getBoatItems",value:function(){for(var e=[],o=0;o<t.instance.homeInfo.length;o++){var i=t.instance.homeInfo[o];i.boatMatrix.length>0&&e.push(i)}return e}},{key:"isCanUpById",value:function(t,e){return this.getItemsCountByIDAndLv(t,e)>1}},{key:"ishasUpItem",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.getInCaKuDatas(t),o=0;o<e.length;o++)for(var i=o;i<this.homeInfo.length;i++)if(e[o].id==this.homeInfo[i].id&&e[o].lv==this.homeInfo[i].lv&&e[o].sid!=this.homeInfo[i].sid)return!0;return!1}},{key:"removeHomeInfoBySid",value:function(t){for(var e=0;e<this.homeInfo.length;e++)if(this.homeInfo[e]==t){this.homeInfo.splice(e,1);break}this.saveHomeInfo()}},{key:"getBarrackLvBySynthLv",value:function(e){for(var o=t.instance.getBarracks(),i=t.instance.getBuildUpInfoById(o.id).type[1],n=0;n<i.length;n++){i[n];if(e<i[n])return n}return 10}},{key:"getHomeMatrix",value:function(){for(var t=[],e=0;e<x.length;e++){for(var o=[],i=0;i<x.length;i++)o.push(x[e][i]);t.push(o)}for(var n=0;n<this.homeInfo.length;n++)for(var a=this.homeInfo[n],s=0;s<a.matrix.length;s+=2){var r=a.matrix[s];t[a.matrix[s+1]][r]=-1}return t}},{key:"getItemHomeMatrix",value:function(t,e,o){for(var i=this.getHomeMatrix(),n=[],a=0;a<i.length;a++)for(var s=0;s<i[a].length;s++)i[a][s]==t&&n.push([s,a]);for(var r=0,h=0,d=0;d<n.length;d++){for(var l=n[d],u=!0,c=0;c<e;c++)for(var f=0;f<o;f++){r=l[0]+c,h=l[1]+f;for(var g=!1,_=0;_<n.length;_++)if(n[_][0]==r&&n[_][1]==h){g=!0;break}if(!g){u=!1;break}}if(u){for(var m=[],v=0;v<e;v++)for(var I=0;I<o;I++)m.push(l[0]+v),m.push(l[1]+I);return m}}return[]}},{key:"update",value:function(t){this.wxVideoTouchTime+=t,this.qqVideoTouchTime+=t,this.ttVideoTouchTime+=t,this.tmpAndroidVideoTouchTime+=t,this.kongTouShowTime+=t}},{key:"initAndroidCfg",value:(E=n(regeneratorRuntime.mark((function t(){var e,o,i,n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("init android sdk"),l.isAndroid){t.next=3;break}return t.abrupt("return");case 3:t.next=10;break;case 7:e=t.sent,t.next=11;break;case 10:r.loadRes("json/androidConfig",d,(function(t,o){t?console.log("加载androidConfig出错：",t):(e=o,console.log("androidConfigjson加载成功",e))}));case 11:if(console.log("load android sdk compelte"),!e){t.next=51;break}if(console.log("android config",JSON.stringify(e)),this.AndroidConfig.touch=e.touch,this.AndroidConfig.area=e.area,this.AndroidConfig.video_time_min=e.video_time_min,this.AndroidConfig.video_time_max=e.video_time_max,this.AndroidConfig.settlement_level=e.settlement_level,this.AndroidConfig.rate_settlement=e.rate_settlement,this.AndroidConfig.rate_gold=e.rate_gold,this.AndroidConfig.rate_daimond=e.rate_daimond,this.AndroidConfig.rate_wood=e.rate_wood,this.AndroidConfig.rate_airdrop=e.rate_airdrop,this.AndroidConfig.rate_draw=e.rate_draw,this.AndroidConfig.rate_truntable=e.rate_truntable,this.AndroidConfig.rate_sign=e.rate_sign,this.AndroidConfig.rate_store_refresh=e.rate_store_refresh,this.AndroidConfig.rate_victory_box=e.rate_victory_box,this.AndroidConfig.start_level=e.start_level,this.AndroidConfig[this.ANDROID_VERSION]=e[this.ANDROID_VERSION],this.AndroidConfig.touch&&(this.AndroidConfig.touch=this.AndroidConfig.touch&&this.AndroidConfig[this.ANDROID_VERSION]),!this.AndroidConfig.touch){t.next=47;break}if(o=Q.getcallStaticMethod("getProvince"),console.log("地区："+o),!(o.length>0)){t.next=47;break}i=this.AndroidConfig.area.split(","),n=0;case 38:if(!(n<i.length)){t.next=47;break}if(a=i[n],!o.concat(a)){t.next=44;break}return this.AndroidConfig.touch=!1,console.log("地区屏蔽生效"),t.abrupt("break",47);case 44:n++,t.next=38;break;case 47:console.log(JSON.stringify(this.AndroidConfig)),this.refreshAndroidVideoTouchTime(),t.next=52;break;case 51:console.error("android 配置文件读取错误");case 52:case"end":return t.stop()}}),t,this)}))),function(){return E.apply(this,arguments)})},{key:"refreshAndroidVideoTouchTime",value:function(){this.tmpAndroidVideoTouchTime=0,this.androidVideoTouchTime=m.getRandomInt(this.AndroidConfig.video_time_min,this.AndroidConfig.video_time_max)}},{key:"showAndroidTouch",value:function(e){if(!l.isAndroid)return!1;if(q.Instance.Level<this.AndroidConfig.start_level)return!1;if(this.tmpAndroidVideoTouchTime<this.androidVideoTouchTime)return!1;if(!t.instance.AndroidConfig.touch)return!1;var o=!1;return e>0&&Math.random()<=e&&(o=!0,this.refreshAndroidVideoTouchTime(),D.createInterstitialAd()),o}},{key:"showAndroidSettleTouch",value:function(){return!!l.isAndroid&&(!(this.adroid_settlement_count<this.AndroidConfig.settlement_level)&&this.showAndroidTouch(this.AndroidConfig.rate_settlement))}},{key:"nativeRewardVideoSuccess",value:function(){this.nativeRewardVideoSuccessCB&&this.nativeRewardVideoSuccessCB(),this.refreshAndroidVideoTouchTime()}},{key:"nativeRewardVideoFail",value:function(){this.nativeRewardVideoFailedCB&&this.nativeRewardVideoFailedCB(),this.refreshAndroidVideoTouchTime()}},{key:"nativeInterstitialClose",value:function(){this.nativeInterstitialCB&&this.nativeInterstitialCB()}},{key:"nativeInterstitialFail",value:function(){this.nativeInterstitialFailCB&&this.nativeInterstitialFailCB()}},{key:"initQQCfg",value:(s=n(regeneratorRuntime.mark((function t(){var e,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e="https://qibzhgdl.leiting.com/islandwar_qq_configs.json?r="+m.getRandomInt(0,99999),o="qq",l.isQQ){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,m.HttpGET(e);case 6:(i=t.sent)?(console.log(o+" config",JSON.stringify(i)),this.QQConfig.touch=i.touch,this.QQConfig.area=i.area,this.QQConfig.rate_settlement=i.rate_settlement,this.QQConfig.rate_pass_level=i.rate_pass_level,this.QQConfig.rate_home=i.rate_home,this.QQConfig.rate_draw=i.rate_draw,this.QQConfig.rate_store=i.rate_store,this.QQConfig.rate_truntable=i.rate_truntable,this.QQConfig.rate_sign=i.rate_sign,this.QQConfig.rate_gold=i.rate_gold,this.QQConfig.rate_daimond=i.rate_daimond,this.QQConfig.rate_wood=i.rate_wood,this.QQConfig.rate_airdrop=i.rate_airdrop,this.QQConfig.video_time=i.video_time,this.QQConfig.start_level=i.start_level,this.QQConfig.rate_kd_box=i.rate_kd_box,this.QQConfig.rate_kd_box_video=i.rate_kd_box_video,this.QQConfig.kd_box_show_count=i.kd_box_show_count,this.QQConfig.kd_box_daily_count=i.kd_box_daily_count,this.QQConfig.kt_show_dration=i.kt_show_dration,this.QQConfig[this.QQ_VERSION]=i[this.QQ_VERSION],this.QQConfig.touch&&(this.QQConfig.touch=this.QQConfig.touch&&this.QQConfig[this.QQ_VERSION]),this.QQConfig.touch&&(this.QQConfig.area||(this.QQConfig.touch=!(1011==this.qqSceneId||1012==this.qqSceneId||1047==this.qqSceneId||1048==this.qqSceneId||2005==this.qqSceneId||2077==this.qqSceneId))),console.log("qqscene: ",this.qqSceneId),console.log(this.QQConfig)):console.error(o+"配置文件读取错误");case 8:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"showQQTouch",value:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!l.isQQ)return!1;if(q.Instance.Level<this.QQConfig.start_level)return!1;if(this.qqVideoTouchTime<this.QQConfig.video_time)return!1;if(this.qqVideoTouchTime=0,!t.instance.QQConfig.touch)return!1;var n=!1;return e>0&&Math.random()<=e&&(n=!0,this.qqVideoTouchTime=0,D.createVideo((function(){o&&o()}),(function(){i&&i()}))),n}},{key:"initQQData",value:function(){if(l.isQQ){var t=localStorage.getItem("QQSceneId");null!=t&&""!=t?this.qqSceneId=parseInt(t):(this.qqSceneId=qq.getLaunchOptionsSync().scene,console.log("init qq scene id : "+this.qqSceneId),localStorage.setItem("QQSceneId",this.qqSceneId.toString())),this.initQQCfg()}}},{key:"initTTCfg",value:(a=n(regeneratorRuntime.mark((function t(){var e,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e="https://qibzhgdl.leiting.com/islandwar_tt_configs.json?r="+m.getRandomInt(0,99999),o="tt",l.isTT){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,m.HttpGET(e);case 6:(i=t.sent)?(console.log(o+" config",JSON.stringify(i)),this.TTConfig.touch=i.touch,this.TTConfig.area=i.area,this.TTConfig.rate_settlement_Interstitial=i.rate_settlement_Interstitial,this.TTConfig.rate_settlement=i.rate_settlement,this.TTConfig.rate_pass_level=i.rate_pass_level,this.TTConfig.rate_home=i.rate_home,this.TTConfig.rate_draw=i.rate_draw,this.TTConfig.rate_store=i.rate_store,this.TTConfig.rate_truntable=i.rate_truntable,this.TTConfig.rate_sign=i.rate_sign,this.TTConfig.rate_gold=i.rate_gold,this.TTConfig.rate_daimond=i.rate_daimond,this.TTConfig.rate_wood=i.rate_wood,this.TTConfig.rate_airdrop=i.rate_airdrop,this.TTConfig.video_time=i.video_time,this.TTConfig.start_level=i.start_level,this.TTConfig.rate_kd_box=i.rate_kd_box,this.TTConfig.rate_kd_box_video=i.rate_kd_box_video,this.TTConfig.kd_box_show_count=i.kd_box_show_count,this.TTConfig.kd_box_daily_count=i.kd_box_daily_count,this.TTConfig.kt_show_dration=i.kt_show_dration,this.TTConfig.share_gold=i.share_gold,this.TTConfig.share_daimond=i.share_daimond,this.TTConfig[this.QQ_VERSION]=i[this.QQ_VERSION],this.TTConfig.touch&&(this.TTConfig.touch=this.TTConfig.touch&&this.TTConfig[this.TT_VERSION]),console.log("qqscene: ",this.qqSceneId),console.log(this.QQConfig)):console.error(o+"配置文件读取错误");case 8:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"showTTTouch",value:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!l.isTT)return!1;if(q.Instance.Level<this.TTConfig.start_level)return!1;if(this.ttVideoTouchTime<this.TTConfig.video_time)return!1;if(this.ttVideoTouchTime=0,!t.instance.TTConfig.touch)return!1;var n=!1;return e>0&&Math.random()<=e&&(n=!0,this.qqVideoTouchTime=0,D.createVideo((function(){o&&o()}),(function(){i&&i()}))),n}},{key:"initTTData",value:function(){if(l.isTT){var t=localStorage.getItem("TTSceneId");null!=t&&""!=t?this.qqSceneId=parseInt(t):(this.ttSceneId=tt.getLaunchOptionsSync().scene,console.log("init tt scene id : "+this.ttSceneId),localStorage.setItem("TTSceneId",this.ttSceneId.toString())),this.initTTCfg()}}},{key:"updateKongTouShow",value:function(){if(t.instance.kongTouIsShow&&!(q.Instance.Level<=5)&&q.Instance.Level!=u.LockSigIn&&q.Instance.Level!=u.LockPassReward&&q.Instance.Level!=u.LockStore&&q.Instance.Level!=u.LockPVP&&q.Instance.Level!=u.LockBounty){var e=60;l.isWx()&&(e=this.WXConfig.kt_show_dration),l.isQQ&&(e=this.QQConfig.kt_show_dration),l.isAndroid&&(e=this.AndroidConfig.kt_show_dration),l.isTT&&(e=this.TTConfig.kt_show_dration),0!=e&&(this.kongTouShowTime<e||(this.kongTouShowTime=0,R.Instance.checkViewActive(g.UIGuide)||R.Instance.checkViewActive(g.UIKongTou)||R.Instance.showView(g.UIKongTou,_.PANEL)))}}},{key:"initGameConfig",value:(e=n(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m.getRandomInt(0,99999),t.next=7;break;case 4:e=t.sent,t.next=8;break;case 7:r.loadRes("json/gameConfig",d,(function(t,o){t?console.log("加载gameConfig出错：",t):(e=o,console.log("gameConfigjson加载成功",e))}));case 8:e&&(console.log("gameConfigjson,json,gameConfigjson",e),y.ITEM_INFO=e.ITEM_INFO,y.SKILL_IFNO=e.SKILL_INFO,y.SOLDIER_INFO=e.SOLDIER_INFO,u.PVPPowerMin=e.PVPPowerMin,u.PVPPowerMax=e.PVPPowerMax);case 9:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})},{key:"day",get:function(){return this._day},set:function(t){this._day=t,localStorage.setItem("day",this._day.toString())}},{key:"sidCounter",set:function(t){this._sidCounter=t,localStorage.setItem("sidCounter",this._sidCounter.toString())},get:function(){return this._sidCounter}},{key:"gold",set:function(t){t>this.gold&&m.flyGold(),this._gold=t,localStorage.setItem("gold",this._gold.toString()),b.Instance.checkCode(O.OnGoldChange)&&b.Instance.pos(O.OnGoldChange),h.getScene().emit(O[O.OnGoldChange])},get:function(){return this._gold}},{key:"wood",set:function(t){t>this.wood&&m.flyWood(),this._wood=t,localStorage.setItem("wood",this._wood.toString()),h.getScene().emit(O[O.OnWoodChange]),h.getScene().emit("RefreshItemByInfo"),b.Instance.checkCode(O.OnWoodChange)&&b.Instance.pos(O.OnWoodChange)},get:function(){return this._wood}},{key:"medal",set:function(t){this._medal=t,localStorage.setItem("medal",this._medal.toString())},get:function(){return this._medal}},{key:"diamond",set:function(t){t>this.diamond&&m.flyDaimond(),this._diamond=t,localStorage.setItem("diamond",this._diamond.toString()),h.getScene().emit(O[O.OnDiamondChange]),b.Instance.checkCode(O.OnDiamondChange)&&b.Instance.pos(O.OnDiamondChange)},get:function(){return this._diamond}},{key:"zhaomuTimes",set:function(t){this._zhaomuTimes=t,localStorage.setItem("zhaomuTimes",this._zhaomuTimes.toString())},get:function(){return this._zhaomuTimes}},{key:"VideoCount",set:function(t){this.videoCount=t,localStorage.setItem("VideoCount",this.VideoCount.toString())},get:function(){return this.videoCount}},{key:"NoviceReceiveCount",set:function(t){this.noviceReceiveCount=t,localStorage.setItem(f[f.NoviceReceiveCount],this.noviceReceiveCount.toString())},get:function(){return this.noviceReceiveCount}},{key:"IsRewardNoviceGift",get:function(){return 1==this.isRewardNoviceGift}},{key:"DailyWoodCount",set:function(t){this.dailyWoodCount=t,localStorage.setItem(f[f.DailyWoodCount],this.dailyWoodCount.toString())},get:function(){return this.dailyWoodCount}},{key:"DailyGoldCount",set:function(t){this.dailyGoldCount=t,localStorage.setItem(f[f.DailyGoldCount],this.dailyGoldCount.toString())},get:function(){return this.dailyGoldCount}},{key:"DailyDaimondCount",set:function(t){this.dailyDaimondCount=t,localStorage.setItem(f[f.DailyDaimondCount],this.dailyDaimondCount.toString())},get:function(){return this.dailyDaimondCount}},{key:"Quality",set:function(t){this.quality=t,localStorage.setItem(f[f.Quality],this.quality.toString())},get:function(){return this.quality}},{key:"KongtouRecieveCount",set:function(t){this.kongtouRecieveCount=t,localStorage.setItem(f[f.KongtouRecieveCount],this.kongtouRecieveCount.toString())},get:function(){return this.kongtouRecieveCount}},{key:"OffLineTime",set:function(t){this.offLineTime=t,localStorage.setItem(f[f.OffLineTime],this.offLineTime.toString())},get:function(){return this.offLineTime}},{key:"ShowCollectCount",set:function(t){this.showCollectCount=t,localStorage.setItem(f[f.ShowCollectCount],this.showCollectCount.toString())},get:function(){return this.showCollectCount}},{key:"IsShare",set:function(t){this.isShare=t,localStorage.setItem(f[f.IsShare],this.isShare?"1":"0")},get:function(){return this.isShare}},{key:"KdBoxCount",set:function(t){this.kdBoxCount=t,localStorage.setItem(f[f.KdBoxCount],this.kdBoxCount.toString())},get:function(){return this.kdBoxCount}}]),t}(),X._instance=null,X.IsDebug=!1,j=F))||j)),a._RF.pop()}}}));

System.register("chunks:///CameraControl.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Data/GameData.js"],(function(t,n){var e,o,i,s,a,h,u,c,l,r,v,f,p,d,g,y;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){e=t.inherits,o=t.classCallCheck,i=t.possibleConstructorReturn,s=t.getPrototypeOf,a=t.createClass},function(t){h=t.cclegacy,u=t._decorator,c=t.Vec3,l=t.find,r=t.tween,v=t.SystemEventType,f=t.Component},function(t){p=t.default}],execute:function(){h._RF.push({},"b112ftfvMRKf6Bw3UqhmbAC","CameraControl",void 0),y=u.ccclass,u.property,t("CameraControl",(d=y("CameraControl"),d(g=function(t){function n(){var t,e;o(this,n);for(var a=arguments.length,h=new Array(a),u=0;u<a;u++)h[u]=arguments[u];return(e=i(this,(t=s(n)).call.apply(t,[this].concat(h)))).out=new c(0,0,0),e.min=30,e.max=80,e.MinY=30,e.MaxY=80,e.MinX=-60,e.MaxX=60,e.MinZ=23,e.MaxZ=105,e.touch1=null,e.touch2=null,e}return e(n,t),a(n,[{key:"onLoad",value:function(){this.pos=this.node.position.clone(),this.rot=this.node.parent.eulerAngles.clone(),this.canvas=l("Canvas")}},{key:"update",value:function(t){}},{key:"rotateCamera",value:function(t){this.out.x=0,this.out.y=this.node.parent.eulerAngles.y+t,this.out.z=0,this.node.parent.eulerAngles=this.node.parent.eulerAngles.lerp(this.out,1)}},{key:"nearCamera",value:function(t){this.out.x=0,this.out.y=0,this.out.z=t,t>0&&this.node.position.z<this.max?this.node.translate(this.out,0):t<0&&this.node.position.z>this.min&&this.node.translate(this.out,0)}},{key:"playStartTween",value:function(){var t=new c(64.38,92.1,80.05),n=new c(48.96,65.01,60.43);this.node.position=t,r(this.node).to(1.5,{position:n}).start()}},{key:"playStartTween1",value:function(){var t=new c(41.22,51.43,50.59);1==p.Instance.Level&&(t=new c(27.472363260516488,35.00472767669642,41.93509803014869)),r(this.node).to(1.5,{position:t}).start()}},{key:"onEnable",value:function(){this.canvas.on(v.TOUCH_START,this.onTouchStart,this),this.canvas.on(v.TOUCH_MOVE,this.onTouchMove,this),this.canvas.on(v.TOUCH_END,this.onTouchEnd,this),this.canvas.on(v.MOUSE_WHEEL,this.onMouseWheel,this)}},{key:"onDisable",value:function(){this.canvas.off(v.TOUCH_START,this.onTouchStart,this),this.canvas.off(v.TOUCH_MOVE,this.onTouchMove,this),this.canvas.off(v.TOUCH_END,this.onTouchEnd,this),this.canvas.off(v.MOUSE_WHEEL,this.onMouseWheel,this)}},{key:"onMouseWheel",value:function(t){var n=.002*t.getScrollY();this.nearCamera(n)}},{key:"onTouchStart",value:function(t){null==this.touch1&&(this.touch1=t.getID(),this.p1=t.getLocation()),t.getID()!=this.touch1&&(this.touch2=t.getID(),this.p2=t.getLocation())}},{key:"onTouchMove",value:function(t){if(null!=this.touch1&&null!=this.touch2){var n=0;if(t.getID()==this.touch1)n=.2*(this.p2.clone().subtract(this.p1.clone()).length()-this.p2.clone().subtract(t.getLocation()).length());if(t.getID()==this.touch2)n=.2*(this.p1.clone().subtract(this.p2.clone()).length()-this.p1.clone().subtract(t.getLocation()).length());this.nearCamera(n)}t.getID()==this.touch1&&(this.p1=t.getLocation()),t.getID()==this.touch2&&(this.p2=t.getLocation())}},{key:"onTouchEnd",value:function(t){t.getID()==this.touch1&&(this.touch1=null),t.getID()==this.touch2&&(this.touch2=null)}},{key:"getMinX",value:function(){var t=this.MaxY-this.node.worldPosition.y;return this.MinX-t}},{key:"getMaxX",value:function(){var t=this.MaxY-this.node.worldPosition.y;return this.MaxX+t}},{key:"getMinZ",value:function(){var t=this.MaxY-this.node.worldPosition.y;return this.MinZ-2*t}},{key:"getMaxZ",value:function(){var t=this.MaxY-this.node.worldPosition.y;return this.MaxZ-t/3}}]),n}(f))||g)),h._RF.pop()}}}));

System.register("chunks:///UI/UIBuildInfoTipItem.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Tools.js","../Data/BuildData.js","../DataManager.js","../HomeScene.js"],(function(e,i){var t,n,o,r,s,a,l,c,u,d,f,h,p,m,v,g,I,y,b,B,_,T,P,k,L,S,C,U,D,w,x,z,R,M,j,N;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_temp:void 0}),{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inherits,o=e.classCallCheck,r=e.possibleConstructorReturn,s=e.getPrototypeOf,a=e.initializerDefineProperty,l=e.assertThisInitialized,c=e.createClass},function(e){u=e.cclegacy,d=e._decorator,f=e.LabelComponent,h=e.SpriteComponent,p=e.Node,m=e.find,v=e.CameraComponent,g=e.Vec3,I=e.Component},function(e){y=e.Tools},function(e){b=e.default},function(e){B=e.DataManager},function(e){_=e.HomeScene}],execute:function(){u._RF.push({},"df2e1Lsl2JAD7tbaOe9RSne","UIBuildInfoTipItem",void 0),j=d.ccclass,N=d.property,e("UIBuildInfoTipItem",(T=j("UIBuildInfoTipItem"),P=N(f),k=N(f),L=N(f),S=N(h),C=N(p),T((w=t((D=function(e){function i(){var e,t;o(this,i);for(var n=arguments.length,c=new Array(n),u=0;u<n;u++)c[u]=arguments[u];return t=r(this,(e=s(i)).call.apply(e,[this].concat(c))),a(t,"nameLab",w,l(t)),a(t,"levLab",x,l(t)),a(t,"timeLab",z,l(t)),a(t,"progress",R,l(t)),a(t,"progressNode",M,l(t)),t}return n(i,e),c(i,[{key:"start",value:function(){}},{key:"update",value:function(e){this.refreshProgress()}},{key:"lateUpdate",value:function(){this.refreshUITipPos()}},{key:"setHomeInfo",value:function(e){this.homeInfo=e,this.refreshUI(),this.node.active=!0}},{key:"refreshUI",value:function(){var e=B.instance.getItemConstInfoByID(this.homeInfo.id);this.nameLab.string=e.name,this.levLab.string="Lv."+(this.homeInfo.lv+1)}},{key:"refreshSelfPos",value:function(){var e=this.getPositionByMatrix(this.homeInfo.matrix,this.homeInfo.id),i=m("Rotate/Camera").getComponent(v).worldToScreen(e);this.node.setWorldPosition(i.x,i.y+50,i.z)}},{key:"getPositionByMatrix",value:function(e,i){return 1==i||2==i?this.getWorldPosByMatrix(e[2],e[3]):this.getWorldPosByMatrix(e[8],e[9])}},{key:"getWorldPosByMatrix",value:function(e,i){return new g(e-12,0,i-12)}},{key:"hide",value:function(){this.node.active=!1}},{key:"refreshProgress",value:function(){var e=b.Instance.getBuildUpVoDataBySid(this.homeInfo.sid),i=b.Instance.getBuildingVoDataBySid(this.homeInfo.sid);if(null!=e||null!=i){if(e){var t=b.Instance.getReduceTimeBySid(this.homeInfo.sid),n=B.instance.getBuildUpInfoById(this.homeInfo.id).upTime[this.homeInfo.lv];this.progress.fillRange=(n-t)/n,this.timeLab.string=y.timestampToTime(t)}else{var o=b.Instance.getBuildReduceTimeBySid(this.homeInfo.sid),r=B.instance.getBuildingInfoById(this.homeInfo.id).time;this.progress.fillRange=(r-o)/r,this.timeLab.string=y.timestampToTime(o)}this.progressNode.active=!0}else this.progressNode.active=!1}},{key:"refreshUITipPos",value:function(){for(var e=_.instance.items,i=null,t=0;t<e.length;t++)if(e[t].sid==this.homeInfo.sid){i=e[t];break}if(null!=i){var n=y.getScreenPos(i.node,_.instance.camera,_.instance.canvas),o=2*(1-_.instance.camera.node.position.z/100);this.node.setScale(o,o,1),this.node.setWorldPosition(new g(n.x,n.y+50*o))}}}]),i}(I)).prototype,"nameLab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(D.prototype,"levLab",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(D.prototype,"timeLab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(D.prototype,"progress",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(D.prototype,"progressNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=D))||U)),u._RF.pop()}}}));

System.register("chunks:///Scene/Builds/BuildingUpEffect.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Tools.js","../../Core/Event/EventCode.js","../../Core/Event/EventBus.js","../../Data/BuildData.js","../../DataManager.js","../../UI/UIBuildInfoTipItem.js"],(function(e,t){var i,n,s,o,a,u,r,c,d,l,p,f,h,I,m,v,B,y,T,g,C;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){i=e.inherits,n=e.classCallCheck,s=e.possibleConstructorReturn,o=e.getPrototypeOf,a=e.createClass,u=e.asyncToGenerator},function(e){r=e.cclegacy,c=e._decorator,d=e.Component,l=e.Prefab,p=e.instantiate,f=e.find},function(e){h=e.Tools},function(e){I=e.EventCode},function(e){m=e.default},function(e){v=e.default},function(e){B=e.DataManager},function(e){y=e.UIBuildInfoTipItem}],execute:function(){r._RF.push({},"5d352bO9uVIwIvL+3LkxwZm","BuildingUpEffect",void 0),C=c.ccclass,c.property,e("BuildingUpEffect",(T=C("BuildingUpEffect"),T(g=function(e){function t(){var e,i;n(this,t);for(var a=arguments.length,u=new Array(a),r=0;r<a;r++)u[r]=arguments[r];return(i=s(this,(e=o(t)).call.apply(e,[this].concat(u)))).uiTip=null,i}var r;return i(t,e),a(t,[{key:"start",value:function(){this.createUIBuildInfoTipItemBySid()}},{key:"update",value:function(e){v.Instance.getBuildUpVoDataBySid(this.sid)?0==v.Instance.getReduceTimeBySid(this.sid)&&(v.Instance.upScessBySid(this.sid),m.Instance.pos(I.OnBuildUpComplete),this.node.removeFromParent(),this.node.destroy(),this.uiTip&&(this.uiTip.removeFromParent(),this.uiTip.destroy(),this.uiTip=null)):0==v.Instance.getBuildReduceTimeBySid(this.sid)&&(v.Instance.buildScessBySid(this.sid),m.Instance.pos(I.OnBuildUpComplete),this.node.removeFromParent(),this.node.destroy(),this.uiTip&&(this.uiTip.removeFromParent(),this.uiTip.destroy(),this.uiTip=null))}},{key:"createUIBuildInfoTipItemBySid",value:(r=u(regeneratorRuntime.mark((function e(){var t,i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.loadRes("ui/UIBuildInfoTipItem",l);case 2:t=e.sent,this.uiTip=p(t),f("Canvas/UI").addChild(this.uiTip),i=B.instance.getItemInfoBySid(this.sid),(n=this.uiTip.getComponent(y)).setHomeInfo(i),n.nameLab.node.active=!1,n.levLab.node.active=!1;case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}]),t}(d))||g)),r._RF.pop()}}}));

System.register("chunks:///HomeScene.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Core/Utils/PlatformUtils.js","./Core/Constants/Constant.js","./Core/Utils/AudioManager.js","./Tools.js","./Config.js","./Core/Utils/List.js","./Core/Event/EventCode.js","./Core/Event/EventBus.js","./Core/View/UIManager.js","./Core/Utils/SendEventManager.js","./Data/BuildData.js","./Data/GuideData.js","./Data/GameData.js","./DataManager.js","./CameraControl.js","./Scene/Builds/BuildingUpEffect.js","./Item.js"],(function(t,e){var i,s,n,o,r,a,h,c,u,m,f,d,l,v,I,y,_,p,T,g,x,B,S,M,k,C,E,P,w,b,N,D,O,R,H,U,A,L,j,K,F,G,V,z,J,X,W,Y,q,Q,Z,$,tt,et,it,st,nt,ot,rt,at;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_class3:void 0,_temp:void 0}),{setters:[function(t){i=t.applyDecoratedDescriptor,s=t.inherits,n=t.classCallCheck,o=t.possibleConstructorReturn,r=t.getPrototypeOf,a=t.initializerDefineProperty,h=t.assertThisInitialized,c=t.createClass,u=t.asyncToGenerator},function(t){m=t.cclegacy,f=t._decorator,d=t.CameraComponent,l=t.Node,v=t.geometry,I=t.find,y=t.director,_=t.SystemEventType,p=t.Vec2,T=t.PhysicsSystem,g=t.Vec3,x=t.Component,B=t.Prefab,S=t.instantiate,M=t.ParticleSystemComponent},function(t){k=t.default},function(t){C=t.AudioName,E=t.SceneType,P=t.ViewType,w=t.LayerType},function(t){b=t.AudioManager},function(t){N=t.Tools},function(t){D=t.HOME_MATRIX,O=t.MAP_WIDTH,R=t.MAP_HEIGHT,H=t.CANGKU_POSY},function(t){U=t.default},function(t){A=t.EventCode},function(t){L=t.default},function(t){j=t.default},function(t){K=t.default,F=t.EventId},function(t){G=t.default},function(t){V=t.default,z=t.GuideId},function(t){J=t.default},function(t){X=t.DataManager},function(t){W=t.CameraControl},function(t){Y=t.BuildingUpEffect},function(t){q=t.Item}],execute:function(){m._RF.push({},"fa71askquJNvZXqYzz/tjde","HomeScene",void 0),rt=f.ccclass,at=f.property,t("HomeScene",(Q=rt("HomeScene"),Z=at(d),$=at(l),Q((ot=nt=function(t){function e(){var t,i;n(this,e);for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return i=o(this,(t=r(e)).call.apply(t,[this].concat(c))),a(i,"camera",it,h(i)),a(i,"hlNode",st,h(i)),i.items=[],i._cameraCtl=null,i._ray=new v.ray,i._curTouchItem=null,i.goldMine=null,i.c_offset=0,i.isTouch=!1,i.canSynthEffects=new U,i.synthEffect=null,i}var i,m,f,d,x;return s(e,t),c(e,[{key:"onLoad",value:function(){if(this.canvas=I("Canvas"),this.DJ_KTX=I("DJ_KTX"),this.DJ_KTX&&k.IsIos&&k.isQQ){var t=this.DJ_KTX.getChildByName("effect");t&&(t.active=!1)}j.Instance.clearView(),X.instance,e.instance=this,y.getScene().on("CREAT_ITEM",this.zhaomu,this),y.getScene().on("WALL_MODE",this.wallMode,this),y.getScene().on("RefreshItemByInfo",this.refreshItemByInfo,this),this._cameraCtl=this.camera.getComponent(W);for(var i=0;i<X.instance.homeInfo.length;i++){var s=X.instance.homeInfo[i];s.matrix.length>0&&this.createItemByID(s.id,s.lv,0,s.sid,s.matrix)}}},{key:"onEnable",value:function(){this.canvas.on(_.KEY_UP,this.onKeyUp,this),this.canvas.on(_.TOUCH_START,this.onTouchStart,this),this.canvas.on(_.TOUCH_MOVE,this.onTouchMove,this),this.canvas.on(_.TOUCH_END,this.onTouchEnd,this),this.canvas.on(_.TOUCH_CANCEL,this.onTouchEnd,this),L.Instance.addListener(A.RefreshKongTouBox,this.refreshKongTouBox.bind(this))}},{key:"onDisable",value:function(){this.canvas.off(_.KEY_UP,this.onKeyUp,this),this.canvas.off(_.TOUCH_START,this.onTouchStart,this),this.canvas.off(_.TOUCH_MOVE,this.onTouchMove,this),this.canvas.off(_.TOUCH_END,this.onTouchEnd,this),this.canvas.off(_.TOUCH_CANCEL,this.onTouchEnd,this),L.Instance.removeListener(A.RefreshKongTouBox)}},{key:"onDestroy",value:function(){e.instance=null}},{key:"start",value:function(){b.Instance.playSound(C.BG),J.Instance.TmpScene=E.HomeScene,this.initBuidingEffect(),this.refreshKongTouBox()}},{key:"update",value:function(t){this.refreshOffset(t)}},{key:"refreshOffset",value:function(t){if(!this.isTouch&&0!=this.c_offset){this.c_offset>0?(this.c_offset-=30*t,this.c_offset<=0&&(this.c_offset=0)):(this.c_offset+=30*t,this.c_offset>=0&&(this.c_offset=0));var e=1;this.c_offset<0&&(e=-1),this._cameraCtl.rotateCamera(Math.min(2,Math.abs(this.c_offset))*e)}}},{key:"onTouchStart",value:function(t){var e=t.touch;this.isTouch=!0,y.getScene().emit("TOUCH_OBJECT",null,null),this.clickBoxPoint(e);var i=this.getTouchMatrix(e);if(i&&(this._curTouchItem=this.getItemByMatrix(i.x,i.y),this._curTouchItem&&!this._curTouchItem.node.active&&(this._curTouchItem=null),this._curTouchItem&&this._curTouchItem.id<100&&y.getScene().emit("HIDE_CANGKU"),this._curTouchItem&&this._curTouchItem.id>100&&y.getScene().emit("OnSoldierStart",this._curTouchItem.sid,this._curTouchItem.node.getWorldPosition()),this._curTouchItem)){y.getScene().emit("TOUCHSTART_SOLDIER",this._curTouchItem);var s=this.getGroundPoint(e);s&&(s.y=.3,this._curTouchItem.node.setPosition(s)),this._curTouchItem.id>100&&this.showCanSynthEffects(this._curTouchItem.sid,this._curTouchItem.id,this._curTouchItem.lv)}}},{key:"onTouchMove",value:function(t){var e=t.touch;if(this._curTouchItem){var i=this.getGroundPoint(e);if(i){i.y=.3,this._curTouchItem.node.setPosition(i),this._curTouchItem.id>100&&(y.getScene().emit("TOUCHMOVE_SOLDIER",this._curTouchItem,e),y.getScene().emit("OnSoldierMove",this._curTouchItem.sid,this._curTouchItem.node.getWorldPosition()));var s=this.getTouchMatrix(e);if(s){var n=this.findNewMatrixByPos(s.x,s.y,this._curTouchItem.id,D);if(n){var o=X.instance.getItemConstInfoByID(this._curTouchItem.id);this.setHighLightByMatrix(n,o.width,o.height)}else if(1==this._curTouchItem.id)if(n=this.findNewMatrixByPos(s.x,s.y,2,D)){var r=X.instance.getItemConstInfoByID(2);this.setHighLightByMatrix(n,r.width,r.height)}else this.hlNode.setPosition(-100,0,0);else if(2==this._curTouchItem.id)if(n=this.findNewMatrixByPos(s.x,s.y,1,D)){var a=X.instance.getItemConstInfoByID(1);this.setHighLightByMatrix(n,a.width,a.height)}else this.hlNode.setPosition(-100,0,0);else this.hlNode.setPosition(-100,0,0)}else this.hlNode.setPosition(-100,0,0)}}else if(null==this._tempItem){var h=e._point.x-e._prevPoint.x,c=e._point.y-e._prevPoint.y;Math.abs(h)>Math.abs(c)&&(this._cameraCtl.rotateCamera(-h/5),this.c_offset=-h)}}},{key:"onTouchEnd",value:function(t){var e=t.touch;if(this.isTouch=!1,this._curTouchItem){if(this._curTouchItem.id>100){if(!this._curTouchItem.node.active)X.instance.getItemInfoBySid(this._curTouchItem.sid).matrix=[],X.instance.saveHomeInfo(),this.removeItemFromItemArray(this._curTouchItem),this._curTouchItem.node.removeFromParent(),this._curTouchItem.node.destroy(),this._curTouchItem=null;y.getScene().emit("TOUCHEND_SOLDIER")}if(this._curTouchItem){var i=this.getTouchMatrix(e);if(i&&this._curTouchItem){var s=this.findNewMatrixByPos(i.x,i.y,this._curTouchItem.id,D);if(s){var n=this.getItemByMatrixArray(s,this._curTouchItem.sid);if(n)if(n.id>100&&n.id==this._curTouchItem.id&&n.lv==this._curTouchItem.lv&&n.lv<9){var o=X.instance.getBarracks(),r=X.instance.getBuildUpInfoById(o.id).type[1][o.lv]-1;if(n.lv>=r){var a=X.instance.getBarrackLvBySynthLv(r+1)+1;N.ShowTip("Merge after Barracks Lv "+a),this._curTouchItem.resetPositionByMatrix()}else{for(var h=0;h<X.instance.homeInfo.length;h++){if(X.instance.homeInfo[h].sid==n.sid){X.instance.homeInfo.splice(h,1);break}}for(var c=0;c<X.instance.homeInfo.length;c++){var u=X.instance.homeInfo[c];if(u.sid==this._curTouchItem.sid){u.lv++;break}}this.removeItemFromItemArray(n),n.node.removeFromParent(),n.node.destroy(),this._curTouchItem.lv++,this._curTouchItem.initObjects(),this._curTouchItem.matrix=s,this._curTouchItem.resetPositionByMatrix(),this.playSynthEffects(this._curTouchItem.node.position),X.instance.saveItemNewMatrix(this._curTouchItem.sid,this._curTouchItem.id,s)}}else n.matrix=this._curTouchItem.matrix,n.resetPositionByMatrix(),X.instance.saveItemNewMatrix(n.sid,n.id,this._curTouchItem.matrix),this._curTouchItem.matrix=s,this._curTouchItem.resetPositionByMatrix(),X.instance.saveItemNewMatrix(this._curTouchItem.sid,this._curTouchItem.id,s);else this._curTouchItem.matrix=s,this._curTouchItem.resetPositionByMatrix(),X.instance.saveItemNewMatrix(this._curTouchItem.sid,this._curTouchItem.id,s)}else 1==this._curTouchItem.id?(s=this.findNewMatrixByPos(i.x,i.y,2,D))&&(this._curTouchItem.id=2,this._curTouchItem.matrix=s,this._curTouchItem.resetShow(),X.instance.saveItemNewMatrix(this._curTouchItem.sid,this._curTouchItem.id,s)):2==this._curTouchItem.id&&(s=this.findNewMatrixByPos(i.x,i.y,1,D))&&(this._curTouchItem.id=1,this._curTouchItem.matrix=s,this._curTouchItem.resetShow(),X.instance.saveItemNewMatrix(this._curTouchItem.sid,this._curTouchItem.id,s)),this._curTouchItem.resetPositionByMatrix()}else this._curTouchItem.resetPositionByMatrix();y.getScene().emit("TOUCH_OBJECT",this._curTouchItem.sid,this._curTouchItem.node.getWorldPosition())}}this._curTouchItem=null,this.hlNode.setPosition(-100,0,0),this.hideCanSynthEffects()}},{key:"getItemByMatrixArray",value:function(t,e){for(var i=null,s=0;s<this.items.length;s++)if(this.items[s].sid!=e){for(var n=!0,o=0;o<this.items[s].matrix.length;o++)if(this.items[s].matrix[o]!=t[o]){n=!1;break}if(n){i=this.items[s];break}}return i}},{key:"setHighLightByMatrix",value:function(t,e,i){t&&(this.hlNode.setScale(e,1,i),1==this._curTouchItem.id||2==this._curTouchItem.id?this.hlNode.setPosition(t[2]-12,0,t[3]-12):this.hlNode.setPosition(t[8]-12,0,t[9]-12))}},{key:"getItemByMatrix",value:function(t,e){for(var i=0;i<this.items.length;i++)for(var s=0;s<this.items[i].matrix.length;s+=2){var n=this.items[i].matrix[s],o=this.items[i].matrix[s+1];if(t==n&&e==o)return this.items[i]}return null}},{key:"getTouchMatrix",value:function(t){var e=this.getGroundPoint(t);return e?new p(Math.floor(e.x+Math.floor(O/2)),Math.floor(e.z+Math.floor(R/2))):null}},{key:"findPutMatrix",value:function(t,e,i,s){for(var n=[],o=0;o<s.length;o++)for(var r=0;r<s[o].length;r++)s[o][r]==t&&this.isEmptyMatrix(r,o)&&n.push([r,o]);for(var a=0,h=0,c=0;c<n.length;c++){for(var u=n[c],m=!0,f=0;f<e;f++)for(var d=0;d<i;d++){a=u[0]+f,h=u[1]+d;for(var l=!1,v=0;v<n.length;v++)if(n[v][0]==a&&n[v][1]==h){l=!0;break}if(!l){m=!1;break}}if(m){for(var I=[],y=0;y<e;y++)for(var _=0;_<i;_++)I.push(u[0]+y),I.push(u[1]+_);return I}}return null}},{key:"findNewMatrixByPos",value:function(t,e,i,s){for(var n=X.instance.getItemConstInfoByID(i),o=n.type,r=n.width,a=n.height,h=[],c=0;c<s.length;c++)for(var u=0;u<s[c].length;u++)s[c][u]==o&&(1==i||2==i?this.isEmptyMatrix(u,c)&&h.push([u,c]):h.push([u,c]));for(var m=0,f=0,d=0;d<h.length;d++){for(var l=h[d],v=!0,I=0;I<r;I++)for(var y=0;y<a;y++){m=l[0]+I,f=l[1]+y;for(var _=!1,p=0;p<h.length;p++)if(h[p][0]==m&&h[p][1]==f){_=!0;break}if(!_){v=!1;break}}if(v){for(var T=[],g=0;g<r;g++)for(var x=0;x<a;x++)T.push(l[0]+g),T.push(l[1]+x);for(var B=!1,S=0;S<T.length;S+=2){if(T[S]==t&&T[S+1]==e){B=!0;break}if(!B&&(1==i||2==i)){if(T[S]==t-1&&T[S+1]==e){B=!0;break}if(T[S]==t+1&&T[S+1]==e){B=!0;break}if(T[S]==t&&T[S+1]==e-1){B=!0;break}if(T[S]==t&&T[S+1]==e+1){B=!0;break}}}if(B)return T}}return null}},{key:"isEmptyMatrix",value:function(t,e){for(var i=0;i<this.items.length;i++)for(var s=this.items[i],n=0;n<s.matrix.length;n+=2)if(t==s.matrix[n]&&e==s.matrix[n+1])return!1;return!0}},{key:"getGroundPoint",value:function(t){if(this.camera.screenPointToRay(t._point.x,t._point.y,this._ray),T.instance.raycast(this._ray)){var e=T.instance.raycastResults;if(e[0].collider.name.indexOf("ground")>-1)return new g(e[0].hitPoint.x,0,e[0].hitPoint.z)}return null}},{key:"createBuild",value:function(t,e,i,s){this.createItemByID(e,i,s,t),G.Instance.addBuildBySid(t),this.createBuidingEffectBySid(t)}},{key:"createItemByID",value:function(t,e,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=null;if(n)o=n;else{var r=X.instance.getItemConstInfoByID(t);o=this.findPutMatrix(r.type,r.width,r.height,D)}if(o){null==s&&(s=X.instance.generateSid());var a=new l;this.node.addChild(a);var h=a.addComponent(q);if(h.init(t,s,i,e,o),h.resetPositionByMatrix(),this.items.push(h),5==t&&(this.goldMine=h),!n){var c={sid:s,id:t,lv:e,matrix:o,boatMatrix:[]};X.instance.addHomeInfo(c)}}else if(t>100){if(!s){var u={sid:s=X.instance.generateSid(),id:t,lv:e,matrix:[],boatMatrix:[]};X.instance.addHomeInfo(u)}}else N.ShowTip("No place to place")}},{key:"createItemInHome",value:function(t,e,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=new l;this.node.addChild(o);var r=o.addComponent(q);r.init(t,s,i,e,n),r.resetPositionByMatrix(),this.items.push(r)}},{key:"zhaomu",value:(x=u(regeneratorRuntime.mark((function t(e,i,s){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.createItemByID(e,s,i);case 1:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return x.apply(this,arguments)})},{key:"removeItemFromItemArray",value:function(t){var e=this.items.indexOf(t);e>-1&&this.items.splice(e,1)}},{key:"wallMode",value:function(t){if(t)for(var e=0;e<this.items.length;e++)this.items[e].node.active=1==this.items[e].id||2==this.items[e].id;else for(var i=0;i<this.items.length;i++)this.items[i].node.active=!0}},{key:"getScreenPos",value:function(t){return N.getScreenPos(t,this.camera,this.node)}},{key:"initTempItem",value:function(t,e,i){var s=new l;this.node.addChild(s),this._tempItem=s.addComponent(q),this._tempItem.init(t,e,0,i,[]),this._tempItem.node.active=!1,this.showCanSynthEffects(e,t,i)}},{key:"moveTempItem",value:function(t){if(this._tempItem){var e=t.getUILocation();this._tempItem.node.active=e.y>H,this._tempItem.node.active&&y.getScene().emit("OnSoldierMove",this._tempItem.sid,this._tempItem.node.getWorldPosition());var i=this.getGroundPoint(t);i&&(i.y=.3,this._tempItem.node.setPosition(i));var s=this.getTouchMatrix(t);if(s){var n=this.findNewMatrixByPos(s.x,s.y,this._tempItem.id,D);n?(this.hlNode.setScale(3,1,3),this.hlNode.setPosition(n[8]-12,0,n[9]-12)):this.hlNode.setPosition(-100,0,0)}}}},{key:"endTempItem",value:function(t){if(this._tempItem)if(this._tempItem.node.active){var e=this.getTouchMatrix(t);if(e){var i=this.findNewMatrixByPos(e.x,e.y,this._tempItem.id,D);if(i){var s=this.getItemByMatrixArray(i,this._tempItem.sid);if(s)if(s.id>100)if(s.id==this._tempItem.id&&s.lv==this._tempItem.lv&&s.lv<9){var n=X.instance.getBarracks(),o=X.instance.getBuildUpInfoById(n.id).type[1][n.lv]-1;if(s.lv>=o){var r=X.instance.getBarrackLvBySynthLv(o+1)+1;N.ShowTip("Merge after Barracks Lv "+r),this._curTouchItem.resetPositionByMatrix()}else{for(var a=0;a<X.instance.homeInfo.length;a++){if(X.instance.homeInfo[a].sid==s.sid){X.instance.homeInfo.splice(a,1);break}}for(var h=0;h<X.instance.homeInfo.length;h++){var c=X.instance.homeInfo[h];if(c.sid==this._tempItem.sid){c.lv++;break}}this.removeItemFromItemArray(s),s.node.removeFromParent(),s.node.destroy(),this._tempItem.lv++,this._tempItem.initObjects(),this._tempItem.matrix=i,this._tempItem.resetPositionByMatrix(),this.playSynthEffects(this._tempItem.node.position),X.instance.saveItemNewMatrix(this._tempItem.sid,this._tempItem.id,i),this.items.push(this._tempItem)}}else{s.matrix=[],X.instance.saveItemNewMatrix(s.sid,s.id,[]);var u=this.items.indexOf(s);this.items.splice(u,1),s.node.removeFromParent(),s.node.destroy(),this._tempItem.matrix=i,this._tempItem.resetPositionByMatrix(),X.instance.saveItemNewMatrix(this._tempItem.sid,this._tempItem.id,i),this.items.push(this._tempItem)}else this._tempItem.node.removeFromParent(),this._tempItem.node.destroy();else this._tempItem.matrix=i,this._tempItem.resetPositionByMatrix(),X.instance.saveItemNewMatrix(this._tempItem.sid,this._tempItem.id,i),this.items.push(this._tempItem)}else this._tempItem.node.removeFromParent(),this._tempItem.node.destroy()}else this._tempItem.node.removeFromParent(),this._tempItem.node.destroy()}else this._tempItem.node.removeFromParent(),this._tempItem.node.destroy();this._tempItem=null,this.hlNode.setPosition(-100,0,0),this.hideCanSynthEffects()}},{key:"recoverAllSoldier",value:function(){for(var t=0;t<X.instance.homeInfo.length;t++){var e=X.instance.homeInfo[t];e.id>100&&(e.matrix=[])}X.instance.saveHomeInfo();for(var i=0;i<this.items.length;i++)if(this.items[i].id>100){var s=this.items.splice(i,1)[0];i--,s.node.removeFromParent(),s.node.destroy()}}},{key:"onKeyUp",value:(d=u(regeneratorRuntime.mark((function t(e){var i,s,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"1"==e.rawEvent.key?this.createItemByID(1,0,0):"2"==e.rawEvent.key?this.createItemByID(2,0,0):"3"==e.rawEvent.key?this.createItemByID(3,0,0):"4"==e.rawEvent.key?this.createItemByID(4,0,0):"5"==e.rawEvent.key?this.createItemByID(5,0,0):"0"==e.rawEvent.key&&(i=N.getRandomInt(101,104),s=N.getRandomInt(0,6),n=X.instance.generateSid(),o={sid:n,id:i,lv:s,matrix:[],boatMatrix:[]},X.instance.addHomeInfo(o));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"createBuidingEffectBySid",value:(f=u(regeneratorRuntime.mark((function t(e){var i,s,n,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=0;case 1:if(!(s<this.items.length)){t.next=9;break}if((n=this.items[s]).sid!=e){t.next=6;break}return i=n,t.abrupt("break",9);case 6:s++,t.next=1;break;case 9:return t.next=11,N.loadRes("prefabs/effects/buidingEffect",B);case 11:o=t.sent,(r=S(o)).addComponent(Y).sid=e,i.node.addChild(r);case 15:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"initBuidingEffect",value:function(){for(var t=0;t<this.items.length;t++){var e=this.items[t];if(!(e.id>100))if(null!=G.Instance.getBuildUpVoDataBySid(e.sid))G.Instance.getReduceTimeBySid(e.sid)<=0?G.Instance.upScessBySid(e.sid):this.createBuidingEffectBySid(e.sid)}for(var i=0;i<this.items.length;i++){var s=this.items[i];if(!(s.id>100))if(null!=G.Instance.getBuildingVoDataBySid(s.sid))G.Instance.getBuildReduceTimeBySid(s.sid)<=0?G.Instance.buildScessBySid(s.sid):this.createBuidingEffectBySid(s.sid)}}},{key:"createCanSynthEffects",value:(m=u(regeneratorRuntime.mark((function t(e){var i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.loadRes("prefabs/effects/canSynthEffect",B);case 2:i=t.sent,s=S(i),this.node.addChild(s),s.position=e,this.canSynthEffects.add(s);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)})},{key:"showCanSynthEffects",value:function(t,e,i){for(var s=this.getItemsByIdAndLv(t,e,i),n=this.canSynthEffects.Count,o=0;o<s.length;o++)if(o<n){var r=this.canSynthEffects.get(o);r.position=s[o].node.position,r.active=!0}else this.createCanSynthEffects(s[o].node.position)}},{key:"hideCanSynthEffects",value:function(){for(var t=this.canSynthEffects.Count,e=0;e<t;e++)this.canSynthEffects.get(e).active=!1}},{key:"getItemsByIdAndLv",value:function(t,e,i){var s=[];if(1==e||2==e)return s;for(var n=0;n<this.items.length;n++){var o=this.items[n];o.id==e&&o.lv==i&&t!=o.sid&&s.push(this.items[n])}return s}},{key:"playSynthEffects",value:(i=u(regeneratorRuntime.mark((function t(e){var i,s,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=this.synthEffect){t.next=7;break}return t.next=3,N.loadRes("prefabs/effects/synthEffect",B);case 3:i=t.sent,s=S(i),this.node.addChild(s),this.synthEffect=s;case 7:for(this.synthEffect.position=e,n=this.synthEffect.getComponentsInChildren(M),o=0;o<n.length;o++)n[o].play();b.Instance.playOneShot(C.Synthe),k.vibration(),K.Instance.synth();case 13:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"refreshItemByInfo",value:function(){for(var t=0;t<this.items.length;t++)if(!(this.items[t].id>100)){var e=X.instance.getItemInfoBySid(this.items[t].sid);this.items[t].sid==e.sid&&this.items[t].init(e.id,e.sid,this.items[t].team,e.lv,e.matrix)}}},{key:"clickBoxPoint",value:function(t){if(this.camera.screenPointToRay(t._point.x,t._point.y,this._ray),T.instance.raycast(this._ray))for(var e=T.instance.raycastResults,i=0;i<e.length;i++){if(e[i].collider.name.indexOf("DJ_KTX")>-1)return V.Instance.TmpGuideId!=z.None?void N.ShowTip("In Guiding"):(K.Instance.sendEvent(F[F.KongTou],{type:"空投模型点击"}),K.Instance.sendEvent(F[F.airdropModel_click]),void j.Instance.showView(P.UIKongTou,w.PANEL))}}},{key:"refreshKongTouBox",value:function(){this.DJ_KTX.active=X.instance.kongTouIsShow&&J.Instance.Level>4,this.DJ_KTX.active&&(K.Instance.sendEvent(F[F.airdropModel_appear]),K.Instance.sendEvent(F[F.KongTou],{type:"空投模型出现"}))}}]),e}(x),nt.instance=null,it=i((et=ot).prototype,"camera",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=i(et.prototype,"hlNode",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=et))||tt)),m._RF.pop()}}}));

System.register("chunks:///Item.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Core/Utils/PlatformUtils.js","./Core/Constants/Constant.js","./Tools.js","./Config.js","./Data/BuildData.js","./DataManager.js","./HomeScene.js","./BoatScene.js"],(function(t,e){var i,s,n,a,o,r,h,c,u,l,p,d,f,v,m,y,g,b,x,j,T,w,k,B,C;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){i=t.inherits,s=t.classCallCheck,n=t.possibleConstructorReturn,a=t.getPrototypeOf,o=t.createClass,r=t.asyncToGenerator},function(t){h=t.cclegacy,c=t._decorator,u=t.Vec3,l=t.Component,p=t.Prefab,d=t.instantiate,f=t.SkeletalAnimationComponent,v=t.find},function(t){m=t.default},function(t){y=t.default},function(t){g=t.Tools},function(t){b=t.SOLDIER_POS},function(t){x=t.default},function(t){j=t.DataManager},function(t){T=t.HomeScene},function(t){w=t.BoatScene}],execute:function(){h._RF.push({},"61b01ZA9BBP9agh5qGvSAd5","Item",void 0),C=c.ccclass,c.property,t("Item",(k=C("Item"),k(B=function(t){function e(){var t,i;s(this,e);for(var o=arguments.length,r=new Array(o),h=0;h<o;h++)r[h]=arguments[h];return(i=n(this,(t=a(e)).call.apply(t,[this].concat(r)))).id=-1,i.team=-1,i.lv=0,i.sid=-1,i.matrix=[],i.boatMatrix=[],i.objects=[],i.upTip=null,i.iscreate=!1,i}var h,c;return i(e,t),o(e,[{key:"init",value:function(t,e,i,s,n){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];if(this.id=t,this.sid=e,this.lv=s,this.team=i,this.matrix=n,this.boatMatrix=a,this.initObjects(),this.showUpTip(!1),this.id>2&&this.id<100&&this.lv+1<10){var o=x.Instance.getBuildingVoDataBySid(this.sid);null==o&&(o=x.Instance.getBuildUpVoDataBySid(this.sid));var r=j.instance.getBuildUpInfoById(this.id),h=r.upPrice[this.lv];if(h>j.instance.wood)return;if(o)return;this.createUpTip()}}},{key:"initObjects",value:(c=r(regeneratorRuntime.mark((function t(){var e,i,s,n,a,o,r,h,c,l,v,x,T,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=0;e<this.objects.length;e++)this.objects[e].removeFromParent(),this.objects[e].destroy();if(this.objects=[],i=j.instance.getItemConstInfoByID(this.id),!(this.id>=100)){t.next=15;break}return s=0==this.team?"_blue":"_red",t.next=7,g.loadRes("prefabs/"+i.prefab+s,p);case 7:for(n=t.sent,a=0,(o=this.lv)>=i.count.length&&(o=i.count.length-1),r=b[i.count[o]],h=0;h<i.count[o];h++)c=r[a],l=r[a+1],a+=2,v=d(n),this.node.addChild(v),v.setPosition(c,0,l),v.setRotationFromEuler(0,0,0),this.objects.push(v),this.showQuaity(),m.isQQ&&m.IsIos&&(v.setScale(new u(y.QQRoleScale,y.QQRoleScale,y.QQRoleScale)),v.getComponentInChildren(f).playOnLoad=!1);t.next=24;break;case 15:return x=i.prefab+(0==this.team?"_blue":"_red"),1!=this.id&&2!=this.id||(x=i.prefab),t.next=19,g.loadRes("prefabs/"+x,p);case 19:T=t.sent,w=d(T),this.node.addChild(w),w.setPosition(0,0,0),this.objects.push(w);case 24:this.resetShow();case 25:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"resetShow",value:function(){if(1==this.id||2==this.id)for(var t=0;t<this.objects.length;t++)this.objects[t].getChildByName("wall1").active=1==this.id,this.objects[t].getChildByName("wall2").active=2==this.id}},{key:"resetPositionByMatrix",value:function(){if(0!=this.matrix.length){var t=null;t=1==this.id||2==this.id?this.getWorldPosByMatrix(this.matrix[2],this.matrix[3]):this.getWorldPosByMatrix(this.matrix[8],this.matrix[9]),this.node.setPosition(t)}else w.instance&&this.node.setWorldPosition(w.instance.getWorldPosByMatrix(this.boatMatrix))}},{key:"getWorldPosByMatrix",value:function(t,e){return new u(t-12,0,e-12)}},{key:"showQuaity",value:function(){for(var t=0;t<this.objects.length;t++)for(var e=this.objects[t].getChildByName("rank"),i=0;i<e.children.length;i++){var s=e.children[i];this.lv<4?s.active=0==i:s.active=this.lv-3==i}}},{key:"update",value:function(){this.refreshUpTipPos()}},{key:"onEnable",value:function(){this.showUpTip(!0)}},{key:"onDisable",value:function(){this.showUpTip(!1)}},{key:"showUpTip",value:function(t){null!=this.upTip&&(this.upTip.active=t)}},{key:"createUpTip",value:(h=r(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.iscreate){t.next=3;break}return this.showUpTip(!0),t.abrupt("return");case 3:return this.iscreate=!0,t.next=6,g.loadRes("ui/upTip",p);case 6:e=t.sent,this.upTip=d(e),v("Canvas/UI/UIHome/items").addChild(this.upTip),this.showUpTip(!0);case 11:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"refreshUpTipPos",value:function(){if(null!=this.upTip&&this.upTip.active){var t=g.getScreenPos(this.node,T.instance.camera,this.upTip.parent);this.upTip.worldPosition=new u(t.x+25,t.y+50)}}}]),e}(l))||B)),h._RF.pop()}}}));

System.register("chunks:///UI/UICBUpTipPanel.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Constants/Constant.js","../Tools.js","../Config.js","../Core/View/UIManager.js","../Core/AdUitls/AdManager.js","../Core/Utils/SendEventManager.js","../Data/GuideData.js","../Data/BattleData.js","../Data/GameData.js","../DataManager.js","../BoatScene.js"],(function(e,n){var i,t,o,a,c,s,l,r,u,d,f,p,h,v,g,b,k,C,y,B,I,U,_,L,m,x,S,w,j,D,T,V,P,z,E,G,H,M,A,O,R,F,N,Z,J,K;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inherits,o=e.classCallCheck,a=e.possibleConstructorReturn,c=e.getPrototypeOf,s=e.initializerDefineProperty,l=e.assertThisInitialized,r=e.createClass},function(e){u=e.cclegacy,d=e._decorator,f=e.Node,p=e.LabelComponent,h=e.director,v=e.find,g=e.Vec3,b=e.Component},function(e){k=e.default,C=e.ViewType},function(e){y=e.Tools},function(e){B=e.LOCK_BOAT_LEVEL},function(e){I=e.default},function(e){U=e.default},function(e){_=e.default,L=e.EventId},function(e){m=e.default},function(e){x=e.default},function(e){S=e.default},function(e){w=e.DataManager},function(e){j=e.BoatScene}],execute:function(){u._RF.push({},"5a2fe6RZoVHPanDgsZhgU3k","UICBUpTipPanel",void 0),J=d.ccclass,K=d.property,e("UICBUpTipPanel",(D=J("UICBUpTipPanel"),T=K(f),V=K(f),P=K(p),z=K(p),E=K(p),G=K(f),D((A=i((M=function(e){function n(){var e,i;o(this,n);for(var t=arguments.length,r=new Array(t),u=0;u<t;u++)r[u]=arguments[u];return i=a(this,(e=c(n)).call.apply(e,[this].concat(r))),s(i,"dir",A,l(i)),s(i,"goBtn",O,l(i)),s(i,"tipLab",R,l(i)),s(i,"levLab",F,l(i)),s(i,"indexLab",N,l(i)),i.index=0,s(i,"videoBtn",Z,l(i)),i}return t(n,e),r(n,[{key:"start",value:function(){}},{key:"onEnable",value:function(){this.goBtn.on("click",this.onGoClick,this),this.videoBtn.on("click",this.onVideoClick,this),_.Instance.sendEvent(L[L.BoatLockClick])}},{key:"onDisable",value:function(){this.goBtn.off("click",this.onGoClick,this),this.videoBtn.off("click",this.onVideoClick,this)}},{key:"onVideoClick",value:function(){U.createVideo((function(){w.instance.VideoCount++,w.instance.UnlockBoat[w.instance.onClickOne]=1,localStorage.setItem("UnlockBoat",JSON.stringify(w.instance.UnlockBoat)),h.getScene().emit("REFRSHBOAT"),console.log("走刷新船只解锁")}),(function(){}))}},{key:"onGoClick",value:function(){j.instance&&j.instance.hideCreateUICBUpTipPanel(),I.Instance.checkViewActive(C.UIGuide)&&I.Instance.hideView(C.UIGuide),!S.Instance.IsBebug&&S.Instance.Level<k.LockHome?y.ShowTip("Unlock Island at Stage. "+k.LockStore):(w.instance.IsScelectMainHouse=!0,I.Instance.showUILoadlingView(!0),m.Instance.guideHomeScene(),y.cleanUnuseRes(),h.loadScene("HomeScene"),_.Instance.sendEvent(L[L.BoatGoClick]))}},{key:"setTargetPos",value:function(e){this.index=x.Instance.getShipIndexByMatrix([e.x,e.y]);var n=y.getScreenPos(j.instance.ships[this.index],j.instance.camera,v("Canvas")),i=0;n.x<300&&(i=140),n.x>400&&(i=-140),this.node.setWorldPosition(new g(n.x+i,n.y+150)),this.node.active=!0,this.dir.position=new g(-i,this.dir.position.y),this.refreshUI()}},{key:"refreshUI",value:function(){var e=this;this.levLab.string="("+w.instance.getMainHouseLv()+"/"+B[this.index]+")",this.indexLab.string="Battleship "+(this.index+1),console.log(this.index+1,"号战船"),this.tipLab.string="Unlock at Base camp Lv "+B[this.index],this.unscheduleAllCallbacks(),this.scheduleOnce((function(){e.node.active=!1}),2)}},{key:"hide",value:function(){this.node.active=!1}}]),n}(b)).prototype,"dir",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(M.prototype,"goBtn",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(M.prototype,"tipLab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(M.prototype,"levLab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(M.prototype,"indexLab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=i(M.prototype,"videoBtn",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=M))||H)),u._RF.pop()}}}));

System.register("chunks:///BoatScene.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Core/Utils/PlatformUtils.js","./Core/Constants/Constant.js","./Core/Utils/AudioManager.js","./Tools.js","./Config.js","./Core/Utils/List.js","./Core/View/UIManager.js","./Core/Utils/SendEventManager.js","./Data/GuideData.js","./Data/GameData.js","./DataManager.js","./Item.js","./UI/UICBUpTipPanel.js"],(function(t,e){var i,n,s,o,r,a,h,c,u,m,l,d,f,I,p,v,y,g,_,T,x,M,S,B,C,P,k,w,E,N,U,b,O,R,G,H,L,A,D,F,j,z,K,V,W,Z,J,Y,q,Q;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_class3:void 0,_temp:void 0}),{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inherits,s=t.classCallCheck,o=t.possibleConstructorReturn,r=t.getPrototypeOf,a=t.initializerDefineProperty,h=t.assertThisInitialized,c=t.createClass,u=t.asyncToGenerator},function(t){m=t.cclegacy,l=t._decorator,d=t.CameraComponent,f=t.Node,I=t.geometry,p=t.Vec3,v=t.director,y=t.systemEvent,g=t.Vec2,_=t.PhysicsSystem,T=t.Component,x=t.Prefab,M=t.instantiate,S=t.find,B=t.ParticleSystemComponent},function(t){C=t.default},function(t){P=t.AudioName,k=t.SceneType},function(t){w=t.AudioManager},function(t){E=t.Tools},function(t){N=t.CANGKU_POSY},function(t){U=t.default},function(t){b=t.default},function(t){O=t.default},function(t){R=t.default,G=t.GuideId},function(t){H=t.default},function(t){L=t.DataManager},function(t){A=t.Item},function(t){D=t.UICBUpTipPanel}],execute:function(){m._RF.push({},"c8d95iLTw9FWoMKk74snbU+","BoatScene",void 0),q=l.ccclass,Q=l.property,t("BoatScene",(F=q("BoatScene"),j=Q(d),z=Q(f),F((Y=J=function(t){function e(){var t,i;s(this,e);for(var n=arguments.length,c=new Array(n),u=0;u<n;u++)c[u]=arguments[u];return i=o(this,(t=r(e)).call.apply(t,[this].concat(c))),a(i,"camera",W,h(i)),a(i,"hlNode",Z,h(i)),i.ships=[],i.shipsMatrixNode=[],i.items=[],i._curTouchItem=null,i._ray=new I.ray,i.out=new p(0,0,0),i.uICBUpTipPanel=null,i.canSynthEffects=new U,i.synthEffect=null,i}var i,m,l,d,T;return n(e,t),c(e,[{key:"onLoad",value:function(){b.Instance.clearView(),e.instance=this,this.initShip(),v.getScene().on("CREAT_ITEM",this.zhaomu,this),v.getScene().on("REFRSHBOAT",this.refreshShip,this),y.on(cc.SystemEventType.KEY_UP,this.onKeyUp,this),y.on(cc.SystemEventType.TOUCH_START,this.onTouchStart,this),y.on(cc.SystemEventType.TOUCH_MOVE,this.onTouchMove,this),y.on(cc.SystemEventType.TOUCH_END,this.onTouchEnd,this),y.on(cc.SystemEventType.TOUCH_CANCEL,this.onTouchEnd,this);for(var t=0;t<L.instance.homeInfo.length;t++){var i=L.instance.homeInfo[t];i.boatMatrix.length>0&&this.createItemByID(i.id,i.lv,0,i.sid,i.boatMatrix)}}},{key:"start",value:function(){w.Instance.playSound(P.BG),H.Instance.TmpScene=k.BoatScene}},{key:"initShip",value:function(){for(var t=this.node.parent.getChildByName("ship"),e=1;e<=6;e++){var i=t.getChildByName("ship"+e);this.ships.push(i);for(var n=[0,2,4,0,2,4],s=0;s<3;s++){var o=new f,r=3*Math.floor(e/4),a=Math.floor(n[e-1]),h=Math.floor(s+r);o.name=a+","+h,i.addChild(o),o.setPosition(-1.55,0,3.2*s-3.2),this.shipsMatrixNode.push(o)}for(var c=0;c<3;c++){var u=new f,m=3*Math.floor(e/4),l=Math.floor(n[e-1]+1),d=Math.floor(c+m);u.name=l+","+d,i.addChild(u),u.setPosition(1.55,0,3.2*c-3.2),this.shipsMatrixNode.push(u)}}this.refreshShip(),console.log("init ship")}},{key:"refreshShip",value:function(){for(var t=H.Instance.getBoatMatrixLockIndex(),e=0;e<this.ships.length;e++)this.ships[e].getChildByName("lock").active=e>t;localStorage.setItem("UnlockBoat",JSON.stringify(L.instance.UnlockBoat));for(var i=JSON.parse(localStorage.getItem("UnlockBoat")),n=0;n<i.length;n++)this.ships[n].getChildByName("lock").active&&(1==i[n]&&(this.ships[n].getChildByName("lock").active=!1),console.log("走船只解锁刷新",i[n]))}},{key:"zhaomu",value:(T=u(regeneratorRuntime.mark((function t(e,i,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.createItemByID(e,n,i);case 1:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return T.apply(this,arguments)})},{key:"createItemByID",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=null,r=L.instance.getItemConstInfoByID(t);o=s||this.findPutMatrix(r.type,H.Instance.getBoatMatrix());var a=L.instance.getItemHomeMatrix(r.type,r.width,r.height);if(o){n||(n=L.instance.generateSid());var h=new f;this.node.addChild(h);var c=h.addComponent(A);if(c.init(t,n,i,e,[],o),c.resetPositionByMatrix(),this.items.push(c),!s){var u={sid:n,id:t,lv:e,matrix:a,boatMatrix:o};L.instance.addHomeInfo(u)}}else if(t>100){if(!n){var m={sid:n=L.instance.generateSid(),id:t,lv:e,matrix:a,boatMatrix:[]};L.instance.addHomeInfo(m)}}else E.ShowTip("No space for this unit")}},{key:"createItemInBoat",value:function(t,e,i,n,s){var o=new f;this.node.addChild(o);var r=o.addComponent(A);r.init(t,n,i,e,[],s),r.resetPositionByMatrix(),this.items.push(r)}},{key:"findPutMatrix",value:function(t,e){for(var i=0;i<e.length;i++)for(var n=0;n<e[i].length;n++)if(e[i][n]==t&&this.isEmptyMatrix(n,i))return[n,i];return null}},{key:"isEmptyMatrix",value:function(t,e){for(var i=0;i<this.items.length;i++)for(var n=this.items[i],s=0;s<n.boatMatrix.length;s+=2)if(t==n.boatMatrix[s]&&e==n.boatMatrix[s+1])return!1;return!0}},{key:"onTouchStart",value:function(t){if(R.Instance.TmpGuideId!=G.ShangZhen){v.getScene().emit("TOUCH_OBJECT",null);var e=this.getTouchMatrix(t);if(e&&(this._curTouchItem=this.getItemByMatrix(e.x,e.y),this._curTouchItem&&!this._curTouchItem.node.active&&(this._curTouchItem=null),this._curTouchItem&&this._curTouchItem.id<100&&v.getScene().emit("HIDE_CANGKU"),this._curTouchItem&&this._curTouchItem.id>100&&v.getScene().emit("OnSoldierStart",this._curTouchItem.sid,this._curTouchItem.node.getWorldPosition()),this._curTouchItem)){v.getScene().emit("TOUCHSTART_SOLDIER",this._curTouchItem);var i=this.getGroundPoint(t);i&&(i.y=.3,this._curTouchItem.node.setPosition(i)),this.showCanSynthEffects(this._curTouchItem.sid,this._curTouchItem.id,this._curTouchItem.lv)}}}},{key:"onTouchMove",value:function(t){if(R.Instance.TmpGuideId!=G.ShangZhen&&this._curTouchItem){var e=this.getGroundPoint(t);if(e){e.y=.3,this._curTouchItem.node.setPosition(e),this._curTouchItem.id>100&&(v.getScene().emit("TOUCHMOVE_SOLDIER",this._curTouchItem,t),v.getScene().emit("OnSoldierMove",this._curTouchItem.sid,this._curTouchItem.node.getWorldPosition()));var i=this.getTouchMatrix(t);if(i){var n=this.findNewMatrixByPos(i.x,i.y);if(n){var s=L.instance.getItemConstInfoByID(this._curTouchItem.id);this.setHighLightByMatrix(n,s.width,s.height)}else this.hlNode.setPosition(-100,0,0)}else this.hlNode.setPosition(-100,0,0)}}}},{key:"clickBoat",value:function(t){if(0==t.x||1==t.x)switch(t.y){case 0:case 1:case 2:return 0;case 3:case 4:case 5:return 3}else if(2==t.x||3==t.x)switch(t.y){case 0:case 1:case 2:return 1;case 3:case 4:case 5:return 4}else if(4==t.x||5==t.x)switch(t.y){case 0:case 1:case 2:return 2;case 3:case 4:case 5:return 5}}},{key:"onTouchEnd",value:function(t){if(R.Instance.TmpGuideId!=G.ShangZhen){var e=this.getTouchMatrix(t);if(e)if(console.log("走点击第几只船：：",this.clickBoat(e)),H.Instance.checkBoatMatrixIsLockByPos(e.y,e.x))this.hideCreateUICBUpTipPanel();else{var i=this.clickBoat(e);L.instance.onClickOne=i,this.ships[i].getChildByName("lock").active&&(this.createUICBUpTipPanel(e),e=null)}else this.hideCreateUICBUpTipPanel();if(this._curTouchItem){if(this._curTouchItem.id>100){if(!this._curTouchItem.node.active)L.instance.getItemInfoBySid(this._curTouchItem.sid).boatMatrix=[],L.instance.saveHomeInfo(),this.removeItemFromItemArray(this._curTouchItem),this._curTouchItem.node.removeFromParent(),this._curTouchItem.node.destroy(),this._curTouchItem=null;v.getScene().emit("TOUCHEND_SOLDIER")}if(this._curTouchItem){if(e&&this._curTouchItem){var n=this.findNewMatrixByPos(e.x,e.y);if(n){var s=this.getItemByMatrixArray(n,this._curTouchItem.sid);if(s)if(s.id==this._curTouchItem.id&&s.lv==this._curTouchItem.lv&&s.lv<9){var o=L.instance.getBarracks(),r=L.instance.getBuildUpInfoById(o.id).type[1][o.lv]-1;if(s.lv>=r){var a=L.instance.getBarrackLvBySynthLv(r+1)+1;E.ShowTip("Merge after Barracks Lv "+a),this._curTouchItem.resetPositionByMatrix()}else{for(var h=0;h<L.instance.homeInfo.length;h++){if(L.instance.homeInfo[h].sid==s.sid){L.instance.homeInfo.splice(h,1);break}}for(var c=0;c<L.instance.homeInfo.length;c++){var u=L.instance.homeInfo[c];if(u.sid==this._curTouchItem.sid){u.lv++;break}}this.removeItemFromItemArray(s),s.node.removeFromParent(),s.node.destroy(),this._curTouchItem.lv++,this._curTouchItem.initObjects(),this._curTouchItem.boatMatrix=n,this._curTouchItem.resetPositionByMatrix(),this.playSynthEffects(this._curTouchItem.node.position),L.instance.saveItemNewMatrix(this._curTouchItem.sid,this._curTouchItem.id,null,n),R.Instance.guideHeCheng(),R.Instance.guideHeCheng1()}}else G.Guide_GuideSynthTip==R.Instance.TmpGuideId||G.HeCheng1==R.Instance.TmpGuideId?this._curTouchItem.resetPositionByMatrix():(s.boatMatrix=this._curTouchItem.boatMatrix,s.resetPositionByMatrix(),L.instance.saveItemNewMatrix(s.sid,s.id,null,this._curTouchItem.boatMatrix),this._curTouchItem.boatMatrix=n,this._curTouchItem.resetPositionByMatrix(),L.instance.saveItemNewMatrix(this._curTouchItem.sid,this._curTouchItem.id,null,n));else G.Guide_GuideSynthTip==R.Instance.TmpGuideId||G.HeCheng1==R.Instance.TmpGuideId?this._curTouchItem.resetPositionByMatrix():(this._curTouchItem.boatMatrix=n,this._curTouchItem.resetPositionByMatrix(),L.instance.saveItemNewMatrix(this._curTouchItem.sid,this._curTouchItem.id,null,n))}else this._curTouchItem.resetPositionByMatrix()}else this._curTouchItem.resetPositionByMatrix();v.getScene().emit("TOUCH_OBJECT",this._curTouchItem.sid)}}this._curTouchItem=null,this.hlNode.setPosition(-100,0,0),this.hideCanSynthEffects(),v.getScene().emit("OnSoldierEnd")}}},{key:"getItemByMatrixArray",value:function(t,e){for(var i=null,n=0;n<this.items.length;n++)if(this.items[n].sid!=e){for(var s=!0,o=0;o<this.items[n].boatMatrix.length;o++)if(this.items[n].boatMatrix[o]!=t[o]){s=!1;break}if(s){i=this.items[n];break}}return i}},{key:"findNewMatrixByPos",value:function(t,e){for(var i=0;i<this.shipsMatrixNode.length;i++)if(this.shipsMatrixNode[i].name==t+","+e)return[t,e];return null}},{key:"getItemByMatrix",value:function(t,e){for(var i=0;i<this.items.length;i++)for(var n=0;n<this.items[i].boatMatrix.length;n+=2){var s=this.items[i].boatMatrix[n],o=this.items[i].boatMatrix[n+1];if(t==s&&e==o)return this.items[i]}return null}},{key:"getWorldPosByMatrix",value:function(t){for(var e=0;e<this.shipsMatrixNode.length;e++)if(this.shipsMatrixNode[e].name==t[0]+","+t[1])return this.shipsMatrixNode[e].worldPosition;return new p(0,0,0)}},{key:"setHighLightByMatrix",value:function(t,e,i){if(t){this.hlNode.setScale(e,1,i);for(var n=0;n<this.shipsMatrixNode.length;n++)this.shipsMatrixNode[n].name==t[0]+","+t[1]&&(this.hlNode.worldPosition=this.shipsMatrixNode[n].worldPosition)}}},{key:"removeItemFromItemArray",value:function(t){var e=this.items.indexOf(t);e>-1&&this.items.splice(e,1)}},{key:"getTouchMatrix",value:function(t){var e=this.getGroundPoint(t);if(e)for(var i=0;i<this.shipsMatrixNode.length;i++){var n=this.shipsMatrixNode[i];if(this.out.x=n.worldPosition.x,this.out.y=0,this.out.z=n.worldPosition.z,p.distance(this.out,e)<1.6){var s=E.splitToNumber(n.name,",");return new g(s[0],s[1])}}return null}},{key:"getGroundPoint",value:function(t){if(this.camera.screenPointToRay(t._point.x,t._point.y,this._ray),_.instance.raycast(this._ray)){var e=_.instance.raycastResults;if(e[0].collider.name.indexOf("ground")>-1)return new p(e[0].hitPoint.x,0,e[0].hitPoint.z)}return null}},{key:"getScreenPos",value:function(t){return E.getScreenPos(t,this.camera,this.node)}},{key:"initTempItem",value:function(t,e,i){var n=new f;this.node.addChild(n),this._tempItem=n.addComponent(A),this._tempItem.init(t,e,0,i,[]),this._tempItem.node.active=!1,this.showCanSynthEffects(e,t,i)}},{key:"moveTempItem",value:function(t){if(this._tempItem){var e=t.getUILocation();this._tempItem.node.active=e.y>N,this._tempItem.node.active&&v.getScene().emit("OnSoldierMove",this._tempItem.sid,this._tempItem.node.getWorldPosition());var i=this.getGroundPoint(t);i&&(i.y=.3,this._tempItem.node.setPosition(i));var n=this.getTouchMatrix(t);if(n){var s=this.findNewMatrixByPos(n.x,n.y);s?(this.hlNode.setScale(3,1,3),this.setHighLightByMatrix(s,3,3)):this.hlNode.setPosition(-100,0,0)}}}},{key:"endTempItem",value:function(t){var e=this.getTouchMatrix(t);if(e&&(H.Instance.checkBoatMatrixIsLockByPos(e.y,e.x)||(this.createUICBUpTipPanel(e),e=null)),this._tempItem)if(this._tempItem.node.active)if(e){var i=this.findNewMatrixByPos(e.x,e.y);if(i){var n=this.getItemByMatrixArray(i,this._tempItem.sid);if(n)if(n.id>100)if(n.id==this._tempItem.id&&n.lv==this._tempItem.lv&&n.lv<9){var s=L.instance.getBarracks(),o=L.instance.getBuildUpInfoById(s.id).type[1][s.lv]-1;if(n.lv>=o){var r=L.instance.getBarrackLvBySynthLv(o+1)+1;E.ShowTip("Merge after Barracks Lv "+r),this._tempItem.resetPositionByMatrix()}else{for(var a=0;a<L.instance.homeInfo.length;a++){if(L.instance.homeInfo[a].sid==n.sid){L.instance.homeInfo.splice(a,1);break}}for(var h=0;h<L.instance.homeInfo.length;h++){var c=L.instance.homeInfo[h];if(c.sid==this._tempItem.sid){c.lv++;break}}this.removeItemFromItemArray(n),n.node.removeFromParent(),n.node.destroy(),this._tempItem.lv++,this._tempItem.initObjects(),this._tempItem.boatMatrix=i,this._tempItem.resetPositionByMatrix(),this.playSynthEffects(this._tempItem.node.position),L.instance.saveItemNewMatrix(this._tempItem.sid,this._tempItem.id,null,i),this.items.push(this._tempItem)}}else if(R.Instance.TmpGuideId==G.ShangZhen)this._tempItem.node.removeFromParent(),this._tempItem.node.destroy(),E.ShowTip("In Guiding");else{n.boatMatrix=[],L.instance.saveItemNewMatrix(n.sid,n.id,null,[]);var u=this.items.indexOf(n);this.items.splice(u,1),n.node.removeFromParent(),n.node.destroy(),this._tempItem.boatMatrix=i,this._tempItem.resetPositionByMatrix(),L.instance.saveItemNewMatrix(this._tempItem.sid,this._tempItem.id,null,i),this.items.push(this._tempItem)}else this._tempItem.node.removeFromParent(),this._tempItem.node.destroy();else this._tempItem.boatMatrix=i,this._tempItem.resetPositionByMatrix(),L.instance.saveItemNewMatrix(this._tempItem.sid,this._tempItem.id,null,i),this.items.push(this._tempItem),R.Instance.guideShangZhen()}else this._tempItem.node.removeFromParent(),this._tempItem.node.destroy()}else this._tempItem.node.removeFromParent(),this._tempItem.node.destroy();else this._tempItem.node.removeFromParent(),this._tempItem.node.destroy();this._tempItem=null,this.hlNode.setPosition(-100,0,0),this.hideCanSynthEffects(),v.getScene().emit("OnSoldierEnd")}},{key:"recoverAllSoldier",value:function(){for(var t=0;t<L.instance.homeInfo.length;t++){var e=L.instance.homeInfo[t];e.id>100&&(e.boatMatrix=[])}L.instance.saveHomeInfo();for(var i=0;i<this.items.length;i++)if(this.items[i].id>100){var n=this.items.splice(i,1)[0];i--,n.node.removeFromParent(),n.node.destroy()}}},{key:"onKeyUp",value:(d=u(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.rawEvent.key;case 1:case"end":return t.stop()}}),t)}))),function(t){return d.apply(this,arguments)})},{key:"createUICBUpTipPanel",value:(l=u(regeneratorRuntime.mark((function t(e){var i,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=this.uICBUpTipPanel){t.next=7;break}return t.next=3,E.loadRes("ui/UICBUpTipPanel",x);case 3:i=t.sent,n=M(i),S("Canvas/UI").addChild(n),this.uICBUpTipPanel=n.getComponent(D);case 7:this.uICBUpTipPanel.setTargetPos(e);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"hideCreateUICBUpTipPanel",value:function(){this.uICBUpTipPanel&&this.uICBUpTipPanel.hide()}},{key:"createCanSynthEffects",value:(m=u(regeneratorRuntime.mark((function t(e){var i,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.loadRes("prefabs/effects/canSynthEffect",x);case 2:i=t.sent,n=M(i),this.node.addChild(n),n.position=e,this.canSynthEffects.add(n);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)})},{key:"showCanSynthEffects",value:function(t,e,i){for(var n=this.getItemsByIdAndLv(t,e,i),s=this.canSynthEffects.Count,o=0;o<n.length;o++)if(o<s){var r=this.canSynthEffects.get(o);r.position=n[o].node.position,r.active=!0}else this.createCanSynthEffects(n[o].node.position)}},{key:"hideCanSynthEffects",value:function(){for(var t=this.canSynthEffects.Count,e=0;e<t;e++)this.canSynthEffects.get(e).active=!1}},{key:"getItemsByIdAndLv",value:function(t,e,i){var n=[];if(1==e||2==e)return n;for(var s=0;s<this.items.length;s++){var o=this.items[s];o.id==e&&o.lv==i&&t!=o.sid&&n.push(this.items[s])}return n}},{key:"playSynthEffects",value:(i=u(regeneratorRuntime.mark((function t(e){var i,n,s,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=this.synthEffect){t.next=7;break}return t.next=3,E.loadRes("prefabs/effects/synthEffect",x);case 3:i=t.sent,n=M(i),this.node.addChild(n),this.synthEffect=n;case 7:for(this.synthEffect.position=e,s=this.synthEffect.getComponentsInChildren(B),o=0;o<s.length;o++)s[o].play();w.Instance.playOneShot(P.Synthe),C.vibration(),O.Instance.synth();case 13:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"getItemsById",value:function(t){for(var e=[],i=0;i<this.items.length;i++){var n=this.items[i];n.id==t&&e.push(n)}return e}}]),e}(T),J.instance=null,W=i((V=Y).prototype,"camera",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=i(V.prototype,"hlNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=V))||K)),m._RF.pop()}}}));

System.register("chunks:///Core/AdUitls/NativeUitls.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Tools.js","./AdManager.js","../../DataManager.js"],(function(e,i){var t,n,o,a,r,c,l,s,d,u,v,p,b,f,h,m,A,N,_,g,y,j,C,D,k,O,w,L,z,I,M;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_temp:void 0}),{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inherits,o=e.classCallCheck,a=e.possibleConstructorReturn,r=e.getPrototypeOf,c=e.initializerDefineProperty,l=e.assertThisInitialized,s=e.createClass},function(e){d=e.cclegacy,u=e._decorator,v=e.Node,p=e.SpriteComponent,b=e.LabelComponent,f=e.director,h=e.Component},function(e){m=e.Tools},function(e){A=e.default},function(e){N=e.DataManager}],execute:function(){d._RF.push({},"34546jL17pBCbDkyZjTNT4O","NativeUitls",void 0),I=u.ccclass,M=u.property,e("NativeUitls",(_=I("NativeUitls"),g=M(v),y=M(p),j=M(b),C=M(b),_((O=t((k=function(e){function i(){var e,t;o(this,i);for(var n=arguments.length,s=new Array(n),d=0;d<n;d++)s[d]=arguments[d];return t=a(this,(e=r(i)).call.apply(e,[this].concat(s))),c(t,"actNode",O,l(t)),c(t,"icon",w,l(t)),c(t,"nameLabel",L,l(t)),c(t,"descLabel",z,l(t)),t.oldDesc="",t}return n(i,e),s(i,[{key:"start",value:function(){this.showNativeAD(),this.schedule(this.showNativeAD,1)}},{key:"showNativeAD",value:function(){(this.actNode.active=null!=A.minNativeAdObj,A.minNativeAdObj)&&(this.oldDesc!=A.minNativeAdObj.desc&&(this.oldDesc=A.minNativeAdObj.desc,this.nameLabel.string=A.minNativeAdObj.title,this.descLabel.string=A.minNativeAdObj.desc,m.setImage(this.icon,A.minNativeAdObj.icon,"png"),A.nativeAd&&100*Math.random()<=N.instance.oppoAdConfig.native_report&&A.nativeAd.reportAdShow({adId:A.minNativeAdObj.adId})))}},{key:"onIconClick",value:function(){A.clickNativeAd()}},{key:"onCloseADClick",value:function(){100*Math.random()<=N.instance.oppoAdConfig.native_close_jump?A.clickMiniNativeAd():(this.node.active=!1,f.getScene().emit("CLOSE_NATIVE_AD",!0))}}]),i}(h)).prototype,"actNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(k.prototype,"icon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(k.prototype,"nameLabel",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(k.prototype,"descLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=k))||D)),d._RF.pop()}}}));

System.register("chunks:///Core/AdUitls/WxCustomAdUitls/WXCustomAdUitls.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Utils/PlatformUtils.js","../../Constants/Constant.js","../../Event/EventCode.js","../../Event/EventBus.js","../../View/UIManager.js","../AdManager.js","../../../DataManager.js"],(function(t,e){var n,s,i,o,u,c,r,h,a,d,l,f,g,m,p,y,v,C,A,w,I,Q,W,b,x,k,j,F;return t({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0,CustomAdType:void 0}),{setters:[function(t){n=t.applyDecoratedDescriptor,s=t.inherits,i=t.classCallCheck,o=t.possibleConstructorReturn,u=t.getPrototypeOf,c=t.initializerDefineProperty,r=t.assertThisInitialized,h=t.createClass},function(t){a=t.cclegacy,d=t._decorator,l=t.WidgetComponent,f=t.view,g=t.Component},function(t){m=t.default},function(t){p=t.LayerType},function(t){y=t.EventCode},function(t){v=t.default},function(t){C=t.default},function(t){A=t.default},function(t){w=t.DataManager}],execute:function(){a._RF.push({},"e714eRWIpdNlYNB/ndLarrm","WXCustomAdUitls",void 0),k=d.ccclass,j=d.property,function(t){t[t.Icon=0]="Icon",t[t.HengFu=1]="HengFu",t[t.JuZheng=2]="JuZheng"}(F||t("CustomAdType",F={})),t("WXCustomAdUitls",(I=k("WXCustomAdUitls"),Q=j({type:cc.Enum(F)}),I((x=n((b=function(t){function e(){var t,n;i(this,e);for(var s=arguments.length,h=new Array(s),a=0;a<s;a++)h[a]=arguments[a];return n=o(this,(t=u(e)).call.apply(t,[this].concat(h))),c(n,"type",x,r(n)),n.customAd=null,n.func=n.refreshCustom.bind(r(n)),n}return s(e,t),h(e,[{key:"start",value:function(){if(m.isWx()||m.isQQ){var t=0,e=0,n=A.wxCustomAdId1;switch(this.type){case F.Icon:n=A.wxCustomAdId1,m.isQQ&&(n=A.qqCustomAdId1),t=this.getTop(),e=this.getLeft(),this.customAd=A.createCustomAd(n,t,e,375),this.show()}}}},{key:"getTop",value:function(){var t=this.node.getComponent(l),e=t.top;return 0!=t.bottom&&(e=f.getVisibleSize().height-t.bottom),e*m.rootObj.getSystemInfoSync().screenHeight/f.getVisibleSize().height}},{key:"getLeft",value:function(){var t=this.node.getComponent(l),e=t.left;return 0!=t.right?e=f.getVisibleSize().width-t.right:cc.winSize.width/cc.winSize.height>2&&(e+=100),e*m.rootObj.getSystemInfoSync().screenWidth/f.getVisibleSize().width}},{key:"onEnable",value:function(){(m.isWx()||m.isQQ)&&(this.type==F.HengFu&&(m.isWx()&&w.instance.WXConfig.touch&&A.showHengFuCustomAd(!0),m.isQQ&&w.instance.QQConfig.touch&&A.showHengFuCustomAd(!0)),this.type==F.JuZheng&&A.showJuZhenCustomAd(!0),this.type==F.Icon&&this.customAd&&this.customAd.show(),v.Instance.addListener(y.RefreshWxCustomAd,this.func))}},{key:"onDisable",value:function(){(m.isWx()||m.isQQ)&&(v.Instance.removeListener(y.RefreshWxCustomAd,this.func),this.type==F.HengFu&&(m.isWx()&&w.instance.WXConfig.touch&&A.showHengFuCustomAd(!1),m.isQQ&&w.instance.QQConfig.touch&&A.showHengFuCustomAd(!1)),this.type==F.JuZheng&&A.showJuZhenCustomAd(!1),this.type==F.Icon&&this.customAd&&this.customAd.hide())}},{key:"onDestroy",value:function(){(m.isWx()||m.isQQ)&&this.type==F.Icon&&this.customAd&&this.customAd.destroy()}},{key:"refreshCustom",value:function(){var t=[],e=C.Instance.getLayer(p.UI);if(e)for(var n=0;n<e.children.length;n++)t.push(e.children[n]);var s=C.Instance.getLayer(p.PANEL);if(s)for(var i=0;i<s.children.length;i++)t.push(s.children[i]);var o=C.Instance.getLayer(p.TOP);if(o)for(var u=0;u<o.children.length;u++)t.push(o.children[u]);for(var c=!0,r=-1,h=0;h<t.length;h++){var a=t[h];if(this.node.parent==a&&(r=h),-1!=r&&!(h<=r)&&a.active){c=!1;break}}c?this.show():this.hide()}},{key:"show",value:function(){this.node.active&&this.type==F.Icon&&this.customAd&&(m.isWx()&&this.customAd.show().then((function(){return console.log("原生模板广告显示")})).catch((function(t){return console.log(t)})),m.isQQ&&this.customAd.show())}},{key:"hide",value:function(){this.node.active&&this.type==F.Icon&&this.customAd&&(m.isWx()&&this.customAd.hide().catch((function(t){return console.log(t)})),m.isQQ&&this.customAd.hide())}}]),e}(g)).prototype,"type",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.HengFu}}),W=b))||W)),a._RF.pop()}}}));

System.register("chunks:///Core/Constants/LocalStorageKey.js",["cc"],(function(e,o){var t,c;return e("LocalStorageKey",void 0),{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"ed264tp3hJG75YGdzqjnXM6","LocalStorageKey",void 0),c||e("LocalStorageKey",c={}),t._RF.pop()}}}));

System.register("chunks:///Core/Utils/ButtomClickAudio.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../Constants/Constant.js","./AudioManager.js"],(function(t,i){var o,n,e,a,r,c,s,u,l,d,p,f,h,y,v,C,k,m,A,_,g;return t({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.inherits,e=t.classCallCheck,a=t.possibleConstructorReturn,r=t.getPrototypeOf,c=t.initializerDefineProperty,s=t.assertThisInitialized,u=t.createClass},function(t){l=t.cclegacy,d=t._decorator,p=t.ButtonComponent,f=t.Component},function(t){h=t.AudioName},function(t){y=t.AudioManager}],execute:function(){l._RF.push({},"f7aeePNDfNH9JFhddvYSfGN","ButtomClickAudio",void 0),_=d.ccclass,g=d.property,t("ButtomClickAudio",(v=_("ButtomClickAudio"),C=g(String),v((A=o((m=function(t){function i(){var t,o;e(this,i);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return o=a(this,(t=r(i)).call.apply(t,[this].concat(u))),c(o,"audio",A,s(o)),o}return n(i,t),u(i,[{key:"start",value:function(){var t=this.node.getComponent(p);t&&(t.transition=p.Transition.SCALE,t.zoomScale=1.1,t.duration=.1,this.node.on("click",this.playAudio.bind(this)))}},{key:"onEnable",value:function(){}},{key:"onDestroy",value:function(){this.node.off("click",this.playAudio.bind(this))}},{key:"playAudio",value:function(){y.Instance.playOneShot(this.audio)}}]),i}(f)).prototype,"audio",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.BtnClick}}),k=m))||k)),l._RF.pop()}}}));

System.register("chunks:///Core/Utils/RotaionUitls.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var i,r,n,o,s,c,l,a,u,p,d,f,h,v,y,_,b,g,m,R,C;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.inherits,n=e.classCallCheck,o=e.possibleConstructorReturn,s=e.getPrototypeOf,c=e.initializerDefineProperty,l=e.assertThisInitialized,a=e.createClass},function(e){u=e.cclegacy,p=e._decorator,d=e.Vec3,f=e.Component}],execute:function(){u._RF.push({},"83f7cZ3Vq1OjKpAxyJeaZQS","RotaionUitls",void 0),R=p.ccclass,C=p.property,e("RotaionUitls",(h=R("RotaionUitls"),v=C(Number),y=C(Number),h((g=i((b=function(e){function t(){var e,i;n(this,t);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return i=o(this,(e=s(t)).call.apply(e,[this].concat(a))),c(i,"shun",g,l(i)),c(i,"speed",m,l(i)),i}return r(t,e),a(t,[{key:"start",value:function(){}},{key:"update",value:function(e){this.node.eulerAngles=new d(0,0,this.node.eulerAngles.z-e*this.speed*this.shun)}}]),t}(f)).prototype,"shun",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),m=i(b.prototype,"speed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),_=b))||_)),u._RF.pop()}}}));

System.register("chunks:///Core/Utils/UIUtils/AniPlay.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,e){var n,o,i,s,c,l,r,a,u,p,y,f;return t({_dec:void 0,_class:void 0}),{setters:[function(t){n=t.inherits,o=t.createClass,i=t.classCallCheck,s=t.possibleConstructorReturn,c=t.getPrototypeOf},function(t){l=t.cclegacy,r=t._decorator,a=t.AnimationComponent,u=t.Component}],execute:function(){l._RF.push({},"e1e55uXNcdOsoAC68yYHc3X","AniPlay",void 0),f=r.ccclass,r.property,t("AniPlay",(p=f("AniPlay"),p(y=function(t){function e(){return i(this,e),s(this,c(e).apply(this,arguments))}return n(e,t),o(e,[{key:"start",value:function(){}},{key:"onEnable",value:function(){this.getComponent(a).play()}}]),e}(u))||y)),l._RF.pop()}}}));

System.register("chunks:///Core/Utils/UIUtils/DiamondUtils.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Constants/Constant.js","../../../Tools.js","../../Event/EventCode.js","../../View/UIManager.js","../../../Data/GuideData.js","../../../DataManager.js"],(function(n,t){var e,i,o,s,a,c,d,u,l,r,h,f,y,p,C,m,v,D,g,k,I;return n({_dec:void 0,_class:void 0}),{setters:[function(n){e=n.inherits,i=n.createClass,o=n.classCallCheck,s=n.possibleConstructorReturn,a=n.getPrototypeOf},function(n){c=n.cclegacy,d=n._decorator,u=n.LabelComponent,l=n.director,r=n.Component},function(n){h=n.ViewType,f=n.LayerType},function(n){y=n.Tools},function(n){p=n.EventCode},function(n){C=n.default},function(n){m=n.default,v=n.GuideId},function(n){D=n.DataManager}],execute:function(){c._RF.push({},"1f936VAkWdHNIDB3lOAX3m6","DiamondUtils",void 0),I=d.ccclass,d.property,n("DiamondUtils",(g=I("DiamondUtils"),g(k=function(n){function t(){return o(this,t),s(this,a(t).apply(this,arguments))}return e(t,n),i(t,[{key:"onLoad",value:function(){this.countLab=this.node.getChildByName("countLab").getComponent(u),this.addBtn=this.node.getChildByName("addBtn")}},{key:"start",value:function(){l.getScene().on(p[p.OnDiamondChange],this.refreshUI,this)}},{key:"onEnable",value:function(){var n=this;this.addBtn.on("click",this.onAddClick,this),this.refreshUI(),this.scheduleOnce((function(){y.daimondCenterPos=n.node.children[1].getWorldPosition()}),1)}},{key:"onDisable",value:function(){this.addBtn.off("click",this.onAddClick,this)}},{key:"onDestroy",value:function(){}},{key:"onAddClick",value:function(){m.Instance.TmpGuideId!=v.Guide_GuideSynthTip?0!=D.instance.DailyDaimondCount?C.Instance.showView(h.UIDailyDaimond,f.PANEL):y.ShowTip("Limit for today"):y.ShowTip("In Guiding")}},{key:"refreshUI",value:function(){this.countLab.string=y.numberToStrKM(D.instance.diamond)}}]),t}(r))||k)),c._RF.pop()}}}));

System.register("chunks:///Core/Utils/UIUtils/GoldUtlis.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Constants/Constant.js","../../../Tools.js","../../Event/EventCode.js","../../View/UIManager.js","../../../Data/GuideData.js","../../../DataManager.js"],(function(t,n){var e,o,i,s,a,c,l,u,d,r,h,f,y,p,C,g,k,v,G,U,I;return t({_dec:void 0,_class:void 0}),{setters:[function(t){e=t.inherits,o=t.createClass,i=t.classCallCheck,s=t.possibleConstructorReturn,a=t.getPrototypeOf},function(t){c=t.cclegacy,l=t._decorator,u=t.LabelComponent,d=t.director,r=t.Component},function(t){h=t.ViewType,f=t.LayerType},function(t){y=t.Tools},function(t){p=t.EventCode},function(t){C=t.default},function(t){g=t.default,k=t.GuideId},function(t){v=t.DataManager}],execute:function(){c._RF.push({},"863e0rV7GNBnYkO875kA292","GoldUtlis",void 0),I=l.ccclass,l.property,t("GoldUtlis",(G=I("GoldUtlis"),G(U=function(t){function n(){return i(this,n),s(this,a(n).apply(this,arguments))}return e(n,t),o(n,[{key:"onLoad",value:function(){this.countLab=this.node.getChildByName("countLab").getComponent(u),this.addBtn=this.node.getChildByName("addBtn")}},{key:"start",value:function(){d.getScene().on(p[p.OnGoldChange],this.refreshUI,this)}},{key:"onEnable",value:function(){var t=this;this.addBtn.on("click",this.onAddClick,this),this.refreshUI(),this.scheduleOnce((function(){y.goldCenterPos=t.node.children[1].getWorldPosition()}),1)}},{key:"onDisable",value:function(){this.addBtn.off("click",this.onAddClick,this)}},{key:"onDestroy",value:function(){}},{key:"onAddClick",value:function(){g.Instance.TmpGuideId!=k.Guide_GuideSynthTip?0!=v.instance.DailyGoldCount?C.Instance.showView(h.UIDailyGold,f.TOP):y.ShowTip("Limit for today"):y.ShowTip("In Guiding")}},{key:"refreshUI",value:function(){this.countLab.string=y.numberToStrKM(v.instance.gold)}}]),n}(r))||U)),c._RF.pop()}}}));

System.register("chunks:///Core/Utils/UIUtils/WoodUtils.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Constants/Constant.js","../../../Tools.js","../../Event/EventCode.js","../../View/UIManager.js","../../../Data/GuideData.js","../../../DataManager.js"],(function(t,n){var e,o,i,s,a,c,u,d,l,r,h,f,y,p,C,v,g,k,I,U,m;return t({_dec:void 0,_class:void 0}),{setters:[function(t){e=t.inherits,o=t.createClass,i=t.classCallCheck,s=t.possibleConstructorReturn,a=t.getPrototypeOf},function(t){c=t.cclegacy,u=t._decorator,d=t.LabelComponent,l=t.director,r=t.Component},function(t){h=t.ViewType,f=t.LayerType},function(t){y=t.Tools},function(t){p=t.EventCode},function(t){C=t.default},function(t){v=t.default,g=t.GuideId},function(t){k=t.DataManager}],execute:function(){c._RF.push({},"a27613K8xNOIrpHmjnacXi7","WoodUtils",void 0),m=u.ccclass,u.property,t("WoodUtils",(I=m("WoodUtils"),I(U=function(t){function n(){return i(this,n),s(this,a(n).apply(this,arguments))}return e(n,t),o(n,[{key:"onLoad",value:function(){this.countLab=this.node.getChildByName("countLab").getComponent(d),this.addBtn=this.node.getChildByName("addBtn")}},{key:"start",value:function(){l.getScene().on(p[p.OnWoodChange],this.refreshUI,this)}},{key:"onEnable",value:function(){var t=this;this.addBtn.on("click",this.onAddClick,this),this.refreshUI(),this.scheduleOnce((function(){y.woodCenterPos=t.node.children[1].getWorldPosition()}),1)}},{key:"onDisable",value:function(){this.addBtn.off("click",this.onAddClick,this)}},{key:"onDestroy",value:function(){}},{key:"onAddClick",value:function(){v.Instance.TmpGuideId!=g.Guide_GuideSynthTip?0!=k.instance.DailyWoodCount?C.Instance.showView(h.UIDailyWood,f.PANEL):y.ShowTip("Limit for today"):y.ShowTip("In Guiding")}},{key:"refreshUI",value:function(){this.countLab.string=y.numberToStrKM(k.instance.wood)}}]),n}(r))||U)),c._RF.pop()}}}));

System.register("chunks:///Main.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./DataManager.js"],(function(e,t){var n,i,a,r,o,c,s,l,u,p,d,f,v,y,_,h,g,M,b,m,C;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,a=e.classCallCheck,r=e.possibleConstructorReturn,o=e.getPrototypeOf,c=e.initializerDefineProperty,s=e.assertThisInitialized,l=e.createClass},function(e){u=e.cclegacy,p=e._decorator,d=e.Font,f=e.game,v=e.Component},function(e){y=e.DataManager}],execute:function(){u._RF.push({},"c47111O6IVIG7Ias645jG1/","Main",void 0),m=p.ccclass,C=p.property,e("Main",(_=m("Main"),h=C(d),_((b=n((M=function(e){function t(){var e,n;a(this,t);for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return n=r(this,(e=o(t)).call.apply(e,[this].concat(l))),c(n,"enFont",b,s(n)),n}return i(t,e),l(t,[{key:"start",value:function(){f.addPersistRootNode(this.node)}},{key:"update",value:function(e){y.instance.update(e)}}]),t}(v)).prototype,"enFont",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=M))||g)),u._RF.pop()}}}));

System.register("chunks:///ResCleaner.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,n){var r,t,a,o,c,i,s,l,f,u,v,g,p,h;function d(e,n){if(e._uuid){var r=s._getReferenceKey(e);n[r]||(n[r]=!0,h===r&&p("debug"),function e(n,r){var t=s.getItem(n);if(t){var a=t.dependKeys;if(a)for(var o=0;o<a.length;o++){var c=a[o];r[c]||(r[c]=!0,h===c&&p("debug"),e(c,r))}}}(r,n))}}function m(e,n){for(var r=Object.getOwnPropertyNames(e),t=0;t<r.length;t++){var o=e[r[t]];if("object"===a(o)&&o)if(Array.isArray(o))for(var c=0;c<o.length;c++){var i=o[c];i instanceof g&&d(i,n)}else if(o.constructor&&o.constructor!==Object)o instanceof g&&d(o,n);else for(var s=Object.getOwnPropertyNames(o),l=0;l<s.length;l++){var f=o[s[l]];f instanceof g&&d(f,n)}}}function y(e,n){for(var r=0;r<e._components.length;r++)m(e._components[r],n);for(var t=0;t<e._children.length;t++)y(e._children[t],n)}function _(e,n){if(!n[e.url])if(e.complete){var r=e.content;r?r instanceof g?d(r,n):p("asset instanceof RawAsset === false"):p("item.complete === true, but item.content  is empty"),n[e.url]=!0,h===e.url&&p("debug")}else{n[e.url]=!0,h===e.url&&p("debug");var t=e.deps;if(t&&t.length>0)for(var a=0;a<t.length;a++){_(t[a],n)}}}return{setters:[function(e){r=e.createClass,t=e.classCallCheck,a=e.typeof},function(e){o=e.cclegacy,c=e._decorator,i=e.js,s=e.loader,l=e.director,f=e.LoadingItems,u=e.RenderPipeline,v=e.warn,g=e.RawAsset,p=e.log}],execute:function(){o._RF.push({},"9d6ecnezxhKtKF+y30WHVkj","ResCleaner",void 0),c.ccclass,c.property,h="",e("ResCleaner",function(){function e(){t(this,e)}return r(e,null,[{key:"clean",value:function(){for(var e=Date.now(),n=i.createMap(),r=s._cache,t=l.getScene().children,a=0;a<t.length;a++)y(t[a],n);var o={};for(var c in r){var g=r[c],p=f.getQueue(g);if(p)o[p._id]=p}for(var h in o){var d=o[h];for(var m in d.map){_(d.map[m],n)}}var b=[];for(var R in r){var j=r[R];if(!(j.content&&j.content instanceof u)&&!n[R]){if(!j.complete){v("资源未加载完却被释放！");continue}b.push(R)}}for(var w=0,C=0;C<b.length;C++){var O=b[C];r[O]&&(s.release(O),w++)}var k=Date.now()-e;console.log("<---资源释放 结束。  耗时：",k,"ms","释放数量",w)}}]),e}()),o._RF.pop()}}}));

System.register("chunks:///Scene/BattleItem.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Core/Constants/Constant.js","../Tools.js","../Config.js","../Soldiers/Soldier.js","../Data/GameData.js","../DataManager.js"],(function(e,t){var n,s,i,o,a,r,l,c,d,u,h,f,m,p,v,I,y,C,g,S,_,b,B,R,j;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){n=e.inherits,s=e.classCallCheck,i=e.possibleConstructorReturn,o=e.getPrototypeOf,a=e.createClass,r=e.asyncToGenerator},function(e){l=e.cclegacy,c=e._decorator,d=e.Component,u=e.Prefab,h=e.instantiate,f=e.Vec3,m=e.SkeletalAnimationComponent},function(e){p=e.default},function(e){v=e.default,I=e.GameType,y=e.TeamType},function(e){C=e.Tools},function(e){g=e.SOLDIER_POS},function(e){S=e.Soldier},function(e){_=e.default},function(e){b=e.DataManager}],execute:function(){l._RF.push({},"a6988UHBUdPNoG8uJ099/Sz","BattleItem",void 0),j=c.ccclass,c.property,e("BattleItem",(B=j("BattleItem"),B(R=function(e){function t(){var e,n;s(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=i(this,(e=o(t)).call.apply(e,[this].concat(r)))).soldiers=[],n}var l;return n(t,e),a(t,[{key:"start",value:function(){}},{key:"setData",value:function(e,t){this.itemInfo=e,this.team=t,this.initObjects()}},{key:"initObjects",value:(l=r(regeneratorRuntime.mark((function e(){var t,n,s,i,o,a,r,l,c,d,B,R,j,k,P;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=0;t<this.soldiers.length;t++)this.soldiers[t].node.removeFromParent(),this.soldiers[t].node.destroy();if(this.soldiers=new Array,n=b.instance.getItemConstInfoByID(this.itemInfo.id),!(this.itemInfo.id>=100)){e.next=16;break}return s=0==this.team?"_blue":"_red",_.Instance.GameType==I.Defense&&(s=0==this.team?"_red":"_blue"),e.next=8,C.loadRes("prefabs/"+n.prefab+s,u);case 8:for(i=e.sent,o=0,(a=this.itemInfo.lv)>=n.count.length&&(a=n.count.length-1),r=g[n.count[a]],l=0;l<n.count[a];l++)c=r[o],d=r[o+1],o+=2,B=h(i),this.node.addChild(B),B.setPosition(c,0,d),B.setRotationFromEuler(0,0,0),(R=B.addComponent(S)).init(y.Blue,this.itemInfo.id,this.itemInfo.lv),R.IsActive=!1,this.soldiers.push(R),p.isQQ&&p.IsIos&&(B.setScale(new f(v.QQRoleScale,v.QQRoleScale,v.QQRoleScale)),B.getComponentInChildren(m).playOnLoad=!1);e.next=26;break;case 16:return e.next=18,C.loadRes("prefabs/"+n.prefab,u);case 18:j=e.sent,k=h(j),this.node.addChild(k),k.setPosition(0,0,0),(P=k.addComponent(S)).init(y.Blue,this.itemInfo.id,this.itemInfo.lv),P.IsActive=!1,this.soldiers.push(P);case 26:this.resetShow();case 27:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"resetShow",value:function(){if(1==this.itemInfo.id||2==this.itemInfo.id)for(var e=0;e<this.soldiers.length;e++)this.soldiers[e].node.getChildByName("wall1").active=1==this.itemInfo.id,this.soldiers[e].node.getChildByName("wall2").active=2==this.itemInfo.id}},{key:"activeSoldier",value:function(){for(var e=0;e<this.soldiers.length;e++)this.soldiers[e].node.setParent(_.Instance._BattleScene.land,!0),this.soldiers[e].IsActive=!0}}]),t}(d))||R)),l._RF.pop()}}}));

System.register("chunks:///Scene/Ship.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Data/BattleData.js","../Data/GameData.js","./BattleItem.js"],(function(t,e){var i,n,a,s,o,r,h,d,c,l,u,p,v,f,y,m;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){i=t.inherits,n=t.classCallCheck,a=t.possibleConstructorReturn,s=t.getPrototypeOf,o=t.createClass},function(t){r=t.cclegacy,h=t._decorator,d=t.Node,c=t.Vec3,l=t.Component},function(t){u=t.default},function(t){p=t.default},function(t){v=t.BattleItem}],execute:function(){r._RF.push({},"bf19a7dYRlC8bgv6W16Xwdy","Ship",void 0),m=h.ccclass,h.property,t("Ship",(f=m("Ship"),f(y=function(t){function e(){var t,i;n(this,e);for(var o=arguments.length,r=new Array(o),h=0;h<o;h++)r[h]=arguments[h];return(i=a(this,(t=s(e)).call.apply(t,[this].concat(r)))).pos=[-1.5,3,1.5,3,-1.5,0,1.5,0,-1.5,-3,1.5,-3],i.pos1=[1.5,-3,-1.5,-3,-1.5,0,1.5,0,1.5,3,-1.5,3],i.isLand=!1,i}return i(e,t),o(e,[{key:"start",value:function(){this.node.getChildByName("tiled").active=!1}},{key:"update",value:function(t){this.move()}},{key:"setInfo",value:function(t){this.items=new Array;for(var e=0;e<t.length;e++){var i=t[e],n=this.pos1[2*i.inBoatIndex],a=this.pos1[2*i.inBoatIndex+1],s=new d;this.node.addChild(s);var o=s.addComponent(v);o.setData(i,0),s.position=new c(n,.224,a),this.items.push(o)}}},{key:"setIndex",value:function(t){this.index=t,this.init(),this.isLand=!1}},{key:"init",value:function(){this.items=new Array;for(var t=u.Instance.getInBoatArmys(),e=t.length-1;e>=0;e--){var i=t[e],n=i.boatMatrix[0]%2*3-1.5,a=i.boatMatrix[1]%3*3-3;if(this.isArmyInShipByMatrix(i.boatMatrix)){var s=new d;this.node.addChild(s);var o=s.addComponent(v);o.setData(i,0),s.position=new c(n,.224,a),this.items.push(o)}}}},{key:"isArmyInShipByMatrix",value:function(t){var e,i,n,a,s=0,o=0;return this.index>0&&(s=this.index%3,o=Math.floor(this.index/3)),n=(e=2*s)+1,a=(i=3*o)+2,t[0]>=e&&t[0]<=n&&t[1]>=i&&t[1]<=a}},{key:"move",value:function(){this.isLand||(p.Instance._BattleScene.isShipInLand(this.node.position)?this.setIsLand():this.node.translate(this.node.forward.multiplyScalar(.2),d.NodeSpace.WORLD))}},{key:"setIsLand",value:function(){this.isLand=!0;for(var t=0;t<this.items.length;t++)this.items[t].activeSoldier()}}]),e}(l))||y)),r._RF.pop()}}}));

System.register("chunks:///Scene/BattleScene.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Core/Constants/Constant.js","../Core/Utils/AudioManager.js","../Tools.js","../Cfg/BattleCfg.js","../Cfg/LevelCfg.js","../Config.js","../Core/Utils/List.js","../Core/Event/EventCode.js","../Core/Event/EventBus.js","../Core/View/UIManager.js","../Core/Utils/Astar/AstarUitls.js","../Data/SoldierData.js","../Soldiers/Soldier.js","../Data/GuideData.js","../Data/PVPData.js","../Data/BattleData.js","../Data/GameData.js","../Data/BountyData.js","../DataManager.js","../CameraControl.js","./Ship.js"],(function(e,t){var n,a,i,s,r,o,c,l,u,h,f,d,v,p,y,g,m,I,C,k,b,S,P,x,w,R,_,B,D,L,M,T,j,A,O,E,z,G,U,W,Q,V,H,N,X,Y,F,q,J,K,Z,$,ee,te,ne,ae,ie,se,re,oe,ce,le,ue,he;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,a=e.inherits,i=e.classCallCheck,s=e.possibleConstructorReturn,r=e.getPrototypeOf,o=e.initializerDefineProperty,c=e.assertThisInitialized,l=e.createClass,u=e.asyncToGenerator},function(e){h=e.cclegacy,f=e._decorator,d=e.Node,v=e.CameraComponent,p=e.geometry,y=e.find,g=e.SystemEventType,m=e.Vec3,I=e.instantiate,C=e.PhysicsSystem,k=e.Component,b=e.Prefab},function(e){S=e.default},function(e){P=e.default,x=e.AudioName,w=e.GameType,R=e.TeamType},function(e){_=e.AudioManager},function(e){B=e.Tools},function(e){D=e.default},function(e){L=e.default},function(e){M=e.HOME_MATRIX,T=e.SOLDIER_POS},function(e){j=e.default},function(e){A=e.EventCode},function(e){O=e.default},function(e){E=e.default},function(e){z=e.default},function(e){G=e.default},function(e){U=e.Soldier},function(e){W=e.default},function(e){Q=e.default},function(e){V=e.default},function(e){H=e.default},function(e){N=e.default},function(e){X=e.DataManager},function(e){Y=e.CameraControl},function(e){F=e.Ship}],execute:function(){h._RF.push({},"4f475SPLIhJrq1v23ZcHjF5","BattleScene",void 0),ue=f.ccclass,he=f.property,e("BattleScene",(q=ue("BattleScene"),J=he(d),K=he(d),Z=he(d),$=he(d),ee=he(d),te=he(v),q((ie=n((ae=function(e){function t(){var e,n;i(this,t);for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return n=s(this,(e=r(t)).call.apply(e,[this].concat(l))),o(n,"land",ie,c(n)),o(n,"sky",se,c(n)),o(n,"canvas",re,c(n)),o(n,"level",oe,c(n)),o(n,"effects",ce,c(n)),o(n,"camera",le,c(n)),n.ship=null,n.shipPrefrab=null,n._cameraCtl=null,n.isCanCreateShip=!1,n.inShipSolders=[],n.shipIndex=0,n.c_offset=0,n.isTouch=!1,n.moveDis=0,n.ray=new p.ray,n.posList=null,n}var n,h,f,d,v,k;return a(t,e),l(t,[{key:"onLoad",value:function(){this.skyType=B.getRandomInt(0,3),S.isQQ&&S.IsIos&&(this.skyType=3),E.Instance.clearView()}},{key:"start",value:function(){var e=this;switch(this.ship=y("Canvas/UI/UIBattle/ship"),_.Instance.playSound(x.BG1),this._cameraCtl=this.camera.getComponent(Y),H.Instance._BattleScene=this,this.canvas.on(g.TOUCH_START,this.onMouseDown,this),this.canvas.on(g.TOUCH_MOVE,this.onMouseMove,this),this.canvas.on(g.TOUCH_END,this.onMouseUp,this),V.Instance.clearSoldier(),z.initMatrix(),this.initShip(),V.Instance.initBattleTime(),G.Instance.redPower=0,H.Instance.GameType){case w.Game:this.createLv();break;case w.Bounty:this.createBountyLev();break;case w.PVP:this.createPVPLv(),Q.Instance.ChallengeCount--;break;case w.Defense:this.inShipSolders=V.Instance.defenseEnemys,this.shipIndex=0,this.createDefenseLv(),this.scheduleOnce((function(){e.aIOutBoat()}),3)}for(var t=0;t<this.sky.children.length;t++)this.sky.children[t].active=!1;this.sky.children[this.skyType].active=!0,this._cameraCtl.playStartTween(),this.scheduleOnce((function(){e.isCanCreateShip=!0}),3)}},{key:"onEnable",value:function(){}},{key:"update",value:function(e){V.Instance.updateWatch(),H.Instance.IsGameOver||V.Instance.battleTime<=0&&(H.Instance.GameType==w.Defense?H.Instance.onVictory():H.Instance.onFail()),this.refreshOffset(e)}},{key:"refreshOffset",value:function(e){if(!this.isTouch&&0!=this.c_offset){this.c_offset>0?(this.c_offset-=30*e,this.c_offset<=0&&(this.c_offset=0)):(this.c_offset+=30*e,this.c_offset>=0&&(this.c_offset=0));var t=1;this.c_offset<0&&(t=-1),this._cameraCtl.rotateCamera(Math.min(2,Math.abs(this.c_offset))*t)}}},{key:"onMouseDown",value:function(e){this.ship.active||(this.isTouch=!0,this.moveDis=0)}},{key:"onMouseMove",value:function(e){if(!this.ship.active){var t=new m;this.camera.worldToScreen(this.land.getWorldPosition(),t);var n=e.getDeltaX()*(e.getLocationY()<t.y?1:-1),a=e.getDeltaY()*(e.getLocationX()<t.x?-1:1);this.moveDis+=Math.abs(n)+Math.abs(a);var i=e.getDeltaX(),s=e.getDeltaY();Math.abs(i)>Math.abs(s)&&(this._cameraCtl.rotateCamera(-i/5),this.c_offset=-i)}}},{key:"onMouseUp",value:function(e){this.isTouch=!1,e.getLocationY()<230||this.ship.active||(w.Defense!=H.Instance.GameType&&this.moveDis<10&&this.isCanCreateShip&&(this.createShip(new m(e.getLocationX(),e.getLocationY(),0)),H.Instance.Level>=P.LockKongTou&&V.Instance.createParatroops(this.getLandPoint(new m(e.getLocationX(),e.getLocationY(),0))),W.Instance.guideClickGround()),this.moveDis=0)}},{key:"initShip",value:(k=u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.loadRes("prefabs/ship",b);case 2:this.shipPrefrab=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"createShip",value:function(e){if(!(V.Instance.SelectBoatIndex<0)){V.Instance.startRefreshBattleTime();var t=this.getGroundPoint(e);if(null!=t){(Math.abs(t.x)<25||Math.abs(t.z)<25)&&(t=t.multiplyScalar(1.3));var n=I(this.shipPrefrab);this.land.addChild(n),n.setWorldPosition(t),n.lookAt(this.land.position),n.getComponent(F).setIndex(V.Instance.SelectBoatIndex),O.Instance.pos(A.ToBattleBoat),_.Instance.playOneShot(x.BoatDrop),S.vibration()}else this.isCanCreateShip&&1==H.Instance.Level&&B.ShowTip("Click sea area to dispatch warships")}}},{key:"getGroundPoint",value:function(e){if(this.camera.screenPointToRay(e.x,e.y,this.ray),C.instance.raycast(this.ray)){var t=C.instance.raycastResults;if(t[0].collider.name.indexOf("ground")>-1)return new m(t[0].hitPoint.x,0,t[0].hitPoint.z)}return null}},{key:"getLandPoint",value:function(e){if(this.camera.screenPointToRay(e.x,e.y,this.ray),C.instance.raycast(this.ray)){var t=C.instance.raycastResults;if(t[0].collider.name.indexOf("land")>-1)return new m(t[0].hitPoint.x,0,t[0].hitPoint.z)}return null}},{key:"isShipInLand",value:function(e){var t=e.x,n=e.z;return Math.abs(t)<22.5&&Math.abs(n)<22.5}},{key:"initRedArmys",value:function(){for(var e=0;e<this.level.children.length;e++){var t=this.level.children[e],n=G.Instance.getSoldierIdByPrefabName(t.name);if("1"==t.name&&(n=1),"2"==t.name&&(n=2),null!=n){var a=t.addComponent(U);if(a.node.active&&(a.init(R.Red,n,1),a.IsActive=!0,n<100)){var i=z.getAstarPos(a.node.position.x,a.node.position.z),s=this.findNewMatrixByPos(i.x,i.y,n,M);if(1!=n&&2!=n||(s=this.getWallMatrix(i.x,i.y,n)),null!=s)for(var r=0;r<s.length;r+=2)z.matrix[s[r]][s[r+1]]=1}}}console.log(z.matrix),z.initAstar()}},{key:"findNewMatrixByPos",value:function(e,t,n,a){for(var i=X.instance.getItemConstInfoByID(n),s=i.type,r=i.width,o=i.height,c=[],l=0;l<a.length;l++)for(var u=0;u<a[l].length;u++)a[l][u]==s&&(1==n||2==n||c.push([u,l]));for(var h=0,f=0,d=0;d<c.length;d++){for(var v=c[d],p=!0,y=0;y<r;y++)for(var g=0;g<o;g++){h=v[0]+y,f=v[1]+g;for(var m=!1,I=0;I<c.length;I++)if(c[I][0]==h&&c[I][1]==f){m=!0;break}if(!m){p=!1;break}}if(p){for(var C=[],k=0;k<r;k++)for(var b=0;b<o;b++)C.push(v[0]+k),C.push(v[1]+b);for(var S=!1,P=0;P<C.length;P+=2)if(C[P]==e&&C[P+1]==t){S=!0;break}if(S)return C}}return null}},{key:"getWallMatrix",value:function(e,t,n){return 2==n?[e-2,t,e-1,t,e,t,e+1,t,e+2,t]:[e,t-2,e,t-1,e,t,e,t+1,e,t+2]}},{key:"getMatrixByPos",value:function(e,t,n){return 1==n||2==n?this.getWallMatrix(e,t,n):[e-1,t+1,e,t+1,e+1,t+1,e-1,t,e,t,e+1,t,e-1,t-1,e,t-1,e+1,t-1]}},{key:"createBountyLev",value:(v=u(regeneratorRuntime.mark((function e(){var t,n,a,i,s,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=N.Instance.getChallengeLv(),n=D.Instance.getBountyDataById(t),a=0;a<n.soldiers.length;a++)i=n.soldiers[a],s=i.id,r=i.lv,o=new m(i.pos[0],0,i.pos[1]),this.createEnmey(s,r,R.Red,o);z.initAstar();case 4:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"createEnmey",value:(d=u(regeneratorRuntime.mark((function e(t,n,a,i){var s,r,o,c,l,u,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a==R.Red&&t>5&&(G.Instance.redPower+=G.Instance.getPowerById(t,n)),s=X.instance.getItemConstInfoByID(t),r=a==R.Blue?"_blue":"_red",H.Instance.GameType==w.Defense&&(r=a==R.Blue?"_red":"_blue"),1!=t&&2!=t||(r=""),e.next=7,B.loadRes("prefabs/"+s.prefab+r,b);case 7:for(o=e.sent,c=s.count[n],l=T[c],u=0;u<c;u++)h=I(o),this.land.addChild(h),a==R.Red&&t>100&&(h.eulerAngles=new m(0,180,0)),h.setPosition(i.x+l[2*u],0,i.z+l[2*u+1]),h.addComponent(U),(f=h.addComponent(U)).init(a,t,n),f.IsActive=!0,1==t&&(h.children[0].active=!0),2==t&&(h.children[1].active=!0),t>100&&S.isQQ&&S.IsIos&&h.setScale(new m(P.QQRoleScale,P.QQRoleScale,P.QQRoleScale));this.refreshAstarMatrix(t,i);case 12:case"end":return e.stop()}}),e,this)}))),function(e,t,n,a){return d.apply(this,arguments)})},{key:"refreshAstarMatrix",value:function(e,t){if(!(e>100))for(var n=z.getAstarPos(t.x,t.z),a=this.getMatrixByPos(n.x,n.y,e),i=0;i<a.length;i+=2)z.matrix[a[i]][a[i+1]]=1}},{key:"createDefenseLv",value:function(){for(var e=X.instance.getHomeItems(),t=0;t<e.length;t++){var n=e[t],a=this.getWorldPosByMatrix(n.matrix,n.id);this.createEnmey(n.id,n.lv,R.Red,a)}z.initAstar()}},{key:"createPVPLv",value:(f=u(regeneratorRuntime.mark((function e(){var t,n,a,i,s,r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=Q.Instance.getRdSoldiersById(Q.Instance.ChallengeId),n=0;n<t.length;n++)this.createEnmey(t[n][0],t[n][1],R.Red,new m(t[n][2],0,t[n][3]));for(a=D.Instance.getRdWallData(),i=0;i<a.soldiers.length;i++)s=a.soldiers[i],r=s.id,o=s.lv,c=new m(s.pos[0],0,s.pos[1]),this.createEnmey(r,o,R.Red,c);z.initAstar();case 5:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"createLv",value:function(){z.initAstar();var e=L.Instance.getLevelDataByLevel(V.Instance.BattleLevel);this.initPosList(),this.createLvWithId(e.id);for(var t=0;t<e.bossId.length;t++){var n=e.bossId[t];if(0==n)return;var a=this.getRdPos();this.createEnmey(n,e.bossLv,R.Red,a)}}},{key:"createLvWithId",value:(h=u(regeneratorRuntime.mark((function e(t){var n,a,i,s,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=D.Instance.getDataByLev(t),a=0;a<n.soldiers.length;a++)i=n.soldiers[a],s=i.id,r=i.lv,o=new m(i.pos[0],0,i.pos[1]),this.removePos(i.pos[0],i.pos[1]),this.createEnmey(s,r,R.Red,o);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"createWall",value:(n=u(regeneratorRuntime.mark((function e(t,n){var a,i,s,r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.loadRes("prefabs/battle/wall/"+t,b);case 2:for(a=e.sent,i=I(a),this.land.addChild(i),s=0;s<i.children.length;s++)r=i.children[s],o=r.children[0].active?2:1,c=r.position,this.refreshAstarMatrix(o,c);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"initPosList",value:function(){if(null==this.posList){this.posList=new j;for(var e=-10;e<=10;e+=4)for(var t=-10;t<=10;t+=4)this.posList.add(new m(e,0,t))}}},{key:"getRdPos",value:function(){this.initPosList();var e=B.getRandomInt(0,this.posList.Count-1),t=this.posList.get(e);return this.posList.removeByIndex(e),t}},{key:"removePos",value:function(e,t){for(var n=0;n<this.posList.Count;n++){var a=this.posList.get(n);if(a.x==e&&a.z==t)return void this.posList.removeByIndex(n)}}},{key:"getWorldPosByMatrix",value:function(e,t){var n=0,a=0;return 1==t||2==t?(n=e[2],a=e[3]):(n=e[8],a=e[9]),new m(n-12,0,a-12)}},{key:"aIOutBoat",value:function(){var e=this;if(!(this.shipIndex>=this.inShipSolders.length)){var t=B.getRandom(.6,2);this.scheduleOnce((function(){var t=B.getRandomInt(30,40),n=B.getRandomInt(0,360)*Math.PI/180,a=Math.cos(n)*t,i=Math.sin(n)*t;0==parseInt(localStorage.getItem("Guide_DefenseSuccessTip")||"0")&&(a=-5,i=-30),e.createDefenseShip(new m(a,0,i)),e.aIOutBoat()}),t)}}},{key:"createDefenseShip",value:function(e){if(null!=this.shipPrefrab){V.Instance.startRefreshBattleTime(),(Math.abs(e.x)<25||Math.abs(e.z)<25)&&(e=e.multiplyScalar(1.3));var t=I(this.shipPrefrab);this.land.addChild(t),t.setWorldPosition(e),t.lookAt(this.land.position),t.getComponent(F).setInfo(this.inShipSolders[this.shipIndex]),this.shipIndex+=1,_.Instance.playOneShot(x.BoatDrop)}}}]),t}(k)).prototype,"land",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=n(ae.prototype,"sky",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=n(ae.prototype,"canvas",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=n(ae.prototype,"level",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=n(ae.prototype,"effects",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=n(ae.prototype,"camera",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=ae))||ne)),h._RF.pop()}}}));

System.register("chunks:///Scene/BuildMoveTips.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,e){var i,n,o,s,r,a,l,u,c,p,d,v,h;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){i=t.inherits,n=t.classCallCheck,o=t.possibleConstructorReturn,s=t.getPrototypeOf,r=t.createClass},function(t){a=t.cclegacy,l=t._decorator,u=t.Vec3,c=t.tween,p=t.Component}],execute:function(){a._RF.push({},"a3dd5+4DTtFmaJWy8Ag8Zcb","BuildMoveTips",void 0),h=l.ccclass,l.property,t("BuildMoveTips",(d=h("BuildMoveTips"),d(v=function(t){function e(){var t,i;n(this,e);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return(i=o(this,(t=s(e)).call.apply(t,[this].concat(a)))).tout=null,i}return i(e,t),r(e,[{key:"start",value:function(){this.tweenDir()}},{key:"onDisable",value:function(){clearTimeout(this.tout)}},{key:"onEnable",value:function(){}},{key:"tweenDir",value:function(){for(var t=0;t<this.node.children.length;t++){var e=this.node.children[t];e.position=new u(0,0,0);var i=e.forward.normalize().multiplyScalar(.4),n=e.position.clone(),o=e.position.clone().add(i);c(e).to(.6,{position:o},{easing:"quadOut"}).to(.6,{position:n},{easing:"quadOut"}).start()}this.tout=setTimeout(this.tweenDir.bind(this),1200)}}]),e}(p))||v)),a._RF.pop()}}}));

System.register("chunks:///Scene/LevelScene.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Constants/Constant.js","../Tools.js","../Config.js","../Core/View/UIManager.js","../DataManager.js","../CameraControl.js","../Item.js","./LevelItem.js"],(function(t,e){var i,n,o,r,s,a,h,c,l,u,m,d,v,f,y,I,p,g,_,x,T,M,P,C,k,B,w,b,S,E,N,D,H,O,A,z,F,L,R,U,j,G,V,W,J,K,q,Y,Q,X,Z,$,tt,et,it,nt,ot;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_class3:void 0,_temp:void 0}),{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inherits,o=t.classCallCheck,r=t.possibleConstructorReturn,s=t.getPrototypeOf,a=t.initializerDefineProperty,h=t.assertThisInitialized,c=t.createClass,l=t.asyncToGenerator},function(t){u=t.cclegacy,m=t._decorator,d=t.CameraComponent,v=t.Node,f=t.ScrollViewComponent,y=t.EditBoxComponent,I=t.geometry,p=t.instantiate,g=t.systemEvent,_=t.director,x=t.Vec2,T=t.PhysicsSystem,M=t.Vec3,P=t.Component},function(t){C=t.TeamType},function(t){k=t.Tools},function(t){B=t.default,w=t.HOME_MATRIX,b=t.MAP_WIDTH,S=t.MAP_HEIGHT},function(t){E=t.default},function(t){N=t.DataManager},function(t){D=t.CameraControl},function(t){H=t.Item},function(t){O=t.LevelItem}],execute:function(){u._RF.push({},"8431ds7gOxMPYDQIgokNqqW","LevelScene",void 0),nt=m.ccclass,ot=m.property,t("LevelScene",(A=nt("LevelScene"),z=ot(d),F=ot(v),L=ot(v),R=ot(f),U=ot(v),j=ot(v),G=ot(v),V=ot(y),A((it=et=function(t){function e(){var t,i;o(this,e);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return i=r(this,(t=s(e)).call.apply(t,[this].concat(c))),a(i,"camera",K,h(i)),a(i,"hlNode",q,h(i)),a(i,"UIItemPrefab",Y,h(i)),a(i,"scroll",Q,h(i)),a(i,"content",X,h(i)),a(i,"saveBtn",Z,h(i)),a(i,"clearBtn",$,h(i)),i.items=[],a(i,"levelEditBox",tt,h(i)),i._cameraCtl=null,i._ray=new I.ray,i._curTouchItem=null,i.level=1,i}var i,u;return n(e,t),c(e,[{key:"initScroll",value:function(){for(var t=0;t<B.ITEM_INFO.length;t++){B.ITEM_INFO[t];var e=p(this.UIItemPrefab);this.content.addChild(e),e.addComponent(O).setData(B.ITEM_INFO[t].id)}}},{key:"start",value:function(){this.levelEditBox.node.on("text-changed",this.onEditChange,this),this.saveBtn.on("click",this.onSaveClick,this),this.clearBtn.on("click",this.onClearClick,this),this.initScroll(),this.levelEditBox.string=this.level.toString()}},{key:"onEditChange",value:function(t){this.level=parseInt(t.string)}},{key:"saveJson",value:function(){for(var t=[],e=0;e<this.items.length;e++){var i=this.items[e];t.push({id:i.id,lv:i.lv,pos:[i.node.position.x,i.node.position.z]})}var n={lv:this.level,soldiers:t};console.log(JSON.stringify(n))}},{key:"onSaveClick",value:function(){this.saveJson()}},{key:"onClearClick",value:function(){for(var t=this.items.length-1;t>=0;t--){this.items[t].node.destroy()}this.items=[]}},{key:"onLoad",value:function(){E.Instance.clearView(),N.instance,e.instance=this,g.on(cc.SystemEventType.KEY_UP,this.onKeyUp,this),g.on(cc.SystemEventType.TOUCH_START,this.onTouchStart,this),g.on(cc.SystemEventType.TOUCH_MOVE,this.onTouchMove,this),g.on(cc.SystemEventType.TOUCH_END,this.onTouchEnd,this),g.on(cc.SystemEventType.TOUCH_CANCEL,this.onTouchEnd,this),_.getScene().on("CREAT_ITEM",this.zhaomu,this),_.getScene().on("WALL_MODE",this.wallMode,this),this._cameraCtl=this.camera.getComponent(D)}},{key:"onTouchStart",value:function(t){_.getScene().emit("TOUCH_OBJECT",null,null);var e=this.getTouchMatrix(t);if(e){if(console.log("点击地面矩阵位置",e.x,e.y),this._curTouchItem=this.getItemByMatrix(e.x,e.y),null==this._curTouchItem)return;var i=this.getGroundPoint(t);i&&(i.y=.3,this._curTouchItem.node.setPosition(i))}}},{key:"onTouchMove",value:function(t){if(null!=this._curTouchItem){var e=this.getGroundPoint(t);if(null!=e){e.y=.3,this._curTouchItem.node.setPosition(e),this._curTouchItem.node.active=t._point.y>400;var i=this.getTouchMatrix(t);if(i){var n=this.findNewMatrixByPos(i.x,i.y,this._curTouchItem.id,w);if(n){var o=N.instance.getItemConstInfoByID(this._curTouchItem.id);this.setHighLightByMatrix(n,o.width,o.height)}else if(1==this._curTouchItem.id)if(n=this.findNewMatrixByPos(i.x,i.y,2,w)){var r=N.instance.getItemConstInfoByID(2);this.setHighLightByMatrix(n,r.width,r.height)}else this.hlNode.setPosition(-100,0,0);else if(2==this._curTouchItem.id)if(n=this.findNewMatrixByPos(i.x,i.y,1,w)){var s=N.instance.getItemConstInfoByID(1);this.setHighLightByMatrix(n,s.width,s.height)}else this.hlNode.setPosition(-100,0,0);else this.hlNode.setPosition(-100,0,0)}else this.hlNode.setPosition(-100,0,0)}}else{var a=t._point.x-t._prevPoint.x,h=t._point.y-t._prevPoint.y;Math.abs(a)>Math.abs(h)?this._cameraCtl.rotateCamera(-a/5):this._cameraCtl.nearCamera(h/10)}}},{key:"onTouchEnd",value:function(t){if(null!=this._curTouchItem){if(!this._curTouchItem.node.active)return this.removeItemFromItemArray(this._curTouchItem),this._curTouchItem.node.removeFromParent(),this._curTouchItem.node.destroy(),void(this._curTouchItem=null);var e=this.getTouchMatrix(t);if(e&&this._curTouchItem){var i=this.findNewMatrixByPos(e.x,e.y,this._curTouchItem.id,w);if(i){var n=this.getItemByMatrixArray(i,this._curTouchItem.sid);n&&(this.removeItemFromItemArray(n),n.node.removeFromParent(),n.node.destroy()),this._curTouchItem.matrix=i,this._curTouchItem.resetPositionByMatrix()}else 1==this._curTouchItem.id?(i=this.findNewMatrixByPos(e.x,e.y,2,w))&&(this._curTouchItem.id=2,this._curTouchItem.matrix=i,this._curTouchItem.resetShow()):2==this._curTouchItem.id&&(i=this.findNewMatrixByPos(e.x,e.y,1,w))&&(this._curTouchItem.id=1,this._curTouchItem.matrix=i,this._curTouchItem.resetShow()),this._curTouchItem.resetPositionByMatrix()}else this._curTouchItem.resetPositionByMatrix();this._curTouchItem=null,this.hlNode.setPosition(-100,0,0)}}},{key:"getItemByMatrixArray",value:function(t,e){for(var i=null,n=0;n<this.items.length;n++)if(this.items[n].sid!=e){for(var o=!0,r=0;r<this.items[n].matrix.length;r++)if(this.items[n].matrix[r]!=t[r]){o=!1;break}if(o){i=this.items[n];break}}return i}},{key:"setHighLightByMatrix",value:function(t,e,i){t&&(this.hlNode.setScale(e,1,i),1==this._curTouchItem.id||2==this._curTouchItem.id?this.hlNode.setPosition(t[2]-12,0,t[3]-12):this.hlNode.setPosition(t[8]-12,0,t[9]-12))}},{key:"getItemByMatrix",value:function(t,e){for(var i=0;i<this.items.length;i++)for(var n=0;n<this.items[i].matrix.length;n+=2){var o=this.items[i].matrix[n],r=this.items[i].matrix[n+1];if(t==o&&e==r)return this.items[i]}return null}},{key:"getTouchMatrix",value:function(t){var e=this.getGroundPoint(t);return e?new x(Math.floor(e.x+Math.floor(b/2)),Math.floor(e.z+Math.floor(S/2))):null}},{key:"findPutMatrix",value:function(t,e,i,n){for(var o=[],r=0;r<n.length;r++)for(var s=0;s<n[r].length;s++)n[r][s]==t&&this.isEmptyMatrix(s,r)&&o.push([s,r]);for(var a=0,h=0,c=0;c<o.length;c++){for(var l=o[c],u=!0,m=0;m<e;m++)for(var d=0;d<i;d++){a=l[0]+m,h=l[1]+d;for(var v=!1,f=0;f<o.length;f++)if(o[f][0]==a&&o[f][1]==h){v=!0;break}if(!v){u=!1;break}}if(u){for(var y=[],I=0;I<e;I++)for(var p=0;p<i;p++)y.push(l[0]+I),y.push(l[1]+p);return y}}return null}},{key:"findNewMatrixByPos",value:function(t,e,i,n){for(var o=N.instance.getItemConstInfoByID(i),r=o.type,s=o.width,a=o.height,h=[],c=0;c<n.length;c++)for(var l=0;l<n[c].length;l++)n[c][l]==r&&(1==i||2==i?this.isEmptyMatrix(l,c)&&h.push([l,c]):h.push([l,c]));for(var u=0,m=0,d=0;d<h.length;d++){for(var v=h[d],f=!0,y=0;y<s;y++)for(var I=0;I<a;I++){u=v[0]+y,m=v[1]+I;for(var p=!1,g=0;g<h.length;g++)if(h[g][0]==u&&h[g][1]==m){p=!0;break}if(!p){f=!1;break}}if(f){for(var _=[],x=0;x<s;x++)for(var T=0;T<a;T++)_.push(v[0]+x),_.push(v[1]+T);for(var M=!1,P=0;P<_.length;P+=2)if(_[P]==t&&_[P+1]==e){M=!0;break}if(M)return _}}return null}},{key:"isEmptyMatrix",value:function(t,e){for(var i=0;i<this.items.length;i++)for(var n=this.items[i],o=0;o<n.matrix.length;o+=2)if(t==n.matrix[o]&&e==n.matrix[o+1])return!1;return!0}},{key:"getGroundPoint",value:function(t){if(this.camera.screenPointToRay(t._point.x,t._point.y,this._ray),T.instance.raycast(this._ray)){var e=T.instance.raycastResults;if(e[0].collider.name.indexOf("ground")>-1)return new M(e[0].hitPoint.x,0,e[0].hitPoint.z)}return null}},{key:"createItemByID",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=null;if(o)r=o;else{var s=N.instance.getItemConstInfoByID(t);r=this.findPutMatrix(s.type,s.width,s.height,w)}if(r){n||(n=N.instance.generateSid());var a=new v;this.node.addChild(a);var h=a.addComponent(H);if(h.init(t,n,i,e,r),h.resetPositionByMatrix(),this.items.push(h),!o){var c={sid:n,id:t,lv:e,matrix:r,boatMatrix:[]};N.instance.addHomeInfo(c)}}else if(t>100){if(!n){var l={sid:n=N.instance.generateSid(),id:t,lv:e,matrix:[],boatMatrix:[]};N.instance.addHomeInfo(l)}}else k.ShowTip("No place to place")}},{key:"createItemInHome",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=new v;this.node.addChild(r);var s=r.addComponent(H);s.init(t,n,i,e,o),s.resetPositionByMatrix(),this.items.push(s)}},{key:"zhaomu",value:(u=l(regeneratorRuntime.mark((function t(e,i,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.createItemByID(e,n,i);case 1:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return u.apply(this,arguments)})},{key:"removeItemFromItemArray",value:function(t){var e=this.items.indexOf(t);e>-1&&this.items.splice(e,1)}},{key:"wallMode",value:function(t){if(t)for(var e=0;e<this.items.length;e++)this.items[e].node.active=1==this.items[e].id||2==this.items[e].id;else for(var i=0;i<this.items.length;i++)this.items[i].node.active=!0}},{key:"getScreenPos",value:function(t){return k.getScreenPos(t,this.camera,this.node)}},{key:"initTempItem",value:function(t,e,i,n){var o=new v;this.node.addChild(o),this._tempItem=o.addComponent(H),this._tempItem.init(t,e,C.Red,i,[]),this._tempItem.node.active=!0,this._tempItem.node.setPosition(this.getGroundPoint(n))}},{key:"moveTempItem",value:function(t){if(this._tempItem){t.getUILocation();this._tempItem.node.active&&_.getScene().emit("OnSoldierMove",this._tempItem.sid,this._tempItem.node.getWorldPosition());var e=this.getGroundPoint(t);e&&(e.y=.3,this._tempItem.node.setPosition(e));var i=this.getTouchMatrix(t);if(i){var n=this.findNewMatrixByPos(i.x,i.y,this._tempItem.id,w);n?(this.hlNode.setScale(3,1,3),this.hlNode.setPosition(n[8]-12,0,n[9]-12)):this.hlNode.setPosition(-100,0,0)}}}},{key:"endTempItem",value:function(t){if(this._tempItem&&this._tempItem.node.active){var e=this.getTouchMatrix(t);if(e){var i=this.findNewMatrixByPos(e.x,e.y,this._tempItem.id,w);if(i){var n=this.getItemByMatrixArray(i,this._tempItem.sid);n&&(this.removeItemFromItemArray(n),n.node.removeFromParent(),n.node.destroy(),console.log("destroy")),this._tempItem.matrix=i,this._tempItem.resetPositionByMatrix(),this.items.push(this._tempItem),console.log("push")}else this._tempItem.node.removeFromParent(),this._tempItem.node.destroy()}else this._tempItem.node.removeFromParent(),this._tempItem.node.destroy()}this._tempItem=null,this.hlNode.setPosition(-100,0,0)}},{key:"recoverAllSoldier",value:function(){for(var t=0;t<N.instance.homeInfo.length;t++){var e=N.instance.homeInfo[t];e.id>100&&(e.matrix=[])}N.instance.saveHomeInfo();for(var i=0;i<this.items.length;i++)if(this.items[i].id>100){var n=this.items.splice(i,1)[0];i--,n.node.removeFromParent(),n.node.destroy()}}},{key:"onKeyUp",value:(i=l(regeneratorRuntime.mark((function t(e){var i,n,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"1"==e.rawEvent.key?this.createItemByID(1,0,0):"2"==e.rawEvent.key?this.createItemByID(2,0,0):"3"==e.rawEvent.key?this.createItemByID(3,0,0):"4"==e.rawEvent.key?this.createItemByID(4,0,0):"5"==e.rawEvent.key?this.createItemByID(5,0,0):"0"==e.rawEvent.key&&(i=k.getRandomInt(101,104),n=k.getRandomInt(0,6),o=N.instance.generateSid(),r={sid:o,id:i,lv:n,matrix:[],boatMatrix:[]},N.instance.addHomeInfo(r),k.ShowTip("Cheating Warehouse Soldier"+i));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})}]),e}(P),et.instance=null,K=i((J=it).prototype,"camera",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(J.prototype,"hlNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=i(J.prototype,"UIItemPrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(J.prototype,"scroll",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=i(J.prototype,"content",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=i(J.prototype,"saveBtn",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=i(J.prototype,"clearBtn",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=i(J.prototype,"levelEditBox",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=J))||W)),u._RF.pop()}}}));

System.register("chunks:///Scene/LevelItem.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Tools.js","../Data/SoldierData.js","../DataManager.js","./LevelScene.js"],(function(e,t){var n,i,o,c,r,s,l,a,u,h,d,v,p,m,f,y,g,C,T,_,b,k,B,L,I,S,D,M,R,E,N,j;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,o=e.classCallCheck,c=e.possibleConstructorReturn,r=e.getPrototypeOf,s=e.initializerDefineProperty,l=e.assertThisInitialized,a=e.createClass,u=e.asyncToGenerator},function(e){h=e.cclegacy,d=e._decorator,v=e.Node,p=e.LabelComponent,m=e.SystemEventType,f=e.SpriteComponent,y=e.Component,g=e.SpriteFrame},function(e){C=e.Tools},function(e){T=e.default},function(e){_=e.DataManager},function(e){b=e.LevelScene}],execute:function(){h._RF.push({},"aca79VR8itDC6HK5oAv6N1/","LevelItem",void 0),N=d.ccclass,j=d.property,e("LevelItem",(k=N("LevelItem"),B=j(v),L=j(v),I=j(p),k((M=n((D=function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return n=c(this,(e=r(t)).call.apply(e,[this].concat(a))),s(n,"addBtn",M,l(n)),s(n,"reduceBtn",R,l(n)),s(n,"levelLab",E,l(n)),n.lv=0,n.touch=null,n.touchTimer=0,n}var n;return i(t,e),a(t,[{key:"start",value:function(){this.addBtn=this.node.getChildByName("addBtn"),this.reduceBtn=this.node.getChildByName("reduceBtn"),this.levelLab=this.node.getChildByName("lv").getComponent(p),this.node.on(m.TOUCH_START,this.onTouchStart,this),this.node.on(m.TOUCH_MOVE,this.onTouchMove,this),this.node.on(m.TOUCH_END,this.onTouchEnd,this),this.node.on(m.TOUCH_CANCEL,this.onTouchEnd,this),this.addBtn.on("click",this.onAddClick,this),this.reduceBtn.on("click",this.onReduceClick,this)}},{key:"update",value:function(e){this.touch&&(this.touchTimer+=e,this.touchTimer>=.1&&null==b.instance.levelMoveItem&&(b.instance.scroll.enabled=!1,b.instance.levelMoveItem=this,b.instance.initTempItem(this.id,_.instance.generateSid(),this.lv,this.touch.touch),this.touch=null,this.node.getComponent(f).grayscale=!0))}},{key:"setData",value:(n=u(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.id=t,n=T.Instance.getSoldierSmallIconPathById(t),t<100&&(n=1==t||2==t?"textures/building/architecture_icon1":"textures/building/architecture_icon"+t),e.next=5,C.loadRes(n,g);case 5:this.node.getComponent(f).spriteFrame=e.sent;case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"onTouchStart",value:function(e){this.touch=e,this.touchTimer=0}},{key:"onTouchMove",value:function(e){this.touch=null,b.instance.moveTempItem(e.touch)}},{key:"onTouchEnd",value:function(e){console.log("on end"),this.node.getComponent(f).grayscale=!1,this.touch=null,b.instance.levelMoveItem=null,b.instance.endTempItem(e.touch),b.instance.scroll.enabled=!0}},{key:"onAddClick",value:function(){this.refreshLv(Math.min(9,this.lv+1))}},{key:"onReduceClick",value:function(){this.refreshLv(Math.max(0,this.lv-1))}},{key:"refreshLv",value:function(e){this.lv=e,this.levelLab.string=this.lv+1+""}}]),t}(y)).prototype,"addBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(D.prototype,"reduceBtn",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(D.prototype,"levelLab",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=D))||S)),h._RF.pop()}}}));

System.register("chunks:///UI/BattleICardtem.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Tools.js","../Core/Event/EventCode.js","../Core/Event/EventBus.js","../Data/BattleData.js","../Data/GameData.js"],(function(e,t){var n,i,o,s,a,c,r,l,h,u,d,p,f,v,y,C,_,T,k,I,B,S,w,x,m,g,b,E,U,L,O,H,D,R,j,P;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,o=e.classCallCheck,s=e.possibleConstructorReturn,a=e.getPrototypeOf,c=e.initializerDefineProperty,r=e.assertThisInitialized,l=e.createClass,h=e.asyncToGenerator},function(e){u=e.cclegacy,d=e._decorator,p=e.LabelComponent,f=e.Node,v=e.SystemEventType,y=e.Vec3,C=e.SpriteComponent,_=e.Tween,T=e.Component,k=e.tween,I=e.SpriteFrame},function(e){B=e.Tools},function(e){S=e.EventCode},function(e){w=e.default},function(e){x=e.default},function(e){m=e.default}],execute:function(){u._RF.push({},"60050GT89JJXYNKHnLvymrt","BattleICardtem",void 0),j=d.ccclass,P=d.property,e("BattleICardtem",(g=j("BattleICardtem"),b=P(p),E=P(f),U=P(f),g((H=n((O=function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,l=new Array(i),h=0;h<i;h++)l[h]=arguments[h];return n=s(this,(e=a(t)).call.apply(e,[this].concat(l))),c(n,"indexLab",H,r(n)),c(n,"icon",D,r(n)),c(n,"lock",R,r(n)),n.touch_t=0,n.isUp=!1,n}var n;return i(t,e),l(t,[{key:"start",value:function(){this.node.on("click",this.onClick,this)}},{key:"onEnable",value:function(){this.node.children[0].on(v.TOUCH_START,this.onTouchStart,this),this.node.children[0].on(v.TOUCH_MOVE,this.onMove,this),this.node.children[0].on(v.TOUCH_END,this.onTouchEnd,this),this.node.children[0].on(v.TOUCH_CANCEL,this.onTouchCancel,this)}},{key:"onDisable",value:function(){this.node.children[0].off(v.TOUCH_START,this.onTouchStart,this),this.node.children[0].off(v.TOUCH_MOVE,this.onMove,this),this.node.children[0].off(v.TOUCH_END,this.onTouchEnd,this),this.node.children[0].off(v.TOUCH_CANCEL,this.onTouchCancel,this)}},{key:"onTouchStart",value:function(e){x.Instance.SelectBoatIndex==this.index&&(this.eTouch=e,this.touch_t=0)}},{key:"onMove",value:function(e){m.Instance._BattleScene.ship.active}},{key:"onTouchEnd",value:function(e){this.eTouch=null,this.touch_t=0,m.Instance._BattleScene.ship.active=!1}},{key:"onTouchCancel",value:function(e){m.Instance._BattleScene.ship.active=!1,e.getLocationY()<230||m.Instance._BattleScene.onMouseUp(e),this.touch_t=0,this.eTouch=null}},{key:"update",value:function(e){null!=this.eTouch&&(this.touch_t+=e,this.touch_t<.25||(m.Instance._BattleScene.ship.active=!0,m.Instance._BattleScene.ship.worldPosition=new y(this.eTouch.getLocationX(),this.eTouch.getLocationY(),0)))}},{key:"setIndex",value:function(e){this.index=e,this.isBattle=!1,this.refreshUI()}},{key:"refreshUI",value:function(){this.indexLab.string=(this.index+1).toString(),this.lock.active=!this.isLock(),this.setGrayscale(!1),this.refreshSelectPos()}},{key:"setGrayscale",value:function(e){for(var t=this.node.getComponentsInChildren(C),n=0;n<t.length;n++){t[n];t[n].grayscale=e}}},{key:"isLock",value:function(){return!0}},{key:"onClick",value:function(){if(this.isLock()&&!this.isBattle){if(w.Instance.pos(S.OnHideBattleShipInfo),x.Instance.SelectBoatIndex!=this.index)return x.Instance.SelectBoatIndex=this.index,void this.refreshSelectPos();w.Instance.pos(S.OnShowBattleShipInfo,this.index);var e=this.node.children[0],t=new _(e);t.to(.02,{position:new y(e.position.x,0,0)}),t.to(.02,{scale:new y(1,1,1)});var n=new _(e);n.to(.1,{position:new y(e.position.x,60,0)}),n.to(.1,{scale:new y(1.05,1.05,1.05)}),this.isUp=!this.isUp,t.sequence(t,n),t.start()}}},{key:"refreshSelectPos",value:function(){var e=this.node.children[0],t=new _(e);x.Instance.SelectBoatIndex!=this.index||this.isBattle?(t.to(.02,{position:new y(e.position.x,0,0)}),t.to(.02,{scale:new y(1,1,1)})):(t.to(.1,{position:new y(e.position.x,60,0)}),t.to(.1,{scale:new y(1.05,1.05,1.05)})),t.start()}},{key:"setToBattle",value:(n=h(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.isBattle=!0,this.icon.active=!1,this.setGrayscale(!0),t=this.node.children[0],k(t).to(.02,{position:new y(t.position.x,0,0)}).start(),k(t).to(.02,{scale:new y(1,1,1)}).start(),n=0;n<t.children.length;n++)t.children[n].active=!1;return e.next=9,B.loadRes("textures/battle/pai_bg",I);case 9:t.getComponent(C).spriteFrame=e.sent;case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"IsCanBattle",value:function(){return!this.isBattle&&this.isLock()}}]),t}(T)).prototype,"indexLab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(O.prototype,"icon",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(O.prototype,"lock",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=O))||L)),u._RF.pop()}}}));

System.register("chunks:///UI/CellCangKu.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,n){var t,l,c,i,o,s,u,r,a,C,h;return e({_dec:void 0,_class:void 0}),{setters:[function(e){t=e.inherits,l=e.createClass,c=e.classCallCheck,i=e.possibleConstructorReturn,o=e.getPrototypeOf},function(e){s=e.cclegacy,u=e._decorator,r=e.Component}],execute:function(){s._RF.push({},"ad8280AX79CB6z49g63klPv","CellCangKu",void 0),h=u.ccclass,u.property,e("CellCangKu",(a=h("CellCangKu"),a(C=function(e){function n(){return c(this,n),i(this,o(n).apply(this,arguments))}return t(n,e),l(n,[{key:"onEnable",value:function(){this.node.children[0].on("click",this.onClick,this)}},{key:"onDisable",value:function(){this.node.children[0].off("click",this.onClick,this)}},{key:"start",value:function(){}},{key:"onClick",value:function(){console.log("on item click")}}]),n}(r))||C)),s._RF.pop()}}}));

System.register("chunks:///UI/ChangeLabel.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Tools.js","../Config.js","../Main.js"],(function(e,t){var n,i,o,s,r,a,c,l,u,d,h,p,f,g,v,_,C,b,y,L,P,m,A,I;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,o=e.classCallCheck,s=e.possibleConstructorReturn,r=e.getPrototypeOf,a=e.initializerDefineProperty,c=e.assertThisInitialized,l=e.createClass},function(e){u=e.cclegacy,d=e._decorator,h=e.LabelComponent,p=e.director,f=e.Component},function(e){g=e.Tools},function(e){v=e.CUR_PLATFORM,_=e.PLATFORM_TYPE},function(e){C=e.Main}],execute:function(){u._RF.push({},"c43ac6AfJRD0LcJwv1Ue8Uv","ChangeLabel",void 0),A=d.ccclass,I=d.property,e("ChangeLabel",(b=A("ChangeLabel"),y=I(String),b((m=n((P=function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return n=s(this,(e=r(t)).call.apply(e,[this].concat(l))),a(n,"en",m,c(n)),n}return i(t,e),l(t,[{key:"start",value:function(){if(v==_.ANDROID_HAIWAI_ENGLISH||v==_.iOS_HAIWAI_ENGLISH){this.node.getComponent(h).lineHeight=80,this.lab=this.node.getComponent(h),this.lab.font=p.getScene().getChildByName("Main").getComponent(C).enFont;var e=this.node.getPosition().x,t=this.node.getPosition().y,n=this.node.getPosition().z,i=t+this.addNodeY(this.lab.fontSize);this.node.setPosition(e,i,n),this.en&&(this.lab.string=g.splitToString1(this.en,","))}}},{key:"addNodeY",value:function(e){switch(e){case 20:return 5;case 24:case 25:return 6;case 35:return 8;case 40:return 10;default:return console.log("没有设定label的fontSize"),0}}},{key:"update",value:function(e){}}]),t}(f)).prototype,"en",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=P))||L)),u._RF.pop()}}}));

System.register("chunks:///UI/ChangeSprite.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Config.js"],(function(e,t){var i,r,n,o,s,c,a,p,l,u,_,h,d,f,C,S,g,v,y,I,m,A;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.inherits,n=e.classCallCheck,o=e.possibleConstructorReturn,s=e.getPrototypeOf,c=e.initializerDefineProperty,a=e.assertThisInitialized,p=e.createClass},function(e){l=e.cclegacy,u=e._decorator,_=e.SpriteFrame,h=e.SpriteComponent,d=e.Component},function(e){f=e.CUR_PLATFORM,C=e.PLATFORM_TYPE}],execute:function(){l._RF.push({},"97769W7+wVCc6PpZQ3nBodL","ChangeSprite",void 0),m=u.ccclass,A=u.property,e("ChangeSprite",(S=m("ChangeSprite"),g=A(_),S((I=i((y=function(e){function t(){var e,i;n(this,t);for(var r=arguments.length,p=new Array(r),l=0;l<r;l++)p[l]=arguments[l];return i=o(this,(e=s(t)).call.apply(e,[this].concat(p))),c(i,"enSprite",I,a(i)),i}return r(t,e),p(t,[{key:"start",value:function(){f!=C.ANDROID_HAIWAI_ENGLISH&&f!=C.iOS_HAIWAI_ENGLISH||this.enSprite&&(this.node.getComponent(h).spriteFrame=this.enSprite)}}]),t}(d)).prototype,"enSprite",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=y))||v)),l._RF.pop()}}}));

System.register("chunks:///UI/SignIn/SignItem.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Core/Constants/Constant.js","../../Tools.js","../../Data/SoldierData.js","../../Data/SignInData.js","../../DataManager.js"],(function(t,e){var n,a,i,s,r,o,c,d,h,u,l,g,m,p,I,C,y,f,v,b;return t({_dec:void 0,_class:void 0}),{setters:[function(t){n=t.inherits,a=t.createClass,i=t.classCallCheck,s=t.possibleConstructorReturn,r=t.getPrototypeOf,o=t.asyncToGenerator},function(t){c=t.cclegacy,d=t._decorator,h=t.SpriteComponent,u=t.LabelComponent,l=t.Component,g=t.SpriteFrame},function(t){m=t.RewardType},function(t){p=t.Tools},function(t){I=t.default},function(t){C=t.default},function(t){y=t.DataManager}],execute:function(){c._RF.push({},"fa7a3CWULNNZZN3JmncGzOD","SignItem",void 0),b=d.ccclass,d.property,t("SignItem",(f=b("SignItem"),f(v=function(t){function e(){return i(this,e),s(this,r(e).apply(this,arguments))}var c;return n(e,t),a(e,[{key:"onLoad",value:function(){this.icon=this.node.getChildByName("icon").getComponent(h),this.card=this.node.getChildByName("card").getComponent(h),this.nameLab=this.node.getChildByName("nameLab").getComponent(u),this.numLab=this.node.getChildByName("numLab").getComponent(u),this.selected=this.node.getChildByName("selected"),this.signIned=this.node.getChildByName("signIned"),this.light=this.node.getChildByName("light")}},{key:"start",value:function(){}},{key:"setData",value:function(t){this.data=t,this.onDataChange()}},{key:"onDataChange",value:function(){this.refreshUI()}},{key:"refreshUI",value:(c=o(regeneratorRuntime.mark((function t(){var e,n,a,i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=C.Instance.getIsSignInedByDay(this.data.id),this.signIned.active=e,this.nameLab.string=this.data.disec,this.numLab.string="+"+p.numberToStrKM(this.data.num),this.selected.active=this.data.id==C.Instance.getNowDay(),this.light.active=this.selected.active,this.icon.node.active=!1,this.card.node.active=!1,t.t0=this.data.type,t.next=t.t0===m.COIN?11:t.t0===m.MASONRY?14:t.t0===m.Hero?17:t.t0===m.Soldier?24:31;break;case 11:return n="textures/store/jinbi",this.icon.node.active=!0,t.abrupt("break",32);case 14:return n="textures/store/uanshi",this.icon.node.active=!0,t.abrupt("break",32);case 17:return n=I.Instance.getSoldierIconPathById(this.data.rewardId),this.card.node.active=!0,a=y.instance.getItemConstInfoByID(this.data.rewardId),t.next=22,p.loadRes("textures/signIn/ka"+a.quality,g);case 22:return this.card.getComponentInChildren(h).spriteFrame=t.sent,t.abrupt("break",32);case 24:return n=I.Instance.getSoldierIconPathById(this.data.rewardId),this.card.node.active=!0,i=y.instance.getItemConstInfoByID(this.data.rewardId),t.next=29,p.loadRes("textures/signIn/ka"+i.quality,g);case 29:return this.card.getComponentInChildren(h).spriteFrame=t.sent,t.abrupt("break",32);case 31:return t.abrupt("break",32);case 32:return s=1==this.icon.node.active?this.icon:this.card,t.next=35,p.loadRes(n,g);case 35:s.spriteFrame=t.sent;case 36:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})}]),e}(l))||v)),c._RF.pop()}}}));

System.register("chunks:///UIOPPONative.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Core/Utils/PlatformUtils.js","./Tools.js","./Core/AdUitls/AdManager.js","./DataManager.js"],(function(i,e){var t,n,o,a,r,c,s,l,d,u,v,p,f,h,_,b,N,g,m,A,y,C,P,D,k,M,O,j,w,I,L,z,S,U;return i({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_temp:void 0}),{setters:[function(i){t=i.applyDecoratedDescriptor,n=i.inherits,o=i.classCallCheck,a=i.possibleConstructorReturn,r=i.getPrototypeOf,c=i.initializerDefineProperty,s=i.assertThisInitialized,l=i.createClass},function(i){d=i.cclegacy,u=i._decorator,v=i.Node,p=i.SpriteComponent,f=i.LabelComponent,h=i.director,_=i.Component},function(i){b=i.default},function(i){N=i.Tools},function(i){g=i.default},function(i){m=i.DataManager}],execute:function(){d._RF.push({},"c6c81TgNnNKPoESjeSumA4P","UIOPPONative",void 0),S=u.ccclass,U=u.property,i("UIOPPONative",(A=S("UIOPPONative"),y=U(v),C=U(p),P=U(f),D=U(f),k=U(Boolean),A((j=t((O=function(i){function e(){var i,t;o(this,e);for(var n=arguments.length,l=new Array(n),d=0;d<n;d++)l[d]=arguments[d];return t=a(this,(i=r(e)).call.apply(i,[this].concat(l))),c(t,"actNode",j,s(t)),c(t,"icon",w,s(t)),c(t,"nameLabel",I,s(t)),c(t,"descLabel",L,s(t)),c(t,"isMiniNative",z,s(t)),t.oldDesc="",t}return n(e,i),l(e,[{key:"start",value:function(){this.showNativeAD(),this.schedule(this.showNativeAD,1)}},{key:"showNativeAD",value:function(){var i=g.nativeAdObj,e=g.nativeAd;if(this.isMiniNative&&(e=g.minNativeAd,i=g.minNativeAdObj),this.actNode.active=null!=i,i&&this.oldDesc!=i.desc&&(this.oldDesc=i.desc,this.nameLabel.string=i.title,this.descLabel.string=i.desc,N.setImage(this.icon,i.icon,"png"),e)){var t=100*Math.random(),n=m.instance.oppoAdConfig.native_report;b.isVivo()&&(n=m.instance.vivoAdConfig.native_report),t<=n&&e.reportAdShow({adId:i.adId})}}},{key:"onIconClick",value:function(){this.isMiniNative?g.clickMiniNativeAd():g.clickNativeAd()}},{key:"onCloseADClick",value:function(){if(this.isMiniNative){var i=100*Math.random(),e=m.instance.oppoAdConfig.native_close_jump;b.isVivo()&&(e=m.instance.vivoAdConfig.native_close_jump),i<=e?g.clickNativeAd():(this.node.active=!1,h.getScene().emit("CLOSE_NATIVE_AD",!0))}else g.clickMiniNativeAd()}}]),e}(_)).prototype,"actNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(O.prototype,"icon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(O.prototype,"nameLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(O.prototype,"descLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(O.prototype,"isMiniNative",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=O))||M)),d._RF.pop()}}}));

System.register("chunks:///UI/SignIn/UISignIn.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Core/Utils/PlatformUtils.js","../../Tools.js","../../Config.js","../../Core/View/UIBase.js","../../Core/AdUitls/AdManager.js","../../Core/Utils/SendEventManager.js","../../Data/SignInData.js","../../DataManager.js","./SignItem.js","../../UIOPPONative.js"],(function(n,e){var i,t,o,a,s,r,c,d,l,h,u,v,g,f,w,p,I,_,C,k,B,y,N,m,b,S,A,O,U,E,T,P,D,j,z,R,W,V,M,Q,F,G,x;return n({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_temp:void 0}),{setters:[function(n){i=n.applyDecoratedDescriptor,t=n.inherits,o=n.classCallCheck,a=n.possibleConstructorReturn,s=n.getPrototypeOf,r=n.initializerDefineProperty,c=n.assertThisInitialized,d=n.createClass},function(n){l=n.cclegacy,h=n._decorator,u=n.Node,v=n.director,g=n.ButtonComponent},function(n){f=n.default},function(n){w=n.Tools},function(n){p=n.SIGNIN_INFO},function(n){I=n.UIBase},function(n){_=n.default},function(n){C=n.default,k=n.EventId},function(n){B=n.default},function(n){y=n.DataManager},function(n){N=n.SignItem},function(n){m=n.UIOPPONative}],execute:function(){l._RF.push({},"48367UDYkJNZI1NY6q6+Ja5","UISignIn",void 0),G=h.ccclass,x=h.property,n("UISignIn",(b=G("UISignIn"),S=x(u),A=x(u),O=x(u),U=x(u),E=x(u),T=x(u),P=x(u),b((z=i((j=function(n){function e(){var n,i;o(this,e);for(var t=arguments.length,d=new Array(t),l=0;l<t;l++)d[l]=arguments[l];return i=a(this,(n=s(e)).call.apply(n,[this].concat(d))),r(i,"list",z,c(i)),r(i,"rewardBtn",R,c(i)),r(i,"rewardBtnWord",W,c(i)),r(i,"videoBtn",V,c(i)),r(i,"closeBtn",M,c(i)),r(i,"rwardAgainBtn",Q,c(i)),r(i,"rewarded",F,c(i)),i.normalGetTimer=0,i.isOppo=!1,i}return t(e,n),d(e,[{key:"update",value:function(n){}},{key:"onEnable",value:function(){this.isOppo=f.isOppo(),this.normalGetTimer=0,this.showWindow(),this.closeBtn.on("click",this.onCloseClick,this),this.videoBtn.on("click",this.onVideoClick,this),this.rewardBtn.on("click",this.onRewardClick,this),this.rewardBtnWord.on("click",this.onRewardClick,this),this.rwardAgainBtn.on("click",this.onRewardAgain,this),this.refreshUI(),v.getScene().on("CLOSE_NATIVE_AD",this.showNative,this),y.instance.showInterstitialAd()}},{key:"showNative",value:function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(f.isOppo()||f.isVivo()){var e=this.node.getChildByName("panel").getChildByName("NativeBtn1").getComponent(g),i=this.node.getChildByName("panel").getChildByName("NativeBtn2").getComponent(g);y.instance.OPPO_VERSION;if(!n&&y.instance.isCanShowNative()&&this.videoBtn.active){e.node.active=y.instance.isShowNativeWword_0(),i.node.active=!y.instance.isShowNativeWword_0();var t=e.node.active?e:i;t.node.off("click"),t.node.on("click",this.onBtnClickNativeAd,this),t.node.setPosition(-170,-372,0),this.videoBtn.setPosition(170,-372,0);var o=cc.winSize.height/cc.winSize.width>2?150:100;this.rewardBtnWord.setPosition(0,-cc.winSize.height/2+170+o/2,0),this.rewardBtnWord.active=!B.Instance.getNowDataSignIned();var a=this.node.getChildByName("UIOPPONative").getComponent(m);a.node.active=!0,a.showNativeAD()}else f.SceenIsTwoToOne()&&_.showBanner(!0),this.node.getChildByName("UIOPPONative").active=!1,e.node.active=!1,i.node.active=!1,this.videoBtn.setPosition(170,-372,0),this.rewardBtnWord.setPosition(0,-482,0),this.rewardBtnWord.active=!1}else f.SceenIsTwoToOne()&&_.showBanner(!0);this.rewardBtn.active=0==B.Instance.rewardCount,console.log("rewardCount:"+B.Instance.rewardCount),console.log(this.rewardBtn.active)}},{key:"onBtnClickNativeAd",value:function(){_.clickNativeAd()}},{key:"onDisable",value:function(){this.closeBtn.off("click",this.onCloseClick,this),this.videoBtn.off("click",this.onVideoClick,this),this.rewardBtn.off("click",this.onRewardClick,this),this.rwardAgainBtn.off("click",this.onRewardAgain,this),_.showBanner(!1)}},{key:"onCloseClick",value:function(){this.node.active=!1,y.instance.showWxTouch(y.instance.WXConfig.rate_sign),y.instance.showQQTouch(y.instance.QQConfig.rate_sign),y.instance.showTTTouch(y.instance.TTConfig.rate_sign),y.instance.showAndroidTouch(y.instance.AndroidConfig.rate_sign)}},{key:"onVideoClick",value:function(){var n=this;B.Instance.getNowDataSignIned()?w.ShowTip("Received today"):(C.Instance.sendEvent(k[k.Sign],{type:"双倍领取-点击"}),C.Instance.sendEvent(k[k.sign_Double_click]),_.createVideo((function(){y.instance.VideoCount++,B.Instance.sign(2),n.refreshUI(),C.Instance.sendEvent(k[k.sign_Double_complete]),C.Instance.sendEvent(k[k.Sign],{type:"双倍-完成"}),C.Instance.sendEvent(k[k.sign_Double_clickOk])}),(function(){C.Instance.sendEvent(k[k.sign_Double_clickOk])})))}},{key:"onRewardClick",value:function(){(y.instance.showAndroidTouch(y.instance.AndroidConfig.rate_sign),B.Instance.sign(),this.refreshUI(),C.Instance.sendEvent(k[k.Sign],{type:"普通领取"}),C.Instance.sendEvent(k[k.sign_normal]),f.isOppo())&&(100*Math.random()<=y.instance.oppoAdConfig.normal_btn_show_native&&_.clickNativeAd())}},{key:"onRewardAgain",value:function(){var n=this;C.Instance.sendEvent(k[k.Sign],{type:"再领一次-点击"}),C.Instance.sendEvent(k[k.sign_Again_click]),_.createVideo((function(){y.instance.VideoCount++,B.Instance.sign(),n.refreshUI(),C.Instance.sendEvent(k[k.sign_Again_complete]),C.Instance.sendEvent(k[k.Sign],{type:"再领一次-完成"}),C.Instance.sendEvent(k[k.sign_Again_clickOk])}),(function(){C.Instance.sendEvent(k[k.sign_Again_clickOk])}))}},{key:"refreshUI",value:function(){for(var n=0;n<p.length;n++)this.list.children[n].getComponent(N).setData(p[n]);this.rewardBtn.active=0==B.Instance.rewardCount,this.videoBtn.active=0==B.Instance.rewardCount,this.rwardAgainBtn.active=1==B.Instance.rewardCount,this.rewarded.active=2==B.Instance.rewardCount,this.showNative()}}]),e}(I)).prototype,"list",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(j.prototype,"rewardBtn",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(j.prototype,"rewardBtnWord",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(j.prototype,"videoBtn",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(j.prototype,"closeBtn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(j.prototype,"rwardAgainBtn",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(j.prototype,"rewarded",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=j))||D)),l._RF.pop()}}}));

System.register("chunks:///UI/SoldierStars.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../DataManager.js"],(function(e,t){var i,r,n,a,o,l,s,c,u,d,v,p,f,b,h,m,_,y,g,S,C,L,z,D,I,k,w;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.inherits,n=e.classCallCheck,a=e.possibleConstructorReturn,o=e.getPrototypeOf,l=e.initializerDefineProperty,s=e.assertThisInitialized,c=e.createClass},function(e){u=e.cclegacy,d=e._decorator,v=e.LabelComponent,p=e.Node,f=e.Component},function(e){b=e.DataManager}],execute:function(){u._RF.push({},"5187eXl4bFC55G5l/Js4R1Q","SoldierStars",void 0),k=d.ccclass,w=d.property,e("SoldierStars",(h=k("SoldierStars"),m=w(v),_=w(v),y=w(p),g=w(p),h((L=i((C=function(e){function t(){var e,i;n(this,t);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return i=a(this,(e=o(t)).call.apply(e,[this].concat(c))),l(i,"nameLab",L,s(i)),l(i,"lvLab",z,s(i)),l(i,"stars",D,s(i)),l(i,"num",I,s(i)),i}return r(t,e),c(t,[{key:"start",value:function(){}},{key:"setHomeInfo",value:function(e){var t=b.instance.getItemConstInfoByID(e.id);if(this.nameLab.string=t.name,e.lv<3)for(var i=0;i<this.stars.children.length;i++){this.stars.children[i].active=e.lv>=i}else this.lvLab.string=""+(e.lv+1);this.stars.active=e.lv<3,this.num.active=!(e.lv<3),this.node.active=!0}},{key:"hide",value:function(){this.node.active=!1}}]),t}(f)).prototype,"nameLab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(C.prototype,"lvLab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(C.prototype,"stars",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(C.prototype,"num",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=C))||S)),u._RF.pop()}}}));

System.register("chunks:///UI/UIBattle.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Core/Constants/Constant.js","../Core/Utils/AudioManager.js","../Tools.js","../Cfg/BountyCfg.js","../Cfg/LevelCfg.js","../Config.js","../Core/Event/EventCode.js","../Core/Event/EventBus.js","../Core/View/UIBase.js","../Core/View/UIManager.js","../Core/AdUitls/AdManager.js","../Core/Utils/SendEventManager.js","../Data/SoldierData.js","../Data/GuideData.js","../Data/PVPData.js","../Data/BattleData.js","../Data/GameData.js","../Data/BountyData.js","../DataManager.js","./BattleICardtem.js"],(function(e,t){var n,i,o,a,r,s,c,l,u,d,h,f,p,m,v,I,y,g,b,B,k,C,w,S,T,_,P,z,x,E,H,A,L,R,D,G,O,N,j,U,M,V,Z,W,F,K,q,X,Y,J,Q,$,ee,te,ne,ie,oe,ae,re,se,ce,le,ue,de,he,fe,pe,me,ve,Ie,ye,ge,be,Be,ke,Ce,we,Se,Te,_e,Pe,ze,xe,Ee,He,Ae,Le,Re,De,Ge,Oe,Ne,je,Ue,Me,Ve,Ze,We,Fe,Ke,qe,Xe,Ye,Je,Qe,$e,et,tt,nt,it;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_dec10:void 0,_dec11:void 0,_dec12:void 0,_dec13:void 0,_dec14:void 0,_dec15:void 0,_dec16:void 0,_dec17:void 0,_dec18:void 0,_dec19:void 0,_dec20:void 0,_dec21:void 0,_dec22:void 0,_dec23:void 0,_dec24:void 0,_dec25:void 0,_dec26:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_descriptor9:void 0,_descriptor10:void 0,_descriptor11:void 0,_descriptor12:void 0,_descriptor13:void 0,_descriptor14:void 0,_descriptor15:void 0,_descriptor16:void 0,_descriptor17:void 0,_descriptor18:void 0,_descriptor19:void 0,_descriptor20:void 0,_descriptor21:void 0,_descriptor22:void 0,_descriptor23:void 0,_descriptor24:void 0,_descriptor25:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,o=e.classCallCheck,a=e.possibleConstructorReturn,r=e.getPrototypeOf,s=e.initializerDefineProperty,c=e.assertThisInitialized,l=e.createClass,u=e.get,d=e.asyncToGenerator},function(e){h=e.cclegacy,f=e._decorator,p=e.Node,m=e.LabelComponent,v=e.ButtonComponent,I=e.ScrollViewComponent,y=e.SpriteComponent,g=e.systemEvent,b=e.SystemEventType,B=e.loader,k=e.director,C=e.Vec3,w=e.tween,S=e.Color,T=e.UITransformComponent,_=e.WidgetComponent,P=e.SpriteFrame,z=e.Prefab,x=e.instantiate,E=e.Vec2},function(e){H=e.default},function(e){A=e.default,L=e.GameType,R=e.ViewType,D=e.AudioName},function(e){G=e.AudioManager},function(e){O=e.Tools},function(e){N=e.default},function(e){j=e.default},function(e){U=e.BOAT_MATRIX},function(e){M=e.EventCode},function(e){V=e.default},function(e){Z=e.UIBase},function(e){W=e.default},function(e){F=e.default},function(e){K=e.default,q=e.EventId},function(e){X=e.default},function(e){Y=e.default},function(e){J=e.default},function(e){Q=e.default},function(e){$=e.default},function(e){ee=e.default},function(e){te=e.DataManager},function(e){ne=e.BattleICardtem}],execute:function(){h._RF.push({},"224589/7GVOnYUv3FZLi/Sn","UIBattle",void 0),nt=f.ccclass,it=f.property,e("UIBattle",(ie=nt("UIBattle"),oe=it(p),ae=it(p),re=it(p),se=it(p),ce=it(p),le=it(p),ue=it(m),de=it(m),he=it(m),fe=it(v),pe=it(I),me=it(v),ve=it(v),Ie=it(p),ye=it(p),ge=it(p),be=it(p),Be=it(p),ke=it(p),Ce=it(p),we=it(p),Se=it(p),Te=it(p),_e=it(p),Pe=it(y),ie((Ee=n((xe=function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return n=a(this,(e=r(t)).call.apply(e,[this].concat(l))),s(n,"recordIcon",Ee,c(n)),s(n,"oPPOMiniNative",He,c(n)),s(n,"customAd1",Ae,c(n)),s(n,"customAd2",Le,c(n)),s(n,"watchWar",Re,c(n)),s(n,"rewards",De,c(n)),s(n,"nameTxt",Ge,c(n)),s(n,"powerTxt",Oe,c(n)),s(n,"timeTxt",Ne,c(n)),s(n,"backBtn",je,c(n)),s(n,"armysScroll",Ue,c(n)),s(n,"zhaoHuanBtn",Me,c(n)),s(n,"zhaoHuanBtn2",Ve,c(n)),s(n,"tuoweiEffectBtn",Ze,c(n)),s(n,"hitEffectBtn",We,c(n)),s(n,"effectBtn",Fe,c(n)),s(n,"info",Ke,c(n)),s(n,"top",qe,c(n)),s(n,"bottom",Xe,c(n)),s(n,"vs",Ye,c(n)),s(n,"blue",Je,c(n)),s(n,"red",Qe,c(n)),s(n,"vsIcon",$e,c(n)),s(n,"clickGrond",et,c(n)),s(n,"skyIcon",tt,c(n)),n.battleICardtemPrefab=null,n.skyInfo=["Pay attention to the direction of the wind, which increases the attack distance of remote units!","Rain reduces soldier speed, ice damage increases, and fire damage decreases!","Low visibility in foggy weather, all soldiers and heroes will hit fewer!","Under the sun, melee units are more enthusiastic and attack faster"],n.skyIconPath=["taiyang","yu","wu","taiyang1"],n.isLockZhaoHuanBtn2=!1,n.t=0,n.maxT=5,n}var n,h,f,p;return i(t,e),l(t,[{key:"setIsSenior",value:function(e){Q.Instance.IsSenior=e,this.zhaoHuanBtn.node.getChildByName("select").active=!Q.Instance.IsSenior,this.zhaoHuanBtn2.node.getChildByName("select").active=Q.Instance.IsSenior}},{key:"start",value:function(){u(r(t.prototype),"start",this).call(this),this.backBtn.node.on("click",this.onBackClick,this),this.zhaoHuanBtn.node.on("click",this.onZhaoHuanClick,this),this.zhaoHuanBtn2.node.on("click",this.onZhaoHuanClick2,this),this.bottomStartPos=this.bottom.position.clone(),g.on(cc.SystemEventType.TOUCH_START,this.onSceneClick,this),this.node.on(b.TOUCH_START,this.onSceneClick,this),this.vsAnimation(),this.initArmysScrollView(),this.effectBtn.on("click",this.onEffectClick,this),this.hitEffectBtn.on("click",this.onHitEffectClick,this),this.tuoweiEffectBtn.on("click",this.onTWEffectClick,this),this.node.on(b.TOUCH_START,this.onMouseDown,this),B.loadResArray(["prefabs/flag","prefabs/ballute"]),this.setIsLockZhaoZhuan2(!1),this.setIsSenior(!1),Q.Instance.paratroops_t=0,Q.Instance.senior_paratroops_t=0,$.Instance.GameType==L.Defense&&$.Instance.IsAddPower&&O.ShowTip("All ATK power has been\nincrease by 20%"),this.recordIcon.active=H.isTT,H.startRecorderManager()}},{key:"refreshClickGrond",value:function(e){if(L.Defense!=$.Instance.GameType)if($.Instance._BattleScene.ship.active)this.clickGrond.active=!1;else if(this.t+=e,this.t<this.maxT)this.clickGrond.active=!1;else{if(Q.Instance.SelectBoatIndex<0)return;W.Instance.checkViewActive(R.UIGuide)||(this.clickGrond.active=!0)}}},{key:"onMouseDown",value:function(){this.t=0}},{key:"onEffectClick",value:function(){$.Instance.openEffect=!$.Instance.openEffect,this.refreshBtn()}},{key:"onHitEffectClick",value:function(){$.Instance.openHitEffect=!$.Instance.openHitEffect,this.refreshBtn()}},{key:"onTWEffectClick",value:function(){$.Instance.openTuoWeiEffect=!$.Instance.openTuoWeiEffect,this.refreshBtn()}},{key:"refreshBtn",value:function(){this.effectBtn.active=$.Instance.IsBebug,this.hitEffectBtn.active=$.Instance.IsBebug,this.tuoweiEffectBtn.active=$.Instance.IsBebug,this.effectBtn.getComponentInChildren(m).string="特效"+($.Instance.openEffect?"开":"关"),this.hitEffectBtn.getComponentInChildren(m).string="受击特效"+($.Instance.openHitEffect?"开":"关"),this.tuoweiEffectBtn.getComponentInChildren(m).string="拖尾"+($.Instance.openTuoWeiEffect?"开":"关")}},{key:"onEnable",value:function(){var e=this;V.Instance.addListener(M.OnHideBattleShipInfo,this.hideInfo.bind(this)),V.Instance.addListener(M.OnShowBattleShipInfo,this.showInfo.bind(this)),V.Instance.addListener(M.RefreshArmysScroll,this.refreshArmysScroll.bind(this)),V.Instance.addListener(M.ToBattleBoat,this.setBaotToBattle.bind(this)),V.Instance.addListener(M.OnParatroopsCountChange,this.refreshZhaoHuanBtn.bind(this)),V.Instance.addListener(M.OnGameEnd,this.destoryCustomAd.bind(this)),Q.Instance.resetParatroopsCount(),Q.Instance.resetSeniorParatroopsCount(),this.skyIcon.node.on("click",this.onSkyClick,this),this.recordIcon.on("click",this.onRecordIconClick,this),G.Instance.playOneShot(D.Pipei),this.info.active=!1,this.zhaoHuanBtn.node.active=$.Instance.Level>=A.LockKongTou,this.zhaoHuanBtn2.node.active=$.Instance.Level>=A.LockKongTou,this.oPPOMiniNative.active=this.zhaoHuanBtn.node.active,this.scheduleOnce((function(){e.refreshSkyIcon()}),.1),this.setRewards(),this.refreshBtn(),$.Instance.GameType==L.Defense?(this.armysScroll.node.active=!1,this.zhaoHuanBtn.node.active=!1,this.zhaoHuanBtn2.node.active=!1,this.watchWar.active=!0):(this.armysScroll.node.active=!0,this.watchWar.active=!1),this.backBtn.node.active=$.Instance.Level>3}},{key:"refreshSkyIcon",value:(p=d(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.skyType=$.Instance._BattleScene.skyType,this.skyIcon.node.children[0].children[0].getComponent(m).string=this.skyInfo[this.skyType],e.next=4,O.loadRes("textures/common/tianqi_"+this.skyIconPath[this.skyType],P);case 4:this.skyIcon.spriteFrame=e.sent;case 5:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"onDisable",value:function(){V.Instance.removeListener(M.OnHideBattleShipInfo),V.Instance.removeListener(M.OnShowBattleShipInfo),V.Instance.removeListener(M.RefreshArmysScroll),V.Instance.removeListener(M.ToBattleBoat),V.Instance.removeListener(M.OnParatroopsCountChange),V.Instance.removeListener(M.OnGameEnd),this.recordIcon.off("click",this.onRecordIconClick,this),this.skyIcon.node.off("click",this.onSkyClick,this)}},{key:"onRecordIconClick",value:function(){O.ShowTip("视频录制中")}},{key:"onSceneClick",value:function(e){this.skyIcon.node.children[0].active=!1,this.hideInfo()}},{key:"onSkyClick",value:function(){this.skyIcon.node.children[0].active=!0}},{key:"update",value:function(e){Q.Instance.refreshParatroops_t(e),Q.Instance.refreshSeniorParatroops_t(e),this.refreshMen(),this.refreshT(e),this.refreshClickGrond(e)}},{key:"refreshZhaoHuanBtn",value:function(){var e=te.instance.getBarracks(),t=te.instance.getBuildUpInfoById(e.id).type[0][e.lv];this.zhaoHuanBtn.node.getChildByName("countTxt").getComponent(m).string="X"+Q.Instance.ParatroopsCount,this.zhaoHuanBtn.node.getChildByName("levelTxt").getComponent(m).string="LV."+t,this.zhaoHuanBtn2.node.getChildByName("countTxt").getComponent(m).string="X"+Q.Instance.SeniorParatroopsCount,this.zhaoHuanBtn2.node.getChildByName("levelTxt").getComponent(m).string="LV."+t}},{key:"refreshMen",value:function(){this.zhaoHuanBtn.node.getChildByName("men").getComponent(y).fillRange=Q.Instance.paratroops_t/3,this.zhaoHuanBtn2.node.getChildByName("men").getComponent(y).fillRange=Q.Instance.senior_paratroops_t/3;var e=Q.Instance.ParatroopsCount>0;this.zhaoHuanBtn.getComponent(y).grayscale=!e;var t=Q.Instance.SeniorParatroopsCount>0;this.zhaoHuanBtn2.getComponent(y).grayscale=!t}},{key:"initArmysScrollView",value:(f=d(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($.Instance.GameType!=L.Defense){e.next=2;break}return e.abrupt("return");case 2:if(Q.Instance.SelectBoatIndex=-1,null!=this.battleICardtemPrefab){e.next=7;break}return e.next=6,O.loadRes("ui/BattleICardtem",z);case 6:this.battleICardtemPrefab=e.sent;case 7:for(t=0;t<U.length;t++)n=x(this.battleICardtemPrefab),this.armysScroll.content.addChild(n),n.getComponent(ne).setIndex(t),Q.Instance.hasItemInShip(t)||(n.active=!1);this.armysScroll.scrollTo(new E(0,0)),this.refreshSelectIndex();case 10:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"onBackClick",value:function(){O.cleanUnuseRes(),k.loadScene("BoatScene")}},{key:"refreshArmysScroll",value:function(){if($.Instance.GameType!=L.Defense&&!(Q.Instance.SelectBoatIndex<0))for(var e=0;e<this.armysScroll.content.children.length;e++)this.armysScroll.content.children[e].getComponent(ne).refreshSelectPos()}},{key:"setBaotToBattle",value:function(){this.armysScroll.content.children[Q.Instance.SelectBoatIndex].getComponent(ne).setToBattle(),this.refreshSelectIndex()}},{key:"refreshSelectIndex",value:function(){for(var e=0;e<this.armysScroll.content.children.length;e++){var t=this.armysScroll.content.children[e].getComponent(ne);if(t.IsCanBattle()&&t.node.active)return void(Q.Instance.SelectBoatIndex=e)}Q.Instance.SelectBoatIndex=-1,$.Instance._BattleScene._cameraCtl.playStartTween1()}},{key:"vsAnimation",value:function(){var e=this;this.top.active=!1,this.bottom.active=!1,this.vs.active=!0,this.blue.position=new C(-600,0,0),this.red.position=new C(600,0,0),this.vs.setScale(1,1,1);w(this.blue).to(.8,{position:new C(-170,0,0)},{easing:"elasticInOut"}).start(),w(this.red).to(.8,{position:new C(170,0,0)},{easing:"elasticInOut"}).start(),w(this.vsIcon).to(.7,{scale:new C(1.5,1.5,1)},{easing:"elasticInOut"}).to(1,{scale:new C(1,1,1)},{easing:"elasticInOut"}).call((function(){Y.Instance.showKongTouTip();var t=e.vs.getComponent(y);t.color=new S(255,255,255,255),w(t).to(.8,{color:new S(255,255,255,0)}).start(),w(e.vs).to(.8,{scale:new C(4,4,1)}).call((function(){e.vs.active=!1,e.top.active=!0;var t=$.Instance._BattleScene.canvas.getComponent(T).contentSize.height/2;e.bottom.getComponent(_).enabled=!1,e.bottom.position=new C(e.bottomStartPos.x,e.bottomStartPos.y-500,0),e.bottom.active=!0,w(e.bottom).to(.8,{position:new C(0,-t+e.bottom.height/2)},{easing:"elasticInOut"}).call((function(){Y.Instance.showGuideClickGround(),e.bottom.getComponent(_).enabled=!0})).start()})).start()})).start(),setTimeout((function(){e.refreshBattleInfo()}),100)}},{key:"refreshBattleInfo",value:function(){var e="关卡"+$.Instance.Level,t=X.Instance.redPower,n=X.Instance.getBluePower();if($.Instance.GameType==L.PVP)e=J.Instance.getPvpCfgDataById(J.Instance.ChallengeId).name;else if($.Instance.GameType==L.Bounty){e=N.Instance.getDataByIndex(ee.Instance.SelectIndex).desc+(ee.Instance.SelectIndex+1)}else $.Instance.GameType==L.Defense&&(e=Q.Instance.defenseEnemyName,t=Q.Instance.defenseEnemyPower,n=X.Instance.getLandPower());e.length>5&&(e=e.substring(0,5)+"...");var i={path:"",power:n,name:"ME"},o={path:"",power:t,name:"STAGE "+$.Instance.Level};this.nameTxt.string="STAGE "+$.Instance.Level,this.powerTxt.string=O.numberToStrKM(t),this.setBattleInfo(this.blue,i),this.setBattleInfo(this.red,o)}},{key:"setBattleInfo",value:(h=d(regeneratorRuntime.mark((function e(t,n){var i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.getChildByName("icon").getComponent(y),i=t.getChildByName("powerLab").getComponent(m),o=t.getChildByName("nameLab").getComponent(m),i.string=O.numberToStrKM(n.power),o.string=n.name;case 5:case"end":return e.stop()}}),e)}))),function(e,t){return h.apply(this,arguments)})},{key:"showInfo",value:(n=d(regeneratorRuntime.mark((function e(t){var n,i,o,a,r,s,c,l,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.info.getChildByName("items"),i=0,o=Q.Instance.getArmysByIndex(t),a=0;case 4:if(!(a<n.children.length)){e.next=24;break}if(r=n.children[a],!(a<o.length)){e.next=20;break}return s=te.instance.getItemConstInfoByID(o[a].id),c=r.getChildByName("bg").getComponent(y),l=r.getChildByName("icon").getComponent(y),e.next=12,O.loadRes("textures/cangku/ck_quality"+s.quality,P);case 12:return c.spriteFrame=e.sent,e.next=15,O.loadRes(X.Instance.getSoldierSmallIconPathById(o[a].id),P);case 15:l.spriteFrame=e.sent,r.active=!0,i+=X.Instance.getPowerById(o[a].id,o[a].lv),e.next=21;break;case 20:r.active=!1;case 21:a++,e.next=4;break;case 24:this.info.getChildByName("powerLab").getComponent(m).string=i+"",u=this.info.getWorldPosition(),d=this.armysScroll.content.children[t].getWorldPosition(),this.info.setWorldPosition(d.x,u.y,u.z),this.info.active=!0;case 29:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"hideInfo",value:function(){this.info.active=!1}},{key:"refreshT",value:function(e){Q.Instance.refreshBattleTime(e),this.timeTxt.string=O.timestampToTime(Q.Instance.battleTime)}},{key:"setRewards",value:function(){var e=[1,1,0,0,0];if($.Instance.GameType==L.Game){var t=Q.Instance.BattleLevel,n=j.Instance.getLevelDataByLevel(t);e=[n.coin,n.wood,n.medal,n.gem,0]}else if($.Instance.GameType==L.Bounty){var i=ee.Instance.getRewardData();e=[i[0],i[2],0,i[1],0]}else $.Instance.GameType==L.PVP?e=[A.PVPReward,0,1,5,15]:$.Instance.GameType==L.Defense&&(e=[A.DefenseGoldReward,100,2,0,0]);e=$.Instance.RewardData;for(var o=0;o<this.rewards.children.length;o++){var a=this.rewards.children[o];a.getComponentInChildren(m).string=O.numberToStrKM(e[o]),a.active=e[o]>0}}},{key:"onZhaoHuanClick",value:function(){this.setIsSenior(!1),Q.Instance.createParatroops(Q.Instance.paratroops)}},{key:"onZhaoHuanClick2",value:function(){var e=this;if(!this.isLockZhaoHuanBtn2)return H.isWx()&&k.pause(),K.Instance.sendEvent(q[q.lockSuperArm_click]),void F.createVideo((function(){K.Instance.sendEvent(q[q.lockSuperArm_complete]),te.instance.VideoCount++,H.isWx()&&k.resume(),K.Instance.sendEvent(q[q.InGame],{name:"关卡内视频开启投矛兵"}),K.Instance.sendEvent(q[q.lockSuperArm_clickOk]),e.scheduleOnce((function(){K.Instance.sendEvent("投矛兵领取"),e.setIsLockZhaoZhuan2(!0),e.onZhaoHuanClick2()}),0)}),(function(){K.Instance.sendEvent(q[q.lockSuperArm_clickOk])}));this.setIsSenior(!0),Q.Instance.createParatroops(Q.Instance.paratroops)}},{key:"setIsLockZhaoZhuan2",value:function(e){this.isLockZhaoHuanBtn2=e,this.zhaoHuanBtn2.node.getChildByName("view").active=!e,this.zhaoHuanBtn2.node.getChildByName("levelTxt").active=e,this.zhaoHuanBtn2.node.getChildByName("countTxt").active=e}},{key:"destoryCustomAd",value:function(){this.customAd1&&(this.customAd1.destroy(),this.customAd1=null),this.customAd2&&(this.customAd2.destroy(),this.customAd2=null)}}]),t}(Z)).prototype,"recordIcon",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),He=n(xe.prototype,"oPPOMiniNative",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=n(xe.prototype,"customAd1",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Le=n(xe.prototype,"customAd2",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=n(xe.prototype,"watchWar",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=n(xe.prototype,"rewards",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ge=n(xe.prototype,"nameTxt",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=n(xe.prototype,"powerTxt",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=n(xe.prototype,"timeTxt",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),je=n(xe.prototype,"backBtn",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=n(xe.prototype,"armysScroll",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=n(xe.prototype,"zhaoHuanBtn",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ve=n(xe.prototype,"zhaoHuanBtn2",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ze=n(xe.prototype,"tuoweiEffectBtn",[Ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),We=n(xe.prototype,"hitEffectBtn",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=n(xe.prototype,"effectBtn",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ke=n(xe.prototype,"info",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qe=n(xe.prototype,"top",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xe=n(xe.prototype,"bottom",[ke],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ye=n(xe.prototype,"vs",[Ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Je=n(xe.prototype,"blue",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qe=n(xe.prototype,"red",[Se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$e=n(xe.prototype,"vsIcon",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=n(xe.prototype,"clickGrond",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=n(xe.prototype,"skyIcon",[Pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=xe))||ze)),h._RF.pop()}}}));

System.register("chunks:///UI/UIBattleLoading.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/SendEventManager.js","../Data/GameData.js"],(function(e,t){var n,a,i,c,o,s,r,l,u,h,d,v,p,f,I,b,C,g,y,_,k,L,B,m,w,E,M,R,S;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,a=e.inherits,i=e.classCallCheck,c=e.possibleConstructorReturn,o=e.getPrototypeOf,s=e.initializerDefineProperty,r=e.assertThisInitialized,l=e.createClass},function(e){u=e.cclegacy,h=e._decorator,d=e.Node,v=e.LabelComponent,p=e.Vec3,f=e.tween,I=e.Component},function(e){b=e.default,C=e.EventId},function(e){g=e.default}],execute:function(){u._RF.push({},"8e6bbcLRzlJO6iIlT+T8iGZ","UIBattleLoading",void 0),R=h.ccclass,S=h.property,e("UIBattleLoading",(y=R("UIBattleLoading"),_=S(d),k=S(d),L=S(v),y((w=n((m=function(e){function t(){var e,n;i(this,t);for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return n=c(this,(e=o(t)).call.apply(e,[this].concat(l))),s(n,"cancleBtn",w,r(n)),s(n,"searchIcon",E,r(n)),s(n,"tipLab",M,r(n)),n.isCanRotate=!1,n.r=30,n.startY=200,n.angle=180,n}return a(t,e),l(t,[{key:"start",value:function(){this.cancleBtn.on("click",this.onCancleClick,this)}},{key:"update",value:function(e){this.calcMove()}},{key:"onEnable",value:function(){var e=this;this.isCanRotate=!1,this.searchIcon.position=new p(0,200,0),f(this.searchIcon).to(.5,{position:new p(-this.r,200,0)}).call((function(){e.isCanRotate=!0})).start(),1==g.Instance.Level&&b.Instance.sendEvent(C[C.GuideMapSearch]),2==g.Instance.Level&&b.Instance.sendEvent(C[C.GuideStart2]),b.Instance.sendEvent(C[C.Search]),this.cancleBtn.active=g.Instance.Level>3}},{key:"onDisable",value:function(){b.Instance.sendEvent(C[C.SearchSuccess])}},{key:"onCancleClick",value:function(){g.Instance.IsCanCel=!0,this.node.active=!1,b.Instance.sendEvent(C[C.SearchCancel])}},{key:"calcMove",value:function(){if(this.isCanRotate){this.angle-=2;var e=Math.cos(this.angle*Math.PI/180)*this.r,t=this.startY+Math.sin(this.angle*Math.PI/180)*this.r;this.searchIcon.position=new p(e,t,0)}}}]),t}(I)).prototype,"cancleBtn",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(m.prototype,"searchIcon",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(m.prototype,"tipLab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=m))||B)),u._RF.pop()}}}));

System.register("chunks:///UI/UIBountyItem.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Tools.js","../Config.js","../Core/AdUitls/AdManager.js","../Core/Utils/SendEventManager.js","../Data/GameData.js","../Data/BountyData.js","../DataManager.js"],(function(t,e){var n,i,a,o,s,r,c,l,d,u,f,h,v,b,g,p,y,_,k,C,I,m,B,w,D,L,E,A,T,S,M,z,U,H,j,N,O,R,V,P,F,x,G,J;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_temp:void 0}),{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inherits,a=t.classCallCheck,o=t.possibleConstructorReturn,s=t.getPrototypeOf,r=t.initializerDefineProperty,c=t.assertThisInitialized,l=t.createClass},function(t){d=t.cclegacy,u=t._decorator,f=t.Node,h=t.LabelComponent,v=t.SpriteComponent,b=t.Component},function(t){g=t.Tools},function(t){p=t.CUR_PLATFORM,y=t.PLATFORM_TYPE},function(t){_=t.default},function(t){k=t.default,C=t.EventId},function(t){I=t.default},function(t){m=t.default},function(t){B=t.DataManager}],execute:function(){d._RF.push({},"caabcQzdpJJiKV6tA25nkif","UIBountyItem",void 0),G=u.ccclass,J=u.property,t("UIBountyItem",(w=G("UIBountyItem"),D=J(f),L=J(f),E=J(f),A=J(f),T=J(f),S=J(h),M=J(h),z=J(h),w((j=n((H=function(t){function e(){var t,n;a(this,e);for(var i=arguments.length,l=new Array(i),d=0;d<i;d++)l[d]=arguments[d];return n=o(this,(t=s(e)).call.apply(t,[this].concat(l))),r(n,"rewwards",j,c(n)),r(n,"tomorrowBtn",N,c(n)),r(n,"startBtn",O,c(n)),r(n,"videoBtn",R,c(n)),r(n,"lock",V,c(n)),r(n,"titleLab",P,c(n)),r(n,"lockTipLab",F,c(n)),r(n,"timeLab",x,c(n)),n}return i(e,t),l(e,[{key:"start",value:function(){}},{key:"update",value:function(t){this.timeLab.string=g.timestampToTime(g.getToTomorrowReduceTime())}},{key:"onEnable",value:function(){this.videoBtn.on("click",this.onVideoClick,this),this.startBtn.on("click",this.onStartClick,this)}},{key:"onDisable",value:function(){this.videoBtn.off("click",this.onVideoClick,this),this.startBtn.off("click",this.onStartClick,this)}},{key:"setData",value:function(t){this.bountyCfgData=t,this.refreshUI()}},{key:"refreshUI",value:function(){var t=m.Instance.getChellengeCountById(this.bountyCfgData.id);this.videoBtn.getComponent(v).grayscale=10==t,10==t&&(t=9);for(var e=0;e<this.rewwards.children.length;e++){this.rewwards.children[e].getComponentInChildren(h).string=g.numberToStrKM(this.bountyCfgData.rewardNum[t%5][e])}if(p==y.ANDROID_HAIWAI_ENGLISH||p==y.iOS_HAIWAI_ENGLISH?this.lockTipLab.string="Unlock at Stage "+this.bountyCfgData.unlockLevel:this.lockTipLab.string="关卡"+this.bountyCfgData.unlockLevel+"后解锁",this.lock.active=!this.isLock,this.startBtn.active=t/5<1,this.startBtn.getChildByName("countLab").getComponent(h).string=t%5+1+"/5",this.videoBtn.active=t/5>=1,this.videoBtn.getChildByName("countLab").getComponent(h).string=t%5+1+"/5",this.titleLab.string=this.bountyCfgData.desc,this.timeLab.node.parent.active=this.isLock,m.Instance.getChellengeCountById(this.bountyCfgData.id)>=10?(this.tomorrowBtn.active=!0,this.startBtn.active=!1,this.videoBtn.active=!1):this.tomorrowBtn.active=!1,this.videoBtn.active)switch(k.Instance.sendEvent(C[C.Bounty],{name:"赏金-"+this.bountyCfgData.desc+"-视频挑战-出现"}),this.bountyCfgData.id){case 0:k.Instance.sendEvent(C[C.offerLow_Ad_appear]);break;case 1:k.Instance.sendEvent(C[C.offerMid_Ad_appear]);break;case 2:k.Instance.sendEvent(C[C.offerHigh_Ad_appear])}}},{key:"onVideoClick",value:function(){var t=this;if(m.Instance.getChellengeCountById(this.bountyCfgData.id)>=10)g.ShowTip("Challenge Limit Today");else if(0!=B.instance.getBoatItems().length){switch(this.bountyCfgData.id){case 0:k.Instance.sendEvent(C[C.offerLow_Ad_appear]);break;case 1:k.Instance.sendEvent(C[C.offerMid_Ad_click]);break;case 2:k.Instance.sendEvent(C[C.offerHigh_Ad_click])}var e=function(){switch(t.bountyCfgData.id){case 0:k.Instance.sendEvent(C[C.offerLow_Ad_clickOk]);break;case 1:k.Instance.sendEvent(C[C.offerMid_Ad_clickOk]);break;case 2:k.Instance.sendEvent(C[C.offerHigh_Ad_clickOk])}};k.Instance.sendEvent(C[C.Bounty],{name:"赏金-"+this.bountyCfgData.desc+"-视频挑战-点击"}),_.createVideo((function(){switch(B.instance.VideoCount++,m.Instance.SelectIndex=t.bountyCfgData.id,k.Instance.bountVideoChallenge(t.bountyCfgData.desc),k.Instance.sendEvent(C[C.Bounty],{name:"赏金-"+t.bountyCfgData.desc+"-视频挑战-完成"}),t.bountyCfgData.id){case 0:k.Instance.sendEvent(C[C.offerLow_Ad_complete]);break;case 1:k.Instance.sendEvent(C[C.offerMid_Ad_complete]);break;case 2:k.Instance.sendEvent(C[C.offerHigh_Ad_complete])}e()}),(function(){e()}))}else g.ShowTip("No available units")}},{key:"onStartClick",value:function(){if(0!=B.instance.getBoatItems().length)switch(m.Instance.SelectIndex=this.bountyCfgData.id,k.Instance.sendEvent(C[C.Bounty],{name:"赏金-"+this.bountyCfgData.desc+"-普通挑战"}),this.bountyCfgData.id){case 0:k.Instance.sendEvent(C[C.offerLow_normal]);break;case 1:k.Instance.sendEvent(C[C.offerMid_normal]);break;case 2:k.Instance.sendEvent(C[C.offerHigh_normal])}else g.ShowTip("No available units")}},{key:"isLock",get:function(){return I.Instance.Level>=this.bountyCfgData.unlockLevel}}]),e}(b)).prototype,"rewwards",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(H.prototype,"tomorrowBtn",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(H.prototype,"startBtn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(H.prototype,"videoBtn",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(H.prototype,"lock",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(H.prototype,"titleLab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(H.prototype,"lockTipLab",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(H.prototype,"timeLab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=H))||U)),d._RF.pop()}}}));

System.register("chunks:///UI/UIBounty.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Constants/Constant.js","../Cfg/BountyCfg.js","../Core/View/UIBase.js","../Core/View/UIManager.js","../Core/AdUitls/AdManager.js","./UIBountyItem.js"],(function(t,e){var n,o,i,c,s,a,r,u,l,h,d,p,f,y,v,C,g,I,B,U,m,k,_,b,j,w,D,L,A,z;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inherits,i=t.classCallCheck,c=t.possibleConstructorReturn,s=t.getPrototypeOf,a=t.initializerDefineProperty,r=t.assertThisInitialized,u=t.createClass,l=t.get},function(t){h=t.cclegacy,d=t._decorator,p=t.Node,f=t.LayoutComponent,y=t.MaskComponent},function(t){v=t.ViewType,C=t.LayerType},function(t){g=t.default},function(t){I=t.UIBase},function(t){B=t.default},function(t){U=t.default},function(t){m=t.UIBountyItem}],execute:function(){h._RF.push({},"986fduzUY1LnLRnTfVqELg/","UIBounty",void 0),A=d.ccclass,z=d.property,t("UIBounty",(k=A("UIBounty"),_=z(p),b=z(p),k((D=n((w=function(t){function e(){var t,n;i(this,e);for(var o=arguments.length,u=new Array(o),l=0;l<o;l++)u[l]=arguments[l];return n=c(this,(t=s(e)).call.apply(t,[this].concat(u))),a(n,"content",D,r(n)),a(n,"setBtn",L,r(n)),n}return o(e,t),u(e,[{key:"start",value:function(){var t=this;l(s(e.prototype),"start",this).call(this),U.nativeAdObj?this.content.children[2].active=!0:this.content.children[2].active=!1,this.content.getComponent(f).updateLayout(),this.schedule((function(){U.nativeAdObj?t.content.children[2].active=!0:t.content.children[2].active=!1,t.content.getComponent(f).updateLayout()}),1)}},{key:"onEnable",value:function(){this.setBtn.on("click",this.onSetClick,this),this.refreshUI(),this.content.parent.getComponent(y).inverted=!1}},{key:"onDisable",value:function(){this.setBtn.off("click",this.onSetClick,this)}},{key:"refreshUI",value:function(){var t=g.Instance.getBountyDatas();this.content.children[1].getComponent(m).setData(t[0]),this.content.children[3].getComponent(m).setData(t[1]),this.content.children[4].getComponent(m).setData(t[2])}},{key:"onSetClick",value:function(){B.Instance.showView(v.UISet,C.PANEL)}}]),e}(I)).prototype,"content",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(w.prototype,"setBtn",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=w))||j)),h._RF.pop()}}}));

System.register("chunks:///UI/UIBuildInfo.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Tools.js","../Core/View/UIBase.js","../Core/AdUitls/AdManager.js","../Core/Utils/SendEventManager.js","../Data/SoldierData.js","../Data/GameData.js","../DataManager.js"],(function(e,t){var i,n,r,o,a,l,c,s,u,d,f,p,h,v,b,g,y,I,m,_,B,C,k,w,L,U,D,j,S,z,R,M,T,x,F,A,G,P,E;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inherits,r=e.classCallCheck,o=e.possibleConstructorReturn,a=e.getPrototypeOf,l=e.initializerDefineProperty,c=e.assertThisInitialized,s=e.createClass,u=e.asyncToGenerator},function(e){d=e.cclegacy,f=e._decorator,p=e.Node,h=e.SpriteComponent,v=e.LabelComponent,b=e.SpriteFrame},function(e){g=e.Tools},function(e){y=e.UIBase},function(e){I=e.default},function(e){m=e.default},function(e){_=e.default},function(e){B=e.default},function(e){C=e.DataManager}],execute:function(){d._RF.push({},"ab072UgB4pD57LC/0dr0rpT","UIBuildInfo",void 0),P=f.ccclass,E=f.property,e("UIBuildInfo",(k=P("UIBuildInfo"),w=E(p),L=E(p),U=E(h),D=E(v),j=E(v),S=E(v),k((M=i((R=function(e){function t(){var e,i;r(this,t);for(var n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];return i=o(this,(e=a(t)).call.apply(e,[this].concat(s))),l(i,"attribute",M,c(i)),l(i,"closeBtn",T,c(i)),l(i,"icon",x,c(i)),l(i,"infoLab",F,c(i)),l(i,"titleLab",A,c(i)),l(i,"lvLab",G,c(i)),i}var i;return n(t,e),s(t,[{key:"start",value:function(){}},{key:"onEnable",value:function(){this.showWindow(),this.closeBtn.on("click",this.onCloseClick,this),this.refreshUI(),I.showBanner(!0)}},{key:"onDisable",value:function(){this.closeBtn.off("click",this.onCloseClick,this),I.showBanner(!1)}},{key:"onCloseClick",value:function(){this.node.active=!1}},{key:"refreshUI",value:(i=u(regeneratorRuntime.mark((function e(){var t,i,n,r,o,a,l,c,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.instance.getItemInfoBySid(B.Instance.SelectItemSid),this.id=t.id,e.next=4,g.loadRes("textures/building/architecture_icon"+(2==this.id?1:this.id),b);case 4:for(this.icon.spriteFrame=e.sent,i=_.Instance.getSoldierInfoById(this.id),n=t.lv+1,this.lvLab.string="Lv."+n,this.titleLab.string=i.name,this.infoLab.string=i.info,n>i.hp.length&&(n=i.hp.length),r=[i.hp[n-1],i.attack[n-1],i.attackR,0,0],5==this.id&&(o=C.instance.getGoldMine(),a=C.instance.getBuildUpInfoById(o.id),l=a.type[0][o.lv],c=a.type[1][o.lv],r=[i.hp[n-1],0,0,l,c]),s=0;s<this.attribute.children.length;s++)u=this.attribute.children[s],r[s]<=0?u.active=!1:(u.getChildByName("numLab").getComponent(v).string=r[s]+(s>2?"/h":""),u.active=!0);m.Instance.clickBuildInfo(i.name);case 15:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})}]),t}(y)).prototype,"attribute",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(R.prototype,"closeBtn",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(R.prototype,"icon",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(R.prototype,"infoLab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(R.prototype,"titleLab",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(R.prototype,"lvLab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=R))||z)),d._RF.pop()}}}));

System.register("chunks:///UI/UIBuildUpInfo.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Constants/Constant.js","../Tools.js","../Core/Event/EventCode.js","../Core/Event/EventBus.js","../Core/View/UIBase.js","../Core/View/UIManager.js","../Core/AdUitls/AdManager.js","../Core/Utils/SendEventManager.js","../Data/SoldierData.js","../Data/BuildData.js","../Data/GameData.js","../DataManager.js","../HomeScene.js"],(function(t,e){var i,n,o,r,a,s,l,c,u,d,h,p,f,v,m,g,b,y,I,B,C,_,w,k,U,L,S,j,A,D,R,x,z,N,E,P,T,F,M,G,O,V,H,W,q,K,X,J,Q,Y,Z,$,tt;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_dec10:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_descriptor9:void 0,_temp:void 0}),{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inherits,o=t.classCallCheck,r=t.possibleConstructorReturn,a=t.getPrototypeOf,s=t.initializerDefineProperty,l=t.assertThisInitialized,c=t.createClass,u=t.asyncToGenerator},function(t){d=t.cclegacy,h=t._decorator,p=t.Node,f=t.SpriteComponent,v=t.LabelComponent,m=t.director,g=t.SpriteFrame},function(t){b=t.ViewType,y=t.LayerType},function(t){I=t.Tools},function(t){B=t.EventCode},function(t){C=t.default},function(t){_=t.UIBase},function(t){w=t.default},function(t){k=t.default},function(t){U=t.default},function(t){L=t.default},function(t){S=t.default},function(t){j=t.default},function(t){A=t.DataManager},function(t){D=t.HomeScene}],execute:function(){d._RF.push({},"617faf+8l9IXqPswmxD3ljO","UIBuildUpInfo",void 0),$=h.ccclass,tt=h.property,t("UIBuildUpInfo",(R=$("UIBuildUpInfo"),x=tt(p),z=tt(p),N=tt(p),E=tt(p),P=tt(p),T=tt(f),F=tt(v),M=tt(v),G=tt(v),R((H=i((V=function(t){function e(){var t,i;o(this,e);for(var n=arguments.length,c=new Array(n),u=0;u<n;u++)c[u]=arguments[u];return i=r(this,(t=a(e)).call.apply(t,[this].concat(c))),s(i,"maxLvBtn",H,l(i)),s(i,"attribute",W,l(i)),s(i,"upBtn",q,l(i)),s(i,"otherAdd",K,l(i)),s(i,"closeBtn",X,l(i)),s(i,"icon",J,l(i)),s(i,"infoLab",Q,l(i)),s(i,"titleLab",Y,l(i)),s(i,"lvLab",Z,l(i)),i}var i,d;return n(e,t),c(e,[{key:"start",value:function(){}},{key:"onEnable",value:function(){this.showWindow(),this.closeBtn.on("click",this.onCloseClick,this),this.upBtn.on("click",this.onUpClick,this),this.refreshUI(),k.showBanner(!0)}},{key:"onDisable",value:function(){this.closeBtn.off("click",this.onCloseClick,this),this.upBtn.off("click",this.onUpClick,this),k.showBanner(!1)}},{key:"onCloseClick",value:function(){this.node.active=!1}},{key:"refreshUI",value:(d=u(regeneratorRuntime.mark((function t(){var e,i,n,o,r,a,s,l,c,u,d,h,p,f,m,b,y,B,C,_,w,k;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=A.instance.getItemInfoBySid(j.Instance.SelectItemSid),this.id=e.id,i=L.Instance.getSoldierInfoById(this.id),n=e.lv+1,this.lvLab.string="Lv."+n,this.titleLab.string=i.name,this.infoLab.string=i.info,this.lv=n,t.next=10,I.loadRes("textures/building/architecture_icon"+(2==this.id?1:this.id),g);case 10:for(this.icon.spriteFrame=t.sent,n>i.hp.length&&(n=i.hp.length),o=[i.hp[n-1],i.attack[n-1],i.attackR],r=[i.hp[n],i.attack[n],i.attackR],a=0;a<this.attribute.children.length;a++)s=this.attribute.children[a],o[a]<=0?s.active=!1:((l=s.getChildByName("num")).getChildByName("numLab").getComponent(v).string=""+o[a],c=r[a]-o[a],l.getChildByName("addNumLab").getComponent(v).string=c>0?"+"+c:"",s.active=!0);this.upBtn.active=this.lv<10,this.maxLvBtn.active=10==this.lv,u=A.instance.getBuildUpInfoById(this.id),this.lv<10&&(d=u.upPrice[this.lv-1],this.upBtn.getChildByName("numLab").getComponent(v).string=I.numberToStrKM(d)),3==i.id?(this.infoLab.node.active=!1,h=this.otherAdd.children[0],p=this.otherAdd.children[1],f=u.type[this.lv]-u.type[this.lv-1],this.setItem(h,"Number of warships:",u.type[this.lv-1],f,"icon_zufa"),this.setItem(p,"Number of warships:",0,0,""),this.otherAdd.active=!0):4==i.id?(this.infoLab.node.active=!1,m=this.otherAdd.children[0],b=this.otherAdd.children[1],y=u.type[0][this.lv]-u.type[0][this.lv-1],this.setItem(m,"Airborne rank:",u.type[0][this.lv-1],y,"icon_kongtou"),B=u.type[1][this.lv]-u.type[1][this.lv-1],this.setItem(b,"Synthetic grade:",u.type[1][this.lv-1],B,"icon_jia"),this.otherAdd.active=!0):5==i.id?(this.infoLab.node.active=!1,C=this.otherAdd.children[0],_=this.otherAdd.children[1],w=u.type[0][this.lv]-u.type[0][this.lv-1],this.setItem(C,"Gold output:",u.type[0][this.lv-1],w,"icon_gold"),k=u.type[1][this.lv]-u.type[1][this.lv-1],this.setItem(_,"Gem output:",u.type[1][this.lv-1],k,"icon_diamond"),this.otherAdd.active=!0):(this.infoLab.node.active=!0,this.otherAdd.active=!1);case 20:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"setItem",value:(i=u(regeneratorRuntime.mark((function t(e,i,n,o,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.active=n>0,!(n<=0)){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,I.loadRes("textures/building/"+r,g);case 5:e.getChildByName("icon").getComponent(f).spriteFrame=t.sent,e.getChildByName("title").getComponent(v).string=i,e.getChildByPath("num/numLab").getComponent(v).string=""+n,e.getChildByPath("num/addNumLab").getComponent(v).string=o>0?"+"+o:"";case 9:case"end":return t.stop()}}),t)}))),function(t,e,n,o,r){return i.apply(this,arguments)})},{key:"onUpClick",value:function(){if(!this.upBtn.getComponent(f).grayscale){var t=A.instance.getBuildUpInfoById(this.id),e=t.upPrice[this.lv-1];e>A.instance.wood?A.instance.DailyWoodCount>0?w.Instance.showView(b.UIDailyWood,y.TOP):w.Instance.showView(b.UIWoodEnough,y.TOP):(A.instance.wood-=e,S.Instance.upBuildBySid(j.Instance.SelectItemSid),D.instance.createBuidingEffectBySid(j.Instance.SelectItemSid),m.getScene().emit("UIBUILDING_REFRESH"),this.node.active=!1,C.Instance.pos(B.OnBuildUpComplete),U.Instance.building("升级:"+t.name,this.lv))}}}]),e}(_)).prototype,"maxLvBtn",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(V.prototype,"attribute",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(V.prototype,"upBtn",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=i(V.prototype,"otherAdd",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=i(V.prototype,"closeBtn",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=i(V.prototype,"icon",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(V.prototype,"infoLab",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=i(V.prototype,"titleLab",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=i(V.prototype,"lvLab",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=V))||O)),d._RF.pop()}}}));

System.register("chunks:///UI/UIChallengeLetter.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Core/Constants/Constant.js","../Core/AdUitls/AdManager.js","../Core/Utils/SendEventManager.js","../Data/SoldierData.js","../Data/BattleData.js","../Data/GameData.js","../DataManager.js"],(function(e,t){var n,i,a,o,l,c,s,r,u,d,f,v,p,h,b,C,k,m,_,y,I,g,B,w,L,E,D,U,A,j,z,N,P,R,T,G,V,M,O,S,x,F,H;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,a=e.classCallCheck,o=e.possibleConstructorReturn,l=e.getPrototypeOf,c=e.initializerDefineProperty,s=e.assertThisInitialized,r=e.createClass},function(e){u=e.cclegacy,d=e._decorator,f=e.LabelComponent,v=e.Node,p=e.Component},function(e){h=e.default},function(e){b=e.GameType},function(e){C=e.default},function(e){k=e.default,m=e.EventId},function(e){_=e.default},function(e){y=e.default},function(e){I=e.default},function(e){g=e.DataManager}],execute:function(){u._RF.push({},"ff5d2ZA0GxIO65U+XR2CAmR","UIChallengeLetter",void 0),F=d.ccclass,H=d.property,e("UIChallengeLetter",(B=F("UIChallengeLetter"),w=H(f),L=H(f),E=H(f),D=H(f),U=H(v),A=H(v),j=H(v),z=H(v),B((R=n((P=function(e){function t(){var e,n;a(this,t);for(var i=arguments.length,r=new Array(i),u=0;u<i;u++)r[u]=arguments[u];return n=o(this,(e=l(t)).call.apply(e,[this].concat(r))),c(n,"nameLab",R,s(n)),c(n,"nameLab1",T,s(n)),c(n,"powerLab",G,s(n)),c(n,"powerLab2",V,s(n)),c(n,"closeBtn",M,s(n)),c(n,"noBtn",O,s(n)),c(n,"battleBtn",S,s(n)),c(n,"viewBattleBtn",x,s(n)),n}return i(t,e),r(t,[{key:"onLoad",value:function(){this.ttNoBtn=this.node.getChildByPath("panel/ttNoBtn")}},{key:"start",value:function(){this.ttNoBtn.active=h.isTT}},{key:"onEnable",value:function(){this.closeBtn.on("click",this.onCloseClick,this),this.viewBattleBtn.on("click",this.onViewBattleClick,this),this.noBtn.on("click",this.onNoClick,this),this.battleBtn.on("click",this.onBattleClick,this),I.Instance.IsAddPower=!1;y.Instance.defenseEnemyName.substring(0,5);this.nameLab.string="INTRUDER",this.nameLab1.string="INTRUDER",this.powerLab.string=y.Instance.defenseEnemyPower+"";var e=_.Instance.getLandPower();this.powerLab2.string=e+"",k.Instance.sendEvent("挑战界面")}},{key:"onDisable",value:function(){this.closeBtn.off("click",this.onCloseClick,this),this.noBtn.off("click",this.onNoClick,this),this.viewBattleBtn.off("click",this.onViewBattleClick,this),this.battleBtn.off("click",this.onBattleClick,this)}},{key:"onCloseClick",value:function(){this.node.active=!1,k.Instance.sendEvent("放弃挑战")}},{key:"onNoClick",value:function(){this.node.active=!1,k.Instance.sendEvent("放弃挑战"),k.Instance.sendEvent(m[m.ChallengeLetter],{type:"挑战书逃避"}),k.Instance.sendEvent(m[m.mail_cancel])}},{key:"onBattleClick",value:function(){I.Instance.GameType=b.Defense,this.node.active=!1,k.Instance.sendEvent("挑战"),k.Instance.sendEvent(m[m.ChallengeLetter],{type:"挑战书普通迎战"}),k.Instance.sendEvent(m[m.mail_normal])}},{key:"onViewBattleClick",value:function(){var e=this;k.Instance.sendEvent(m[m.mail_Ad_click]),k.Instance.sendEvent(m[m.ChallengeLetter],{type:"挑战书视频迎战-点击"}),C.createVideo((function(){k.Instance.sendEvent(m[m.ChallengeLetter],{type:"挑战书视频迎战-完成"}),k.Instance.sendEvent(m[m.mail_Ad_complete]),k.Instance.sendEvent(m[m.mail_Ad_clickOk]),g.instance.VideoCount++,I.Instance.GameType=b.Defense,e.node.active=!1,I.Instance.IsAddPower=!0,k.Instance.sendEvent("挑战加成")}),(function(){k.Instance.sendEvent(m[m.mail_Ad_clickOk])}))}}]),t}(p)).prototype,"nameLab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(P.prototype,"nameLab1",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(P.prototype,"powerLab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(P.prototype,"powerLab2",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(P.prototype,"closeBtn",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(P.prototype,"noBtn",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=n(P.prototype,"battleBtn",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(P.prototype,"viewBattleBtn",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=P))||N)),u._RF.pop()}}}));

System.register("chunks:///UI/UICollect.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Tools.js","../Core/View/UIBase.js","../Core/AdUitls/AdManager.js","../Core/Utils/SendEventManager.js","../Data/BuildData.js","../DataManager.js","../UIOPPONative.js"],(function(e,t){var n,i,o,a,l,c,s,r,d,u,v,h,p,f,C,g,b,w,_,y,B,k,m,I,N,U,P,D,E,O,S,L,R,M,j,z,A,V,T,H,G,K;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,o=e.classCallCheck,a=e.possibleConstructorReturn,l=e.getPrototypeOf,c=e.initializerDefineProperty,s=e.assertThisInitialized,r=e.createClass},function(e){d=e.cclegacy,u=e._decorator,v=e.Node,h=e.LabelComponent,p=e.director,f=e.ButtonComponent},function(e){C=e.default},function(e){g=e.Tools},function(e){b=e.UIBase},function(e){w=e.default},function(e){_=e.default,y=e.EventId},function(e){B=e.default},function(e){k=e.DataManager},function(e){m=e.UIOPPONative}],execute:function(){d._RF.push({},"58e93uKM7FDUKcBrwhZB37c","UICollect",void 0),G=u.ccclass,K=u.property,e("UICollect",(I=G("UICollect"),N=K(v),U=K(v),P=K(v),D=K(h),E=K(h),O=K(h),S=K(h),I((M=n((R=function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,r=new Array(i),d=0;d<i;d++)r[d]=arguments[d];return n=a(this,(e=l(t)).call.apply(e,[this].concat(r))),c(n,"closeBtn",M,s(n)),c(n,"collectBtn",j,s(n)),c(n,"viewCollectBtn",z,s(n)),c(n,"goldLab",A,s(n)),c(n,"goodSpeedLab",V,s(n)),c(n,"daimondLab",T,s(n)),c(n,"daimondSpeedLab",H,s(n)),n}return i(t,e),r(t,[{key:"start",value:function(){}},{key:"onEnable",value:function(){this.showWindow(),this.closeBtn.on("click",this.onCloseClick,this),this.viewCollectBtn.on("click",this.onViewCollectClick,this),this.collectBtn.on("click",this.onCollectClick,this),this.refreshUI(),this.showNative(),p.getScene().on("CLOSE_NATIVE_AD",this.showNative,this)}},{key:"showNative",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(C.isOppo()||C.isVivo()){var t=this.node.getChildByName("panel").getChildByName("NativeBtn1").getComponent(f),n=this.node.getChildByName("panel").getChildByName("NativeBtn2").getComponent(f);k.instance.OPPO_VERSION;if(e||!k.instance.isCanShowNative())w.showBanner(!0),this.node.getChildByName("UIOPPONative").active=!1,t.node.active=n.node.active=!1,this.collectBtn.setPosition(-130,-157,0),this.collectBtn.active=!0;else{t.node.active=k.instance.isShowNativeWword_0(),n.node.active=!k.instance.isShowNativeWword_0();var i=t.node.active?t:n;i.node.off("click"),i.node.on("click",this.onBtnClickNativeAd,this),i.node.setPosition(-130,-157,0),this.collectBtn.active=!1;var o=this.node.getChildByName("UIOPPONative").getComponent(m);o.node.active=!0,o.showNativeAD()}}else w.showBanner(!0)}},{key:"onBtnClickNativeAd",value:function(){w.clickNativeAd()}},{key:"onDisable",value:function(){this.closeBtn.off("click",this.onCloseClick,this),this.viewCollectBtn.off("click",this.onViewCollectClick,this),this.collectBtn.off("click",this.onCollectClick,this),w.showBanner(!1)}},{key:"onCloseClick",value:function(){this.node.active=!1}},{key:"onCollectClick",value:function(){var e=B.Instance.getGoldMineProduce();k.instance.gold+=e[0],k.instance.diamond+=e[1],this.node.active=!1,B.Instance.resetColletTime(),_.Instance.sendEvent(y[y.HangUpReward],{type:"普通收集"}),_.Instance.sendEvent(y[y.idleReward_normal])}},{key:"onViewCollectClick",value:function(){var e=this;_.Instance.sendEvent(y[y.idleReward_Double_click]),_.Instance.sendEvent(y[y.HangUpReward],{type:"视频双倍收集-点击"}),w.createVideo((function(){k.instance.VideoCount++;var t=B.Instance.getGoldMineProduce();k.instance.gold+=2*t[0],k.instance.diamond+=2*t[1],e.node.active=!1,B.Instance.resetColletTime(),_.Instance.sendEvent(y[y.idleReward_Double_complete]),_.Instance.sendEvent(y[y.idleReward_Double_clickOk]),_.Instance.sendEvent(y[y.HangUpReward],{type:"视频双倍收集-完成"})}),(function(){_.Instance.sendEvent(y[y.idleReward_Double_clickOk])}))}},{key:"refreshUI",value:function(){var e=B.Instance.getGoldMineProduce();this.goldLab.string=g.numberToStrKM(e[0]),this.daimondLab.string=g.numberToStrKM(e[1]);var t=k.instance.getGoldMine(),n=k.instance.getBuildUpInfoById(t.id),i=n.type[0][t.lv],o=n.type[1][t.lv];this.goodSpeedLab.string=i+"/h",this.daimondSpeedLab.string=o+"/h",_.Instance.sendEvent(y[y.HangUpReward],{type:"视频双倍收集-出现"}),_.Instance.sendEvent(y[y.idleReward_Double_appear])}}]),t}(b)).prototype,"closeBtn",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=n(R.prototype,"collectBtn",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(R.prototype,"viewCollectBtn",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(R.prototype,"goldLab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(R.prototype,"goodSpeedLab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(R.prototype,"daimondLab",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=n(R.prototype,"daimondSpeedLab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=R))||L)),d._RF.pop()}}}));

System.register("chunks:///UI/UICongratulations.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Core/Constants/Constant.js","../Core/Utils/Dictionary.js","../Core/Utils/AudioManager.js","../Tools.js","../Core/Utils/List.js","../Core/View/UIBase.js","../Core/AdUitls/AdManager.js","../Data/SoldierData.js","../Data/GuideData.js","../Data/GameData.js","../DataManager.js","../UIOPPONative.js"],(function(e,t){var n,i,o,a,r,s,c,l,u,d,h,v,p,f,C,g,m,y,B,N,_,I,w,k,P,S,b,U,A,D,O,j,W,F,x,R,T,z,L,M,q,E;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,o=e.classCallCheck,a=e.possibleConstructorReturn,r=e.getPrototypeOf,s=e.initializerDefineProperty,c=e.assertThisInitialized,l=e.createClass,u=e.asyncToGenerator},function(e){d=e.cclegacy,h=e._decorator,v=e.Node,p=e.director,f=e.WidgetComponent,C=e.ButtonComponent,g=e.SpriteComponent,m=e.LabelComponent,y=e.SpriteFrame},function(e){B=e.default},function(e){N=e.AudioName},function(e){_=e.default},function(e){I=e.AudioManager},function(e){w=e.Tools},function(e){k=e.default},function(e){P=e.UIBase},function(e){S=e.default},function(e){b=e.default},function(e){U=e.default},function(e){A=e.default},function(e){D=e.DataManager},function(e){O=e.UIOPPONative}],execute:function(){d._RF.push({},"4a08csF6WxPp5sXPaIcsF9n","UICongratulations",void 0),q=h.ccclass,E=h.property,e("UICongratulations",(j=q("UICongratulations"),W=E(v),F=E(v),x=E(v),j((z=n((T=function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return n=a(this,(e=r(t)).call.apply(e,[this].concat(l))),s(n,"sureBtn",z,c(n)),s(n,"sureBtnWord",L,c(n)),s(n,"cards",M,c(n)),n}var n;return i(t,e),l(t,[{key:"start",value:function(){}},{key:"onEnable",value:function(){this.showWindow(),this.sureBtn.on("click",this.onSureClick,this),this.sureBtnWord.on("click",this.onSureClick,this),this.refreshUI(),I.Instance.playOneShot(N.GetCard),this.showNative(),p.getScene().on("CLOSE_NATIVE_AD",this.showNative,this)}},{key:"showNative",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(B.isOppo()||B.isVivo()){this.sureBtn.active=!1,D.instance.oppoAdConfig.normal_btn_delay_show_second>0?setTimeout((function(){e.sureBtnWord.active=!0}),1e3*D.instance.oppoAdConfig.normal_btn_delay_show_second):this.sureBtnWord.active=!0,this.sureBtnWord.width=100,this.sureBtnWord.height=50,this.node.getChildByName("panel").getComponent(f).top=0;var n=this.node.getChildByName("panel").getChildByName("NativeBtn1").getComponent(C),i=this.node.getChildByName("panel").getChildByName("NativeBtn2").getComponent(C);D.instance.OPPO_VERSION;if(t||!D.instance.isCanShowNative())S.showBanner(!0),this.node.getChildByName("UIOPPONative").active=!1,n.node.active=i.node.active=!1,this.sureBtnWord.setPosition(0,-380,0);else{n.node.active=D.instance.isShowNativeWword_0(),i.node.active=!D.instance.isShowNativeWword_0();var o=n.node.active?n:i;o.node.off("click"),o.node.on("click",this.onBtnClickNativeAd,this),o.node.setPosition(0,-303,0),this.sureBtnWord.setPosition(0,-cc.winSize.height/2+170,0);var a=this.node.getChildByName("UIOPPONative").getComponent(O);a.node.active=!0,a.showNativeAD()}}else S.showBanner(!0)}},{key:"onBtnClickNativeAd",value:function(){S.clickNativeAd()}},{key:"onDisable",value:function(){this.sureBtn.off("click",this.onSureClick,this),A.Instance.congratulationsId=new k,S.showBanner(!1)}},{key:"onSureClick",value:function(){(this.node.active=!1,U.Instance.showClickArmys(),B.isOppo())&&(100*Math.random()<=D.instance.oppoAdConfig.normal_btn_show_native&&S.clickNativeAd())}},{key:"refreshUI",value:function(){for(var e=A.Instance.congratulationsId,t=new _,n=0;n<e.Count;n++){var i=e.get(n);t.containKey(i)?t.set(i,t.get(i)+1):t.add(i,1)}for(var o=0;o<this.cards.children.length;o++){var a=this.cards.children[o];if(o<t.Count){var r=t.Keys[o];this.refreshCard(a,r,t.get(r))}a.active=o<t.Count}var s=e.Count>=3?.8:1;this.cards.setScale(s,s,s)}},{key:"refreshCard",value:(n=u(regeneratorRuntime.mark((function e(t,n,i){var o,a,r,s,c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.getChildByName("quality").getComponent(g),a=t.getChildByName("icon").getComponent(g),r=t.getChildByName("cardLight").getComponent(g),s=t.getChildByName("nameLab").getComponent(m),c=t.getChildByName("numLab").getComponent(m),l=D.instance.getItemConstInfoByID(n),u=b.Instance.getSoldierInfoById(n),e.next=9,w.loadRes("textures/recruit/card_"+l.quality,y);case 9:return t.getComponent(g).spriteFrame=e.sent,e.next=12,w.loadRes("textures/recruit/l_"+l.quality,y);case 12:return r.spriteFrame=e.sent,e.next=15,w.loadRes(b.Instance.getSoldierIconPathById(n),y);case 15:a.spriteFrame=e.sent,s.string=u.name,c.string="+"+i,t.getChildByName("heroTip").active=n>200,w.loadSpriteFrame("textures/recruit/quality_"+l.quality,(function(e){o.spriteFrame=e}));case 20:case"end":return e.stop()}}),e)}))),function(e,t,i){return n.apply(this,arguments)})}]),t}(P)).prototype,"sureBtn",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(T.prototype,"sureBtnWord",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(T.prototype,"cards",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=T))||R)),d._RF.pop()}}}));

System.register("chunks:///UI/UICrazyBox.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Core/Constants/Constant.js","../Tools.js","../Core/View/UIManager.js","../Core/AdUitls/AdManager.js","../Core/Utils/SendEventManager.js","../DataManager.js"],(function(t,e){var o,n,s,i,u,h,r,c,a,l,d,f,C,m,g,p,y,v,w,B,I,N,T,k;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){o=t.inherits,n=t.classCallCheck,s=t.possibleConstructorReturn,i=t.getPrototypeOf,u=t.createClass},function(t){h=t.cclegacy,r=t._decorator,c=t.SpriteComponent,a=t.Prefab,l=t.view,d=t.Component},function(t){f=t.default},function(t){C=t.ViewType,m=t.LayerType,g=t.RewardType},function(t){p=t.Tools},function(t){y=t.default},function(t){v=t.default},function(t){w=t.default,B=t.EventId},function(t){I=t.DataManager}],execute:function(){h._RF.push({},"7b6fcWCUchEmKuYxTcxb9OR","UICrazyBox",void 0),k=r.ccclass,r.property,t("UICrazyBox",(N=k("UICrazyBox"),N(T=function(t){function e(){var t,o;n(this,e);for(var u=arguments.length,h=new Array(u),r=0;r<u;r++)h[r]=arguments[r];return(o=s(this,(t=i(e)).call.apply(t,[this].concat(h)))).isVideo=!0,o.isFirstTouch=!1,o.hengFuCustomAd=null,o.firstTouch=!1,o.proNum=0,o.isTouch=!1,o}return o(e,t),u(e,[{key:"onLoad",value:function(){this.progress=this.node.getChildByName("progress").getComponent(c),this.openBtn=this.node.getChildByName("openBtn"),this.closeBtn=this.node.getChildByName("closeBtn"),this.firstTouch=0==parseInt(localStorage.getItem("WXBOXFIRSTTOUCH")||"0")}},{key:"start",value:function(){this.ProNum=0,this.isTouch=!1,this.isFirstTouch=!0,this.isVideo=Math.random()<=I.instance.WXConfig.rate_kd_box_video,console.log("this.isVideo: "+this.isVideo),f.isWx()&&(this.hengFuCustomAd=wx.createCustomAd({adUnitId:v.wxCustomAdId2,style:{left:0,top:this.getTop(),fixed:!0}}),this.hengFuCustomAd.onError((function(t){return console.log(t)})),this.showHengFuCustomAd(!0)),p.loadRes("ui/UIGetGoods",a)}},{key:"showHengFuCustomAd",value:function(t){null!=this.hengFuCustomAd&&(f.isWx()&&(t?(console.log(this.hengFuCustomAd),this.hengFuCustomAd.show().then((function(){return console.log("原生模板广告显示")})).catch((function(t){return console.log(t)}))):this.hengFuCustomAd.hide().catch((function(t){return console.log(t)}))),f.isQQ&&(t?(console.log(this.hengFuCustomAd),this.hengFuCustomAd.show()):this.hengFuCustomAd.hide()))}},{key:"getTop",value:function(){return(l.getVisibleSize().height-660)*wx.getSystemInfoSync().screenHeight/l.getVisibleSize().height}},{key:"reward",value:function(){var t=this;this.scheduleOnce((function(){var e=Math.random();if(e<=.6)y.Instance.showView(C.UIGetGoods,m.PANEL,{type:g.Wood,num:500});else if(.6<e&&e<=.8)y.Instance.showView(C.UIGetGoods,m.PANEL,{type:g.MASONRY,num:25});else{var o=Math.ceil(.5*I.instance.getZhaomuMoneyCount());y.Instance.showView(C.UIGetGoods,m.PANEL,{type:g.COIN,num:o})}t.node.active=!1}),1)}},{key:"update",value:function(t){this.ProNum<=0||this.ProNum>=1||(this.ProNum-=.3*t)}},{key:"onEnable",value:function(){var t=this;v.showBanner(!0),this.openBtn.on("click",this.onOpenClick,this),this.closeBtn.on("click",this.onCloseClick,this),this.closeBtn.active=!1,this.scheduleOnce((function(){t.closeBtn.active=!0}),5),this.showHengFuCustomAd(!0),w.Instance.sendEvent(B[B.CrazyBox],{type:"连点宝箱-出现"})}},{key:"onDisable",value:function(){this.openBtn.off("click",this.onOpenClick,this),this.closeBtn.off("click",this.onCloseClick,this),v.showBanner(!1),y.Instance.showView(C.UIVictory),this.showHengFuCustomAd(!1),I.instance.wxVideoTouchTime=0}},{key:"onOpenClick",value:function(){this.ProNum>=1||(this.ProNum+=.15)}},{key:"onCloseClick",value:function(){this.node.active=!1}},{key:"ProNum",get:function(){return this.proNum},set:function(t){var e=this;this.proNum=t,this.proNum<0&&(this.proNum=0),this.proNum>1&&(this.proNum=1),this.progress.fillRange=this.proNum,this.proNum>.7&&(this.isTouch||(this.isTouch=!0,this.firstTouch?(this.ProNum=1,localStorage.setItem("WXBOXFIRSTTOUCH","1"),this.firstTouch=!1,this.reward()):this.isVideo?(this.ProNum=1,I.instance.wxVideoTouchTime=0,w.Instance.sendEvent(B[B.CrazyBox],{type:"连点宝箱-点击"}),v.createVideo((function(){e.reward(),w.Instance.sendEvent(B[B.CrazyBox],{type:"视频播放完成"})}),(function(){e.reward(),w.Instance.sendEvent(B[B.CrazyBox],{type:"视频播未放完成"})}))):(this.ProNum=1,v.resetBannerPosByXY(0,l.getVisibleSize().height-this.openBtn.worldPosition.y),this.scheduleOnce((function(){v.resetBannerPos()}),1),w.Instance.sendEvent(B[B.CrazyBox],{type:"触发banner"}),this.reward())))}}]),e}(d))||T)),h._RF.pop()}}}));

System.register("chunks:///UI/UIDailyDaimond.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Core/Constants/Constant.js","../Tools.js","../Core/View/UIBase.js","../Core/AdUitls/AdManager.js","../Core/Utils/SendEventManager.js","../DataManager.js","../UIOPPONative.js"],(function(n,e){var i,t,o,a,r,s,c,l,d,u,h,v,p,m,f,C,y,b,g,D,B,_,w,k,N,I,L,A,U,O,E,T,P,j,S,z,G,M,R,V,F,Q;return n({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_temp:void 0}),{setters:[function(n){i=n.applyDecoratedDescriptor,t=n.inherits,o=n.classCallCheck,a=n.possibleConstructorReturn,r=n.getPrototypeOf,s=n.initializerDefineProperty,c=n.assertThisInitialized,l=n.createClass},function(n){d=n.cclegacy,u=n._decorator,h=n.Node,v=n.LabelComponent,p=n.director,m=n.ButtonComponent},function(n){f=n.default},function(n){C=n.default},function(n){y=n.Tools},function(n){b=n.UIBase},function(n){g=n.default},function(n){D=n.default,B=n.EventId},function(n){_=n.DataManager},function(n){w=n.UIOPPONative}],execute:function(){d._RF.push({},"4047e4MaUFEAbF23+2AK8ve","UIDailyDaimond",void 0),F=u.ccclass,Q=u.property,n("UIDailyDaimond",(k=F("UIDailyDaimond"),N=Q(h),I=Q(h),L=Q(v),A=Q(v),U=Q(v),O=Q(v),E=Q(v),k((j=i((P=function(n){function e(){var n,i;o(this,e);for(var t=arguments.length,l=new Array(t),d=0;d<t;d++)l[d]=arguments[d];return i=a(this,(n=r(e)).call.apply(n,[this].concat(l))),s(i,"rewardBtn",j,c(i)),s(i,"closeBtn",S,c(i)),s(i,"numLab",z,c(i)),s(i,"addNumLab",G,c(i)),s(i,"countLab",M,c(i)),s(i,"receiveCountLab",R,c(i)),s(i,"receiveCountLab1",V,c(i)),i.num=C.DailyDaimond,i.outArr=C.DailyDaimondOutArr,i}return t(e,n),l(e,[{key:"onLoad",value:function(){this.oppoBtn3=this.node.getChildByName("panel").getChildByName("NativeBtn3"),this.oppoBtn3.active=!1}},{key:"start",value:function(){}},{key:"onEnable",value:function(){this.showWindow(),this.closeBtn.on("click",this.onCloseClick,this),this.rewardBtn.on("click",this.onRewardClick,this),this.refreshUI(),this.showNative(),p.getScene().on("CLOSE_NATIVE_AD",this.showNative,this),_.instance.showInterstitialAd(),D.Instance.sendEvent(B[B.DaliyDaimind],{name:"每日钻石视频-出现"}),D.Instance.sendEvent(B[B.dailyGem_appear])}},{key:"showNative",value:function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(f.isOppo()||f.isVivo()){var e=this.node.getChildByName("panel").getChildByName("NativeBtn1").getComponent(m),i=this.node.getChildByName("panel").getChildByName("NativeBtn2").getComponent(m);_.instance.OPPO_VERSION;if(n||!_.instance.isCanShowNative())g.showBanner(!0),this.oppoBtn3.active=!1,this.node.getChildByName("UIOPPONative").active=!1,e.node.active=i.node.active=!1,this.rewardBtn.setPosition(0,-156,0);else{var t=this.node.getChildByName("UIOPPONative").getComponent(w);t.node.active=!0,t.showNativeAD(),this.oppoBtn3.active=!0,this.oppoBtn3.off("click"),this.oppoBtn3.on("click",this.onBtnClickNativeAd,this),this.oppoBtn3.getComponentInChildren(v).string=_.instance.isShowNativeWword_0()?"查看广告":"立即查看"}}else g.showBanner(!0)}},{key:"onBtnClickNativeAd",value:function(){g.clickNativeAd()}},{key:"onDisable",value:function(){this.closeBtn.off("click",this.onCloseClick,this),this.rewardBtn.off("click",this.onRewardClick,this),g.showBanner(!1)}},{key:"refreshUI",value:function(){this.numLab.string="+"+y.numberToStrKM(this.num),this.countLab.string=_.instance.DailyDaimondCount+"";var n=C.DailyGoldCount-_.instance.DailyDaimondCount+1;this.receiveCountLab.string=n+"",this.receiveCountLab1.string=y.numberToEn(n)+"",this.addNumLab.string=y.numberToStrKM(this.outArr[n-1])}},{key:"onCloseClick",value:function(){this.node.active=!1,_.instance.showWxTouch(_.instance.WXConfig.rate_daimond),_.instance.showQQTouch(_.instance.QQConfig.rate_daimond),_.instance.showTTTouch(_.instance.TTConfig.rate_daimond),_.instance.showAndroidTouch(_.instance.AndroidConfig.rate_daimond)}},{key:"onRewardClick",value:function(){var n=this;0!=_.instance.DailyDaimondCount?(D.Instance.sendEvent(B[B.dailyGem_click]),D.Instance.sendEvent(B[B.DaliyDaimind],{name:"每日钻石视频-点击"}),g.createVideo((function(){_.instance.VideoCount++;var e=C.DailyGoldCount-_.instance.DailyDaimondCount+1;_.instance.diamond+=n.num+n.outArr[e-1],_.instance.DailyDaimondCount--,n.onCloseClick(),D.Instance.sendEvent(B[B.dailyGem_complete]),D.Instance.sendEvent(B[B.dailyGem_clickOk]),D.Instance.sendEvent(B[B.DaliyDaimind],{name:"每日钻石视频-完成"})}),(function(){D.Instance.sendEvent(B[B.dailyGem_clickOk])}))):y.ShowTip("Limit for today")}}]),e}(b)).prototype,"rewardBtn",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(P.prototype,"closeBtn",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(P.prototype,"numLab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(P.prototype,"addNumLab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(P.prototype,"countLab",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(P.prototype,"receiveCountLab",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(P.prototype,"receiveCountLab1",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=P))||T)),d._RF.pop()}}}));

System.register("chunks:///UI/UIDailyGold.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Core/Constants/Constant.js","../Tools.js","../Core/View/UIBase.js","../Core/AdUitls/AdManager.js","../Core/Utils/SendEventManager.js","../DataManager.js","../UIOPPONative.js"],(function(e,n){var t,i,o,a,l,r,s,c,d,u,h,v,p,C,f,y,g,b,m,B,_,w,N,k,I,D,L,G,O,T,U,A,E,P,S,j,z,R,V,M,Q,W;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_temp:void 0}),{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inherits,o=e.classCallCheck,a=e.possibleConstructorReturn,l=e.getPrototypeOf,r=e.initializerDefineProperty,s=e.assertThisInitialized,c=e.createClass},function(e){d=e.cclegacy,u=e._decorator,h=e.Node,v=e.LabelComponent,p=e.director,C=e.ButtonComponent},function(e){f=e.default},function(e){y=e.default},function(e){g=e.Tools},function(e){b=e.UIBase},function(e){m=e.default},function(e){B=e.default,_=e.EventId},function(e){w=e.DataManager},function(e){N=e.UIOPPONative}],execute:function(){d._RF.push({},"26913X9sblCVJ4gyGqT3ltS","UIDailyGold",void 0),Q=u.ccclass,W=u.property,e("UIDailyGold",(k=Q("UIDailyGold"),I=W(h),D=W(h),L=W(v),G=W(v),O=W(v),T=W(v),U=W(v),k((P=t((E=function(e){function n(){var e,t;o(this,n);for(var i=arguments.length,c=new Array(i),d=0;d<i;d++)c[d]=arguments[d];return t=a(this,(e=l(n)).call.apply(e,[this].concat(c))),r(t,"rewardBtn",P,s(t)),r(t,"closeBtn",S,s(t)),r(t,"numLab",j,s(t)),r(t,"addNumLab",z,s(t)),r(t,"countLab",R,s(t)),r(t,"receiveCountLab",V,s(t)),r(t,"receiveCountLab1",M,s(t)),t.num=y.DailyGold,t.outArr=y.DailyGoldOutArr,t}return i(n,e),c(n,[{key:"onLoad",value:function(){this.oppoBtn3=this.node.getChildByName("panel").getChildByName("NativeBtn3"),this.oppoBtn3.active=!1}},{key:"onEnable",value:function(){this.showWindow(),this.closeBtn.on("click",this.onCloseClick,this),this.rewardBtn.on("click",this.onRewardClick,this),this.refreshUI(),this.showNative(),p.getScene().on("CLOSE_NATIVE_AD",this.showNative,this),w.instance.showInterstitialAd(),B.Instance.sendEvent(_[_.DaliyGold],{name:"每日金币视频-出现"}),B.Instance.sendEvent(_[_.dailyCoin_appear])}},{key:"showNative",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(f.isOppo()||f.isVivo()){var n=this.node.getChildByName("panel").getChildByName("NativeBtn1").getComponent(C),t=this.node.getChildByName("panel").getChildByName("NativeBtn2").getComponent(C);this.node.getChildByName("panel").getChildByName("NativeBtn3").getComponent(C),w.instance.OPPO_VERSION;if(e||!w.instance.isCanShowNative())m.showBanner(!0),this.oppoBtn3.active=!1,this.node.getChildByName("UIOPPONative").active=!1,n.node.active=t.node.active=!1,this.rewardBtn.setPosition(0,-156,0);else{var i=this.node.getChildByName("UIOPPONative").getComponent(N);i.node.active=!0,i.showNativeAD(),this.oppoBtn3.active=!0,this.oppoBtn3.off("click"),this.oppoBtn3.on("click",this.onBtnClickNativeAd,this),this.oppoBtn3.getComponentInChildren(v).string=w.instance.isShowNativeWword_0()?"查看广告":"立即查看"}}else m.showBanner(!0)}},{key:"onBtnClickNativeAd",value:function(){m.clickNativeAd()}},{key:"onDisable",value:function(){this.closeBtn.off("click",this.onCloseClick,this),this.rewardBtn.off("click",this.onRewardClick,this),m.showBanner(!1)}},{key:"refreshUI",value:function(){this.numLab.string="+"+g.numberToStrKM(this.num),this.countLab.string=w.instance.DailyGoldCount+"";var e=y.DailyGoldCount-w.instance.DailyGoldCount+1;this.receiveCountLab.string=e+"",this.receiveCountLab1.string=g.numberToEn(e)+"",this.addNumLab.string=g.numberToStrKM(this.outArr[e-1])}},{key:"onCloseClick",value:function(){this.node.active=!1,w.instance.showWxTouch(w.instance.WXConfig.rate_gold),w.instance.showQQTouch(w.instance.QQConfig.rate_gold),w.instance.showTTTouch(w.instance.TTConfig.rate_gold),w.instance.showAndroidTouch(w.instance.AndroidConfig.rate_gold)}},{key:"onRewardClick",value:function(){var e=this;0!=w.instance.DailyGoldCount?(B.Instance.sendEvent(_[_.DaliyGold],{name:"每日金币视频-点击"}),B.Instance.sendEvent(_[_.dailyCoin_click]),m.createVideo((function(){w.instance.VideoCount++;var n=y.DailyGoldCount-w.instance.DailyGoldCount+1;w.instance.gold+=e.num+e.outArr[n-1],w.instance.DailyGoldCount--,e.onCloseClick(),B.Instance.sendEvent(_[_.dailyCoin_complete]),B.Instance.sendEvent(_[_.dailyCoin_clickOk]),B.Instance.sendEvent(_[_.DaliyGold],{name:"每日金币视频-完成"})}),(function(){B.Instance.sendEvent(_[_.dailyCoin_clickOk])}))):g.ShowTip("Limit for today")}}]),n}(b)).prototype,"rewardBtn",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(E.prototype,"closeBtn",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(E.prototype,"numLab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(E.prototype,"addNumLab",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(E.prototype,"countLab",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(E.prototype,"receiveCountLab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(E.prototype,"receiveCountLab1",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=E))||A)),d._RF.pop()}}}));

System.register("chunks:///UI/UIDailyWood.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Core/Constants/Constant.js","../Tools.js","../Core/View/UIBase.js","../Core/AdUitls/AdManager.js","../Core/Utils/SendEventManager.js","../DataManager.js","../UIOPPONative.js"],(function(e,n){var t,i,o,a,r,s,c,l,d,u,h,v,p,f,C,y,b,g,m,w,B,_,k,N,I,D,W,L,A,O,U,T,E,P,S,j,z,R,M,V,Q,x;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_temp:void 0}),{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inherits,o=e.classCallCheck,a=e.possibleConstructorReturn,r=e.getPrototypeOf,s=e.initializerDefineProperty,c=e.assertThisInitialized,l=e.createClass},function(e){d=e.cclegacy,u=e._decorator,h=e.Node,v=e.LabelComponent,p=e.director,f=e.ButtonComponent},function(e){C=e.default},function(e){y=e.default},function(e){b=e.Tools},function(e){g=e.UIBase},function(e){m=e.default},function(e){w=e.default,B=e.EventId},function(e){_=e.DataManager},function(e){k=e.UIOPPONative}],execute:function(){d._RF.push({},"43497yeALtJboANgSHnaeA+","UIDailyWood",void 0),Q=u.ccclass,x=u.property,e("UIDailyWood",(N=Q("UIDailyWood"),I=x(h),D=x(h),W=x(v),L=x(v),A=x(v),O=x(v),U=x(v),N((P=t((E=function(e){function n(){var e,t;o(this,n);for(var i=arguments.length,l=new Array(i),d=0;d<i;d++)l[d]=arguments[d];return t=a(this,(e=r(n)).call.apply(e,[this].concat(l))),s(t,"rewardBtn",P,c(t)),s(t,"closeBtn",S,c(t)),s(t,"numLab",j,c(t)),s(t,"addNumLab",z,c(t)),s(t,"countLab",R,c(t)),s(t,"receiveCountLab",M,c(t)),s(t,"receiveCountLab1",V,c(t)),t.num=y.DailyWood,t.outArr=y.DailyWoodOutArr,t}return i(n,e),l(n,[{key:"onLoad",value:function(){this.oppoBtn3=this.node.getChildByName("panel").getChildByName("NativeBtn3"),this.oppoBtn3.active=!1}},{key:"start",value:function(){}},{key:"onEnable",value:function(){this.showWindow(),this.closeBtn.on("click",this.onCloseClick,this),this.rewardBtn.on("click",this.onRewardClick,this),this.refreshUI(),this.showNative(),p.getScene().on("CLOSE_NATIVE_AD",this.showNative,this),_.instance.showInterstitialAd(),w.Instance.sendEvent(B[B.DaliyWood],{name:"每日木材视频-出现"}),w.Instance.sendEvent(B[B.dailyWood_appear])}},{key:"showNative",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(C.isOppo()||C.isVivo()){var n=this.node.getChildByName("panel").getChildByName("NativeBtn1").getComponent(f),t=this.node.getChildByName("panel").getChildByName("NativeBtn2").getComponent(f);_.instance.OPPO_VERSION;if(e||!_.instance.isCanShowNative())m.showBanner(!0),this.oppoBtn3.active=!1,this.node.getChildByName("UIOPPONative").active=!1,n.node.active=t.node.active=!1,this.rewardBtn.setPosition(0,-156,0);else{var i=this.node.getChildByName("UIOPPONative").getComponent(k);i.node.active=!0,i.showNativeAD(),this.oppoBtn3.active=!0,this.oppoBtn3.off("click"),this.oppoBtn3.on("click",this.onBtnClickNativeAd,this),this.oppoBtn3.getComponentInChildren(v).string=_.instance.isShowNativeWword_0()?"查看广告":"立即查看"}}else m.showBanner(!0)}},{key:"onBtnClickNativeAd",value:function(){m.clickNativeAd()}},{key:"onDisable",value:function(){this.closeBtn.off("click",this.onCloseClick,this),this.rewardBtn.off("click",this.onRewardClick,this),m.showBanner(!1)}},{key:"refreshUI",value:function(){this.numLab.string="+"+b.numberToStrKM(this.num),this.countLab.string=_.instance.DailyWoodCount+"";var e=y.DailyGoldCount-_.instance.DailyWoodCount+1;this.receiveCountLab.string=e+"",this.receiveCountLab1.string=b.numberToEn(e)+"",this.addNumLab.string=b.numberToStrKM(this.outArr[e-1])}},{key:"onCloseClick",value:function(){this.node.active=!1,_.instance.showWxTouch(_.instance.WXConfig.rate_wood),_.instance.showQQTouch(_.instance.QQConfig.rate_wood),_.instance.showTTTouch(_.instance.TTConfig.rate_wood),_.instance.showAndroidTouch(_.instance.AndroidConfig.rate_wood)}},{key:"onRewardClick",value:function(){var e=this;0!=_.instance.DailyWoodCount?(w.Instance.sendEvent(B[B.dailyWood_click]),w.Instance.sendEvent(B[B.DaliyWood],{name:"每日木材视频-点击"}),m.createVideo((function(){_.instance.VideoCount++;var n=y.DailyGoldCount-_.instance.DailyWoodCount+1;_.instance.wood+=e.num+e.outArr[n-1],_.instance.DailyWoodCount--,e.onCloseClick(),w.Instance.sendEvent(B[B.dailyWood_complete]),w.Instance.sendEvent(B[B.dailyWood_clickOk]),w.Instance.sendEvent(B[B.DaliyWood],{name:"每日木材视频-完成"})}),(function(){w.Instance.sendEvent(B[B.dailyWood_clickOk])}))):b.ShowTip("Limit for today")}}]),n}(g)).prototype,"rewardBtn",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(E.prototype,"closeBtn",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(E.prototype,"numLab",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(E.prototype,"addNumLab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(E.prototype,"countLab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(E.prototype,"receiveCountLab",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(E.prototype,"receiveCountLab1",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=E))||T)),d._RF.pop()}}}));

System.register("chunks:///UI/UIGetGoods.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Constants/Constant.js","../Tools.js","../Core/View/UIBase.js","../DataManager.js"],(function(e,o){var t,i,n,a,r,s,c,l,u,d,h,p,v,b,f,m,y,g,w,_,C,k,j,I,B,G,z,O,T,U,D,N;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_temp:void 0}),{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inherits,n=e.classCallCheck,a=e.possibleConstructorReturn,r=e.getPrototypeOf,s=e.initializerDefineProperty,c=e.assertThisInitialized,l=e.createClass,u=e.get},function(e){d=e.cclegacy,h=e._decorator,p=e.Node,v=e.LabelComponent},function(e){b=e.RewardType},function(e){f=e.Tools},function(e){m=e.UIBase},function(e){y=e.DataManager}],execute:function(){d._RF.push({},"eb18cB22qVBY6r18Sfueq0O","UIGetGoods",void 0),D=h.ccclass,N=h.property,e("UIGetGoods",(g=D("UIGetGoods"),w=N(p),_=N(p),C=N(p),k=N(p),j=N(v),g((G=t((B=function(e){function o(){var e,t;n(this,o);for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return t=a(this,(e=r(o)).call.apply(e,[this].concat(l))),s(t,"closeBtn",G,c(t)),s(t,"gold",z,c(t)),s(t,"wood",O,c(t)),s(t,"daimond",T,c(t)),s(t,"numLab",U,c(t)),t.obj=null,t}return i(o,e),l(o,[{key:"onLoad",value:function(){}},{key:"start",value:function(){}},{key:"onEnable",value:function(){this.showWindow(),this.closeBtn.on("click",this.onCloseClick,this)}},{key:"onDisable",value:function(){y.instance.wxVideoTouchTime=0}},{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:b.COIN,num:0};switch(u(r(o.prototype),"show",this).call(this,e),this.obj=e,this.wood.active=!1,this.gold.active=!1,this.daimond.active=!1,e.type){case b.COIN:this.gold.active=!0;break;case b.Wood:this.wood.active=!0;break;case b.MASONRY:this.daimond.active=!0}this.numLab.string="+"+f.numberToStrKM(e.num)}},{key:"onCloseClick",value:function(){switch(this.obj.type){case b.COIN:y.instance.gold+=this.obj.num,this.gold.active=!0;break;case b.Wood:y.instance.wood+=this.obj.num,this.wood.active=!0;break;case b.MASONRY:y.instance.diamond+=this.obj.num,this.daimond.active=!0}this.node.active=!1}}]),o}(m)).prototype,"closeBtn",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(B.prototype,"gold",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(B.prototype,"wood",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(B.prototype,"daimond",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(B.prototype,"numLab",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=B))||I)),d._RF.pop()}}}));

System.register("chunks:///UI/UIGoldEnough.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Constants/Constant.js","../Core/Event/EventCode.js","../Core/Event/EventBus.js","../Core/View/UIBase.js","../Core/View/UIManager.js","../Core/AdUitls/AdManager.js"],(function(e,n){var t,o,i,c,s,r,a,l,u,d,h,f,v,p,I,C,g,y,k,w,U,_,B,E,b,j;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inherits,i=e.classCallCheck,c=e.possibleConstructorReturn,s=e.getPrototypeOf,r=e.initializerDefineProperty,a=e.assertThisInitialized,l=e.createClass},function(e){u=e.cclegacy,d=e._decorator,h=e.Node},function(e){f=e.ViewType},function(e){v=e.EventCode},function(e){p=e.default},function(e){I=e.UIBase},function(e){C=e.default},function(e){g=e.default}],execute:function(){u._RF.push({},"940a72x2s5P45eYIuFhTUag","UIGoldEnough",void 0),b=d.ccclass,j=d.property,e("UIGoldEnough",(y=b("UIGoldEnough"),k=j(h),w=j(h),y((B=t((_=function(e){function n(){var e,t;i(this,n);for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];return t=c(this,(e=s(n)).call.apply(e,[this].concat(l))),r(t,"closeBtn",B,a(t)),r(t,"goBtn",E,a(t)),t}return o(n,e),l(n,[{key:"start",value:function(){}},{key:"onEnable",value:function(){this.showWindow(),this.closeBtn.on("click",this.onCloseClick,this),this.goBtn.on("click",this.onGoCLick,this),g.showBanner(!0)}},{key:"onDisable",value:function(){g.showBanner(!1)}},{key:"onCloseClick",value:function(){this.node.active=!1}},{key:"onGoCLick",value:function(){p.Instance.pos(v.SetMeniuFunc,1),p.Instance.pos(v.StoreScrollToExchange,!1),this.node.active=!1,C.Instance.checkViewActive(f.UIRecruit)&&C.Instance.hideView(f.UIRecruit),C.Instance.checkViewActive(f.UIHeroInfo)&&C.Instance.hideView(f.UIHeroInfo)}}]),n}(I)).prototype,"closeBtn",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(_.prototype,"goBtn",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=_))||U)),u._RF.pop()}}}));

System.register("chunks:///UI/UIHeroInfo.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Constants/Constant.js","../Tools.js","../Config.js","../Core/Event/EventCode.js","../Core/Event/EventBus.js","../Core/View/UIBase.js","../Core/View/UIManager.js","../Core/Utils/SendEventManager.js","../Data/SoldierData.js","../Data/GuideData.js","../Data/BattleData.js","../DataManager.js"],(function(e,t){var i,n,r,o,s,a,l,c,u,d,h,f,p,g,v,b,I,y,k,m,C,_,B,w,L,U,H,x,S,z,R,E,D,j,T,F,G,M,P,V,A,N,O,K,q,Q,J,W,X,Y,Z,$,ee,te,ie,ne,re,oe,se,ae,le,ce,ue,de,he,fe,pe,ge,ve,be,Ie,ye,ke;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_dec10:void 0,_dec11:void 0,_dec12:void 0,_dec13:void 0,_dec14:void 0,_dec15:void 0,_dec16:void 0,_dec17:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_descriptor9:void 0,_descriptor10:void 0,_descriptor11:void 0,_descriptor12:void 0,_descriptor13:void 0,_descriptor14:void 0,_descriptor15:void 0,_descriptor16:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inherits,r=e.classCallCheck,o=e.possibleConstructorReturn,s=e.getPrototypeOf,a=e.initializerDefineProperty,l=e.assertThisInitialized,c=e.createClass,u=e.get,d=e.asyncToGenerator},function(e){h=e.cclegacy,f=e._decorator,p=e.SpriteComponent,g=e.CameraComponent,v=e.Node,b=e.LabelComponent,I=e.SpriteFrame,y=e.ParticleSystemComponent,k=e.Prefab,m=e.instantiate,C=e.Vec3,_=e.SkinningModelComponent},function(e){B=e.ViewType,w=e.LayerType},function(e){L=e.Tools},function(e){U=e.default},function(e){H=e.EventCode},function(e){x=e.default},function(e){S=e.UIBase},function(e){z=e.default},function(e){R=e.default,E=e.EventId},function(e){D=e.default},function(e){j=e.default},function(e){T=e.default},function(e){F=e.DataManager}],execute:function(){h._RF.push({},"53e58QgtaNM3bE5qlg5e+7a","UIHeroInfo",void 0),ye=f.ccclass,ke=f.property,e("UIHeroInfo",(G=ye("UIHeroInfo"),M=ke(p),P=ke(g),V=ke(v),A=ke(v),N=ke(v),O=ke(v),K=ke(v),q=ke(p),Q=ke(p),J=ke(b),W=ke(b),X=ke(b),Y=ke(b),Z=ke(b),$=ke(b),ee=ke(b),G((ne=i((ie=function(e){function t(){var e,i;r(this,t);for(var n=arguments.length,c=new Array(n),u=0;u<n;u++)c[u]=arguments[u];return i=o(this,(e=s(t)).call.apply(e,[this].concat(c))),a(i,"sp",ne,l(i)),a(i,"camare",re,l(i)),a(i,"upEffect",oe,l(i)),a(i,"closeBtn",se,l(i)),a(i,"upBtn",ae,l(i)),a(i,"leftBtn",le,l(i)),a(i,"rightBtn",ce,l(i)),a(i,"skillIcon",ue,l(i)),a(i,"progress",de,l(i)),a(i,"lvLab",he,l(i)),a(i,"progressLab",fe,l(i)),a(i,"skillLab",pe,l(i)),a(i,"hpLab",ge,l(i)),a(i,"deLab",ve,l(i)),a(i,"attackLab",be,l(i)),a(i,"nameLab",Ie,l(i)),i.scaleArr=[.9,1,1,1.2,.8],i}var i,h,f;return n(t,e),c(t,[{key:"start",value:function(){u(s(t.prototype),"start",this).call(this),this.testSp()}},{key:"onEnable",value:function(){this.closeBtn.on("click",this.onCloseClick,this),this.leftBtn.on("click",this.onLeftClick,this),this.rightBtn.on("click",this.onRightClick,this),this.upBtn.on("click",this.onUpClick,this),this.id=D.Instance.SelectSoldierId,this.lockHeros=D.Instance.getLockHeroData(),this.refreshIndex(),this.refreshUI(),this.upEffect.active=!1}},{key:"onDisable",value:function(){this.closeBtn.off("click",this.onCloseClick,this),this.leftBtn.off("click",this.onLeftClick,this),this.rightBtn.off("click",this.onRightClick,this),this.upBtn.off("click",this.onUpClick,this)}},{key:"onUpClick",value:function(){var e=this.getUpGold();if(F.instance.gold<e)F.instance.DailyGoldCount>0?z.Instance.showView(B.UIDailyGold,w.TOP):z.Instance.showView(B.UIGoldEnough,w.TOP);else{var t=D.Instance.getHeroUpFragmentCountById(this.id),i=D.Instance.getHeroCardCountById(this.id);if(i<t)L.ShowTip("Not enough hero card");else{this.playUpEffect(),F.instance.gold-=e,D.Instance.setHeroCardCountById(this.id,i-t),x.Instance.pos(H.RefreshUISoldiers),x.Instance.pos(H.RefreshMenuRedPoint);var n=F.instance.getHeroInfoById(this.id);F.instance.setItemInfoLvbySid(n.sid,n.lv+1),this.refreshUI(),j.Instance.guideHeroUp();var r=D.Instance.getSoldierInfoById(this.id);R.Instance.sendEvent(E[E.Soldier],{name:r.name+n.lv})}}}},{key:"onCloseClick",value:function(){this.node.active=!1}},{key:"onLeftClick",value:function(){0!=this.index&&(this.index--,this.id=this.lockHeros[this.index].id,this.refreshUI())}},{key:"onRightClick",value:function(){this.index!=this.lockHeros.length-1&&(this.index++,this.id=this.lockHeros[this.index].id,this.refreshUI())}},{key:"refreshIndex",value:function(){for(var e=0;e<this.lockHeros.length;e++)if(this.lockHeros[e].id==this.id){this.index=e;break}}},{key:"refreshUI",value:(f=d(regeneratorRuntime.mark((function e(){var t,i,n,r,o,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=D.Instance.getSoldierInfoById(this.id),i=F.instance.getHeroInfoById(this.id),this.lv=i.lv,n=U.SKILL_IFNO[t.skillId-1],this.skillLab.string=n.info,e.next=7,L.loadRes("textures/heroInfo/skill_"+this.id,I);case 7:this.skillIcon.spriteFrame=e.sent,this.lvLab.string="LV."+(i.lv+1),this.nameLab.string=t.name,r=D.Instance.getHeroUpFragmentCountById(this.id),o=D.Instance.getHeroCardCountById(this.id),this.progress.fillRange=o/r,this.progressLab.string=o+"/"+r,this.hpLab.string=T.Instance.getSoldierHpByIdAndLv(this.id,i.lv)+"",this.deLab.string=t.defense+"",this.attackLab.string=T.Instance.getSoldierAttackByIdAndLv(this.id,i.lv)+"",this.upBtn.getChildByName("countLab").getComponent(b).string=L.numberToStrKM(this.getUpGold()),this.refreshButton(),this.createHero(),o>=r&&this.scheduleOnce((function(){j.Instance.showHeroUpBtn(s.upBtn)}),1);case 21:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"getUpGold",value:function(){return 1e3*(this.lv+1)}},{key:"refreshButton",value:(h=d(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.loadRes("textures/soldierInfo/"+(0==this.index?"zuo":"zuo1"),I);case 2:return this.leftBtn.getComponent(p).spriteFrame=e.sent,e.next=5,L.loadRes("textures/soldierInfo/"+(this.index==this.lockHeros.length-1?"you1":"you"),I);case 5:this.rightBtn.getComponent(p).spriteFrame=e.sent;case 6:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"createHero",value:(i=d(regeneratorRuntime.mark((function e(){var t,i,n,r,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.instance.getItemConstInfoByID(this.id),e.next=3,L.loadRes("prefabs/"+t.prefab+"_blue",k);case 3:for(i=e.sent,n=m(i),r=this.scaleArr[this.id-201],n.position=new C(0,0,0),n.scale=new C(r,r,r),o=n.getComponentsInChildren(_),s=0;s<o.length;s++)o[s].node.layer=this.upEffect.layer;this.camare.node.parent.addChild(n),null!=this.hero&&(this.hero.destroy(),this.hero=null),this.hero=n;case 13:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"testSp",value:function(){var e=new I;e.texture=this.camare.targetTexture,this.sp.spriteFrame=e}},{key:"playUpEffect",value:function(){this.upEffect.active=!0;for(var e=this.upEffect.getComponentsInChildren(y),t=0;t<e.length;t++)e[t].play()}}]),t}(S)).prototype,"sp",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=i(ie.prototype,"camare",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=i(ie.prototype,"upEffect",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=i(ie.prototype,"closeBtn",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=i(ie.prototype,"upBtn",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=i(ie.prototype,"leftBtn",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=i(ie.prototype,"rightBtn",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=i(ie.prototype,"skillIcon",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=i(ie.prototype,"progress",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=i(ie.prototype,"lvLab",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=i(ie.prototype,"progressLab",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=i(ie.prototype,"skillLab",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=i(ie.prototype,"hpLab",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=i(ie.prototype,"deLab",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=i(ie.prototype,"attackLab",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=i(ie.prototype,"nameLab",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=ie))||te)),h._RF.pop()}}}));

System.register("chunks:///UI/UIKongTou.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Core/Constants/Constant.js","../Tools.js","../Core/Event/EventCode.js","../Core/Event/EventBus.js","../Core/View/UIBase.js","../Core/View/UIManager.js","../Core/AdUitls/AdManager.js","../Core/Utils/SendEventManager.js","../Data/SoldierData.js","../Data/GuideData.js","../Data/BattleData.js","../Data/GameData.js","../DataManager.js"],(function(e,t){var n,i,a,o,r,s,c,d,l,u,h,p,v,C,f,g,m,y,I,k,B,b,_,w,S,E,N,T,A,G,O,D,j,L,R,W,Q,U,x,F,H,K,z,M,P,V,q,X,J,Y,Z,$,ee,te,ne,ie,ae,oe;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,a=e.classCallCheck,o=e.possibleConstructorReturn,r=e.getPrototypeOf,s=e.initializerDefineProperty,c=e.assertThisInitialized,d=e.createClass,l=e.asyncToGenerator},function(e){u=e.cclegacy,h=e._decorator,p=e.Node,v=e.SpriteComponent,C=e.CameraComponent,f=e.LabelComponent,g=e.SpriteFrame,m=e.Prefab,y=e.instantiate,I=e.Vec3,k=e.SkeletalAnimationComponent,B=e.SkinningModelComponent},function(e){b=e.default},function(e){_=e.default,w=e.RewardType,S=e.ViewType,E=e.LayerType},function(e){N=e.Tools},function(e){T=e.EventCode},function(e){A=e.default},function(e){G=e.UIBase},function(e){O=e.default},function(e){D=e.default},function(e){j=e.default,L=e.EventId},function(e){R=e.default},function(e){W=e.default},function(e){Q=e.default},function(e){U=e.default},function(e){x=e.DataManager}],execute:function(){u._RF.push({},"32c73NfHW5F0qEQ8Ox2MWO+","UIKongTou",void 0),ae=h.ccclass,oe=h.property,e("UIKongTou",(F=ae("UIKongTou"),H=oe(p),K=oe(p),z=oe(p),M=oe(p),P=oe(p),V=oe(v),q=oe(C),F((Y=n((J=function(e){function t(){var e,n;a(this,t);for(var i=arguments.length,d=new Array(i),l=0;l<i;l++)d[l]=arguments[l];return n=o(this,(e=r(t)).call.apply(e,[this].concat(d))),s(n,"soldier",Y,c(n)),s(n,"sureBtn",Z,c(n)),s(n,"receiveBtn",$,c(n)),s(n,"closeBtn",ee,c(n)),s(n,"card",te,c(n)),s(n,"renderSp",ne,c(n)),s(n,"camare",ie,c(n)),n.ttCloseBtn=null,n.scaleArr=[.9,1,1,1.2,.8],n}var n;return i(t,e),d(t,[{key:"onLoad",value:function(){this.ttCloseBtn=this.node.getChildByPath("panel/ttCloseBtn")}},{key:"start",value:function(){this.testSp()}},{key:"onEnable",value:function(){var e=this;switch(this.showWindow(),this.receiveBtn.on("click",this.onReceiveClick,this),this.sureBtn.on("click",this.onSureClick,this),this.closeBtn.on("click",this.onCloseClick,this),this.ttCloseBtn.on("click",this.onCloseClick,this),this.data=x.instance.kongtouRecieveDatas,this.closeBtn.active=!1,this.scheduleOnce((function(){b.isTT||(e.closeBtn.active=!0)}),3),this.receiveBtn.active=!0,this.sureBtn.active=!1,this.refreshUI(),j.Instance.sendEvent(L[L.KongTou],{type:"空投礼包视频领取"+this.getContenetStr()+"-出现"}),j.Instance.sendEvent(L[L.EnterKongTou]),D.showBanner(!0),this.ttCloseBtn.active=b.isTT,this.data.type){case w.COIN:j.Instance.sendEvent(L[L.airdropGetCoin_appear]);break;case w.Wood:j.Instance.sendEvent(L[L.airdropGetWood_appear]);break;case w.Soldier:this.data.id<200?j.Instance.sendEvent(L[L.airdropGetArm_appear]):j.Instance.sendEvent(L[L.airdropGetHero_appear])}}},{key:"onDisable",value:function(){this.receiveBtn.off("click",this.onReceiveClick,this),this.sureBtn.off("click",this.onSureClick,this),this.closeBtn.off("click",this.onCloseClick,this),this.ttCloseBtn.off("click",this.onCloseClick,this),D.showBanner(!1),x.instance.refreshKongTouIsShow(),A.Instance.pos(T.OnHomeInfoChange)}},{key:"onReceiveClick",value:function(){var e=this;switch(j.Instance.sendEvent(L[L.KongTou],{type:"空投礼包视频领取"+this.getContenetStr()+"-点击"}),this.data.type){case w.COIN:j.Instance.sendEvent(L[L.airdropGetCoin_click]);break;case w.Wood:j.Instance.sendEvent(L[L.airdropGetWood_click]);break;case w.Soldier:this.data.id<200?j.Instance.sendEvent(L[L.airdropGetArm_click]):j.Instance.sendEvent(L[L.airdropGetHero_click])}var t=function(){switch(e.data.type){case w.COIN:j.Instance.sendEvent(L[L.airdropGetCoin_clickOk]);break;case w.Wood:j.Instance.sendEvent(L[L.airdropGetWood_clickOk]);break;case w.Soldier:e.data.id<200?j.Instance.sendEvent(L[L.airdropGetArm_clickOk]):j.Instance.sendEvent(L[L.airdropGetHero_clickOk])}};D.createVideo((function(){switch(e.data.type){case w.COIN:j.Instance.sendEvent(L[L.airdropGetCoin_complete]);break;case w.Wood:j.Instance.sendEvent(L[L.airdropGetWood_complete]);break;case w.Soldier:e.data.id<200?j.Instance.sendEvent(L[L.airdropGetArm_complete]):j.Instance.sendEvent(L[L.airdropGetHero_complete])}t(),j.Instance.sendEvent(L[L.KongTou],{type:"空投礼包视频领取"+e.getContenetStr()+"-完成"}),x.instance.VideoCount++,j.Instance.sendEvent(L[L.KongtouRecieve]);var n=e.data;switch(n.type){case w.COIN:x.instance.gold+=n.count,W.Instance.showClickArmys();break;case w.Wood:x.instance.wood+=n.count,W.Instance.showClickArmys();break;case w.Soldier:R.Instance.addCardById(n.id),U.Instance.congratulationsId.add(n.id),O.Instance.showView(S.UICongratulations,E.TOP)}e.node.active=!1}),(function(){t()}))}},{key:"onCloseClick",value:function(){this.node.active=!1,x.instance.showWxTouch(x.instance.WXConfig.rate_airdrop),x.instance.showQQTouch(x.instance.QQConfig.rate_airdrop),x.instance.showTTTouch(x.instance.TTConfig.rate_airdrop),x.instance.showAndroidTouch(x.instance.AndroidConfig.rate_airdrop),W.Instance.showClickArmys()}},{key:"onSureClick",value:function(){this.node.active=!1}},{key:"refreshUI",value:function(){this.data.type==w.Soldier?(this.card.active=!1,this.soldier.active=!0,this.refreshSoldier()):(this.card.active=!0,this.soldier.active=!1,this.refreshCard())}},{key:"getContenetStr",value:function(){var e="";switch(this.data.type){case w.COIN:e="金币";break;case w.Wood:e="木材";break;case w.Soldier:e=R.Instance.getSoldierInfoById(this.data.id).name}return e}},{key:"refreshSoldier",value:function(){var e=this.data.id,t=x.instance.getItemConstInfoByID(e),n=R.Instance.getSoldierInfoById(e),i=this.soldier.getChildByName("quality").getComponent(v),a=this.soldier.getChildByName("qualityLab").getComponent(f),o=this.soldier.getChildByName("nameLab").getComponent(f),r=this.soldier.getChildByName("infoLab").getComponent(f),s=this.soldier.getChildByName("soldier"),c=this.soldier.getChildByName("hero"),d=this.soldier.getChildByName("atrib");o.string=t.name,r.string=n.info,c.active=e>200,s.active=e<200,a.string=this.getQualityName(t.quality),N.loadSpriteFrame("textures/noviceGift/"+t.quality,(function(e){i.spriteFrame=e})),d.getChildByName("hpLab").getComponent(f).string=Q.Instance.getSoldierHpByIdAndLv(e,0)+"",d.getChildByName("deLab").getComponent(f).string=n.defense+"",d.getChildByName("attackLab").getComponent(f).string=Q.Instance.getSoldierAttackByIdAndLv(e,0)+"",this.createHero(e)}},{key:"getQualityName",value:function(e){switch(e){case 1:return"Ordinary";case 2:return"Rare";case 3:return"Advanced";case 4:return"Epic";case 5:return"Legend"}}},{key:"refreshCard",value:function(){var e=this,t=this.card.getChildByName("gold"),n=this.card.getChildByName("wood"),i=this.card.getChildByName("numLab").getComponent(f),a=this.card.getChildByName("soldier"),o=(a.getChildByName("icon").getComponent(v),a.getChildByName("nameLab").getComponent(f),a.getChildByName("quality").getComponent(v),this.card.getChildByName("cardLight").getComponent(v));a.getChildByName("heroBox");t.active=!1,n.active=!1,i.node.active=!1,a.active=!1;var r=this.data;switch(r.type){case w.COIN:t.active=!0,i.node.active=!0,i.string="+"+r.count;break;case w.Wood:n.active=!0,i.node.active=!0,i.string="+"+r.count}N.loadSpriteFrame("textures/recruit/card_1",(function(t){e.card.getComponent(v).spriteFrame=t})),N.loadSpriteFrame("textures/recruit/l_1",(function(e){o.spriteFrame=e}))}},{key:"testSp",value:function(){var e=new g;e.texture=this.camare.targetTexture,this.renderSp.spriteFrame=e}},{key:"createHero",value:(n=l(regeneratorRuntime.mark((function e(t){var n,i,a,o,r,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x.instance.getItemConstInfoByID(t),e.next=3,N.loadRes("prefabs/"+n.prefab+"_blue",m);case 3:for(i=e.sent,a=y(i),o=1,t>200&&(o=this.scaleArr[t-201]),a.position=new I(0,0,0),a.eulerAngles=new I(0,30,0),a.scale=new I(o,o,o),b.isQQ&&b.IsIos&&(a.setScale(new I(o*_.QQRoleScale,o*_.QQRoleScale,o*_.QQRoleScale)),a.getComponentInChildren(k).playOnLoad=!1),r=a.getComponentsInChildren(B),s=0;s<r.length;s++)r[s].node.layer=this.camare.node.layer;this.camare.node.parent.addChild(a),null!=this.hero&&(this.hero.destroy(),this.hero=null),this.hero=a;case 16:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}]),t}(G)).prototype,"soldier",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=n(J.prototype,"sureBtn",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=n(J.prototype,"receiveBtn",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=n(J.prototype,"closeBtn",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=n(J.prototype,"card",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=n(J.prototype,"renderSp",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=n(J.prototype,"camare",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=J))||X)),u._RF.pop()}}}));

System.register("chunks:///UI/UILevelGift.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Constants/Constant.js","../Tools.js","../Config.js","../Core/Event/EventCode.js","../Core/Event/EventBus.js","../Core/View/UIManager.js","../Core/AdUitls/AdManager.js","../Core/Utils/SendEventManager.js","../Data/SoldierData.js","../Data/GameData.js","../DataManager.js"],(function(e,t){var n,i,a,o,r,c,s,l,d,u,f,v,m,p,g,h,C,I,y,k,b,w,_,B,L,E,G,S,T,j,N,U,D,M,R,O,F,V,z,x,A,K;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,a=e.classCallCheck,o=e.possibleConstructorReturn,r=e.getPrototypeOf,c=e.initializerDefineProperty,s=e.assertThisInitialized,l=e.createClass},function(e){d=e.cclegacy,u=e._decorator,f=e.Node,v=e.LabelComponent,m=e.Component,p=e.SpriteComponent,g=e.Vec3},function(e){h=e.RewardType,C=e.ViewType,I=e.LayerType},function(e){y=e.Tools},function(e){k=e.LEVEL_GIFT},function(e){b=e.EventCode},function(e){w=e.default},function(e){_=e.default},function(e){B=e.default},function(e){L=e.default,E=e.EventId},function(e){G=e.default},function(e){S=e.default},function(e){T=e.DataManager}],execute:function(){d._RF.push({},"600fcJ3F0xKIqXSaYbU29j3","UILevelGift",void 0),A=u.ccclass,K=u.property,e("UILevelGift",(j=A("UILevelGift"),N=K(f),U=K(f),D=K(f),M=K(v),j((F=n((O=function(e){function t(){var e,n;a(this,t);for(var i=arguments.length,l=new Array(i),d=0;d<i;d++)l[d]=arguments[d];return n=o(this,(e=r(t)).call.apply(e,[this].concat(l))),c(n,"items",F,s(n)),c(n,"closeBtn",V,s(n)),c(n,"rewardBtn",z,s(n)),c(n,"timeLab",x,s(n)),n}return i(t,e),l(t,[{key:"start",value:function(){}},{key:"update",value:function(e){var t=S.Instance.getLevelGiftTime();this.timeLab.string=y.timestampToTime(t),t<=0&&(this.node.active=!1)}},{key:"onEnable",value:function(){this.closeBtn.on("click",this.onCloseClick,this),this.rewardBtn.on("click",this.onRewardClick,this),this.refreshUI(),L.Instance.sendEvent(E[E.LimitedGift],{name:"限时礼包视频-出现"}),L.Instance.sendEvent(E[E.limitGift_appear])}},{key:"onDisable",value:function(){this.closeBtn.off("click",this.onCloseClick,this),this.rewardBtn.off("click",this.onRewardClick,this)}},{key:"onCloseClick",value:function(){this.node.active=!1}},{key:"onRewardClick",value:function(){var e=this;L.Instance.sendEvent(E[E.limitGift_click]),L.Instance.sendEvent(E[E.LimitedGift],{name:"限时礼包视频-点击"}),B.createVideo((function(){e.reward(),e.node.active=!1,T.instance.VideoCount++,L.Instance.sendEvent(E[E.limitGift_complete]),L.Instance.sendEvent(E[E.limitGift_clickOk]),L.Instance.sendEvent(E[E.LimitedGift],{name:"限时礼包视频-完成"})}),(function(){L.Instance.sendEvent(E[E.limitGift_clickOk])}))}},{key:"refreshUI",value:function(){for(var e=this,t=k[S.Instance.getLevelGiftIndex()],n=function(n){var i=e.items.children[n],a=i.getChildByName("wood"),o=i.getChildByName("good"),r=i.getChildByName("daimond"),c=i.getChildByName("quality"),s=c.getChildByName("icon").getComponent(p),l=i.getChildByName("nameLab").getComponent(v),d=i.getChildByName("countLab").getComponent(v),u=c.getChildByName("gifgtdi"),f=t.type[n];switch(a.active=!1,o.active=!1,r.active=!1,c.active=!1,l.node.active=!1,d.node.position=new g(0,-58,0),f){case h.COIN:o.active=!0,d.string="+"+y.numberToStrKM(t.num[n]),d.node.active=!0;break;case h.Wood:a.active=!0,d.string="+"+y.numberToStrKM(t.num[n]),d.node.active=!0;break;case h.MASONRY:r.active=!0,d.string="+"+y.numberToStrKM(t.num[n]),d.node.active=!0;break;default:c.active=!0;var m=t.rewardId[n],C=G.Instance.getSoldierSmallIconPathById(m),I=T.instance.getItemConstInfoByID(m);l.string=I.name,l.node.active=!0,y.loadSpriteFrame(C,(function(e){s.spriteFrame=e})),y.loadSpriteFrame("textures/cangku/ck_quality"+I.quality,(function(e){c.getComponent(p).spriteFrame=e})),u.active=m>200,d.string="+"+y.numberToStrKM(t.num[n]),d.node.position=new g(0,26,0)}},i=0;i<this.items.children.length;i++)n(i)}},{key:"reward",value:function(){for(var e=!1,t=k[S.Instance.getLevelGiftIndex()],n=0;n<t.type.length;n++)switch(t.type[n]){case h.COIN:T.instance.gold+=t.num[n];break;case h.MASONRY:T.instance.diamond+=t.num[n];break;case h.Wood:T.instance.wood+=t.num[n];break;default:e=!0,this.rewardSoldier(t.rewardId[n],t.num[n])}e&&_.Instance.showView(C.UICongratulations,I.TOP),S.Instance.setLevelGiftRecieve(),w.Instance.pos(b.OnHomeInfoChange)}},{key:"rewardSoldier",value:function(e,t){for(var n=0;n<t;n++)G.Instance.addCardById(e),S.Instance.congratulationsId.add(e)}}]),t}(m)).prototype,"items",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(O.prototype,"closeBtn",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(O.prototype,"rewardBtn",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(O.prototype,"timeLab",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=O))||R)),d._RF.pop()}}}));

System.register("chunks:///UI/UILevelLockTip.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Constants/Constant.js","../Tools.js","../Config.js","../Data/SoldierData.js","../Data/GameData.js"],(function(e,t){var i,n,o,r,l,a,c,s,u,p,f,v,d,I,L,_,k,b,h,g,y,m,T,C,S,F,D,O,R,U,A;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inherits,o=e.classCallCheck,r=e.possibleConstructorReturn,l=e.getPrototypeOf,a=e.initializerDefineProperty,c=e.assertThisInitialized,s=e.createClass},function(e){u=e.cclegacy,p=e._decorator,f=e.SpriteComponent,v=e.LabelComponent,d=e.Component},function(e){I=e.ItemLockType},function(e){L=e.Tools},function(e){_=e.default,k=e.CUR_PLATFORM,b=e.PLATFORM_TYPE},function(e){h=e.default},function(e){g=e.default}],execute:function(){u._RF.push({},"1bc53uUqqlIJ7FPliCtlSRZ","UILevelLockTip",void 0),U=p.ccclass,A=p.property,e("UILevelLockTip",(y=U("UILevelLockTip"),m=A(f),T=A(f),C=A(v),y((D=i((F=function(e){function t(){var e,i;o(this,t);for(var n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];return i=r(this,(e=l(t)).call.apply(e,[this].concat(s))),a(i,"progress",D,c(i)),a(i,"icon",O,c(i)),a(i,"lockLab",R,c(i)),i}return n(t,e),s(t,[{key:"start",value:function(){}},{key:"onEnable",value:function(){this.refreshUI()}},{key:"refreshUI",value:function(){for(var e=this,t=null,i=null,n=0;n<_.ITEM_INFO.length;n++){var o=_.ITEM_INFO[n];if(!(o.id<101)&&o.lockLev!=I.BOX){if(o.id>200)break;if(o.lockLev>g.Instance.Level){t=o,i=_.ITEM_INFO[n-1];break}}}if(null!=t){var r=t.lockLev-g.Instance.Level;k==b.ANDROID_HAIWAI_ENGLISH||k==b.iOS_HAIWAI_ENGLISH?this.lockLab.string=r+" Stages away to unlock the "+t.name:this.lockLab.string="还差"+r+"关解锁"+t.name,this.progress.fillRange=1-r/(t.lockLev-i.lockLev);var l=h.Instance.getSoldierSmallIconPathById(t.id);L.loadSpriteFrame(l,(function(t){e.icon.spriteFrame=t}))}else this.node.active=!1}}]),t}(d)).prototype,"progress",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(F.prototype,"icon",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(F.prototype,"lockLab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=F))||S)),u._RF.pop()}}}));

System.register("chunks:///UI/UILoading.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Constants/Constant.js","../Tools.js","../Config.js","../Core/Utils/SendEventManager.js","../DataManager.js"],(function(e,i){var t,n,s,o,r,a,l,c,g,p,u,d,h,f,C,v,S,_,m,I,L,y,R,P,b,A,w,U,j;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inherits,s=e.classCallCheck,o=e.possibleConstructorReturn,r=e.getPrototypeOf,a=e.initializerDefineProperty,l=e.assertThisInitialized,c=e.createClass},function(e){g=e.cclegacy,p=e._decorator,u=e.SpriteComponent,d=e.view,h=e.director,f=e.Component},function(e){C=e.default},function(e){v=e.Tools},function(e){S=e.CUR_PLATFORM,_=e.PLATFORM_TYPE},function(e){m=e.default},function(e){I=e.DataManager}],execute:function(){g._RF.push({},"765f5gFOflJKZ5FhmckFhSH","UILoading",void 0),U=p.ccclass,j=p.property,e("UILoading",(L=U("UILoading"),y=j(u),R=j(u),L((A=t((b=function(e){function i(){var e,t;s(this,i);for(var n=arguments.length,c=new Array(n),g=0;g<n;g++)c[g]=arguments[g];return t=o(this,(e=r(i)).call.apply(e,[this].concat(c))),a(t,"progress",A,l(t)),a(t,"progress1",w,l(t)),t.isLodingCompelte=!1,t.pProgress=0,t.isShowBoatScene=!1,t}return n(i,e),c(i,[{key:"start",value:function(){var e=this;S!=_.ANDROID_HAIWAI_ENGLISH&&S!=_.iOS_HAIWAI_ENGLISH||(this.node.getChildByName("tip").active=!1),C.Width=d.getVisibleSize().width,C.Height=d.getVisibleSize().height,I.instance,this.progress.fillRange=0,this.isLodingCompelte=!1,h.preloadScene("BoatScene",(function(){e.isLodingCompelte=!0,console.log(" -------- 首页场景加载完成 ------- ")})),m.Instance.sendLoaing()}},{key:"update",value:function(e){this.progress.fillRange=(I.instance.progress+(this.isLodingCompelte?1:0))/(I.instance.resArr.length+1),this.pProgress+=5*e,this.pProgress>=1&&(this.pProgress=0),this.progress1&&(this.progress1.fillRange=this.pProgress),this.isShowBoatScene||this.isLodingCompelte&&I.instance.configloadComplete&&(this.isShowBoatScene=!0,this.progress.fillRange=1,v.cleanUnuseRes(),h.loadScene("BoatScene"),m.Instance.sendLoaingComplete())}}]),i}(f)).prototype,"progress",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(b.prototype,"progress1",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=b))||P)),g._RF.pop()}}}));

System.register("chunks:///UI/UILoadlingView.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var o,i,n,r,s,c,l,a,u,d,h,p;return e({_dec:void 0,_class:void 0}),{setters:[function(e){o=e.inherits,i=e.createClass,n=e.classCallCheck,r=e.possibleConstructorReturn,s=e.getPrototypeOf},function(e){c=e.cclegacy,l=e._decorator,a=e.Vec3,u=e.Component}],execute:function(){c._RF.push({},"488923IrSlHX4tc5b33YrvN","UILoadlingView",void 0),p=l.ccclass,l.property,e("UILoadlingView",(d=p("UILoadlingView"),d(h=function(e){function t(){return n(this,t),r(this,s(t).apply(this,arguments))}return o(t,e),i(t,[{key:"start",value:function(){this.rotateNode=this.node.getChildByName("rotateNode"),this.node.active=!1}},{key:"update",value:function(e){this.rotateNode.eulerAngles=new a(0,0,this.rotateNode.eulerAngles.z-100*e)}}]),t}(u))||h)),c._RF.pop()}}}));

System.register("chunks:///UI/UILuckItem.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Constants/Constant.js","../Tools.js","../Core/View/UIManager.js","../Core/AdUitls/AdManager.js","../Core/Utils/SendEventManager.js","../Data/SoldierData.js","../DataManager.js"],(function(e,t){var n,i,r,a,o,c,s,l,d,u,v,h,f,p,k,y,m,I,b,_,g,w,C,B,L,D,z,R,S,A,E,j,F,U,V,q,x,M,P,T,N,O,Y,H,K;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_dec10:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_descriptor9:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,r=e.classCallCheck,a=e.possibleConstructorReturn,o=e.getPrototypeOf,c=e.initializerDefineProperty,s=e.assertThisInitialized,l=e.createClass},function(e){d=e.cclegacy,u=e._decorator,v=e.LabelComponent,h=e.Node,f=e.SpriteComponent,p=e.Component},function(e){k=e.ViewType},function(e){y=e.Tools},function(e){m=e.default},function(e){I=e.default},function(e){b=e.default,_=e.EventId},function(e){g=e.default},function(e){w=e.DataManager}],execute:function(){d._RF.push({},"f9719w4zdlKT7NYYkePrfXw","UILuckItem",void 0),H=u.ccclass,K=u.property,e("UILuckItem",(C=H("UILuckItem"),B=K(v),L=K(h),D=K(h),z=K(v),R=K(f),S=K(h),A=K(h),E=K(h),j=K(f),C((V=n((U=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,l=new Array(i),d=0;d<i;d++)l[d]=arguments[d];return n=a(this,(e=o(t)).call.apply(e,[this].concat(l))),c(n,"nameLab",V,s(n)),c(n,"new",q,s(n)),c(n,"restrain",x,s(n)),c(n,"restrainLeb",M,s(n)),c(n,"icon",P,s(n)),c(n,"infoBtn",T,s(n)),c(n,"rewardBtn",N,s(n)),c(n,"videoBtn",O,s(n)),c(n,"quality",Y,s(n)),n.index=0,n}return i(t,e),l(t,[{key:"start",value:function(){}},{key:"onEnable",value:function(){this.infoBtn.on("click",this.onInfoClick,this),this.rewardBtn.on("click",this.onRewardClick,this),this.videoBtn.on("click",this.onVideoClick,this)}},{key:"onDisable",value:function(){this.infoBtn.on("click",this.onInfoClick,this),this.rewardBtn.on("click",this.onRewardClick,this),this.videoBtn.on("click",this.onVideoClick,this)}},{key:"onInfoClick",value:function(){this.restrain.active=!this.restrain.active;for(var e=0;e<this.node.parent.children.length;e++){var n=this.node.parent.children[e];n.active&&n!=this.node&&n.getComponent(t).hideRestrain()}}},{key:"hideRestrain",value:function(){this.restrain.active=!1}},{key:"onRewardClick",value:function(){b.Instance.sendEvent(_[_.LuckRward],{name:"抽卡幸运大奖-领取免费士兵-出现"}),b.Instance.sendEvent(_[_.cardLucky_getFree]),this.reward()}},{key:"onVideoClick",value:function(){var e=this;b.Instance.sendEvent(_[_.LuckRward],{name:"抽卡幸运大奖-视频领取士兵-点击"}),b.Instance.sendEvent(_[_.cardLucky_ADArm_click]),I.createVideo((function(){w.instance.VideoCount++,b.Instance.sendEvent(_[_.cardLucky_ADArm_clickOk]),b.Instance.sendEvent(_[_.cardLucky_ADArm_complete]),b.Instance.sendEvent(_[_.LuckRward],{name:"抽卡幸运大奖-视频领取士兵-完成"}),e.reward()}),(function(){b.Instance.sendEvent(_[_.cardLucky_ADArm_clickOk])}))}},{key:"refreshCard",value:function(e){var t=this;this.index=e;var n=[];n=0==e?g.Instance.getLevelLockSoldiersData():g.Instance.getLuckSoldiersData1(),this.id=n[y.getRandomInt(0,n.length-1)].id;var i=w.instance.getItemConstInfoByID(this.id),r=g.Instance.getSoldierInfoById(this.id);y.loadSpriteFrame(g.Instance.getSoldierIconPathById(this.id),(function(e){t.icon.spriteFrame=e})),this.nameLab.string=r.name,this.restrainLeb.string=""+r.restrain,this.restrain.active=!1,this.rewardBtn.active=0==e,this.videoBtn.active=0!=e,this.node.getChildByName("new").active=!g.Instance.hasSoldirById(this.id),y.loadSpriteFrame("textures/recruit/quality_"+i.quality,(function(e){t.quality.spriteFrame=e})),y.loadSpriteFrame("textures/recruit/card_"+i.quality,(function(e){t.node.getComponent(f).spriteFrame=e}))}},{key:"showVideoBtn",value:function(){this.rewardBtn.active=!1,this.videoBtn.active=!0}},{key:"reward",value:function(){g.Instance.addCardById(this.id),this.node.active=!1;for(var e=0,t=0;t<this.node.parent.children.length;t++){this.node.parent.children[t].active&&e++}0==e&&m.Instance.hideView(k.UILuck)}}]),t}(p)).prototype,"nameLab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=n(U.prototype,"new",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(U.prototype,"restrain",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(U.prototype,"restrainLeb",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(U.prototype,"icon",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(U.prototype,"infoBtn",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(U.prototype,"rewardBtn",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(U.prototype,"videoBtn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=n(U.prototype,"quality",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=U))||F)),d._RF.pop()}}}));

System.register("chunks:///UI/UILuck.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/View/UIBase.js","../Core/AdUitls/AdManager.js","../Core/Utils/SendEventManager.js","./UILuckItem.js"],(function(e,t){var i,n,r,c,o,a,s,l,u,d,f,h,p,v,k,y,b,I,C,_,g,U,L,m,w,B,j;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inherits,r=e.classCallCheck,c=e.possibleConstructorReturn,o=e.getPrototypeOf,a=e.initializerDefineProperty,s=e.assertThisInitialized,l=e.createClass},function(e){u=e.cclegacy,d=e._decorator,f=e.Node},function(e){h=e.UIBase},function(e){p=e.default},function(e){v=e.default,k=e.EventId},function(e){y=e.UILuckItem}],execute:function(){u._RF.push({},"2ab6foF+i1N1KkTFtm1MSCT","UILuck",void 0),B=d.ccclass,j=d.property,e("UILuck",(b=B("UILuck"),I=j(f),C=j(f),_=j(f),b((L=i((U=function(e){function t(){var e,i;r(this,t);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return i=c(this,(e=o(t)).call.apply(e,[this].concat(l))),a(i,"cards",L,s(i)),a(i,"closeBtn",m,s(i)),a(i,"tipLab",w,s(i)),i}return n(t,e),l(t,[{key:"start",value:function(){}},{key:"update",value:function(e){for(var t=0,i=0;i<this.cards.children.length;i++){this.cards.children[i].active&&t++}this.tipLab.active=t<3}},{key:"onEnable",value:function(){this.showWindow(),this.closeBtn.on("click",this.onCloseClick,this),this.refreshUI(),p.showBanner(!0),v.Instance.sendEvent(k[k.LuckRward],{name:"抽卡幸运大奖-出现"}),v.Instance.sendEvent(k[k.cardLucky_appear])}},{key:"onDisable",value:function(){this.closeBtn.off("click",this.onCloseClick,this),p.showBanner(!1)}},{key:"onCloseClick",value:function(){this.node.active=!1}},{key:"refreshUI",value:function(){for(var e=0;e<this.cards.children.length;e++){var t=this.cards.children[e];t.active=!0,t.getComponent(y).refreshCard(e)}}}]),t}(h)).prototype,"cards",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(U.prototype,"closeBtn",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(U.prototype,"tipLab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=U))||g)),u._RF.pop()}}}));

System.register("chunks:///UI/UIMedal.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../DataManager.js"],(function(e,r){var t,i,a,n,o,s,l,c,u,p,d,f,g,v,b,h,m,y,_,I,C,U,L,M,k,z;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0}),{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inherits,a=e.classCallCheck,n=e.possibleConstructorReturn,o=e.getPrototypeOf,s=e.initializerDefineProperty,l=e.assertThisInitialized,c=e.createClass},function(e){u=e.cclegacy,p=e._decorator,d=e.SpriteComponent,f=e.LabelComponent,g=e.Component},function(e){v=e.default},function(e){b=e.DataManager}],execute:function(){u._RF.push({},"f767a2zIO9OkKXDp2J+qr47","UIMedal",void 0),k=p.ccclass,z=p.property,e("UIMedal",(h=k("UIMedal"),m=z(d),y=z(f),_=z(f),h((U=t((C=function(e){function r(){var e,t;a(this,r);for(var i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];return t=n(this,(e=o(r)).call.apply(e,[this].concat(c))),s(t,"progress",U,l(t)),s(t,"progressLab",L,l(t)),s(t,"medalLab",M,l(t)),t}return i(r,e),c(r,[{key:"start",value:function(){if(v.isQQ&&v.IsIos){var e=this.node.getChildByName("saoguang");e&&(e.active=!1)}}},{key:"onEnable",value:function(){this.refreshUI()}},{key:"refreshUI",value:function(){this.progress.fillRange=b.instance.medal%10/10,this.medalLab.string=Math.floor(b.instance.medal/10)+1+"",this.progressLab.string=b.instance.medal%10+"/10"}}]),r}(g)).prototype,"progress",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(C.prototype,"progressLab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(C.prototype,"medalLab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=C))||I)),u._RF.pop()}}}));

System.register("chunks:///UI/UINewLock.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Tools.js","../Core/View/UIBase.js","../Core/AdUitls/AdManager.js","../Data/SoldierData.js","../DataManager.js","../UIOPPONative.js"],(function(i,e){var t,n,r,o,a,c,l,s,d,u,v,h,f,p,w,b,y,m,g,_,k,B,I,C,N,S,L,P,R,U,z,O,F,D,V,j,A,q,T,x,E,M,W,G,H,Z,J,K,Q,X,Y,$,ii;return i({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_dec10:void 0,_dec11:void 0,_dec12:void 0,_dec13:void 0,_dec14:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_descriptor9:void 0,_descriptor10:void 0,_descriptor11:void 0,_descriptor12:void 0,_descriptor13:void 0,_temp:void 0}),{setters:[function(i){t=i.applyDecoratedDescriptor,n=i.inherits,r=i.classCallCheck,o=i.possibleConstructorReturn,a=i.getPrototypeOf,c=i.initializerDefineProperty,l=i.assertThisInitialized,s=i.createClass,d=i.get},function(i){u=i.cclegacy,v=i._decorator,h=i.Node,f=i.LabelComponent,p=i.SpriteComponent,w=i.director},function(i){b=i.default},function(i){y=i.Tools},function(i){m=i.UIBase},function(i){g=i.default},function(i){_=i.default},function(i){k=i.DataManager},function(i){B=i.UIOPPONative}],execute:function(){u._RF.push({},"22e40veta1GZ669S2VVwN44","UINewLock",void 0),$=v.ccclass,ii=v.property,i("UINewLock",(I=$("UINewLock"),C=ii(h),N=ii(h),S=ii(h),L=ii(h),P=ii(h),R=ii(h),U=ii(f),z=ii(f),O=ii(f),F=ii(p),D=ii(p),V=ii(p),j=ii(p),I((T=t((q=function(i){function e(){var i,t;r(this,e);for(var n=arguments.length,s=new Array(n),d=0;d<n;d++)s[d]=arguments[d];return t=o(this,(i=a(e)).call.apply(i,[this].concat(s))),c(t,"closeBtn",T,l(t)),c(t,"card",x,l(t)),c(t,"restrain",E,l(t)),c(t,"rewardBtn",M,l(t)),c(t,"viewRewardBtn",W,l(t)),c(t,"infoBtn",G,l(t)),c(t,"nameLab",H,l(t)),c(t,"descLab",Z,l(t)),c(t,"restrainLeb",J,l(t)),c(t,"icon",K,l(t)),c(t,"cardLight",Q,l(t)),c(t,"miniIcon",X,l(t)),c(t,"quality",Y,l(t)),t}return n(e,i),s(e,[{key:"start",value:function(){}},{key:"onEnable",value:function(){this.rewardBtn.on("click",this.onRewardClick,this),this.closeBtn.on("click",this.onRewardClick,this),this.viewRewardBtn.on("click",this.onViewRewardClick,this),this.infoBtn.on("click",this.onInfoClick,this),this.showWindow(),w.getScene().on("CLOSE_NATIVE_AD",this.showNative,this)}},{key:"onDisable",value:function(){this.rewardBtn.off("click",this.onRewardClick,this),this.closeBtn.off("click",this.onRewardClick,this),this.viewRewardBtn.off("click",this.onViewRewardClick,this),this.infoBtn.off("click",this.onInfoClick,this),g.showBanner(!1)}},{key:"onInfoClick",value:function(){this.restrain.active=!this.restrain.active}},{key:"onRewardClick",value:function(){k.instance.gold+=1e3,k.instance.diamond+=10,this.node.active=!1}},{key:"onViewRewardClick",value:function(){var i=this;g.createVideo((function(){k.instance.gold+=2e3,k.instance.diamond+=20,i.node.active=!1,k.instance.VideoCount++}))}},{key:"show",value:function(i){d(a(e.prototype),"show",this).call(this,i),this.id=i,this.refreshUI(),this.showNative()}},{key:"refreshUI",value:function(){var i=this;console.log("-------- id:"+this.id);var e=k.instance.getItemConstInfoByID(this.id),t=_.Instance.getSoldierInfoById(this.id);y.loadSpriteFrame("textures/recruit/card_"+e.quality,(function(e){i.card.getComponent(p).spriteFrame=e})),y.loadSpriteFrame(_.Instance.getSoldierIconPathById(this.id),(function(e){i.icon.spriteFrame=e})),y.loadSpriteFrame(_.Instance.getSoldierSmallIconPathById(this.id),(function(e){i.miniIcon.spriteFrame=e})),y.loadSpriteFrame("textures/recruit/l_"+e.quality,(function(e){i.cardLight.spriteFrame=e})),this.nameLab.string=t.name,this.restrainLeb.string=""+t.restrain,this.restrain.active=!1,y.loadSpriteFrame("textures/recruit/quality_"+e.quality,(function(e){i.quality.spriteFrame=e})),this.descLab.string=t.info}},{key:"showNative",value:function(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(b.isOppo()||b.isVivo()){this.viewRewardBtn.setPosition(170,-485,0);var e=this.card.parent.getChildByName("NativeBtn1"),t=this.card.parent.getChildByName("NativeBtn2");k.instance.OPPO_VERSION;if(i||!k.instance.isCanShowNative())g.showBanner(!0),this.node.getChildByName("UIOPPONative").active=!1,e.active=t.active=!1;else{e.active=k.instance.isShowNativeWword_0(),t.active=!k.instance.isShowNativeWword_0();var n=e.active?e:t;n.off("click"),n.on("click",this.onBtnClickNativeAd,this),this.viewRewardBtn.setPosition(-170,-485,0);var r=this.node.getChildByName("UIOPPONative").getComponent(B);r.node.active=!0,r.showNativeAD()}}else b.SceenIsTwoToOne()&&g.showBanner(!0)}},{key:"onBtnClickNativeAd",value:function(){g.clickNativeAd()}}]),e}(m)).prototype,"closeBtn",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(q.prototype,"card",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(q.prototype,"restrain",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(q.prototype,"rewardBtn",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(q.prototype,"viewRewardBtn",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(q.prototype,"infoBtn",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(q.prototype,"nameLab",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(q.prototype,"descLab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(q.prototype,"restrainLeb",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(q.prototype,"icon",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(q.prototype,"cardLight",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(q.prototype,"miniIcon",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(q.prototype,"quality",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=q))||A)),u._RF.pop()}}}));

System.register("chunks:///UI/UINotice.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Constants/Constant.js","../Cfg/LevelCfg.js","../Core/View/UIBase.js"],(function(e,t){var i,n,o,r,s,a,c,l,u,d,h,p,b,f,v,g,L,y,_,k,m,w,C,I,U,z,B,N,P,j;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inherits,o=e.classCallCheck,r=e.possibleConstructorReturn,s=e.getPrototypeOf,a=e.initializerDefineProperty,c=e.assertThisInitialized,l=e.createClass},function(e){u=e.cclegacy,d=e._decorator,h=e.LabelComponent,p=e.Node},function(e){b=e.default},function(e){f=e.default},function(e){v=e.UIBase}],execute:function(){u._RF.push({},"515670lm8FPPbJsp3i15zr8","UINotice",void 0),P=d.ccclass,j=d.property,e("UINotice",(g=P("UINotice"),L=j(h),y=j(h),_=j(h),k=j(p),m=j(p),g((I=i((C=function(e){function t(){var e,i;o(this,t);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return i=r(this,(e=s(t)).call.apply(e,[this].concat(l))),a(i,"titleLab",I,c(i)),a(i,"descLab",U,c(i)),a(i,"countLab",z,c(i)),a(i,"closeBtn",B,c(i)),a(i,"icon",N,c(i)),i}return n(t,e),l(t,[{key:"start",value:function(){this.closeBtn.on("click",this.onCloseClick,this)}},{key:"onCloseClick",value:function(){this.node.active=!1}},{key:"show",value:function(e){this.showWindow(),this.node.active=!0;for(var t=0;t<this.icon.children.length;t++)this.icon.children[t].active=t==e-1;switch(e){case 1:this.titleLab.string="ISLAND BUILD",this.descLab.string="Get your own island, build and upgrade defense facilities to resist the invasion of other players!",this.countLab.string="Unlock at Stage ."+b.LockHome;break;case 2:this.titleLab.string="HERO",this.descLab.string="Super heroes join the team, powerful attacks and skills, so that your combat power rises straight!";var i=f.Instance.getFirstBoxLevel()+1;this.countLab.string="Unlock at Stage ."+i;break;case 3:this.titleLab.string="ARENA",this.descLab.string="Fight other players, win trophies and treasure chests, and become the commander on the list!",this.countLab.string="Unlock at Stage ."+b.LockPVP}}}]),t}(v)).prototype,"titleLab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=i(C.prototype,"descLab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(C.prototype,"countLab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(C.prototype,"closeBtn",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(C.prototype,"icon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=C))||w)),u._RF.pop()}}}));

System.register("chunks:///UI/UINoviceGift.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Core/Constants/Constant.js","../Tools.js","../Config.js","../Core/Event/EventCode.js","../Core/Event/EventBus.js","../Core/View/UIBase.js","../Core/View/UIManager.js","../Core/AdUitls/AdManager.js","../Core/Utils/SendEventManager.js","../Data/SoldierData.js","../Data/StoreData.js","../Data/BattleData.js","../Data/GameData.js","../DataManager.js"],(function(e,t){var n,i,a,o,r,c,s,l,d,u,v,f,p,h,I,m,b,g,y,C,k,_,w,N,G,S,B,E,R,L,O,U,P,D,j,z,A,T,V,F,M,x,Q,q,W,H,K,Y,J,X,Z,$,ee,te,ne,ie,ae,oe,re,ce,se,le,de,ue,ve,fe,pe,he,Ie;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_dec10:void 0,_dec11:void 0,_dec12:void 0,_dec13:void 0,_dec14:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_descriptor9:void 0,_descriptor10:void 0,_descriptor11:void 0,_descriptor12:void 0,_descriptor13:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,a=e.classCallCheck,o=e.possibleConstructorReturn,r=e.getPrototypeOf,c=e.initializerDefineProperty,s=e.assertThisInitialized,l=e.createClass,d=e.asyncToGenerator},function(e){u=e.cclegacy,v=e._decorator,f=e.Node,p=e.LabelComponent,h=e.SpriteComponent,I=e.CameraComponent,m=e.SpriteFrame,b=e.Vec3,g=e.SkeletalAnimationComponent},function(e){y=e.default},function(e){C=e.default,k=e.RewardType,_=e.ViewType,w=e.LayerType},function(e){N=e.Tools},function(e){G=e.default},function(e){S=e.EventCode},function(e){B=e.default},function(e){E=e.UIBase},function(e){R=e.default},function(e){L=e.default},function(e){O=e.default,U=e.EventId},function(e){P=e.default},function(e){D=e.default},function(e){j=e.default},function(e){z=e.default},function(e){A=e.DataManager}],execute:function(){u._RF.push({},"b0045osonVKrb59dKTCJndG","UINoviceGift",void 0),pe=v.ccclass,he=v.property,Ie=[{id:1,type:k.COIN,num:5e3,soldierId:0},{id:2,type:k.MASONRY,num:150,soldierId:0},{id:3,type:k.Wood,num:1500,soldierId:0},{id:4,type:k.Soldier,num:2,soldierId:114},{id:5,type:k.Soldier,num:1,soldierId:204}],e("UINoviceGift",(T=pe("UINoviceGift"),V=he(f),F=he(f),M=he(p),x=he(p),Q=he(p),q=he(h),W=he(h),H=he(h),K=he(p),Y=he(p),J=he(p),X=he(h),Z=he(I),T((te=n((ee=function(e){function t(){var e,n;a(this,t);for(var i=arguments.length,l=new Array(i),d=0;d<i;d++)l[d]=arguments[d];return n=o(this,(e=r(t)).call.apply(e,[this].concat(l))),c(n,"closeBtn",te,s(n)),c(n,"videoBtn",ne,s(n)),c(n,"nameLab",ie,s(n)),c(n,"infoLab",ae,s(n)),c(n,"proLab",oe,s(n)),c(n,"progress",re,s(n)),c(n,"quality",ce,s(n)),c(n,"sp",se,s(n)),c(n,"hpLab",le,s(n)),c(n,"deLab",de,s(n)),c(n,"attackLab",ue,s(n)),c(n,"skillIcon",ve,s(n)),c(n,"camare",fe,s(n)),n.gold=1e4,n.daimond=50,n.id=204,n}var n;return i(t,e),l(t,[{key:"start",value:function(){this.testSp()}},{key:"onEnable",value:function(){this.showWindow(),this.closeBtn.on("click",this.onCloseClick,this),this.videoBtn.on("click",this.onVideoClick,this),O.Instance.sendEvent(U[U.NoviceGift],{type:"新手礼包打开"}),O.Instance.sendEvent(U[U.newGiftOpen]),this.refreshUI()}},{key:"onDisable",value:function(){this.closeBtn.off("click",this.onCloseClick,this),this.videoBtn.off("click",this.onVideoClick,this)}},{key:"onRewardTipClick",value:function(){N.ShowTip("Increase times of watching\nvideos on other interfaces")}},{key:"onCloseClick",value:function(){this.node.active=!1}},{key:"onVideoClick",value:function(){var e=this;switch(A.instance.NoviceReceiveCount){case 0:O.Instance.sendEvent(U[U.newGift_1_click]);break;case 1:O.Instance.sendEvent(U[U.newGift_2_click]);break;case 2:O.Instance.sendEvent(U[U.newGift_3_click]);break;case 3:O.Instance.sendEvent(U[U.newGift_4_click]);break;case 4:O.Instance.sendEvent(U[U.newGift_5_click])}var t=function(){switch(A.instance.NoviceReceiveCount){case 0:O.Instance.sendEvent(U[U.newGift_1_clickOk]);break;case 1:O.Instance.sendEvent(U[U.newGift_2_clickOk]);break;case 2:O.Instance.sendEvent(U[U.newGift_3_clickOk]);break;case 3:O.Instance.sendEvent(U[U.newGift_4_clickOk]);break;case 4:O.Instance.sendEvent(U[U.newGift_5_clickOk])}};O.Instance.sendEvent(U[U.NoviceGift],{type:"新手礼包视频"+(A.instance.NoviceReceiveCount+1)+"号礼物-点击"}),L.createVideo((function(){if(O.Instance.sendEvent(U[U.NoviceGift],{type:"新手礼包视频"+(A.instance.NoviceReceiveCount+1)+"号礼物-完成"}),e.reward(),A.instance.NoviceReceiveCount>=C.NoviceGiftCount)return e.node.active=!1,void B.Instance.pos(S.OnHomeInfoChange);switch(e.refreshUI(),A.instance.NoviceReceiveCount){case 0:O.Instance.sendEvent(U[U.newGift_1_complete]);break;case 1:O.Instance.sendEvent(U[U.newGift_2_complete]);break;case 2:O.Instance.sendEvent(U[U.newGift_3_complete]);break;case 3:O.Instance.sendEvent(U[U.newGift_4_complete]);break;case 4:O.Instance.sendEvent(U[U.newGift_5_complete])}t()}),(function(){t()}))}},{key:"reward",value:function(){var e=Ie[A.instance.NoviceReceiveCount];switch(e.type){case k.COIN:R.Instance.showView(_.UIGetGoods,w.PANEL,{type:k.COIN,num:e.num});break;case k.Wood:R.Instance.showView(_.UIGetGoods,w.PANEL,{type:k.Wood,num:e.num});break;case k.MASONRY:R.Instance.showView(_.UIGetGoods,w.PANEL,{type:k.MASONRY,num:e.num});break;case k.Soldier:for(var t=0;t<e.num;t++)P.Instance.addCardById(e.soldierId),z.Instance.congratulationsId.add(e.soldierId);R.Instance.showView(_.UICongratulations,w.TOP)}A.instance.NoviceReceiveCount++}},{key:"onRewardClick",value:function(){P.Instance.addCardById(this.id),z.Instance.congratulationsId.add(this.id);for(var e=P.Instance.getDrawSoldiersData(),t=0;t<3;t++){var n=D.Instance.getRdSoldierId(e);z.Instance.congratulationsId.add(n),P.Instance.addSoldierById(n)}A.instance.gold+=this.gold,A.instance.diamond+=this.daimond,A.instance.rewardNoviceGift(),R.Instance.showView(_.UICongratulations,w.TOP),B.Instance.pos(S.OnHomeInfoChange),this.node.active=!1}},{key:"refreshUI",value:(n=d(regeneratorRuntime.mark((function e(){var t,n,i,a,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.refreshProgress(),t=A.instance.getItemConstInfoByID(this.id),n=P.Instance.getSoldierInfoById(this.id),this.nameLab.string=t.name,i=C.NoviceGiftCount,this.progress.fillRange=A.instance.NoviceReceiveCount/(i-1),N.loadSpriteFrame("textures/noviceGift/"+t.quality,(function(e){o.quality.spriteFrame=e})),this.hpLab.string=j.Instance.getSoldierHpByIdAndLv(this.id,0)+"",this.deLab.string=n.defense+"",this.attackLab.string=j.Instance.getSoldierAttackByIdAndLv(this.id,0)+"",a=G.SKILL_IFNO[n.skillId-1],this.infoLab.string=a.info,e.next=14,N.loadRes("textures/heroInfo/skill_"+this.id,m);case 14:this.skillIcon.spriteFrame=e.sent;case 15:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getQualityName",value:function(e){switch(e){case 1:return"白";case 2:return"绿";case 3:return"蓝";case 4:return"紫";case 5:return"金"}}},{key:"testSp",value:function(){var e=new m;e.texture=this.camare.targetTexture,this.sp.spriteFrame=e;var t=this.camare.node.parent.getChildByName("hero3_blue");y.isQQ&&y.IsIos&&(t.setScale(new b(C.QQRoleScale,C.QQRoleScale,C.QQRoleScale)),t.getComponentInChildren(g).playOnLoad=!1)}},{key:"refreshProgress",value:function(){for(var e=this.progress.node.parent.getChildByName("ps"),t=function(t){var n=e.children[t];n.children[0].active=A.instance.NoviceReceiveCount>=t,n.getChildByName("indexLab").getComponent(p).string=Ie[t].id.toString();var i=n.getChildByPath("item/gold"),a=n.getChildByPath("item/wood"),o=n.getChildByPath("item/daimond"),r=n.getChildByPath("item/selected"),c=n.getChildByPath("item/recevied"),s=n.getChildByPath("item/soldier").getComponent(h),l=s.node.getChildByName("icon").getComponent(h),d=n.getChildByPath("item/countLab").getComponent(p);i.active=!1,a.active=!1,o.active=!1,s.node.active=!1,r.active=A.instance.NoviceReceiveCount==t,c.active=A.instance.NoviceReceiveCount>t;var u=Ie[t];switch(d.string="+"+N.numberToStrKM(u.num),u.type){case k.COIN:i.active=!0;break;case k.Wood:a.active=!0;break;case k.MASONRY:o.active=!0;break;case k.Soldier:s.node.active=!0;var v=u.soldierId,f=A.instance.getItemConstInfoByID(v);N.loadSpriteFrame("textures/cangku/ck_quality"+f.quality,(function(e){s.spriteFrame=e})),N.loadSpriteFrame(P.Instance.getSoldierSmallIconPathById(v),(function(e){l.spriteFrame=e}))}},n=0;n<e.children.length;n++)t(n)}}]),t}(E)).prototype,"closeBtn",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=n(ee.prototype,"videoBtn",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=n(ee.prototype,"nameLab",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=n(ee.prototype,"infoLab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=n(ee.prototype,"proLab",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=n(ee.prototype,"progress",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=n(ee.prototype,"quality",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=n(ee.prototype,"sp",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=n(ee.prototype,"hpLab",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=n(ee.prototype,"deLab",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=n(ee.prototype,"attackLab",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=n(ee.prototype,"skillIcon",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=n(ee.prototype,"camare",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=ee))||$)),u._RF.pop()}}}));

System.register("chunks:///UI/UIPassItemInfo.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Core/Constants/Constant.js","../Tools.js","../Core/Event/EventCode.js","../Core/Event/EventBus.js","../Core/View/UIManager.js","../Core/AdUitls/AdManager.js","../Core/Utils/SendEventManager.js","../Data/SoldierData.js","../Data/GuideData.js","../Data/GameData.js","../Data/PassRewardData.js","../DataManager.js"],(function(e,t){var n,a,i,s,r,o,d,c,u,l,h,p,I,f,v,w,m,y,b,g,k,C,R,_,O,V,j,E,P,U,D,S,x,A,B,N,T,M,z,L,F,G,H,K,W,X,Y,q,J;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,a=e.inherits,i=e.classCallCheck,s=e.possibleConstructorReturn,r=e.getPrototypeOf,o=e.initializerDefineProperty,d=e.assertThisInitialized,c=e.createClass,u=e.asyncToGenerator},function(e){l=e.cclegacy,h=e._decorator,p=e.Node,I=e.SpriteComponent,f=e.LabelComponent,v=e.Component,w=e.SpriteFrame},function(e){m=e.default},function(e){y=e.RewardType,b=e.ViewType,g=e.LayerType},function(e){k=e.Tools},function(e){C=e.EventCode},function(e){R=e.default},function(e){_=e.default},function(e){O=e.default},function(e){V=e.default,j=e.EventId},function(e){E=e.default},function(e){P=e.default},function(e){U=e.default},function(e){D=e.default},function(e){S=e.DataManager}],execute:function(){l._RF.push({},"976dc9hOjtBOKJ5a0EOqkmu","UIPassItemInfo",void 0),q=h.ccclass,J=h.property,e("UIPassItemInfo",(x=q("UIPassItemInfo"),A=J(p),B=J(p),N=J(p),T=J(p),M=J(I),z=J(f),x((G=n((F=function(e){function t(){var e,n;i(this,t);for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];return n=s(this,(e=r(t)).call.apply(e,[this].concat(c))),o(n,"rewarded",G,d(n)),o(n,"selected",H,d(n)),o(n,"videoIcon",K,d(n)),o(n,"canReward",W,d(n)),o(n,"icon",X,d(n)),o(n,"numLab",Y,d(n)),n.nativeIcon=null,n}var n;return a(t,e),c(t,[{key:"start",value:function(){this.node.on("click",this.onClick,this)}},{key:"setData",value:function(e,t){var n=this;this.nativeIcon=this.node.getChildByName("nativeIcon"),this.data=e,this.isVideo=t,this.refreshUI(),0!=this.data.id||t||this.scheduleOnce((function(){P.Instance.showGuideLevelReward(n.node)}),.2)}},{key:"refreshUI",value:(n=u(regeneratorRuntime.mark((function e(){var t,n,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="textures/home/home_jinbi",!this.type){e.next=18;break}e.t0=this.type,e.next=e.t0===y.COIN?5:e.t0===y.MASONRY?7:e.t0===y.BOX?9:e.t0===y.Soldier?11:e.t0===y.Hero?13:e.t0===y.Wood?15:17;break;case 5:return t="textures/home/home_jinbi",e.abrupt("break",18);case 7:return t="textures/home/home_zuanshi",e.abrupt("break",18);case 9:return t="textures/main/main_baoxiang",e.abrupt("break",18);case 11:case 13:return t=E.Instance.getSoldierSmallIconPathById(this.rewardId),e.abrupt("break",18);case 15:return t="textures/common/wood",e.abrupt("break",18);case 17:return e.abrupt("break",18);case 18:return e.next=20,k.loadRes(t,w);case 20:this.icon.spriteFrame=e.sent,this.videoIcon.active=this.isVideo&&!this.isRward,this.rewarded.active=this.isRward,this.selected.active=this.isCanReward,this.numLab.string=k.numberToStrKM(this.num),this.canReward.active=this.isCanReward,n=this.isCanReward?"textures/home/kuang1":"textures/home/kuang",k.loadSpriteFrame(n,(function(e){a.node.getComponent(I).spriteFrame=e})),this.refreshNativeIcon();case 29:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"onClick",value:function(){var e=this;m.isOppo()&&this.IsOppoNative?O.clickNativeAd():this.isRward||(0!=this.data.id||this.isVideo||P.Instance.guideLevelReward(),this.isCanReward?this.isVideo?(V.Instance.sendEvent(j[j.PassReward],{type:"闯关奖励视频奖励-点击"}),V.Instance.sendEvent(j[j.stageReward_Ad_click]),O.createVideo((function(){S.instance.VideoCount++,e.reward(),V.Instance.sendEvent(j[j.PassReward],{type:"闯关奖励视频奖励-完成"}),V.Instance.sendEvent(j[j.stageReward_Ad_complete]),V.Instance.sendEvent(j[j.stageReward_Ad_clickOk])}),(function(){V.Instance.sendEvent(j[j.stageReward_Ad_clickOk])}))):(V.Instance.sendEvent(j[j.PassReward],{type:"闯关奖励普通奖励领取"}),V.Instance.sendEvent(j[j.stageReward_normal]),this.reward()):k.ShowTip("Unlock at Level"+this.data.id))}},{key:"reward",value:function(){switch(this.type){case y.COIN:S.instance.gold+=this.num;break;case y.MASONRY:S.instance.diamond+=this.num;break;case y.BOX:k.ShowTip("Chest Claimed"),U.Instance.addVictoryBoxCount(this.num);break;case y.Soldier:for(var e=0;e<this.num;e++)E.Instance.addCardById(this.rewardId),U.Instance.congratulationsId.add(this.rewardId);_.Instance.showView(b.UICongratulations,g.TOP);break;case y.Hero:for(var t=0;t<this.num;t++)E.Instance.addCardById(this.rewardId),U.Instance.congratulationsId.add(this.rewardId);_.Instance.showView(b.UICongratulations,g.TOP);break;case y.Wood:S.instance.wood+=this.num}D.Instance.setRewardDataByIdAndIsVideo(this.data.id,this.isVideo),this.refreshUI(),R.Instance.pos(C.OnHomeInfoChange),V.Instance.clickPassReward(this.data.id,this.isVideo)}},{key:"refreshNativeIcon",value:function(){null!=this.nativeIcon&&(m.isOppo()&&this.IsOppoNative?this.nativeIcon.active=!0:this.nativeIcon.active=!1)}},{key:"isCanReward",get:function(){return this.data.id<=Math.floor(S.instance.medal/10)&&!this.isRward}},{key:"isRward",get:function(){return D.Instance.getIsRewardByIdAndIsVideo(this.data.id,this.isVideo)}},{key:"type",get:function(){return this.isVideo?this.data.type2:this.data.type1}},{key:"rewardId",get:function(){return this.isVideo?this.data.rewardId2:this.data.rewardId1}},{key:"num",get:function(){return this.isVideo?this.data.num2:this.data.num1}},{key:"IsOppoNative",get:function(){return!this.isVideo&&this.data.id==Math.floor(S.instance.medal/10)+1}}]),t}(v)).prototype,"rewarded",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=n(F.prototype,"selected",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=n(F.prototype,"videoIcon",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=n(F.prototype,"canReward",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=n(F.prototype,"icon",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=n(F.prototype,"numLab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=F))||L)),l._RF.pop()}}}));

System.register("chunks:///UI/UIPassItem.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../DataManager.js","./UIPassItemInfo.js"],(function(t,e){var i,n,r,a,o,s,c,l,u,d,p,v,f,h,b,m,I,_,g,y,C,D,P,U,z,w,j,k,F,L,B,M;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_temp:void 0}),{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inherits,r=t.classCallCheck,a=t.possibleConstructorReturn,o=t.getPrototypeOf,s=t.initializerDefineProperty,c=t.assertThisInitialized,l=t.createClass},function(t){u=t.cclegacy,d=t._decorator,p=t.Node,v=t.LabelComponent,f=t.Component},function(t){h=t.DataManager},function(t){b=t.UIPassItemInfo}],execute:function(){u._RF.push({},"3b3dem2pKxOMqj+j9DVCesW","UIPassItem",void 0),B=d.ccclass,M=d.property,t("UIPassItem",(m=B("UIPassItem"),I=M(p),_=M(p),g=M(p),y=M(p),C=M(p),D=M(v),m((z=i((U=function(t){function e(){var t,i;r(this,e);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return i=a(this,(t=o(e)).call.apply(t,[this].concat(l))),s(i,"videoItem",z,c(i)),s(i,"item",w,c(i)),s(i,"icon",j,c(i)),s(i,"iconFirst",k,c(i)),s(i,"iconBg",F,c(i)),s(i,"lvLab",L,c(i)),i}return n(e,t),l(e,[{key:"start",value:function(){}},{key:"setData",value:function(t){this.data=t,this.refreshUI()}},{key:"refreshUI",value:function(){this.videoItem.getComponent(b).setData(this.data,!0),this.item.getComponent(b).setData(this.data,!1),this.lvLab.string=""+this.data.id;var t=Math.floor(h.instance.medal/10);this.iconBg.active=this.data.id+1>t,this.lvLab.node.active=0!=this.data.id,this.icon.active=this.data.id<=t,this.iconFirst.active=0==this.data.id}}]),e}(f)).prototype,"videoItem",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(U.prototype,"item",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(U.prototype,"icon",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(U.prototype,"iconFirst",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(U.prototype,"iconBg",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(U.prototype,"lvLab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=U))||P)),u._RF.pop()}}}));

System.register("chunks:///UI/UIPassReward.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Tools.js","../Cfg/PassRewardCfg.js","../Core/View/UIBase.js","../DataManager.js","./UIPassItem.js"],(function(e,t){var n,i,r,o,s,a,l,c,u,h,d,p,f,g,v,m,y,C,b,I,P,_,k,w,U,R,B,D,j,z,M,L,T,x,N,G,O,Y;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,r=e.classCallCheck,o=e.possibleConstructorReturn,s=e.getPrototypeOf,a=e.initializerDefineProperty,l=e.assertThisInitialized,c=e.createClass,u=e.get,h=e.asyncToGenerator},function(e){d=e.cclegacy,p=e._decorator,f=e.Node,g=e.LabelComponent,v=e.UITransformComponent,m=e.instantiate,y=e.SpriteComponent,C=e.Prefab},function(e){b=e.Tools},function(e){I=e.default},function(e){P=e.UIBase},function(e){_=e.DataManager},function(e){k=e.UIPassItem}],execute:function(){d._RF.push({},"8c3adgdp8ZGoZXGfpD0BpOU","UIPassReward",void 0),O=p.ccclass,Y=p.property,e("UIPassReward",(w=O("UIPassReward"),U=Y(f),R=Y(f),B=Y(f),D=Y(f),j=Y(g),w((L=n((M=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];return n=o(this,(e=s(t)).call.apply(e,[this].concat(c))),a(n,"content",L,l(n)),a(n,"closeBtn",T,l(n)),a(n,"allProgress",x,l(n)),a(n,"progress",N,l(n)),a(n,"levelLab",G,l(n)),n.startY=0,n}var n;return i(t,e),c(t,[{key:"start",value:function(){this.panel=this.node.getChildByName("panel").getComponent(v),u(s(t.prototype),"start",this).call(this),this.startY=this.content.getWorldPosition().y,this.refreshUI()}},{key:"onEnable",value:function(){this.closeBtn.on("click",this.onCloseClick,this),this.refreshProgress()}},{key:"onDisable",value:function(){this.closeBtn.off("click",this.onCloseClick,this)}},{key:"onCloseClick",value:function(){this.node.active=!1}},{key:"lateUpdate",value:function(){if(this.content.children.length>1){var e=Math.floor(_.instance.medal/10)+1;e>=this.content.children.length&&(e=this.content.children.length-1);var t=Math.max(0,this.startY-this.content.children[e].getWorldPosition().y-10+(this.panel.height-1334)/2);this.allProgress.height=t}}},{key:"refreshUI",value:(n=h(regeneratorRuntime.mark((function e(){var t,n,i,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.levelLab.string=""+(Math.floor(_.instance.medal/10)+1),e.next=3,b.loadRes("ui/UIPassItem",C);case 3:for(t=e.sent,n=I.Instance.getRwardData(),i=0;i<10;i++)r=m(t),this.content.addChild(r),r.getComponent(k).setData(n[i]);this.instantiateItem(10,20,t,n);case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"instantiateItem",value:function(e,t,n,i){var r=this;this.scheduleOnce((function(){for(var o=e;o<t;o++){var s=m(n);r.content.addChild(s),s.getComponent(k).setData(i[o])}r.instantiateItem(t,Math.min(i.length,t+10),n,i)}),0)}},{key:"refreshProgress",value:function(){var e=_.instance.medal%10;this.progress.getChildByName("progress").getComponent(y).fillRange=e/10,this.progress.getChildByName("progressLab").getComponent(g).string=e+"/10"}}]),t}(P)).prototype,"content",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(M.prototype,"closeBtn",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(M.prototype,"allProgress",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(M.prototype,"progress",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(M.prototype,"levelLab",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=M))||z)),d._RF.pop()}}}));

System.register("chunks:///UI/UIRecruit.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Core/Constants/Constant.js","../Core/Utils/AudioManager.js","../Tools.js","../Core/View/UIBase.js","../Core/View/UIManager.js","../Core/AdUitls/AdManager.js","../Core/Utils/SendEventManager.js","../Data/SoldierData.js","../Data/GuideData.js","../Data/GameData.js","../DataManager.js","../UIOPPONative.js"],(function(e,t){var i,n,o,a,s,r,c,u,l,d,h,v,f,p,y,g,B,w,b,k,I,C,m,_,N,L,A,V,O,S,z,P,T,U,R,D,E,W,j,M,G,x,H,F,q,Q,Z,K,X,J,Y,$,ee,te,ie,ne,oe,ae,se,re,ce,ue,le,de,he,ve,fe,pe,ye,ge,Be,we,be,ke,Ie,Ce,me,_e,Ne,Le;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_dec10:void 0,_dec11:void 0,_dec12:void 0,_dec13:void 0,_dec14:void 0,_dec15:void 0,_dec16:void 0,_dec17:void 0,_dec18:void 0,_dec19:void 0,_dec20:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_descriptor9:void 0,_descriptor10:void 0,_descriptor11:void 0,_descriptor12:void 0,_descriptor13:void 0,_descriptor14:void 0,_descriptor15:void 0,_descriptor16:void 0,_descriptor17:void 0,_descriptor18:void 0,_descriptor19:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inherits,o=e.classCallCheck,a=e.possibleConstructorReturn,s=e.getPrototypeOf,r=e.initializerDefineProperty,c=e.assertThisInitialized,u=e.createClass,l=e.asyncToGenerator},function(e){d=e.cclegacy,h=e._decorator,v=e.Node,f=e.SpriteComponent,p=e.LabelComponent,y=e.ButtonComponent,g=e.director,B=e.WidgetComponent,w=e.Vec3,b=e.tween,k=e.SpriteFrame},function(e){I=e.default},function(e){C=e.ViewType,m=e.LayerType,_=e.AudioName},function(e){N=e.AudioManager},function(e){L=e.Tools},function(e){A=e.UIBase},function(e){V=e.default},function(e){O=e.default},function(e){S=e.default,z=e.EventId},function(e){P=e.default},function(e){T=e.default,U=e.GuideId},function(e){R=e.default},function(e){D=e.DataManager},function(e){E=e.UIOPPONative}],execute:function(){d._RF.push({},"04158TNz9lKtL+2BzRp37QK","UIRecruit",void 0),Ne=h.ccclass,Le=h.property,e("UIRecruit",(W=Ne("UIRecruit"),j=Le(v),M=Le(v),G=Le(v),x=Le(f),H=Le(v),F=Le(v),q=Le(v),Q=Le(v),Z=Le(v),K=Le(p),X=Le(p),J=Le(p),Y=Le(p),$=Le(f),ee=Le(f),te=Le(f),ie=Le(f),ne=Le(v),oe=Le(v),W((re=i((se=function(e){function t(){var e,i;o(this,t);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return i=a(this,(e=s(t)).call.apply(e,[this].concat(u))),r(i,"viewBuyBtn",re,c(i)),r(i,"infos",ce,c(i)),r(i,"card",ue,c(i)),r(i,"cardBg",le,c(i)),r(i,"restrain",de,c(i)),r(i,"sureBtn",he,c(i)),r(i,"sureBtnWord",ve,c(i)),r(i,"buyBtn",fe,c(i)),r(i,"infoBtn",pe,c(i)),r(i,"luckValueLab",ye,c(i)),r(i,"luckAddLab",ge,c(i)),r(i,"nameLab",Be,c(i)),r(i,"restrainLeb",we,c(i)),r(i,"progress",be,c(i)),r(i,"icon",ke,c(i)),r(i,"cardLight",Ie,c(i)),r(i,"quality",Ce,c(i)),r(i,"new",me,c(i)),r(i,"closeBtn",_e,c(i)),i}var i;return n(t,e),u(t,[{key:"onLoad",value:function(){this.infos.getChildByName("NativeBtn3").getComponent(y).node.active=!1,this.rateBtn=this.infos.getChildByName("rateBtn"),this.rateBtn.on("click",this.onRateClick,this),this.rateBtn.active=I.isQQ}},{key:"onRateClick",value:function(){V.Instance.showView(C.UIRecruitRate,m.TOP)}},{key:"start",value:function(){}},{key:"onEnable",value:function(){this.showWindow(),this.buyBtn.on("click",this.onBuyClick,this),this.viewBuyBtn.on("click",this.onViewBuyClick,this),this.sureBtn.on("click",this.onSureClick,this),this.sureBtnWord.on("click",this.onSureClick,this),this.infoBtn.on("click",this.onInfoClick,this),this.closeBtn.on("click",this.onSureClick,this),this.refreshUI(),this.showNative(),g.getScene().on("CLOSE_NATIVE_AD",this.showNative,this)}},{key:"showNative",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(I.isOppo()||I.isVivo()){this.sureBtn.active=!1,D.instance.oppoAdConfig.normal_btn_delay_show_second>0?setTimeout((function(){e.sureBtnWord.active=!0}),1e3*D.instance.oppoAdConfig.normal_btn_delay_show_second):this.sureBtnWord.active=!0,this.sureBtnWord.width=100,this.sureBtnWord.height=50,this.buyBtn.setPosition(146,-370,0),this.node.getChildByName("panel").getComponent(B).top=0;var i=this.infos.getChildByName("NativeBtn1").getComponent(y),n=this.infos.getChildByName("NativeBtn2").getComponent(y),o=this.infos.getChildByName("NativeBtn3").getComponent(y);D.instance.OPPO_VERSION;if(t||!D.instance.isCanShowNative())O.showBanner(!0),this.node.getChildByName("UIOPPONative").active=!1,i.node.active=n.node.active=!1,o.node.active=!1,this.buyBtn.setPosition(0,-370,0),this.sureBtnWord.setPosition(0,-455,0);else{o.node.off("click"),o.node.on("click",this.onBtnClickNativeAd,this),o.node.active=!0,this.buyBtn.setPosition(0,-370,0),this.sureBtnWord.setPosition(0,-cc.winSize.height/2+170-this.infos.position.y,0);var a=this.node.getChildByName("UIOPPONative").getComponent(E);a.node.active=!0,a.showNativeAD(),o.getComponentInChildren(p).string=D.instance.isShowNativeWword_0()?"查看广告":"立即查看",T.Instance.TmpGuideId==U.Guide_ZhaoMu&&(i.node.active=D.instance.isShowNativeWword_0(),n.node.active=!D.instance.isShowNativeWword_0(),i.node.off("click"),i.node.on("click",this.onBtnClickNativeAd,this),n.node.off("click"),n.node.on("click",this.onBtnClickNativeAd,this),o.node.active=!1)}}else O.showBanner(!0)}},{key:"onBtnClickNativeAd",value:function(){R.Instance.Level<3&&(this.node.active=!1),O.clickNativeAd()}},{key:"onDisable",value:function(){this.buyBtn.off("click",this.onBuyClick,this),this.viewBuyBtn.off("click",this.onViewBuyClick,this),this.sureBtn.off("click",this.onSureClick,this),this.infoBtn.off("click",this.onInfoClick,this),this.closeBtn.off("click",this.onSureClick,this),O.showBanner(!1)}},{key:"onInfoClick",value:function(){this.restrain.active=!this.restrain.active}},{key:"onSureClick",value:function(){(this.node.active=!1,T.Instance.showHeCheng1(),T.Instance.showGuideSynthTip(),I.isOppo())&&(100*Math.random()<=D.instance.oppoAdConfig.normal_btn_show_native&&O.clickNativeAd());D.instance.showWxTouch(D.instance.WXConfig.rate_draw),D.instance.showQQTouch(D.instance.QQConfig.rate_draw),D.instance.showTTTouch(D.instance.TTConfig.rate_draw),D.instance.showAndroidTouch(D.instance.AndroidConfig.rate_draw)}},{key:"onCloseClick",value:function(){this.node.active=!1,T.Instance.showHeCheng1(),T.Instance.showGuideSynthTip()}},{key:"onViewBuyClick",value:function(){var e=this;S.Instance.sendEvent(z[z.RecruitView],{name:"视频再召唤一个-点击"}),S.Instance.sendEvent(z[z.buyHeroAgain_click]),O.createVideo((function(){D.instance.VideoCount++,D.instance.zhaomuTimes+=1,S.Instance.sendEvent(z[z.buyHeroAgain_complete]),S.Instance.sendEvent(z[z.RecruitView],{name:"视频再召唤一个-完成"}),S.Instance.sendEvent(z[z.buyHeroAgain_clickOk]),e.refreshUI()}),(function(){S.Instance.sendEvent(z[z.buyHeroAgain_clickOk])}))}},{key:"onBuyClick",value:function(){var e=D.instance.getZhaomuMoneyCount();D.instance.gold>=e?(D.instance.gold-=e,D.instance.zhaomuTimes+=1,this.refreshUI()):D.instance.DailyGoldCount>0?V.Instance.showView(C.UIDailyGold,m.TOP):V.Instance.showView(C.UIGoldEnough,m.TOP)}},{key:"refreshBuyBtn",value:function(){this.buyBtn.getChildByName("goldLab").getComponent(p).string=D.instance.getZhaomuMoneyCount()+""}},{key:"refreshUI",value:function(){P.Instance.addLuckValue(),this.refreshCard(),this.tweenAni(),this.refreshBuyBtn(),S.Instance.drawCard(),this.sureBtn.position=new w(-146,this.sureBtn.position.y),this.buyBtn.active=!0,T.Instance.TmpGuideId==U.Guide_ZhaoMu&&(this.sureBtn.position=new w(0,this.sureBtn.position.y),this.buyBtn.active=!1),T.Instance.guideZhaoMu(),T.Instance.guideZhaoMu1(),this.refreshViewBuyBtn(),this.viewBuyBtn.active&&(S.Instance.sendEvent(z[z.buyHeroAgain_appear]),S.Instance.sendEvent(z[z.RecruitView],{name:"视频再召唤一个-出现"}))}},{key:"getSoldierId",value:function(){for(var e,t=P.Instance.getLevelLockSoldiersData(),i=0,n=0;n<t.length;n++)i<t[n].lockLev&&(i=t[n].lockLev,e=t[n]);return P.Instance.hasSoldirById(e.id)?t[L.getRandomInt(0,t.length-1)].id:e.id}},{key:"refreshCard",value:(i=l(regeneratorRuntime.mark((function e(){var t,i,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.infos.active=!1,this.id=this.getSoldierId(),t=D.instance.getItemConstInfoByID(this.id),i=P.Instance.getSoldierInfoById(this.id),e.next=6,L.loadRes("textures/recruit/card_"+t.quality,k);case 6:return this.card.getComponent(f).spriteFrame=e.sent,e.next=9,L.loadRes(P.Instance.getSoldierIconPathById(this.id),k);case 9:return this.icon.spriteFrame=e.sent,e.next=12,L.loadRes("textures/recruit/l_"+t.quality,k);case 12:this.cardLight.spriteFrame=e.sent,this.nameLab.string=i.name,this.restrainLeb.string=""+i.restrain,this.progress.fillRange=P.Instance.LuckValue/50,this.luckAddLab.string="Lucky+"+P.Instance.LuckaddNum,this.luckValueLab.string=P.Instance.LuckValue+"/50",this.restrain.active=!1,this.new.active=!P.Instance.hasSoldirById(this.id),L.loadSpriteFrame("textures/recruit/quality_"+t.quality,(function(e){n.quality.spriteFrame=e}));case 21:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"tweenAni",value:function(){var e=this;this.cardBg.node.active=!0,this.cardBg.node.setWorldPosition(R.Instance.buyCardBtnPos),this.cardBg.node.scale=new w(.1,.1,.1),this.cardBg.node.eulerAngles=new w(0,0,0);b(this.cardBg.node).to(.3,{position:new w(0,105,0)}).start(),b(this.cardBg.node).to(.3,{scale:new w(1,1,1)}).call((function(){I.vibration()})).to(.05,{position:new w(-4,111,0)},{easing:"elasticInOut"}).to(.05,{position:new w(4,98,0)},{easing:"elasticInOut"}).to(.05,{position:new w(-4,111,0)},{easing:"elasticInOut"}).to(.05,{position:new w(4,98,0)},{easing:"elasticInOut"}).to(.05,{position:new w(-4,111,0)},{easing:"elasticInOut"}).to(.05,{position:new w(4,99,0)},{easing:"elasticInOut"}).to(.05,{position:new w(-4,111,0)},{easing:"elasticInOut"}).to(.05,{position:new w(4,99,0)},{easing:"elasticInOut"}).to(.05,{position:new w(0,105,0)}).call((function(){N.Instance.playOneShot(_.BuyCardShow)})).to(.2,{eulerAngles:new w(0,180,0)}).call((function(){e.cardBg.node.active=!1,e.infos.active=!0,e.reward(),e.showLuckView()})).start()}},{key:"reward",value:function(){P.Instance.addCardById(this.id),S.Instance.sendEvent(z[z.goldBuyHero])}},{key:"showLuckView",value:function(){var e=this;P.Instance.LuckValue>=50&&this.scheduleOnce((function(){V.Instance.showView(C.UILuck,m.PANEL),e.node.active=!1,P.Instance.LuckValue=0}),1)}},{key:"refreshViewBuyBtn",value:function(){this.viewBuyBtn.active=!1;var e=D.instance.getZhaomuMoneyCount();D.instance.gold>=e||I.isOppo()||I.isVivo()||(this.viewBuyBtn.active=!0,this.buyBtn.active=!1)}}]),t}(A)).prototype,"viewBuyBtn",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=i(se.prototype,"infos",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=i(se.prototype,"card",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=i(se.prototype,"cardBg",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=i(se.prototype,"restrain",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=i(se.prototype,"sureBtn",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=i(se.prototype,"sureBtnWord",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=i(se.prototype,"buyBtn",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=i(se.prototype,"infoBtn",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=i(se.prototype,"luckValueLab",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=i(se.prototype,"luckAddLab",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Be=i(se.prototype,"nameLab",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=i(se.prototype,"restrainLeb",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=i(se.prototype,"progress",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=i(se.prototype,"icon",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=i(se.prototype,"cardLight",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=i(se.prototype,"quality",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=i(se.prototype,"new",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=i(se.prototype,"closeBtn",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=se))||ae)),d._RF.pop()}}}));

System.register("chunks:///UI/UIRecruitRate.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Constants/Constant.js","../Config.js"],(function(t,e){var n,o,i,c,s,r,l,a,u,h,d,p,C,f,v,g,k;return t({_dec:void 0,_class:void 0}),{setters:[function(t){n=t.inherits,o=t.createClass,i=t.classCallCheck,c=t.possibleConstructorReturn,s=t.getPrototypeOf},function(t){r=t.cclegacy,l=t._decorator,a=t.MaskComponent,u=t.instantiate,h=t.LabelComponent,d=t.SpriteComponent,p=t.Component},function(t){C=t.ItemLockType},function(t){f=t.default}],execute:function(){r._RF.push({},"0aed7EVHzRJuZknxUJqlVJG","UIRecruitRate",void 0),k=l.ccclass,l.property,t("UIRecruitRate",(v=k("UIRecruitRate"),v(g=function(t){function e(){return i(this,e),c(this,s(e).apply(this,arguments))}return n(e,t),o(e,[{key:"onLoad",value:function(){this.content=this.node.getChildByPath("ScrollView/view/content"),this.content.parent.getComponent(a).inverted=!1,this.node.on("click",this.onCloseClick,this)}},{key:"onCloseClick",value:function(){this.node.active=!1}},{key:"start",value:function(){this.refreshUI()}},{key:"refreshUI",value:function(){for(var t=[],e=0,n=0;n<f.ITEM_INFO.length;n++){var o=f.ITEM_INFO[n];o.id<100||(o.id>200||o.lockLev!=C.UnUse&&(e+=o.lucky,t.push(o)))}for(var i=this.content.children.length,c=0;c<t.length;c++){var s=null;c<i?s=this.content.children[c]:(s=u(this.content.children[0]),this.content.addChild(s)),s.children[0].getComponent(h).string=t[c].name,s.children[1].getComponent(h).string=Math.round(t[c].lucky/e*100)+"%",s.getComponent(d).enabled=c%2==0}}}]),e}(p))||g)),r._RF.pop()}}}));

System.register("chunks:///UI/UISet.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Core/Constants/Constant.js","../Core/Utils/AudioManager.js","../Core/Event/EventCode.js","../Core/Event/EventBus.js","../Core/View/UIBase.js","../Core/AdUitls/AdManager.js","../Data/PVPData.js","../Data/GameData.js","../DataManager.js"],(function(t,e){var i,n,a,o,s,c,l,r,u,h,d,f,v,B,k,y,p,C,g,m,b,I,_,M,E,S,U,w,j,A,D,N,z,Q,P,x,V,q,R,F,L;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_temp:void 0}),{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inherits,a=t.classCallCheck,o=t.possibleConstructorReturn,s=t.getPrototypeOf,c=t.initializerDefineProperty,l=t.assertThisInitialized,r=t.createClass},function(t){u=t.cclegacy,h=t._decorator,d=t.Node,f=t.EditBoxComponent},function(t){v=t.default},function(t){B=t.default},function(t){k=t.AudioManager},function(t){y=t.EventCode},function(t){p=t.default},function(t){C=t.UIBase},function(t){g=t.default},function(t){m=t.default},function(t){b=t.default},function(t){I=t.DataManager}],execute:function(){u._RF.push({},"6dd4639WgBOTJt24UJpRfbR","UISet",void 0),F=h.ccclass,L=h.property,t("UISet",(_=F("UISet"),M=L(d),E=L(d),S=L(d),U=L(d),w=L(d),j=L(f),A=L(d),_((z=i((N=function(t){function e(){var t,i;a(this,e);for(var n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return i=o(this,(t=s(e)).call.apply(t,[this].concat(r))),c(i,"closeBtn",z,l(i)),c(i,"musicBtn",Q,l(i)),c(i,"audioBtn",P,l(i)),c(i,"shakeBtn",x,l(i)),c(i,"qualityBtn",V,l(i)),c(i,"nameEdit",q,l(i)),c(i,"setBtn",R,l(i)),i}return n(e,t),r(e,[{key:"start",value:function(){this.initEditBox()}},{key:"initEditBox",value:function(){this.node.getChildByName("EditBox").on("text-changed",this.onLevelEditChange,this)}},{key:"onLevelEditChange",value:function(t){b.Instance.Level=parseInt(t.string),p.Instance.pos(y.OnHomeInfoChange)}},{key:"onEnable",value:function(){this.showWindow(),this.nameEdit.node.on("text-changed",this.onEditChange,this),this.closeBtn.on("click",this.onCloseClick,this),this.musicBtn.on("click",this.onMusicClick,this),this.audioBtn.on("click",this.onAudioClick,this),this.shakeBtn.on("click",this.onShakeClick,this),this.qualityBtn.on("click",this.onQualityClick,this),this.setBtn.on("click",this.onSetClick,this),this.refreshUI(),g.showBanner(!0)}},{key:"onDisable",value:function(){this.closeBtn.off("click",this.onCloseClick,this),this.musicBtn.off("click",this.onMusicClick,this),this.audioBtn.off("click",this.onAudioClick,this),this.shakeBtn.off("click",this.onShakeClick,this),this.qualityBtn.off("click",this.onQualityClick,this),this.setBtn.off("click",this.onSetClick,this),g.showBanner(!1)}},{key:"onEditChange",value:function(t){m.Instance.setSelfName(t.string)}},{key:"onCloseClick",value:function(){this.node.active=!1}},{key:"onMusicClick",value:function(){k.Instance.MusicMuted=!k.Instance.MusicMuted,this.refreshMusicBtn()}},{key:"onAudioClick",value:function(){k.Instance.SoundMuted=!k.Instance.SoundMuted,this.refreshAudioBtn()}},{key:"onShakeClick",value:function(){v.IsVibration=!v.IsVibration,this.refreshShakeBtn()}},{key:"onQualityClick",value:function(){I.instance.Quality=1==I.instance.Quality?0:1,this.refreshQualityBtn()}},{key:"onSetClick",value:function(){this.nameEdit.setFocus()}},{key:"refreshMusicBtn",value:function(){var t=this.musicBtn.parent.getChildByName("open"),e=this.musicBtn.parent.getChildByName("close");t.active=!k.Instance.MusicMuted,e.active=!t.active}},{key:"refreshAudioBtn",value:function(){var t=this.audioBtn.parent.getChildByName("open"),e=this.audioBtn.parent.getChildByName("close");t.active=!k.Instance.SoundMuted,e.active=!t.active}},{key:"refreshShakeBtn",value:function(){var t=this.shakeBtn.parent.getChildByName("open"),e=this.shakeBtn.parent.getChildByName("close");t.active=v.isVibration,e.active=!t.active}},{key:"refreshQualityBtn",value:function(){var t=this.qualityBtn.parent.getChildByName("open"),e=this.qualityBtn.parent.getChildByName("close");t.active=1==I.instance.Quality,e.active=!t.active}},{key:"refreshUI",value:function(){this.refreshMusicBtn(),this.refreshAudioBtn(),this.refreshShakeBtn(),this.refreshQualityBtn();var t=m.Instance.getPVPVoDataById(B.SelfId);this.nameEdit.string=t.name}}]),e}(C)).prototype,"closeBtn",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(N.prototype,"musicBtn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(N.prototype,"audioBtn",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(N.prototype,"shakeBtn",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(N.prototype,"qualityBtn",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(N.prototype,"nameEdit",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(N.prototype,"setBtn",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=N))||D)),u._RF.pop()}}}));

System.register("chunks:///UI/UIShare.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Core/View/UIBase.js","../Core/AdUitls/AdManager.js","../DataManager.js"],(function(t,n){var e,i,o,a,s,l,c,h,r,d,u,g,f,C,k,p;return t({_dec:void 0,_class:void 0}),{setters:[function(t){e=t.inherits,i=t.createClass,o=t.classCallCheck,a=t.possibleConstructorReturn,s=t.getPrototypeOf},function(t){l=t.cclegacy,c=t._decorator,h=t.LabelComponent,r=t.math},function(t){d=t.default},function(t){u=t.UIBase},function(t){g=t.default},function(t){f=t.DataManager}],execute:function(){l._RF.push({},"27ea4VPM7dLgoCHHdBOYs1x","UIShare",void 0),p=c.ccclass,c.property,t("UIShare",(C=p("UIShare"),C(k=function(t){function n(){return o(this,n),a(this,s(n).apply(this,arguments))}return e(n,t),i(n,[{key:"onLoad",value:function(){this.shareBtn=this.node.getChildByPath("panel/shareBtn"),this.closeBtn=this.node.getChildByPath("panel/closeBtn"),this.goldLab=this.node.getChildByPath("panel/goldLab").getComponent(h),this.daimondLab=this.node.getChildByPath("panel/daimondLab").getComponent(h)}},{key:"onEnable",value:function(){this.showWindow(),this.goldLab.string="+"+this.gold,this.daimondLab.string="+"+this.daimond,this.shareBtn.on("click",this.onShareClick,this),this.closeBtn.on("click",this.onCloseClick,this),g.showBanner(!0)}},{key:"onDisable",value:function(){this.shareBtn.off("click",this.onShareClick,this),this.closeBtn.off("click",this.onCloseClick,this),g.showBanner(!1),d.isTT&&r.random()<f.instance.TTConfig.rate_settlement_Interstitial&&g.createInterstitialAd()}},{key:"onShareClick",value:function(){var t=this;d.shareVideo((function(){f.instance.gold+=t.gold,f.instance.diamond+=t.daimond,t.node.active=!1}))}},{key:"onCloseClick",value:function(){this.node.active=!1}},{key:"gold",get:function(){var t=f.instance.getZhaomuMoneyCount()*f.instance.TTConfig.share_gold;return Math.ceil(t)}},{key:"daimond",get:function(){return f.instance.TTConfig.share_daimond}}]),n}(u))||k)),l._RF.pop()}}}));

System.register("chunks:///UI/UISoldierInfo.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Tools.js","../Config.js","../Core/View/UIBase.js","../Core/AdUitls/AdManager.js","../Data/SoldierData.js","../DataManager.js"],(function(e,t){var i,n,r,o,l,s,a,c,u,h,d,f,p,v,b,g,k,m,I,y,_,C,B,w,L,z,x,S,R,U,D,j,F,N,T,P,A,H,M,O,E,G,K,V,W,Y,q,J,Q,X,Z;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_dec10:void 0,_dec11:void 0,_dec12:void 0,_dec13:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_descriptor9:void 0,_descriptor10:void 0,_descriptor11:void 0,_descriptor12:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inherits,r=e.classCallCheck,o=e.possibleConstructorReturn,l=e.getPrototypeOf,s=e.initializerDefineProperty,a=e.assertThisInitialized,c=e.createClass,u=e.get,h=e.asyncToGenerator},function(e){d=e.cclegacy,f=e._decorator,p=e.Node,v=e.LabelComponent,b=e.SpriteComponent,g=e.SpriteFrame},function(e){k=e.Tools},function(e){m=e.default},function(e){I=e.UIBase},function(e){y=e.default},function(e){_=e.default},function(e){C=e.DataManager}],execute:function(){d._RF.push({},"dac41d+9vpHTIwY3Sz7Nh6H","UISoldierInfo",void 0),X=f.ccclass,Z=f.property,e("UISoldierInfo",(B=X("UISoldierInfo"),w=Z(p),L=Z(p),z=Z(p),x=Z(p),S=Z(p),R=Z(p),U=Z(v),D=Z(v),j=Z(v),F=Z(v),N=Z(b),T=Z(b),B((H=i((A=function(e){function t(){var e,i;r(this,t);for(var n=arguments.length,c=new Array(n),u=0;u<n;u++)c[u]=arguments[u];return i=o(this,(e=l(t)).call.apply(e,[this].concat(c))),s(i,"closeBtn",H,a(i)),s(i,"stars",M,a(i)),s(i,"attribute",O,a(i)),s(i,"skill",E,a(i)),s(i,"leftBtn",G,a(i)),s(i,"rightBtn",K,a(i)),s(i,"nameLab",V,a(i)),s(i,"infoLab",W,a(i)),s(i,"skillNameLab",Y,a(i)),s(i,"skillInfoLab",q,a(i)),s(i,"icon",J,a(i)),s(i,"skillIcon",Q,a(i)),i.lev=1,i.maxLev=1,i}var i,d;return n(t,e),c(t,[{key:"start",value:function(){u(l(t.prototype),"start",this).call(this)}},{key:"onEnable",value:function(){this.showWindow(),this.closeBtn.on("click",this.onCloseClick,this),this.leftBtn.on("click",this.onLeftClick,this),this.rightBtn.on("click",this.onRightClick,this),this.id=_.Instance.SelectSoldierId,this.lev=1,this.refreshUI(),y.showBanner(!0)}},{key:"onDisable",value:function(){this.closeBtn.off("click",this.onCloseClick,this),this.leftBtn.off("click",this.onLeftClick,this),this.rightBtn.off("click",this.onRightClick,this),y.showBanner(!1)}},{key:"onCloseClick",value:function(){this.node.active=!1}},{key:"onLeftClick",value:function(){1!=this.lev&&(this.lev--,this.refreshUI())}},{key:"onRightClick",value:function(){this.lev!=this.maxLev&&(this.lev++,this.refreshUI())}},{key:"refreshUI",value:(d=h(regeneratorRuntime.mark((function e(){var t,i,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_.Instance.getSoldierInfoById(this.id),i=C.instance.getItemConstInfoByID(this.id),this.maxLev=t.hp.length,n=null,t.skillId>0&&this.id>200&&(n=m.SKILL_IFNO[t.skillId-1]),this.nameLab.string=t.name,e.next=8,k.loadRes(_.Instance.getSoldierIconPathById(t.id),g);case 8:if(this.icon.spriteFrame=e.sent,!n){e.next=18;break}return e.next=12,k.loadRes("textures/skills/"+t.id,g);case 12:this.skillIcon.spriteFrame=e.sent,this.skillInfoLab.string=n.info,this.skillNameLab.string=n.name,this.skill.active=!0,e.next=19;break;case 18:this.skill.active=!1;case 19:for(this.infoLab.string=t.info,this.refreshStar(t.hp.length),r=[t.hp[this.lev-1],t.attack[this.lev-1],t.duration,t.speed,t.attackR,i.count[this.lev-1]],o=0;o<this.attribute.children.length;o++)this.attribute.children[o].getComponentInChildren(v).string=""+r[o];this.refreshBtn();case 24:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"refreshStar",value:function(e){if(this.stars.children[0].active=!1,this.stars.children[1].active=!1,e>3)this.stars.children[1].getComponentInChildren(v).string=this.lev+"",this.stars.children[1].active=!0;else{for(var t=0;t<this.stars.children[0].children.length;t++)this.stars.children[0].children[t].active=t<this.lev;this.stars.children[0].active=!0}}},{key:"refreshBtn",value:(i=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.loadRes("textures/soldierInfo/"+(1==this.lev?"zuo":"zuo1"),g);case 2:return this.leftBtn.getComponentInChildren(b).spriteFrame=e.sent,e.next=5,k.loadRes("textures/soldierInfo/"+(this.lev<this.maxLev?"you":"you1"),g);case 5:this.rightBtn.getComponentInChildren(b).spriteFrame=e.sent;case 6:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})}]),t}(I)).prototype,"closeBtn",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(A.prototype,"stars",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(A.prototype,"attribute",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(A.prototype,"skill",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(A.prototype,"leftBtn",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=i(A.prototype,"rightBtn",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(A.prototype,"nameLab",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(A.prototype,"infoLab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=i(A.prototype,"skillNameLab",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(A.prototype,"skillInfoLab",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=i(A.prototype,"icon",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(A.prototype,"skillIcon",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=A))||P)),d._RF.pop()}}}));

System.register("chunks:///UI/UISoldiers.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Tools.js","../Core/Event/EventCode.js","../Core/Event/EventBus.js","../Core/View/UIBase.js","../Data/SoldierData.js","./UISoldierCardItem.js","../Data/GuideData.js"],(function(e,t){var r,i,n,o,s,l,a,c,d,u,h,f,p,g,v,m,I,b,C,S,y,k,_,H,B,U,D,w,x,R,L,P,z,j,F,E,N,T,G,K,O,W,A,J,Q,V;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_temp:void 0}),{setters:[function(e){r=e.applyDecoratedDescriptor,i=e.inherits,n=e.classCallCheck,o=e.possibleConstructorReturn,s=e.getPrototypeOf,l=e.initializerDefineProperty,a=e.assertThisInitialized,c=e.createClass,d=e.get,u=e.asyncToGenerator},function(e){h=e.cclegacy,f=e._decorator,p=e.Node,g=e.instantiate,v=e.Prefab,m=e.SpriteFrame,I=e.SpriteComponent,b=e.LabelComponent},function(e){C=e.Tools},function(e){S=e.EventCode},function(e){y=e.default},function(e){k=e.UIBase},function(e){_=e.default},function(e){H=e.UISoldierCardItem},function(e){B=e.default}],execute:function(){h._RF.push({},"22708XPm0FK1aY7QfKWJkHa","UISoldiers",void 0),Q=f.ccclass,V=f.property,e("UISoldiers",(U=Q("UISoldiers"),D=V(p),w=V(p),x=V(p),R=V(p),L=V(p),P=V(p),z=V(p),j=V(p),U((N=r((E=function(e){function t(){var e,r;n(this,t);for(var i=arguments.length,c=new Array(i),d=0;d<i;d++)c[d]=arguments[d];return r=o(this,(e=s(t)).call.apply(e,[this].concat(c))),l(r,"heroScroll",N,a(r)),l(r,"soldierScroll",T,a(r)),l(r,"heroBtn",G,a(r)),l(r,"soldierBtn",K,a(r)),l(r,"heros",O,a(r)),l(r,"unHeros",W,a(r)),l(r,"soldiers",A,a(r)),l(r,"unSoldiers",J,a(r)),r.cardItemPrefab=null,r.isHero=!0,r}var r,h;return i(t,e),c(t,[{key:"start",value:function(){d(s(t.prototype),"start",this).call(this)}},{key:"onEnable",value:function(){this.heroBtn.on("click",this.heroClick,this),this.soldierBtn.on("click",this.soldierClick,this),y.Instance.addListener(S.RefreshUISoldiers,this.refreshUI.bind(this)),this.refreshUI(),this.setIsHero(!0)}},{key:"onDisable",value:function(){y.Instance.removeListener(S.RefreshUISoldiers),this.heroBtn.off("click",this.heroClick,this),this.soldierBtn.off("click",this.soldierClick,this)}},{key:"heroClick",value:function(){this.setIsHero(!0)}},{key:"soldierClick",value:function(){this.setIsHero(!1)}},{key:"refreshUI",value:(h=u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.cardItemPrefab){e.next=4;break}return e.next=3,C.loadRes("ui/UISoldierCardItem",v);case 3:this.cardItemPrefab=e.sent;case 4:this.refreshSoldiers(this.soldiers,_.Instance.getLockSoldiersData()),this.refreshSoldiers(this.unSoldiers,_.Instance.getUnLockSoldiersData()),this.refreshSoldiers(this.heros,_.Instance.getLockHeroData()),this.refreshSoldiers(this.unHeros,_.Instance.getUnLockHeroData());case 8:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"refreshSoldiers",value:function(e,t){for(var r=this,i=t,n=0;n<i.length;n++)if(n<e.children.length)e.children[n].getComponent(H).setId(i[n].id);else{var o=g(this.cardItemPrefab);e.addChild(o),o.getComponent(H).setId(i[n].id)}if(e.children.length>i.length)for(var s=i.length;s<e.children.length;s++)e.children[s].active=!1;this.scheduleOnce((function(){if(r.heros==e){if(!_.Instance.hasCanUpHero())return;for(var t=0;t<e.children.length;t++){var n=e.children[t].getComponent(H);if(n.redPoint.active)return void B.Instance.showClickHeroCard(n.node.getWorldPosition(),i[t].id)}}}),.2)}},{key:"setIsHero",value:(r=u(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isHero=t,this.heroScroll.active=this.isHero,this.soldierScroll.active=!this.isHero,e.next=5,C.loadRes("textures/UISoldiers/"+(this.isHero?"tiao":"tiao1"),m);case 5:return this.heroBtn.getComponent(I).spriteFrame=e.sent,e.next=8,C.loadRes("textures/UISoldiers/"+(this.isHero?"yingxiong":"yingxiong1"),m);case 8:return this.heroBtn.getChildByName("icon").getComponent(I).spriteFrame=e.sent,this.heroBtn.getChildByName("countLab").getComponent(b).string=_.Instance.getLockHeroData().length+"/"+_.Instance.getHerosData().length,e.next=12,C.loadRes("textures/UISoldiers/"+(this.isHero?"tiao1":"tiao"),m);case 12:return this.soldierBtn.getComponent(I).spriteFrame=e.sent,e.next=15,C.loadRes("textures/UISoldiers/"+(this.isHero?"shibing1":"shibing"),m);case 15:this.soldierBtn.getChildByName("icon").getComponent(I).spriteFrame=e.sent,this.soldierBtn.getChildByName("countLab").getComponent(b).string=_.Instance.getLockSoldiersData().length+"/"+_.Instance.getSoldiersData().length;case 17:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}]),t}(k)).prototype,"heroScroll",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=r(E.prototype,"soldierScroll",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=r(E.prototype,"heroBtn",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=r(E.prototype,"soldierBtn",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=r(E.prototype,"heros",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=r(E.prototype,"unHeros",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=r(E.prototype,"soldiers",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=r(E.prototype,"unSoldiers",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=E))||F)),h._RF.pop()}}}));

System.register("chunks:///UI/UITurntable/TurntableBoxItem.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Tools.js","../../Data/SoldierData.js","../../Data/TurntableData.js","../../DataManager.js"],(function(e,t){var n,i,o,r,a,c,s,l,u,d,p,b,h,y,f,I,m,v,g,k,_,x,C,w,B,D,L,T,R,z,A,F,S,j,q;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,o=e.classCallCheck,r=e.possibleConstructorReturn,a=e.getPrototypeOf,c=e.initializerDefineProperty,s=e.assertThisInitialized,l=e.createClass,u=e.asyncToGenerator},function(e){d=e.cclegacy,p=e._decorator,b=e.SpriteComponent,h=e.LabelComponent,y=e.Component,f=e.SpriteFrame,I=e.AnimationComponent},function(e){m=e.Tools},function(e){v=e.default},function(e){g=e.default},function(e){k=e.DataManager}],execute:function(){d._RF.push({},"c0a55zAp21AXJA45l2xeTmG","TurntableBoxItem",void 0),j=p.ccclass,q=p.property,e("TurntableBoxItem",(_=j("TurntableBoxItem"),x=q(b),C=q(b),w=q(b),B=q(h),D=q(h),_((R=n((T=function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return n=r(this,(e=a(t)).call.apply(e,[this].concat(l))),c(n,"icon",R,s(n)),c(n,"quality",z,s(n)),c(n,"soldierIcon",A,s(n)),c(n,"luckyLab",F,s(n)),c(n,"countLab",S,s(n)),n}var n;return i(t,e),l(t,[{key:"onEnable",value:function(){this.icon.node.on("click",this.onClick,this)}},{key:"onDisable",value:function(){this.icon.node.off("click",this.onClick,this)}},{key:"start",value:function(){}},{key:"onClick",value:function(){g.Instance.getBoxIsRewardById(this.id)||g.Instance.Lucky<g.Instance.boxLuckyArr[this.id]||(g.Instance.rewardBoxById(this.id),this.setData(this.id))}},{key:"setData",value:(n=u(regeneratorRuntime.mark((function e(t){var n,i,o,r,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.id=t,n=g.Instance.getBoxIsRewardById(this.id),e.next=4,m.loadRes("textures/turntable/baoxiang"+(n?"1":""),f);case 4:this.icon.spriteFrame=e.sent,!n&&g.Instance.Lucky>=g.Instance.boxLuckyArr[this.id]?(this.icon.node.children[0].active=!0,this.icon.getComponent(I).play()):(this.icon.getComponent(I).stop(),this.icon.node.children[0].active=!1),this.luckyLab.string=g.Instance.boxLuckyArr[t]+"",i=g.Instance.boxReward[this.id][0],o=g.Instance.boxReward[this.id][1],this.countLab.string="+"+o,r=k.instance.getItemConstInfoByID(i),m.loadSpriteFrame(v.Instance.getSoldierSmallIconPathById(r.id),(function(e){a.soldierIcon.spriteFrame=e})),m.loadSpriteFrame("textures/cangku/ck_quality"+r.quality,(function(e){a.quality.spriteFrame=e}));case 13:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}]),t}(y)).prototype,"icon",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(T.prototype,"quality",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(T.prototype,"soldierIcon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(T.prototype,"luckyLab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=n(T.prototype,"countLab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=T))||L)),d._RF.pop()}}}));

System.register("chunks:///UI/UITurntable/UITurntableItem.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Tools.js","../../Data/SoldierData.js","../../DataManager.js"],(function(e,t){var r,n,a,i,o,c,s,u,l,d,p,b,m,f,h,v,g,y,I,_,k,w,T,x,C,D,R,B,S;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0}),{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inherits,a=e.classCallCheck,i=e.possibleConstructorReturn,o=e.getPrototypeOf,c=e.initializerDefineProperty,s=e.assertThisInitialized,u=e.createClass,l=e.asyncToGenerator},function(e){d=e.cclegacy,p=e._decorator,b=e.SpriteComponent,m=e.LabelComponent,f=e.Component,h=e.SpriteFrame},function(e){v=e.Tools},function(e){g=e.default},function(e){y=e.DataManager}],execute:function(){d._RF.push({},"61d1f1kCkRHGbRZ9cVm+Fd4","UITurntableItem",void 0),B=p.ccclass,S=p.property,e("UITurntableItem",(I=B("UITurntableItem"),_=S(b),k=S(b),w=S(m),I((C=r((x=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return r=i(this,(e=o(t)).call.apply(e,[this].concat(u))),c(r,"cardBg",C,s(r)),c(r,"icon",D,s(r)),c(r,"countLab",R,s(r)),r}var r;return n(t,e),u(t,[{key:"start",value:function(){}},{key:"setData",value:(r=l(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.countLab.string="+"+v.numberToStrKM(t.rewardNum),r="",n="",e.t0=t.rewardType,e.next=0===e.t0?6:1===e.t0?8:2===e.t0?10:12;break;case 6:return r="textures/home/home_jinbi",e.abrupt("break",16);case 8:return r="textures/home/home_zuanshi",e.abrupt("break",16);case 10:return r="textures/common/wood",e.abrupt("break",16);case 12:return r=g.Instance.getSoldierSmallIconPathById(t.rewardId),a=y.instance.getItemConstInfoByID(t.rewardId),n="textures/cangku/ck_quality"+a.quality,e.abrupt("break",16);case 16:if(this.cardBg.node.active=""!=n,""==n){e.next=21;break}return e.next=20,v.loadRes(n,h);case 20:this.cardBg.spriteFrame=e.sent;case 21:return e.next=23,v.loadRes(r,h);case 23:this.icon.spriteFrame=e.sent;case 24:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}]),t}(f)).prototype,"cardBg",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=r(x.prototype,"icon",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=r(x.prototype,"countLab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=x))||T)),d._RF.pop()}}}));

System.register("chunks:///UI/UITurntable/UITurntable.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Core/Utils/PlatformUtils.js","../../Tools.js","../../Cfg/TurntableCfg.js","../../Core/Event/EventCode.js","../../Core/Event/EventBus.js","../../Core/View/UIBase.js","../../Core/AdUitls/AdManager.js","../../Core/Utils/SendEventManager.js","../../Data/SoldierData.js","../../Data/TurntableData.js","../../DataManager.js","../../UIOPPONative.js","./TurntableBoxItem.js","./UITurntableItem.js"],(function(e,t){var i,n,r,o,a,s,l,c,u,h,d,f,p,v,g,b,m,I,y,k,C,w,T,B,_,R,x,L,U,N,P,A,O,j,D,S,E,z,F,V,M,W,H,q,G,K,Y,J,Q,X,Z,$,ee,te,ie,ne,re,oe,ae,se;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_dec10:void 0,_dec11:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_descriptor9:void 0,_descriptor10:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inherits,r=e.classCallCheck,o=e.possibleConstructorReturn,a=e.getPrototypeOf,s=e.initializerDefineProperty,l=e.assertThisInitialized,c=e.createClass,u=e.get,h=e.asyncToGenerator},function(e){d=e.cclegacy,f=e._decorator,p=e.Node,v=e.SpriteComponent,g=e.LabelComponent,b=e.director,m=e.Vec3,I=e.Prefab,y=e.instantiate,k=e.SpriteFrame},function(e){C=e.default},function(e){w=e.Tools},function(e){T=e.default},function(e){B=e.EventCode},function(e){_=e.default},function(e){R=e.UIBase},function(e){x=e.default},function(e){L=e.default,U=e.EventId},function(e){N=e.default},function(e){P=e.default},function(e){A=e.DataManager},function(e){O=e.UIOPPONative},function(e){j=e.TurntableBoxItem},function(e){D=e.UITurntableItem}],execute:function(){d._RF.push({},"d028bAEYKxIfoi60+HWL7R4","UITurntable",void 0),ae=f.ccclass,se=f.property,e("UITurntable",(S=ae("UITurntable"),E=se(p),z=se(p),F=se(p),V=se(p),M=se(p),W=se(p),H=se(v),q=se(g),G=se(g),K=se(g),S((Q=i((J=function(e){function t(){var e,i;r(this,t);for(var n=arguments.length,c=new Array(n),u=0;u<n;u++)c[u]=arguments[u];return i=o(this,(e=a(t)).call.apply(e,[this].concat(c))),s(i,"tip",Q,l(i)),s(i,"items",X,l(i)),s(i,"freeBtn",Z,l(i)),s(i,"videoBtn",$,l(i)),s(i,"closeBtn",ee,l(i)),s(i,"boxs",te,l(i)),s(i,"progress",ie,l(i)),s(i,"progressLab",ne,l(i)),s(i,"tipLab",re,l(i)),s(i,"timeLab",oe,l(i)),i.angle=0,i.r_angle=1e3,i.attenuation=100,i.IsRotating=!1,i}var i,d;return n(t,e),c(t,[{key:"onLoad",value:function(){this.createItems()}},{key:"start",value:function(){u(a(t.prototype),"start",this).call(this),this.showNative(),b.getScene().on("CLOSE_NATIVE_AD",this.showNative,this)}},{key:"showNative",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(C.isOppo()||C.isVivo()){A.instance.OPPO_VERSION;if(e||!A.instance.isCanShowNative())C.SceenIsTwoToOne()&&x.showBanner(!0),this.node.getChildByName("UIOPPONative").active=!1;else{var t=this.node.getChildByName("UIOPPONative").getComponent(O);t.node.active=!0,t.showNativeAD()}}else C.SceenIsTwoToOne()&&x.showBanner(!0)}},{key:"onBtnClickNativeAd",value:function(){x.clickNativeAd()}},{key:"update",value:function(e){this.refreshAngle(e),this.refreshButton(),this.refreshBoxTimeLab()}},{key:"onEnable",value:function(){this.freeBtn.on("click",this.onFreeClick,this),this.videoBtn.on("click",this.onVideoClick,this),this.closeBtn.on("click",this.onCloseClick,this),this.node.on("click",this.onClick,this),_.Instance.addListener(B.OnTurntabaleTipShow,this.showTip.bind(this)),P.Instance.refreshLucky(),this.refreshBox(),this.IsRotating=!1,this.angle=0,this.items.eulerAngles=new m,this.refreshUI(),this.hideTip(),A.instance.showInterstitialAd()}},{key:"onDisable",value:function(){this.freeBtn.off("click",this.onFreeClick,this),this.videoBtn.off("click",this.onVideoClick,this),this.closeBtn.off("click",this.onCloseClick,this),this.node.on("click",this.onClick,this),x.showBanner(!1),_.Instance.removeListener(B.OnTurntabaleTipShow)}},{key:"onClick",value:function(){this.hideTip()}},{key:"refreshUI",value:function(){this.progressLab.string=P.Instance.Lucky.toString()+"/20",this.progress.fillRange=P.Instance.Lucky/20}},{key:"refreshBoxTimeLab",value:function(){var e=P.Instance.getReduceBoxTime();if(e<=0)P.Instance.refreshLucky();else{var t=Math.floor(e/86400);if(t>0){var i=e%86400;this.timeLab.string=t+"days "+w.timestampToTime(i)}else this.timeLab.string=w.timestampToTime(e)}}},{key:"refreshBox",value:function(){for(var e=1;e<this.boxs.children.length;e++){var t=this.boxs.children[e];t.getComponent(j).setData(e-1),t.position=new m(P.Instance.boxLuckyArr[e-1]/20*642,0,0)}}},{key:"refreshButton",value:function(){var e=P.Instance.getReduceTime();this.videoBtn.active=e>0,this.freeBtn.active=!this.videoBtn.active,this.tipLab.string=e>0?" Free after "+w.timestampToTime(e):"Free draw is available "}},{key:"onFreeClick",value:function(){A.instance.showAndroidTouch(A.instance.AndroidConfig.rate_truntable),this.startRotate(),P.Instance.refreshT(),L.Instance.sendEvent(U[U.Turntable],{type:"免费"})}},{key:"onVideoClick",value:function(){var e=this;x.createVideo((function(){A.instance.VideoCount++,e.startRotate(),L.Instance.sendEvent(U[U.Turntable],{type:"视频转动"})}))}},{key:"onCloseClick",value:function(){this.node.active=!1}},{key:"startRotate",value:function(){this.IsRotating||(this.IsRotating=!0,this.r_angle=w.getRandomInt(300,600))}},{key:"createItems",value:(d=h(regeneratorRuntime.mark((function e(){var t,i,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.loadRes("ui/UITurnTableItem",I);case 2:for(t=e.sent,i=T.Instance.getData(),n=0;n<12;n++)r=y(t),this.items.addChild(r),r.eulerAngles=new m(0,0,30*-n),r.getComponent(D).setData(i[n]);case 5:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"refreshAngle",value:function(e){this.IsRotating&&(this.angle-=this.r_angle*e,this.r_angle-=this.attenuation*e,this.r_angle<=0&&(this.IsRotating=!1,this.reward()),this.items.eulerAngles=new m(0,0,this.angle))}},{key:"reward",value:function(){var e=this.getRewardId();P.Instance.rewardById(e),this.refreshUI(),this.refreshBox()}},{key:"getRewardId",value:function(){var e=w.getStandardizationAngle(this.angle),t=0;if(e>345&&e<=15)return 0;for(var i=1;i<12;i++){var n=30*i-15;if(e>n&&e<=n+30){t=i;break}}return t}},{key:"showTip",value:(i=h(regeneratorRuntime.mark((function e(t){var i,n,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.boxs.children[t+1].getWorldPosition(),n=this.tip.getWorldPosition(),this.tip.active=!0,r=P.Instance.boxReward[t][0],o=P.Instance.boxReward[t][1],this.tip.getComponentInChildren(g).string="+"+o,a=A.instance.getItemConstInfoByID(r),e.next=9,w.loadRes(N.Instance.getSoldierIconPathById(r),k);case 9:return this.tip.getChildByName("icon").getComponent(v).spriteFrame=e.sent,e.next=12,w.loadRes("textures/recruit/card_"+a.quality,k);case 12:this.tip.getChildByName("bg").getComponent(v).spriteFrame=e.sent,4==t?(this.tip.setWorldPosition(i.x-75,n.y,0),this.tip.getChildByName("dir").position=new m(75,0,0)):(this.tip.setWorldPosition(i.x,n.y,0),this.tip.getChildByName("dir").position=new m(0,0,0));case 14:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"hideTip",value:function(){this.tip.active=!1}}]),t}(R)).prototype,"tip",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=i(J.prototype,"items",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=i(J.prototype,"freeBtn",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=i(J.prototype,"videoBtn",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=i(J.prototype,"closeBtn",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=i(J.prototype,"boxs",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=i(J.prototype,"progress",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=i(J.prototype,"progressLab",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=i(J.prototype,"tipLab",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=i(J.prototype,"timeLab",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=J))||Y)),d._RF.pop()}}}));

System.register("chunks:///UI/UIVictory.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Core/Constants/Constant.js","../Core/Utils/AudioManager.js","../Tools.js","../Cfg/BountyCfg.js","../Cfg/LevelCfg.js","../Core/View/UIBase.js","../Core/AdUitls/AdManager.js","../Core/Utils/SendEventManager.js","../Data/SoldierData.js","../Data/PVPData.js","../Data/BattleData.js","../Data/GameData.js","../Data/BountyData.js","../DataManager.js","../UIOPPONative.js"],(function(e,t){var n,i,a,s,c,o,r,l,d,v,u,h,p,f,I,m,w,y,B,_,b,g,C,k,R,P,V,T,S,E,N,D,A,O,G,L,U,W,j,x,M,z,Q,F,H,Y,J,K,X,q,Z,$,ee,te,ne,ie,ae,se,ce,oe,re;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_dec10:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_descriptor9:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,a=e.classCallCheck,s=e.possibleConstructorReturn,c=e.getPrototypeOf,o=e.initializerDefineProperty,r=e.assertThisInitialized,l=e.createClass,d=e.asyncToGenerator},function(e){v=e.cclegacy,u=e._decorator,h=e.SpriteComponent,p=e.Node,f=e.LabelComponent,I=e.director,m=e.WidgetComponent,w=e.ButtonComponent,y=e.Vec3,B=e.SpriteFrame},function(e){_=e.default},function(e){b=e.default,g=e.GameType,C=e.AudioName},function(e){k=e.AudioManager},function(e){R=e.Tools},function(e){P=e.default},function(e){V=e.default},function(e){T=e.UIBase},function(e){S=e.default},function(e){E=e.default,N=e.EventId},function(e){D=e.default},function(e){A=e.default},function(e){O=e.default},function(e){G=e.default},function(e){L=e.default},function(e){U=e.DataManager},function(e){W=e.UIOPPONative}],execute:function(){v._RF.push({},"70b8bHVPOtODYp9OzctQJ25","UIVictory",void 0),oe=u.ccclass,re=u.property,e("UIVictory",(j=oe("UIVictory"),x=re(h),M=re(p),z=re(p),Q=re(p),F=re(p),H=re(p),Y=re(p),J=re(p),K=re(f),j((Z=n((q=function(e){function t(){var e,n;a(this,t);for(var i=arguments.length,l=new Array(i),d=0;d<i;d++)l[d]=arguments[d];return n=s(this,(e=c(t)).call.apply(e,[this].concat(l))),o(n,"titleIcon",Z,r(n)),o(n,"items",$,r(n)),o(n,"reciveBtn",ee,r(n)),o(n,"wxReciveBtn",te,r(n)),o(n,"reciveBtnWord",ne,r(n)),o(n,"viewReciveBtn",ie,r(n)),o(n,"closeBtn",ae,r(n)),o(n,"multipleReciveBtn",se,r(n)),o(n,"titleLab",ce,r(n)),n.beishu=2,n}var n;return i(t,e),l(t,[{key:"start",value:function(){}},{key:"onEnable",value:function(){switch(this.showWindow(),this.reciveBtn.on("click",this.onReciveClick,this),this.wxReciveBtn.on("click",this.onReciveClick,this),this.reciveBtnWord.on("click",this.onReciveClick,this),this.viewReciveBtn.on("click",this.onViewReciveClick,this),this.closeBtn.on("click",this.onCloseClick,this),this.multipleReciveBtn.on("click",this.onMultipleReciveClick,this),this.beishu=G.Instance.getRewardMultipleNum(),E.Instance.sendEvent(N[N.Settlement],{type:this.getBattleTypeStr(),"name:":"视频领取-出现","bei:":this.beishu}),this.beishu){case 2:g.PVP==G.Instance.GameType?E.Instance.sendEvent(N[N.PVP_Double_appear]):g.Bounty==G.Instance.GameType?E.Instance.sendEvent(N[N.offerReward_appear]):E.Instance.sendEvent(N[N.reward_double_appear]);break;case 3:E.Instance.sendEvent(N[N.reward_three_appear]);break;case 5:E.Instance.sendEvent(N[N.reward_five_appear])}this.refreshUI(),this.onWx(),G.Instance.onRewardMultiple(),this.showNative(),I.getScene().on("CLOSE_NATIVE_AD",this.showNative,this),U.instance.showInterstitialAd()}},{key:"showNative",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=2;if((_.isOppo()||_.isVivo())&&(n=1),(_.isOppo()||_.isVivo())&&G.Instance.Level>n){this.reciveBtn.setPosition(0,-209.591,0),this.reciveBtn.active=!1,this.reciveBtnWord.width=100,this.reciveBtnWord.height=50,this.node.getChildByName("panel").getComponent(m).top=0;var i=this.node.getChildByName("panel").getChildByName("NativeBtn1").getComponent(w),a=this.node.getChildByName("panel").getChildByName("NativeBtn2").getComponent(w);U.instance.OPPO_VERSION;if(t||!U.instance.isCanShowNative())S.showBanner(!0),this.node.getChildByName("UIOPPONative").active=!1,i.node.active=a.node.active=!1,this.multipleReciveBtn.setPosition(150,-204.828,0),this.viewReciveBtn.setPosition(150,-209.591,0),this.reciveBtnWord.setPosition(0,-329,0),this.reciveBtnWord.active=!1,this.reciveBtn.active=!0,this.reciveBtn.setPosition(-150,-209.591,0);else{i.node.active=U.instance.isShowNativeWword_0(),a.node.active=!U.instance.isShowNativeWword_0();var s=i.node.active?i:a;s.node.off("click"),s.node.on("click",this.onBtnClickNativeAd,this),this.multipleReciveBtn.setPosition(0,-204.828,0),this.viewReciveBtn.setPosition(0,-209.591,0),this.reciveBtnWord.setPosition(0,-cc.winSize.height/2+200,0),s.node.setPosition(0,-cc.winSize.height/2+200+62.5+22.5+15,0),U.instance.oppoAdConfig.normal_btn_delay_show_second>0?setTimeout((function(){e.reciveBtnWord.active=!0}),1e3*U.instance.oppoAdConfig.normal_btn_delay_show_second):this.reciveBtnWord.active=!0;var c=this.node.getChildByName("UIOPPONative").getComponent(W);c.node.active=!0,c.showNativeAD(),0==G.Instance.IsVictory&&(this.viewReciveBtn.active=!1,this.multipleReciveBtn.active=!1)}}else this.node.getChildByName("UIOPPONative").active=!1,S.showBanner(!0)}},{key:"onBtnClickNativeAd",value:function(){S.clickNativeAd()}},{key:"onDisable",value:function(){this.reciveBtn.off("click",this.onReciveClick,this),this.wxReciveBtn.off("click",this.onReciveClick,this),this.viewReciveBtn.off("click",this.onViewReciveClick,this),this.closeBtn.off("click",this.onCloseClick,this),this.multipleReciveBtn.on("click",this.onMultipleReciveClick,this),S.showBanner(!1)}},{key:"onMultipleReciveClick",value:function(){var e=this;E.Instance.sendEvent(N[N.Settlement],{"name:":"视频领取-点击","bei:":this.beishu}),S.createVideo((function(){e.reward(e.beishu),e.onCloseClick(),U.instance.VideoCount++}))}},{key:"onReciveClick",value:function(){var e=this,t=function(){e.reward(e.beishu),e.onCloseClick()};if(_.isWx()&&G.Instance.IsVictory&&U.instance.showWxTouch(U.instance.WXConfig.rate_settlement,t,t))return;if(_.isQQ&&G.Instance.IsVictory&&U.instance.showQQTouch(U.instance.QQConfig.rate_settlement,t,t))return;if(_.isTT&&G.Instance.IsVictory&&U.instance.showTTTouch(U.instance.TTConfig.rate_settlement,t,t))return;(U.instance.showAndroidSettleTouch(),this.reward(),this.onCloseClick(),_.isOppo()||_.isVivo())&&(100*Math.random()<=U.instance.oppoAdConfig.normal_btn_show_native&&G.Instance.Level>3&&S.clickNativeAd())}},{key:"onViewReciveClick",value:function(){var e=this;switch(E.Instance.sendEvent(N[N.Settlement],{"name:":"视频双倍领取-出现","bei:":this.beishu}),this.beishu){case 2:g.PVP==G.Instance.GameType?E.Instance.sendEvent(N[N.PVP_Double_click]):g.Bounty==G.Instance.GameType?E.Instance.sendEvent(N[N.offerReward_click]):E.Instance.sendEvent(N[N.reward_double_click]);break;case 3:E.Instance.sendEvent(N[N.reward_three_click]);break;case 5:E.Instance.sendEvent(N[N.reward_five_click])}var t=function(){switch(e.beishu){case 2:g.PVP==G.Instance.GameType?E.Instance.sendEvent(N[N.PVP_Double_clickOk]):g.Bounty==G.Instance.GameType?E.Instance.sendEvent(N[N.offerReward_clickOk]):E.Instance.sendEvent(N[N.reward_double_clickOk]);break;case 3:E.Instance.sendEvent(N[N.reward_three_clickOk]);break;case 5:E.Instance.sendEvent(N[N.reward_five_clickOk])}};S.createVideo((function(){switch(e.reward(2),e.onCloseClick(),U.instance.VideoCount++,e.beishu){case 2:g.PVP==G.Instance.GameType?E.Instance.sendEvent(N[N.PVP_Double_complete]):g.Bounty==G.Instance.GameType?E.Instance.sendEvent(N[N.offerReward_complete]):E.Instance.sendEvent(N[N.reward_double_complete]);break;case 3:E.Instance.sendEvent(N[N.reward_three_complete]);break;case 5:E.Instance.sendEvent(N[N.reward_five_complete])}t()}),t)}},{key:"onCloseClick",value:function(){if((this.node.active=!1,R.cleanUnuseRes(),g.Defense==G.Instance.GameType)&&0==parseInt(localStorage.getItem("Guide_DefenseSuccessTip")||"0"))return void I.loadScene("HomeScene");I.loadScene("BoatScene")}},{key:"reward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;switch(G.Instance.GameType==g.PVP&&(G.Instance.IsVictory?(A.Instance.addSelfCup(e),A.Instance.addMedal(1*e)):A.Instance.reducdeSelfCup()),U.instance.gold+=this.rewardArr[0]*e,U.instance.wood+=this.rewardArr[1]*e,G.Instance.GameType!=g.PVP&&(U.instance.medal+=this.rewardArr[2]*e),U.instance.diamond+=this.rewardArr[3]*e,e>1?E.Instance.sendEvent(N[N.Settlement],{type:this.getBattleTypeStr(),"name:":"视频领取-完成","bei:":this.beishu}):E.Instance.sendEvent(N[N.Settlement],{type:this.getBattleTypeStr(),"name:":"普通领取","bei:":this.beishu}),e){case 1:E.Instance.sendEvent(N[N.reward_normal]);break;case 2:E.Instance.sendEvent(N[N.reward_double_complete]);break;case 3:E.Instance.sendEvent(N[N.reward_three_complete]);break;case 5:E.Instance.sendEvent(N[N.reward_five_complete])}}},{key:"getBattleTypeStr",value:function(){var e="普通关卡";switch(G.Instance.GameType){case g.Game:e="普通关卡",G.Instance.Level;break;case g.Bounty:e="赏金"+P.Instance.getDataByIndex(L.Instance.SelectIndex).desc,L.Instance.getChallengeLv();break;case g.PVP:e="pvp",A.Instance.getPVPVoDataById(b.SelfId).power;break;case g.Defense:e="防守战",D.Instance.getLandPower()}return e}},{key:"refreshUI",value:(n=d(regeneratorRuntime.mark((function e(){var t,n,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=2,_.isOppo()&&(t=1),G.Instance.Level<=t?(this.multipleReciveBtn.active=!1,this.viewReciveBtn.active=!1,this.reciveBtn.active=!0,this.reciveBtn.position=new y(0,this.reciveBtn.position.y)):(this.reciveBtn.position=new y(-150,this.reciveBtn.position.y),n=G.Instance.getRewardMultipleNum(),this.multipleReciveBtn.active=n>2,this.viewReciveBtn.active=2==n,i=this.multipleReciveBtn.getChildByName("countLab").getComponent(f),a=this.multipleReciveBtn.getChildByName("remainLab").getComponent(f),i.string=n.toString(),a.string=G.Instance.getRewardMultipleRemainCount(n).toString()),this.titleLab.string=G.Instance.IsVictory?"VICTORY":"FAIL",s="textures/victory/"+(G.Instance.IsVictory?"1":"2"),e.next=7,R.loadRes(s,B);case 7:this.titleIcon.spriteFrame=e.sent,this.refreshItems(),G.Instance.GameType==g.Game&&G.Instance.IsVictory&&(G.Instance.Level,G.Instance.Level,G.Instance.Level++);case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"refreshItems",value:function(){if(this.rewardArr=[1,1,0,0,0],G.Instance.IsVictory){if(G.Instance.GameType==g.Game){var e=V.Instance.getLevelDataByLevel(O.Instance.BattleLevel);this.rewardArr=[e.coin,e.wood,e.medal,e.gem,0]}else if(G.Instance.GameType==g.Bounty){var t=L.Instance.getRewardData();this.rewardArr=[t[0],t[2],0,t[1],0],L.Instance.addChellengeCount()}else G.Instance.GameType==g.PVP?this.rewardArr=[b.PVPReward,0,1,5,15]:G.Instance.GameType==g.Defense&&(this.rewardArr=[b.DefenseGoldReward,100,2,0,0]);this.rewardArr=G.Instance.RewardData}else G.Instance.GameType==g.PVP&&(this.rewardArr=[1,1,0,0,-3]);k.Instance.playOneShot(G.Instance.IsVictory?C.Success:C.Fail);for(var n=0;n<this.items.children.length;n++){var i=this.items.children[n];i.getChildByName("numLab").getComponent(f).string=R.numberToStrKM(this.rewardArr[n]),i.active=0!=this.rewardArr[n]}}},{key:"onWx",value:function(){var e=this;this.wxReciveBtn.active=!1,_.isWx()&&(G.Instance.Level<5||(this.reciveBtn.active=!1,this.multipleReciveBtn.position=new y(0,this.multipleReciveBtn.position.y),this.viewReciveBtn.position=new y(0,this.viewReciveBtn.position.y),this.scheduleOnce((function(){e.wxReciveBtn.active=!0}),2)))}}]),t}(T)).prototype,"titleIcon",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=n(q.prototype,"items",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=n(q.prototype,"reciveBtn",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=n(q.prototype,"wxReciveBtn",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=n(q.prototype,"reciveBtnWord",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=n(q.prototype,"viewReciveBtn",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=n(q.prototype,"closeBtn",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=n(q.prototype,"multipleReciveBtn",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=n(q.prototype,"titleLab",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=q))||X)),v._RF.pop()}}}));

System.register("chunks:///UI/UIVictoryBox.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/Utils/PlatformUtils.js","../Core/Constants/Constant.js","../Tools.js","../Core/View/UIBase.js","../Core/View/UIManager.js","../Core/AdUitls/AdManager.js","../Core/Utils/SendEventManager.js","../Data/SoldierData.js","../Data/GuideData.js","../Data/StoreData.js","../Data/GameData.js","../DataManager.js","../UIOPPONative.js"],(function(e,t){var n,i,o,a,s,c,r,l,d,h,p,u,v,f,B,y,C,g,w,I,k,m,_,b,O,V,N,x,T,U,D,P,A,E,j,S,L,R,z,M,G,Q,W,H,F,K,X,Y,q,J;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,o=e.classCallCheck,a=e.possibleConstructorReturn,s=e.getPrototypeOf,c=e.initializerDefineProperty,r=e.assertThisInitialized,l=e.createClass},function(e){d=e.cclegacy,h=e._decorator,p=e.Node,u=e.SpriteComponent,v=e.LabelComponent,f=e.director,B=e.ButtonComponent},function(e){y=e.default},function(e){C=e.default,g=e.ViewType,w=e.LayerType},function(e){I=e.Tools},function(e){k=e.UIBase},function(e){m=e.default},function(e){_=e.default},function(e){b=e.default,O=e.EventId},function(e){V=e.default},function(e){N=e.default},function(e){x=e.default},function(e){T=e.default},function(e){U=e.DataManager},function(e){D=e.UIOPPONative}],execute:function(){d._RF.push({},"28a5eLkMmlEQYv/OpVIAnIG","UIVictoryBox",void 0),q=h.ccclass,J=h.property,e("UIVictoryBox",(P=q("UIVictoryBox"),A=J(p),E=J(p),j=J(p),S=J(p),L=J(u),R=J(u),z=J(v),P((Q=n((G=function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,l=new Array(i),d=0;d<i;d++)l[d]=arguments[d];return n=a(this,(e=s(t)).call.apply(e,[this].concat(l))),c(n,"closeBtn",Q,r(n)),c(n,"openBtn",W,r(n)),c(n,"rewardBtn",H,r(n)),c(n,"videoBtn",F,r(n)),c(n,"box",K,r(n)),c(n,"progress",X,r(n)),c(n,"timeLab",Y,r(n)),n}return i(t,e),l(t,[{key:"onLoad",value:function(){this.oppoBtn1=this.node.getChildByName("panel").getChildByName("NativeBtn1"),this.oppoBtn2=this.node.getChildByName("panel").getChildByName("NativeBtn2"),this.oppoBtn3=this.node.getChildByName("panel").getChildByName("NativeBtn3"),this.oppoBtn3.active=!1,this.schedule(this.refreshUI,1)}},{key:"onEnable",value:function(){var e=this;this.showWindow(),this.closeBtn.on("click",this.onCloseClick,this),this.openBtn.on("click",this.onOpenClick,this),this.rewardBtn.on("click",this.onRewardClick,this),this.videoBtn.on("click",this.onVideoClick,this),this.showNative(),f.getScene().on("CLOSE_NATIVE_AD",this.showNative,this),this.refreshUI(),this.scheduleOnce((function(){N.Instance.showVictoryBoxOpen(e.openBtn)}),.71)}},{key:"showNative",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(y.isOppo()||y.isVivo()){U.instance.OPPO_VERSION;var t=this.oppoBtn1.getComponent(B),n=this.oppoBtn2.getComponent(B);if(e||!U.instance.isCanShowNative())_.showBanner(!0),this.node.getChildByName("UIOPPONative").active=!1,t.node.active=n.node.active=!1,this.openBtn.setPosition(0,-268,0),this.oppoBtn3.active=!1;else{_.showBanner(!1),t.node.active=U.instance.isShowNativeWword_0()&&this.openBtn.active,n.node.active=!U.instance.isShowNativeWword_0()&&this.openBtn.active;var i=t.node.active?t:n;i.node.off("click"),i.node.on("click",this.onBtnClickNativeAd,this),i.node.setPosition(145,-268,0),this.openBtn.setPosition(-145,-268,0),this.oppoBtn3.active=!0,this.oppoBtn3.off("click"),this.oppoBtn3.on("click",this.onBtnClickNativeAd,this);var o=this.node.getChildByName("UIOPPONative").getComponent(D);o.node.active=!0,o.showNativeAD()}}else _.showBanner(!0)}},{key:"onBtnClickNativeAd",value:function(){_.clickNativeAd()}},{key:"onDisable",value:function(){this.closeBtn.off("click",this.onCloseClick,this),this.openBtn.off("click",this.onOpenClick,this),this.rewardBtn.off("click",this.onRewardClick,this),this.videoBtn.off("click",this.onVideoClick,this),_.showBanner(!1)}},{key:"onCloseClick",value:function(){this.node.active=!1}},{key:"onOpenClick",value:function(){this.reward(),b.Instance.sendEvent(O[O.VictoryBox],{type:"首页右上角宝箱打开"}),b.Instance.sendEvent(O[O.boxOpen_gem]),U.instance.showWxTouch(U.instance.WXConfig.rate_pass_level),U.instance.showQQTouch(U.instance.QQConfig.rate_pass_level),U.instance.showTTTouch(U.instance.TTConfig.rate_pass_level),U.instance.showAndroidTouch(U.instance.AndroidConfig.rate_victory_box)}},{key:"onRewardClick",value:function(){var e=T.Instance.getOpenVictortBoxDiamondCount();U.instance.diamond<e?I.ShowTip("Not enough gems"):(b.Instance.sendEvent(O[O.VictoryBox],{type:"首页右上角宝箱宝石打开"}),U.instance.diamond-=e,this.reward())}},{key:"onVideoClick",value:function(){var e=this;b.Instance.sendEvent(O[O.boxOpen_Ad_click]),b.Instance.sendEvent(O[O.VictoryBox],{type:"首页右上角宝箱视频打开-点击"}),_.createVideo((function(){U.instance.VideoCount++,e.reward(),b.Instance.sendEvent(O[O.VictoryBoxVideoOpen]),b.Instance.sendEvent(O[O.boxOpen_Ad_complete]),b.Instance.sendEvent(O[O.boxOpen_Ad_clickOk]),b.Instance.sendEvent(O[O.VictoryBox],{type:"首页右上角宝箱视频打开-完成"})}),(function(){b.Instance.sendEvent(O[O.boxOpen_Ad_clickOk])}))}},{key:"reward",value:function(){if(0==parseInt(localStorage.getItem("Guide_VictoryBoxOpen")||"0")){T.Instance.congratulationsId.add(201),V.Instance.addHeroById(201),m.Instance.showView(g.UICongratulations,w.TOP)}else x.Instance.rewardHeroGit();T.Instance.addVictoryBoxCount(-1),N.Instance.guideVictoryBoxOpen(),this.onCloseClick()}},{key:"refreshUI",value:function(){var e=T.Instance.getOpenVictoryBoxReduceTime(),t=0==parseInt(localStorage.getItem("Guide_VictoryBoxOpen")||"0"),n=e<=0||t;n&&!this.openBtn.active&&this.showNative(),n?(this.rewardBtn.active=!1,this.videoBtn.active=!1,this.openBtn.active=!0,this.timeLab.node.parent.active=!1):(this.rewardBtn.active=!0,this.videoBtn.active=!0,this.openBtn.active=!1,this.timeLab.node.parent.active=!0,this.timeLab.string=I.timestampToTime(e),this.rewardBtn.getComponentInChildren(v).string=I.numberToStrKM(T.Instance.getOpenVictortBoxDiamondCount())),this.progress.fillRange=1-e/C.VictoryBoxRewardTime,this.progress.node.parent.active=e>0&&!t}}]),t}(k)).prototype,"closeBtn",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=n(G.prototype,"openBtn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=n(G.prototype,"rewardBtn",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(G.prototype,"videoBtn",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=n(G.prototype,"box",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=n(G.prototype,"progress",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=n(G.prototype,"timeLab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=G))||M)),d._RF.pop()}}}));

System.register("chunks:///UI/UIWoodEnough.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/View/UIBase.js","../Core/AdUitls/AdManager.js"],(function(e,o){var n,t,i,r,c,s,l,a,u,d,h,p,f,v,g,y,k,B,C,_,b,w,I;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inherits,i=e.classCallCheck,r=e.possibleConstructorReturn,c=e.getPrototypeOf,s=e.initializerDefineProperty,l=e.assertThisInitialized,a=e.createClass},function(e){u=e.cclegacy,d=e._decorator,h=e.Node,p=e.director},function(e){f=e.UIBase},function(e){v=e.default}],execute:function(){u._RF.push({},"47b14HdrKFCG5BNqjnn4oSu","UIWoodEnough",void 0),w=d.ccclass,I=d.property,e("UIWoodEnough",(g=w("UIWoodEnough"),y=I(h),k=I(h),g((_=n((C=function(e){function o(){var e,n;i(this,o);for(var t=arguments.length,a=new Array(t),u=0;u<t;u++)a[u]=arguments[u];return n=r(this,(e=c(o)).call.apply(e,[this].concat(a))),s(n,"closeBtn",_,l(n)),s(n,"goBtn",b,l(n)),n}return t(o,e),a(o,[{key:"start",value:function(){}},{key:"onEnable",value:function(){this.showWindow(),this.closeBtn.on("click",this.onCloseClick,this),this.goBtn.on("click",this.onGoCLick,this),v.showBanner(!0)}},{key:"onDisable",value:function(){v.showBanner(!1)}},{key:"onCloseClick",value:function(){this.node.active=!1}},{key:"onGoCLick",value:function(){p.loadScene("BoatScene")}}]),o}(f)).prototype,"closeBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=n(C.prototype,"goBtn",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=C))||B)),u._RF.pop()}}}));

System.register("chunks:///UI/UIWxMoreGamePanel.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Core/View/UIBase.js","../Core/AdUitls/AdManager.js"],(function(e,t){var i,o,n,s,l,c,r,a,u,h,f,d,p,C,k,v,y,_,m,I;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,o=e.inherits,n=e.classCallCheck,s=e.possibleConstructorReturn,l=e.getPrototypeOf,c=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createClass},function(e){u=e.cclegacy,h=e._decorator,f=e.Node},function(e){d=e.UIBase},function(e){p=e.default}],execute:function(){u._RF.push({},"5464bEIkJ1CZpmyq18Zq626","UIWxMoreGamePanel",void 0),m=h.ccclass,I=h.property,e("UIWxMoreGamePanel",(C=m("UIWxMoreGamePanel"),k=I(f),C((_=i((y=function(e){function t(){var e,i;n(this,t);for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];return i=s(this,(e=l(t)).call.apply(e,[this].concat(a))),c(i,"closeBtn",_,r(i)),i}return o(t,e),a(t,[{key:"start",value:function(){}},{key:"onEnable",value:function(){this.node.on("click",this.onCloseClick,this),this.closeBtn.on("click",this.onCloseClick,this)}},{key:"onDisable",value:function(){this.node.off("click",this.onCloseClick,this),this.closeBtn.off("click",this.onCloseClick,this),p.showJuZhenCustomAd(!1)}},{key:"onCloseClick",value:function(){this.node.active=!1}}]),t}(d)).prototype,"closeBtn",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=y))||v)),u._RF.pop()}}}));

System.register("chunks:///UI/pvp/UIPVPItem.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Core/Constants/Constant.js","../../Tools.js","../../Data/SoldierData.js"],(function(e,t){var r,n,a,i,o,s,c,l,u,p,d,b,f,h,m,v,k,_,g,y,I,w,L,P,C,x,z,D,R,S,U,F,T,j,V;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_temp:void 0}),{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inherits,a=e.classCallCheck,i=e.possibleConstructorReturn,o=e.getPrototypeOf,s=e.initializerDefineProperty,c=e.assertThisInitialized,l=e.createClass,u=e.asyncToGenerator},function(e){p=e.cclegacy,d=e._decorator,b=e.SpriteComponent,f=e.LabelComponent,h=e.Component,m=e.SpriteFrame},function(e){v=e.default},function(e){k=e.Tools},function(e){_=e.default}],execute:function(){p._RF.push({},"d7a13uXFrpKDpUS/DVE1Pnw","UIPVPItem",void 0),j=d.ccclass,V=d.property,e("UIPVPItem",(g=j("UIPVPItem"),y=V(b),I=V(b),w=V(f),L=V(f),P=V(f),C=V(f),g((D=r((z=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return r=i(this,(e=o(t)).call.apply(e,[this].concat(l))),s(r,"icon",D,c(r)),s(r,"rankIcon",R,c(r)),s(r,"nameLab",S,c(r)),s(r,"powerLab",U,c(r)),s(r,"medalLab",F,c(r)),s(r,"rankLab",T,c(r)),r}var r;return n(t,e),l(t,[{key:"start",value:function(){}},{key:"setData",value:function(e){this.data=e,this.refreshUI()}},{key:"refreshUI",value:(r=u(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.data.id==v.SelfId,e.next=3,k.loadRes("textures/common/"+(t?"blue":"red"),m);case 3:return this.icon.spriteFrame=e.sent,e.next=6,k.loadRes("textures/pvp/"+(t?"2":"1"),m);case 6:if(this.node.getComponent(b).spriteFrame=e.sent,this.nameLab.string=this.data.name,this.rankLab.string=this.data.rank+"",!(this.data.rank<=3)){e.next=18;break}return e.next=12,k.loadRes("textures/pvp/rank_"+this.data.rank,m);case 12:this.rankIcon.spriteFrame=e.sent,this.rankLab.node.active=!1,this.rankIcon.node.active=!0,e.next=20;break;case 18:this.rankLab.node.active=!0,this.rankIcon.node.active=!1;case 20:this.medalLab.string=k.numberToStrKM(this.data.cup),r=this.data.power,t&&(r=_.Instance.getBluePower()),this.powerLab.string=k.numberToStrKM(r);case 24:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}]),t}(h)).prototype,"icon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=r(z.prototype,"rankIcon",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=r(z.prototype,"nameLab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=r(z.prototype,"powerLab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=r(z.prototype,"medalLab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=r(z.prototype,"rankLab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=z))||x)),p._RF.pop()}}}));

System.register("chunks:///UI/pvp/UIPVP.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Core/Utils/PlatformUtils.js","../../Core/Constants/Constant.js","../../Tools.js","../../Core/View/UIBase.js","../../Core/AdUitls/AdManager.js","../../Core/Utils/SendEventManager.js","../../Data/SoldierData.js","../../Data/StoreData.js","../../Data/PVPData.js","../../DataManager.js","./UIPVPItem.js"],(function(e,t){var n,i,o,a,s,r,c,l,h,u,d,f,p,v,g,I,C,P,b,k,y,B,x,m,V,_,w,D,S,T,U,E,j,z,R,M,A,N,L,F,H,O,q,G,W,J,K,Q,X,Y,Z,$;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_dec10:void 0,_dec11:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_descriptor9:void 0,_descriptor10:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,o=e.classCallCheck,a=e.possibleConstructorReturn,s=e.getPrototypeOf,r=e.initializerDefineProperty,c=e.assertThisInitialized,l=e.createClass},function(e){h=e.cclegacy,u=e._decorator,d=e.Node,f=e.SpriteComponent,p=e.LabelComponent,v=e.instantiate,g=e.Vec3},function(e){I=e.default},function(e){C=e.default},function(e){P=e.Tools},function(e){b=e.UIBase},function(e){k=e.default},function(e){y=e.default,B=e.EventId},function(e){x=e.default},function(e){m=e.default},function(e){V=e.default},function(e){_=e.DataManager},function(e){w=e.UIPVPItem}],execute:function(){h._RF.push({},"0986cH9aPVHg6Ntd6koPGU3","UIPVP",void 0),Z=u.ccclass,$=u.property,e("UIPVP",(D=Z("UIPVP"),S=$(d),T=$(d),U=$(d),E=$(d),j=$(d),z=$(d),R=$(f),M=$(p),A=$(p),N=$(w),D((H=n((F=function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,l=new Array(i),h=0;h<i;h++)l[h]=arguments[h];return n=a(this,(e=s(t)).call.apply(e,[this].concat(l))),r(n,"closeBtn",H,c(n)),r(n,"shareBtn",O,c(n)),r(n,"challengeBtn",q,c(n)),r(n,"videoBtn",G,c(n)),r(n,"box",W,c(n)),r(n,"content",J,c(n)),r(n,"progress",K,c(n)),r(n,"progresLab",Q,c(n)),r(n,"countLab",X,c(n)),r(n,"selfItem",Y,c(n)),n.boxTip=null,n.page=0,n.t=0,n.index=0,n}return i(t,e),l(t,[{key:"onLoad",value:function(){this.boxTip=this.node.getChildByName("boxTip")}},{key:"start",value:function(){}},{key:"onEnable",value:function(){this.closeBtn.on("click",this.onCloseClick,this),this.shareBtn.on("click",this.onShareClick,this),this.challengeBtn.on("click",this.onChallengeClick,this),this.videoBtn.on("click",this.onVideoClick,this),this.box.on("click",this.onBoxClick,this),this.content.parent.parent.on("touch-up",this.callback,this),this.refreshUI(),this.refreshBoxTip()}},{key:"onDisable",value:function(){this.closeBtn.off("click",this.onCloseClick,this),this.shareBtn.off("click",this.onShareClick,this),this.challengeBtn.off("click",this.onChallengeClick,this),this.videoBtn.off("click",this.onVideoClick,this),this.box.off("click",this.onBoxClick,this),this.content.parent.parent.off("touch-up",this.callback,this)}},{key:"onCloseClick",value:function(){this.hide()}},{key:"onVideoClick",value:function(){var e=this;y.Instance.sendEvent(B[B.PVP],{type:"竞技场视频加挑战次数-点击"}),y.Instance.sendEvent(B[B.PVP_Ad_click]),k.createVideo((function(){y.Instance.sendEvent(B[B.PVP],{type:"竞技场视频加挑战次数-完成"}),y.Instance.sendEvent(B[B.PVP_Ad_complete]),_.instance.VideoCount++,V.Instance.ChallengeCount=C.ChallengeMaxCount,e.refreshBotton(),y.Instance.sendEvent(B[B.PVP_Ad_clickOk]),y.Instance.pvpAddChallengeCount()}),(function(){y.Instance.sendEvent(B[B.PVP_Ad_clickOk])}))}},{key:"onChallengeClick",value:function(){if(0!=_.instance.getBoatItems().length){y.Instance.sendEvent(B[B.PVP],{type:"免费挑战"}),y.Instance.sendEvent(B[B.PVP_free]);var e=V.Instance.getNearPVPVoDataDataByRank(V.Instance.getPVPVoDataById(C.SelfId).rank,5);V.Instance.ChallengeId=e[P.getRandomInt(0,e.length-1)].id}else P.ShowTip("No available units")}},{key:"onBoxClick",value:function(){if(V.Instance.PvpBoxCount<=0)return this.boxTip.active=!this.boxTip.active,void P.ShowTip("Win in arena to open the chest");m.Instance.rewardHeroGit(),V.Instance.addPvpBoxCount(-1),V.Instance.refreshPvpBoxHeroId(),this.refreshUI()}},{key:"hide",value:function(){this.node.active=!1}},{key:"refreshUI",value:function(){V.Instance.resetRefreshPVPCupTime();var e=V.Instance.Medal%C.PVPVictoryBoxMedal;this.progress.fillRange=e/C.PVPVictoryBoxMedal,this.progresLab.string=e+"/"+C.PVPVictoryBoxMedal,this.refreshBox(),this.refreshRank(),this.selfItem.setData(V.Instance.getPVPVoDataById(C.SelfId)),this.refreshBotton(),this.shareBtn.active=I.isWx()}},{key:"refreshBotton",value:function(){this.videoBtn.active=0==V.Instance.ChallengeCount,this.challengeBtn.active=V.Instance.ChallengeCount>0,this.countLab.string=V.Instance.ChallengeCount+"",this.videoBtn.active&&(y.Instance.sendEvent(B[B.PVP],{type:"竞技场视频加挑战次数-出现"}),y.Instance.sendEvent(B[B.PVP_Ad_appear]))}},{key:"refreshBox",value:function(){var e=V.Instance.PvpBoxCount;this.box.getChildByName("boxCountTxt").getComponent(p).string=e+"";for(var t=0;t<this.box.children.length;t++){this.box.children[t].active=e>0}}},{key:"refreshRank",value:function(){for(var e=V.Instance.getPVPDatasByStartIndexAndCount(10*this.page,10),t=0;t<e.length;t++){var n=void 0;if(t>=this.content.children.length){var i=v(this.selfItem.node);this.content.addChild(i),n=i.getComponent(w)}else n=this.content.children[t].getComponent(w);n.setData(e[t])}}},{key:"callback",value:function(e){var t=e.getScrollOffset().y,n=e.getMaxScrollOffset().y;t<-30&&this.page>0&&(this.page--,this.refreshRank()),t>n+30&&this.page<Math.floor(V.Instance.pvpVoData.length/10)&&(this.page++,this.refreshRank(),e.setContentPosition(new g(0,0,0)))}},{key:"onShareClick",value:function(){var e=this;window.wx&&(this.t=(new Date).getTime(),P.share(),y.Instance.sendEvent(B[B.RankShare]),_.instance.IsShare||(wx.onShow((function(){if((new Date).getTime()-e.t>=1e3){if(_.instance.IsShare)return;_.instance.IsShare=!0,_.instance.wood+=1e3}})),y.Instance.sendEvent(B[B.PVP_share]),this.videoBtn.active&&y.Instance.sendEvent(B[B.PVP],{type:"竞技场炫耀按钮点击"})))}},{key:"refreshBoxTip",value:function(){var e=this,t=x.Instance.getDrawHeroData();this.boxTip.active=!0;var n=this.boxTip.getChildByName("quality").getComponent(f),i=this.boxTip.getChildByName("soldierIcon").getComponent(f),o=this.boxTip.getChildByName("labs"),a=t[this.index].id,s=_.instance.getItemConstInfoByID(a);P.loadSpriteFrame(x.Instance.getSoldierSmallIconPathById(s.id),(function(e){i.spriteFrame=e})),P.loadSpriteFrame("textures/cangku/ck_quality"+s.quality,(function(e){n.spriteFrame=e}));for(var r=0;r<o.children.length;r++){var c=s.quality-1==r;o.children[r].active=c,o.children[r].getComponent(p).string=s.name}this.scheduleOnce((function(){e.index++,e.index>=t.length&&(e.index=0),e.refreshBoxTip()}),2)}}]),t}(b)).prototype,"closeBtn",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(F.prototype,"shareBtn",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=n(F.prototype,"challengeBtn",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(F.prototype,"videoBtn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=n(F.prototype,"box",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=n(F.prototype,"content",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=n(F.prototype,"progress",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=n(F.prototype,"progresLab",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=n(F.prototype,"countLab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=n(F.prototype,"selfItem",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=F))||L)),h._RF.pop()}}}));

System.register("chunks:///UI/store/ExchangeCardItem.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Core/Constants/Constant.js","../../Tools.js","../../Core/View/UIManager.js","../../Core/AdUitls/AdManager.js","../../Core/Utils/SendEventManager.js","../../Data/SoldierData.js","../../Data/GuideData.js","../../Data/StoreData.js","../../Data/GameData.js","../../DataManager.js"],(function(e,t){var n,a,i,r,o,s,d,c,l,h,u,p,f,v,I,m,g,y,w,b,k,C,D,E,_,B,G,A,O,S,R,x,V,F,T,W,L,j,M,U,z,P,N,H,q,K,Q,J,X,Y,Z;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,a=e.inherits,i=e.classCallCheck,r=e.possibleConstructorReturn,o=e.getPrototypeOf,s=e.initializerDefineProperty,d=e.assertThisInitialized,c=e.createClass,l=e.asyncToGenerator},function(e){h=e.cclegacy,u=e._decorator,p=e.Node,f=e.LabelComponent,v=e.SpriteComponent,I=e.Component,m=e.SpriteFrame},function(e){g=e.default,y=e.ExChangeType,w=e.ViewType,b=e.LayerType},function(e){k=e.Tools},function(e){C=e.default},function(e){D=e.default},function(e){E=e.default,_=e.EventId},function(e){B=e.default},function(e){G=e.default},function(e){A=e.default},function(e){O=e.default},function(e){S=e.DataManager}],execute:function(){h._RF.push({},"c02ba3k1QpDwqm6mqvE4h9u","ExchangeCardItem",void 0),Y=u.ccclass,Z=u.property,e("ExchangeCardItem",(R=Y("ExchangeCardItem"),x=Z(p),V=Z(f),F=Z(p),T=Z(p),W=Z(p),L=Z(p),j=Z(v),M=Z(f),R((P=n((z=function(e){function t(){var e,n;i(this,t);for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=r(this,(e=o(t)).call.apply(e,[this].concat(c))),s(n,"wood",P,d(n)),s(n,"countLab",N,d(n)),s(n,"cardBg",H,d(n)),s(n,"freeBtn",q,d(n)),s(n,"rewardBtn",K,d(n)),s(n,"videoBtn",Q,d(n)),s(n,"icon",J,d(n)),s(n,"nameLab",X,d(n)),n}var n;return a(t,e),c(t,[{key:"start",value:function(){}},{key:"onEnable",value:function(){this.rewardBtn.on("click",this.onRewardClick,this),this.videoBtn.on("click",this.onVideoClick,this),this.freeBtn.on("click",this.onFreeClick,this)}},{key:"onDisable",value:function(){this.rewardBtn.off("click",this.onRewardClick,this),this.videoBtn.off("click",this.onVideoClick,this),this.freeBtn.off("click",this.onFreeClick,this)}},{key:"guideStoreExchangeBtn",value:function(){G.Instance.showStoreExchangeBtn(this.freeBtn)}},{key:"onRewardClick",value:function(){if(!this.data.isReward){switch(this.data.type){case y.DAIMOND:if(S.instance.diamond<this.data.num)return void(S.instance.DailyDaimondCount>0?C.Instance.showView(w.UIDailyDaimond,b.TOP):C.Instance.showView(w.UIDaimondEnough,b.TOP));S.instance.diamond-=this.data.num;break;case y.GOLD:if(S.instance.gold<this.data.num)return void(S.instance.DailyGoldCount>0?C.Instance.showView(w.UIDailyGold,b.TOP):C.Instance.showView(w.UIGoldEnough,b.TOP));S.instance.gold-=this.data.num}switch(this.reward(),this.data.type){case y.GOLD:g.WoodId!=this.data.id&&E.Instance.sendEvent(_[_.storeCoinGetArm_complete]);break;case y.DAIMOND:g.WoodId==this.data.id?E.Instance.sendEvent(_[_.storeGemGetWood_complete]):E.Instance.sendEvent(_[_.storeGemGetArm_complete]);break;case y.VIDEO:}}}},{key:"onVideoClick",value:function(){var e=this;if(!this.data.isReward){switch(E.Instance.storeEvent("神秘兑换-点击",this.getTypeStr(),this.getContentStr()),this.data.type){case y.VIDEO:g.WoodId==this.data.id?E.Instance.sendEvent(_[_.storeAdGetWood_click]):this.data.id<200?E.Instance.sendEvent(_[_.storeAdGetArm_click]):E.Instance.sendEvent(_[_.storeAdGetHero_click])}var t=function(){switch(e.data.type){case y.VIDEO:g.WoodId==e.data.id?E.Instance.sendEvent(_[_.storeAdGetWood_clickOk]):e.data.id<200?E.Instance.sendEvent(_[_.storeAdGetArm_clickOk]):E.Instance.sendEvent(_[_.storeAdGetHero_clickOk])}};D.createVideo((function(){switch(S.instance.VideoCount++,e.reward(),e.data.type){case y.VIDEO:g.WoodId==e.data.id?E.Instance.sendEvent(_[_.storeAdGetWood_complete]):e.data.id<200?E.Instance.sendEvent(_[_.storeAdGetArm_complete]):E.Instance.sendEvent(_[_.storeAdGetHero_complete])}t()}),t)}}},{key:"onFreeClick",value:function(){this.data.isReward||(G.Instance.guideStoreExchangeBtn(),this.reward(),this.refreshFireBtn(),E.Instance.sendEvent(_[_.storeGetFree]))}},{key:"refreshFireBtn",value:function(){this.freeBtn.getChildByName("redPoint").active=!this.data.isReward}},{key:"reward",value:function(){g.WoodId==this.data.id?S.instance.wood+=this.data.count:(B.Instance.addCardById(this.data.id),O.Instance.congratulationsId.add(this.data.id),C.Instance.showView(w.UICongratulations,b.TOP)),this.data.isReward=!0,A.Instance.saveExChangeDatas(),this.refreshUI(),this.data.isReward||E.Instance.storeEvent("神秘兑换-完成",this.getTypeStr(),this.getContentStr())}},{key:"getTypeStr",value:function(){var e="";switch(this.data.type){case y.DAIMOND:e="钻石兑换";break;case y.GOLD:e="金币兑换";break;case y.FREE:e="免费兑换";break;case y.VIDEO:e="视频兑换"}return e}},{key:"getContentStr",value:function(){var e="";if(g.WoodId==this.data.id)e="木材";else{var t=S.instance.getItemConstInfoByID(this.data.id);t&&(e=t.name)}return e}},{key:"setData",value:function(e){switch(this.data=e,this.refreshUI(),E.Instance.storeEvent("神秘兑换-出现",this.getTypeStr(),this.getContentStr()),this.data.type){case y.GOLD:g.WoodId!=this.data.id&&E.Instance.sendEvent(_[_.storeCoinGetArm_appear]);break;case y.DAIMOND:g.WoodId==this.data.id?E.Instance.sendEvent(_[_.storeGemGetWood_appear]):E.Instance.sendEvent(_[_.storeGemGetArm_appear]);break;case y.VIDEO:g.WoodId==this.data.id?E.Instance.sendEvent(_[_.storeAdGetWood_appear]):this.data.id<200?E.Instance.sendEvent(_[_.storeAdGetArm_appear]):E.Instance.sendEvent(_[_.storeAdGetHero_appear])}}},{key:"refreshUI",value:(n=l(regeneratorRuntime.mark((function e(){var t,n,a,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.data.id,g.WoodId!=this.data.id){e.next=9;break}k.loadSpriteFrame("textures/recruit/card_1",(function(e){i.node.getComponent(v).spriteFrame=e})),this.icon.node.active=!1,this.nameLab.node.active=!1,this.wood.active=!0,this.countLab.string=k.numberToStrKM(this.data.count),e.next=19;break;case 9:return n=S.instance.getItemConstInfoByID(t),a=B.Instance.getSoldierInfoById(t),k.loadSpriteFrame("textures/recruit/card_"+n.quality,(function(e){i.node.getComponent(v).spriteFrame=e})),e.next=14,k.loadRes(B.Instance.getSoldierIconPathById(t),m);case 14:this.icon.spriteFrame=e.sent,this.nameLab.string=a.name,this.icon.node.active=!0,this.nameLab.node.active=!0,this.wood.active=!1;case 19:if(this.videoBtn.active=this.data.type==y.VIDEO,this.freeBtn.active=this.data.type==y.FREE,this.rewardBtn.active=this.data.type==y.GOLD||this.data.type==y.DAIMOND,!this.rewardBtn.active){e.next=27;break}return this.rewardBtn.children[0].getComponentInChildren(f).string=k.numberToStrKM(this.data.num),e.next=26,k.loadRes("textures/home/"+(this.data.type==y.DAIMOND?"home_zuanshi":"home_jinbi"),m);case 26:this.rewardBtn.children[0].getComponentInChildren(v).spriteFrame=e.sent;case 27:this.videoBtn.getComponent(v).grayscale=this.data.isReward,this.freeBtn.getComponent(v).grayscale=this.data.isReward,this.rewardBtn.getComponent(v).grayscale=this.data.isReward,this.cardBg.active=this.data.isReward,this.freeBtn.active&&this.scheduleOnce((function(){i.guideStoreExchangeBtn()}),0),this.refreshFireBtn();case 33:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})}]),t}(I)).prototype,"wood",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(z.prototype,"countLab",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=n(z.prototype,"cardBg",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=n(z.prototype,"freeBtn",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=n(z.prototype,"rewardBtn",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=n(z.prototype,"videoBtn",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=n(z.prototype,"icon",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=n(z.prototype,"nameLab",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=z))||U)),h._RF.pop()}}}));

System.register("chunks:///UI/store/StoreCardItem.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Core/Constants/Constant.js","../../Core/View/UIManager.js","../../Core/AdUitls/AdManager.js","../../Core/Utils/SendEventManager.js","../../Data/StoreData.js","../../DataManager.js"],(function(e,t){var n,i,o,r,a,s,c,l,d,u,f,h,p,v,y,C,m,I,k,g,D,S,_,b,w,B,E,j,H;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,o=e.classCallCheck,r=e.possibleConstructorReturn,a=e.getPrototypeOf,s=e.initializerDefineProperty,c=e.assertThisInitialized,l=e.createClass},function(e){d=e.cclegacy,u=e._decorator,f=e.Node,h=e.Component},function(e){p=e.ViewType,v=e.LayerType},function(e){y=e.default},function(e){C=e.default},function(e){m=e.default,I=e.EventId},function(e){k=e.default},function(e){g=e.DataManager}],execute:function(){d._RF.push({},"8e61dSvSEZKsJ50yfoKbRH3","StoreCardItem",void 0),j=u.ccclass,H=u.property,e("StoreCardItem",(D=j("StoreCardItem"),S=H(f),_=H(f),D((B=n((w=function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,l=new Array(i),d=0;d<i;d++)l[d]=arguments[d];return n=r(this,(e=a(t)).call.apply(e,[this].concat(l))),s(n,"soldierBtn",B,c(n)),s(n,"heroBtn",E,c(n)),n.daimond=100,n}return i(t,e),l(t,[{key:"start",value:function(){}},{key:"onEnable",value:function(){this.soldierBtn.on("click",this.onSoldierClick,this),this.heroBtn.on("click",this.onHeroClick,this)}},{key:"onDisable",value:function(){this.soldierBtn.off("click",this.onSoldierClick,this),this.heroBtn.off("click",this.onHeroClick,this)}},{key:"onSoldierClick",value:function(){g.instance.diamond<this.daimond?g.instance.DailyDaimondCount>0?y.Instance.showView(p.UIDailyDaimond,v.TOP):y.Instance.showView(p.UIDaimondEnough,v.TOP):(g.instance.diamond-=this.daimond,k.Instance.rewardSoldierGit(),m.Instance.storeEvent("超值礼包","士兵卡包",""),m.Instance.sendEvent(I[I.storeBuyArm]))}},{key:"onHeroClick",value:function(){C.createVideo((function(){g.instance.VideoCount++,k.Instance.rewardHeroGit(),m.Instance.storeEvent("超值礼包","英雄卡包",""),m.Instance.sendEvent(I[I.storeBuyHero])}))}}]),t}(h)).prototype,"soldierBtn",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(w.prototype,"heroBtn",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=w))||b)),d._RF.pop()}}}));

System.register("chunks:///UI/store/StoreDailyItem.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Tools.js","../../Core/AdUitls/AdManager.js","../../Core/Utils/SendEventManager.js","../../DataManager.js"],(function(e,n){var t,i,o,r,a,c,s,l,d,u,f,v,m,p,h,k,b,g,_,y,I,C,E,G,D,B,S,j,L,z,M;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_temp:void 0}),{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inherits,o=e.classCallCheck,r=e.possibleConstructorReturn,a=e.getPrototypeOf,c=e.initializerDefineProperty,s=e.assertThisInitialized,l=e.createClass},function(e){d=e.cclegacy,u=e._decorator,f=e.Node,v=e.LabelComponent,m=e.Component},function(e){p=e.Tools},function(e){h=e.default},function(e){k=e.default,b=e.EventId},function(e){g=e.DataManager}],execute:function(){d._RF.push({},"07aefrB9ppEFITNEUObfj6Y","StoreDailyItem",void 0),z=u.ccclass,M=u.property,e("StoreDailyItem",(_=z("StoreDailyItem"),y=M(f),I=M(f),C=M(v),E=M(v),_((B=t((D=function(e){function n(){var e,t;o(this,n);for(var i=arguments.length,l=new Array(i),d=0;d<i;d++)l[d]=arguments[d];return t=r(this,(e=a(n)).call.apply(e,[this].concat(l))),c(t,"goldBtn",B,s(t)),c(t,"daimondBtn",S,s(t)),c(t,"goldLab",j,s(t)),c(t,"daimondLab",L,s(t)),t.gold=2e3,t.daimond=40,t}return i(n,e),l(n,[{key:"start",value:function(){this.refreshUI()}},{key:"onEnable",value:function(){this.goldBtn.on("click",this.onGoldClick,this),this.daimondBtn.on("click",this.onDaimondClick,this)}},{key:"onDisable",value:function(){this.goldBtn.off("click",this.onGoldClick,this),this.daimondBtn.off("click",this.onDaimondClick,this)}},{key:"refreshUI",value:function(){this.goldLab.string="+"+p.numberToStrKM(this.gold),this.daimondLab.string="+"+p.numberToStrKM(this.daimond)}},{key:"onGoldClick",value:function(){var e=this;k.Instance.sendEvent(b[b.storeGetCoin_click]),k.Instance.storeEvent("免费","视频领金币-点击",""),h.createVideo((function(){g.instance.VideoCount++,g.instance.gold+=e.gold,k.Instance.sendEvent(b[b.storeGetCoin_complete]),k.Instance.sendEvent(b[b.storeGetCoin_clickOk]),k.Instance.storeEvent("免费","视频领金币-完成","")}),(function(){k.Instance.sendEvent(b[b.storeGetCoin_clickOk])}))}},{key:"onDaimondClick",value:function(){var e=this;k.Instance.sendEvent(b[b.storeGetGem_click]),k.Instance.storeEvent("免费","视频领宝石-点击",""),h.createVideo((function(){g.instance.VideoCount++,g.instance.diamond+=e.daimond,k.Instance.storeEvent("免费","视频领宝石-完成",""),k.Instance.sendEvent(b[b.storeGetGem_clickOk]),k.Instance.sendEvent(b[b.storeGetGem_complete])}),(function(){k.Instance.sendEvent(b[b.storeGetGem_clickOk])}))}}]),n}(m)).prototype,"goldBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(D.prototype,"daimondBtn",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(D.prototype,"goldLab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(D.prototype,"daimondLab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=D))||G)),d._RF.pop()}}}));

System.register("chunks:///UI/store/StoreExchangeItem.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Core/AdUitls/AdManager.js","../../Core/Utils/SendEventManager.js","../../Data/StoreData.js","../../DataManager.js","./ExchangeCardItem.js"],(function(e,n){var t,r,s,i,o,a,c,h,l,f,d,u,v,C,p,g,I,E,k,_,R,y,m,b,x,B,D,A,S,j,w;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0}),{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inherits,s=e.classCallCheck,i=e.possibleConstructorReturn,o=e.getPrototypeOf,a=e.initializerDefineProperty,c=e.assertThisInitialized,h=e.createClass},function(e){l=e.cclegacy,f=e._decorator,d=e.Node,u=e.LabelComponent,v=e.SpriteComponent,C=e.Component},function(e){p=e.default},function(e){g=e.default,I=e.EventId},function(e){E=e.default},function(e){k=e.DataManager},function(e){_=e.ExchangeCardItem}],execute:function(){l._RF.push({},"23177bybDFMRqkynwt3wEEj","StoreExchangeItem",void 0),j=f.ccclass,w=f.property,e("StoreExchangeItem",(R=j("StoreExchangeItem"),y=w(d),m=w(d),b=w(d),R((D=t((B=function(e){function n(){var e,t;s(this,n);for(var r=arguments.length,h=new Array(r),l=0;l<r;l++)h[l]=arguments[l];return t=i(this,(e=o(n)).call.apply(e,[this].concat(h))),a(t,"refreshBtn",D,c(t)),a(t,"cards",A,c(t)),a(t,"videoBtn",S,c(t)),t}return r(n,e),h(n,[{key:"start",value:function(){}},{key:"onEnable",value:function(){this.refreshBtn.on("click",this.onRefreshClick,this),this.videoBtn.on("click",this.onVideoClick,this),this.refreshUI()}},{key:"onDisable",value:function(){this.refreshBtn.off("click",this.onRefreshClick,this),this.videoBtn.off("click",this.onVideoClick,this)}},{key:"onVideoClick",value:function(){var e=this;g.Instance.sendEvent(I[I.storeAdRefresh_click]),p.createVideo((function(){k.instance.VideoCount++,E.Instance.refreshExchangeData(),e.refreshUI(),g.Instance.sendEvent(I[I.storeAdRefresh_complete]),g.Instance.storeEvent("神秘兑换","视频刷新",""),g.Instance.sendEvent(I[I.storeAdRefresh_clickOk]),k.instance.VideoCount++}),(function(){g.Instance.sendEvent(I[I.storeAdRefresh_clickOk])}))}},{key:"onRefreshClick",value:function(){0!=E.Instance.ExChangeRefreshCount&&(k.instance.showAndroidTouch(k.instance.AndroidConfig.rate_store_refresh),E.Instance.ExChangeRefreshCount--,E.Instance.refreshExchangeData(),this.refreshUI(),g.Instance.storeEvent("神秘兑换","免费刷新",""),g.Instance.sendEvent(I[I.storeFreeRefresh]))}},{key:"refreshUI",value:function(){for(var e=0;e<this.cards.children.length;e++)this.cards.children[e].getComponent(_).setData(E.Instance.ExChangeDatas[e]);this.refreshBtn.getComponentInChildren(u).string="REFRESH ("+E.Instance.ExChangeRefreshCount+")",this.refreshBtn.getComponent(v).grayscale=0==E.Instance.ExChangeRefreshCount,this.videoBtn.active=0==E.Instance.ExChangeRefreshCount,this.refreshBtn.active=E.Instance.ExChangeRefreshCount>0,this.videoBtn.active&&g.Instance.sendEvent(I[I.storeAdRefresh_appear])}}]),n}(C)).prototype,"refreshBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(B.prototype,"cards",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(B.prototype,"videoBtn",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=B))||x)),l._RF.pop()}}}));

System.register("chunks:///UI/store/UIStore.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../Core/Constants/Constant.js","../../Core/Event/EventCode.js","../../Core/Event/EventBus.js","../../Core/View/UIBase.js","../../Core/View/UIManager.js","../../Core/Utils/SendEventManager.js","../../Data/TurntableData.js"],(function(t,e){var n,o,i,r,c,s,a,l,u,d,h,p,f,v,C,y,g,k,w,I,b,m,B,E,_,S,T,D,U,j,x,V,z,L,P,N;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0}),{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inherits,i=t.classCallCheck,r=t.possibleConstructorReturn,c=t.getPrototypeOf,s=t.initializerDefineProperty,a=t.assertThisInitialized,l=t.createClass,u=t.get},function(t){d=t.cclegacy,h=t._decorator,p=t.Node,f=t.MaskComponent,v=t.ScrollViewComponent,C=t.Vec2,y=t.UITransformComponent},function(t){g=t.ViewType,k=t.LayerType},function(t){w=t.EventCode},function(t){I=t.default},function(t){b=t.UIBase},function(t){m=t.default},function(t){B=t.default,E=t.EventId},function(t){_=t.default}],execute:function(){d._RF.push({},"fd944p8AxNGGIIXd0jrxclb","UIStore",void 0),P=h.ccclass,N=h.property,t("UIStore",(S=P("UIStore"),T=N(p),D=N(p),U=N(p),S((V=n((x=function(t){function e(){var t,n;i(this,e);for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];return n=r(this,(t=c(e)).call.apply(t,[this].concat(l))),s(n,"content",V,a(n)),s(n,"setBtn",z,a(n)),s(n,"drawBtn",L,a(n)),n}return o(e,t),l(e,[{key:"start",value:function(){u(c(e.prototype),"start",this).call(this),this.content.parent.getComponent(f).inverted=!1}},{key:"onEnable",value:function(){I.Instance.addListener(w.StoreScrollToExchange,this.scrollToExchange.bind(this)),this.setBtn.on("click",this.onSetClick,this),this.drawBtn.on("click",this.onDrawClick,this)}},{key:"onDisable",value:function(){I.Instance.removeListener(w.StoreScrollToExchange),this.setBtn.off("click",this.onSetClick,this),this.drawBtn.off("click",this.onDrawClick,this)}},{key:"update",value:function(){this.refreshDrawBtn()}},{key:"onSetClick",value:function(){}},{key:"onDrawClick",value:function(){m.Instance.showView(g.UITurntable,k.PANEL),B.Instance.storeEvent("商店去抽奖按钮点击","",""),B.Instance.sendEvent(E[E.storeGoLucky])}},{key:"refreshDrawBtn",value:function(){var t=_.Instance.getReduceTime();this.drawBtn.getChildByName("redPoint").active=0==t}},{key:"scrollToExchange",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?this.content.parent.parent.getComponent(v).scrollTo(new C(0,(1e3-this.content.children[1].position.y)/this.content.getComponent(y).height)):this.content.parent.parent.getComponent(v).scrollTo(new C(0,(this.content.position.y-400)/this.content.getComponent(y).height))}}]),e}(b)).prototype,"content",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(x.prototype,"setBtn",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(x.prototype,"drawBtn",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=x))||j)),d._RF.pop()}}}));

System.register("chunks:///UIBuilding.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Core/Constants/Constant.js","./Tools.js","./Config.js","./Core/Event/EventCode.js","./Core/Event/EventBus.js","./Core/View/UIManager.js","./Core/Utils/SendEventManager.js","./Data/BuildData.js","./Data/GuideData.js","./DataManager.js","./HomeScene.js"],(function(e,n){var t,i,o,a,s,r,c,l,u,d,g,h,f,p,m,y,C,I,v,B,k,b,w,M,U,S,T,D,_,E,x,N,j,H,O,R,L,P,W,F,V;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inherits,o=e.classCallCheck,a=e.possibleConstructorReturn,s=e.getPrototypeOf,r=e.initializerDefineProperty,c=e.assertThisInitialized,l=e.createClass,u=e.asyncToGenerator},function(e){d=e.cclegacy,g=e._decorator,h=e.ScrollViewComponent,f=e.director,p=e.MaskComponent,m=e.tween,y=e.Vec3,C=e.Component,I=e.SpriteComponent,v=e.LabelComponent,B=e.ButtonComponent,k=e.SpriteFrame},function(e){b=e.ViewType,w=e.LayerType},function(e){M=e.Tools},function(e){U=e.BUILDING_INFO,S=e.HOME_MATRIX},function(e){T=e.EventCode},function(e){D=e.default},function(e){_=e.default},function(e){E=e.default},function(e){x=e.default},function(e){N=e.default},function(e){j=e.DataManager},function(e){H=e.HomeScene}],execute:function(){d._RF.push({},"e675cSg7yhEnJShXUmCiWB5","UIBuilding",void 0),F=g.ccclass,V=g.property,e("UIBuilding",(O=F("UIBuilding"),R=V(h),O((W=t((P=function(e){function n(){var e,t;o(this,n);for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return t=a(this,(e=s(n)).call.apply(e,[this].concat(l))),r(t,"scr",W,c(t)),t}var t;return i(n,e),l(n,[{key:"onLoad",value:function(){f.getScene().emit("HIDE_HOME_BOTTOM",!0),f.getScene().on("UIBUILDING_REFRESH",this.refreshUI,this),this.fitUI(),this.refreshUI()}},{key:"onEnable",value:function(){D.Instance.pos(T.RefreshWxCustomAd)}},{key:"fitUI",value:function(){this.node.getChildByName("Bottom").setPosition(0,-cc.winSize.height/2,0),this.scr.view.getComponent(p).inverted=!1}},{key:"onBtnCloseClick",value:function(){f.getScene().emit("HIDE_HOME_BOTTOM",!1);var e=function(){this.node.removeFromParent(),this.node.destroy()}.bind(this);m(this.node).by(.1,{position:new y(0,-500,0)}).call(e).start()}},{key:"refreshUI",value:function(){this.refreshBuildingInfo();for(var e=1;e<=5;e++){var n=this.scr.content.getChildByName("Cell"+e);this.initCellByIndex(n,e-1)}}},{key:"refreshBuildingInfo",value:function(){for(var e=[],n=[],t=[],i=j.instance.getMainHouseLv(),o=0;o<U.length;o++){for(var a=U[o],s=j.instance.getItemsCountByID(a.id),r=0,c=0;c<a.unlock.length;c++)i>=a.unlock[c]&&(r=a.counts[c]);s<r?e.push(a):a.counts[a.counts.length-1]==s?t.push(a):n.push(a)}if(n.length>1)for(var l=0;l<n.length;l++)for(var u=x.Instance.hasIsBuilingById(n[l].id)?1:0,d=1;d<n.length;d++){if((x.Instance.hasIsBuilingById(n[d].id)?1:0)>u){var g=n[l];n[l]=n[d],n[d]=g;break}}this.buildingInfo=e.concat(n).concat(t)}},{key:"initCellByIndex",value:(t=u(regeneratorRuntime.mark((function e(n,t){var i,o,a,s,r,c,l,u,d,g,h,f,p,m,y,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=this.buildingInfo[t],o=j.instance.getItemsCountByID(i.id),a=j.instance.getMainHouseLv(),s=0,r=0;r<i.unlock.length;r++)a>=i.unlock[r]&&(s=i.counts[r]);return c=n.getChildByName("TimeIcon").getComponent(I),l=n.getChildByName("Word").getComponent(I),u=n.getChildByName("Icon").getComponent(I),d=n.getChildByName("Name").getComponent(v),g=n.getChildByName("Time").getComponent(v),h=n.getChildByName("Count").getComponent(v),f=n.getChildByName("Tip").getComponent(v),p=n.getChildByName("BtnBuy").getComponent(B),m=p.node.getChildByName("Count").getComponent(v),e.next=16,M.loadRes("textures/building/build_"+i.id,k);case 16:if(u.spriteFrame=e.sent,d.string=i.name,g.string=0==i.time?"0s":Math.floor(i.time/60)+"m",h.string=Math.floor(o)+"/"+Math.floor(s),m.string=M.numberToStrKM(i.price),0==p.clickEvents.length&&M.addClickEvent(this.node,p,"onBtnBuyClick","UIBuilding",t.toString()),0!=s){e.next=30;break}c.grayscale=!0,l.grayscale=!0,u.grayscale=!0,p.node.active=!1,f.string="Unlock at Base\nCamp Lv"+Math.floor(i.unlock[0]),e.next=58;break;case 30:if(!(o>=s)){e.next=52;break}if(c.grayscale=!0,l.grayscale=!0,u.grayscale=!0,p.node.active=!1,f.node.active=!0,!(a>=i.unlock[i.unlock.length-1])){e.next=40;break}f.string="The purchase has reached the upper limit",e.next=50;break;case 40:y=0,C=0;case 42:if(!(C<i.unlock.length)){e.next=49;break}if(!(i.unlock[C]>a)){e.next=46;break}return y=i.unlock[C],e.abrupt("break",49);case 46:C++,e.next=42;break;case 49:f.string="Unlock at Base\nCamp Lv"+Math.floor(y);case 50:e.next=57;break;case 52:c.grayscale=!1,l.grayscale=!1,u.grayscale=!1,p.node.active=!0,f.node.active=!1;case 57:6==i.id&&N.Instance.showBuildWall(n.getChildByName("BtnBuy"));case 58:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"onBtnBuyClick",value:function(e,n){for(var t=this,i=parseInt(n),o=this.buildingInfo[i],a=j.instance.getItemsCountByID(o.id),s=j.instance.getMainHouseLv(),r=0,c=0;c<o.unlock.length;c++)s>=o.unlock[c]&&(r=o.counts[c]);if(0==r);else if(a>=r);else if(j.instance.wood>=o.price){var l=o.id,u=j.instance.getItemConstInfoByID(l);if(!H.instance.findPutMatrix(u.type,u.width,u.height,S))return void M.ShowTip("No place to place");j.instance.wood-=o.price,1==l&&(l=M.getRandomInt(1,2));var d=j.instance.generateSid();6==o.id&&N.Instance.guideBuildWall(d),H.instance.createBuild(d,l,0,0),E.Instance.building("建造:"+o.name,0),M.ShowTip("Recruit Successful"),this.scheduleOnce((function(){t.refreshUI()}),0)}else j.instance.DailyWoodCount>0?_.Instance.showView(b.UIDailyWood,w.TOP):_.Instance.showView(b.UIWoodEnough,w.TOP)}}]),n}(C)).prototype,"scr",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=P))||L)),d._RF.pop()}}}));

System.register("chunks:///UICangkuWindow.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Tools.js","./DataManager.js"],(function(e,t){var i,a,n,o,s,r,c,l,d,h,u,g,y,C,m,v,B;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){i=e.inherits,a=e.classCallCheck,n=e.possibleConstructorReturn,o=e.getPrototypeOf,s=e.createClass,r=e.asyncToGenerator},function(e){c=e.cclegacy,l=e._decorator,d=e.Component,h=e.Prefab,u=e.instantiate,g=e.LabelComponent},function(e){y=e.Tools},function(e){C=e.DataManager}],execute:function(){c._RF.push({},"fa9c0QIrl1Bs42V03npQzLJ","UICangkuWindow",void 0),B=l.ccclass,l.property,e("UICangkuWindow",(m=B("UICangkuWindow"),m(v=function(e){function t(){var e,i;a(this,t);for(var s=arguments.length,r=new Array(s),c=0;c<s;c++)r[c]=arguments[c];return(i=n(this,(e=o(t)).call.apply(e,[this].concat(r)))).cb=null,i}var c;return i(t,e),s(t,[{key:"init",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.cb=t;var n=this.node.getChildByName("Middle");0==e?n.getChildByName("hc").active=!0:1==e?n.getChildByName("sq").active=!0:2==e&&this.initUI(i,a)}},{key:"initUI",value:(c=r(regeneratorRuntime.mark((function e(t,i){var a,n,o,s,r,c,l,d,m,v,B,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.node.getChildByName("Middle"),(n=a.getChildByName("cs")).active=!0,o=n.getChildByName("Cell"),e.next=6,y.loadRes("ui/Cell_Cangku",h);case 6:if(s=e.sent,this&&this.node&&this.node.parent){for(r=u(s),o.addChild(r),c=C.instance.getItemConstInfoByID(t),l=c.quality,d=1;d<=5;d++)r.getChildByName("ck_quality"+d).active=d==l;if(i>2){for(m=1;m<=3;m++)r.getChildByName("star"+m).active=!1;v=r.getChildByName("starBG"),B=v.getChildByName("Label").getComponent(g),v.active=!0,B.string=Math.floor(i+1).toString()}else{for(r.getChildByName("starBG").active=!1,f=1;f<=3;f++)r.getChildByName("star"+f).active=!0;0==i?(r.getChildByName("star2").active=!1,r.getChildByName("star3").active=!1,r.getChildByName("star1").setPosition(0,42,0)):1==i?(r.getChildByName("star1").setPosition(-15,42,0),r.getChildByName("star2").setPosition(15,42,0),r.getChildByName("star3").active=!1):(r.getChildByName("star3").setPosition(0,42,0),r.getChildByName("star3").setPosition(-30,42,0),r.getChildByName("star3").setPosition(30,42,0))}r.getChildByName("ck_icon101").active=101==t,r.getChildByName("ck_icon102").active=102==t,r.getChildByName("ck_icon103").active=103==t,r.getChildByName("ck_icon104").active=104==t}case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"onBtnOkClick",value:function(){this.cb("ok"),this.destroyMine()}},{key:"onBtnCancelClick",value:function(){this.cb("cancel"),this.destroyMine()}},{key:"destroyMine",value:function(){this.node.removeFromParent(),this.node.destroy()}}]),t}(d))||v)),c._RF.pop()}}}));

System.register("chunks:///UICangKu.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Core/Constants/Constant.js","./Core/Utils/AudioManager.js","./Tools.js","./Config.js","./Core/Event/EventCode.js","./Core/Event/EventBus.js","./Core/View/UIManager.js","./Core/Utils/SendEventManager.js","./Data/GuideData.js","./Data/GameData.js","./DataManager.js","./HomeScene.js","./BoatScene.js","./UICangkuWindow.js"],(function(e,t){var n,i,o,a,s,c,r,h,u,l,d,f,g,C,v,p,I,m,y,k,S,T,B,b,w,M,U,x,E,N,R,_,D,L,P,G,O,A,H,j,K,z,W,V,Z,F,q,X,Y,J,Q,$;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,o=e.classCallCheck,a=e.possibleConstructorReturn,s=e.getPrototypeOf,c=e.initializerDefineProperty,r=e.assertThisInitialized,h=e.createClass,u=e.asyncToGenerator},function(e){l=e.cclegacy,d=e._decorator,f=e.Node,g=e.ScrollViewComponent,C=e.director,v=e.MaskComponent,p=e.instantiate,I=e.UITransformComponent,m=e.Vec3,y=e.Vec2,k=e.tween,S=e.Component,T=e.Prefab,B=e.LabelComponent,b=e.SpriteFrame,w=e.SpriteComponent},function(e){M=e.AudioName,U=e.TeamType,x=e.ViewType},function(e){E=e.AudioManager},function(e){N=e.Tools},function(e){R=e.CANGKU_POSY,_=e.HOME_MATRIX},function(e){D=e.EventCode},function(e){L=e.default},function(e){P=e.default},function(e){G=e.default},function(e){O=e.default,A=e.GuideId},function(e){H=e.default},function(e){j=e.DataManager},function(e){K=e.HomeScene},function(e){z=e.BoatScene},function(e){W=e.UICangkuWindow}],execute:function(){l._RF.push({},"ab541+4D7dEAoN7eP6AyKnj","UICangKu",void 0),Q=d.ccclass,$=d.property,e("UICangKu",(V=Q("UICangKu"),Z=$(f),F=$(g),V((Y=n((X=function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,h=new Array(i),u=0;u<i;u++)h[u]=arguments[u];return n=a(this,(e=s(t)).call.apply(e,[this].concat(h))),c(n,"closeBtn",Y,r(n)),c(n,"scr",J,r(n)),n.cangkuType=0,n.sortType=0,n.cangkuInfo=[],n.touchTimer=0,n.moveDis=0,n}var n,l,d,f,g;return i(t,e),h(t,[{key:"onLoad",value:function(){C.getScene().emit("HIDE_HOME_BOTTOM",!0),C.getScene().on("HIDE_CANGKU",this.destroyMine,this),C.getScene().on("CANGKU_REFRESH",this.refreshCangku,this),C.getScene().on("TOUCHSTART_SOLDIER",this.onTouchStartSoldier,this),C.getScene().on("TOUCHMOVE_SOLDIER",this.onTouchMoveSoldier,this),C.getScene().on("TOUCHEND_SOLDIER",this.onTouchEndSoldier,this),this.scr.node.on("touch-start",this.touchCellStart,this),this.scr.node.on("touch-move",this.touchCellMove,this),this.scr.node.on("touch-end",this.touchCellEnd,this),this.scr.node.on("touch-cancel",this.touchCellEnd,this),this.node.getChildByName("Bottom").getChildByName("Sort").on("touch-end",this.onTouchSortClick,this),this.fitUI()}},{key:"onEnable",value:function(){L.Instance.addListener(D.ShowCloseCangKuGuide,this.showCloseCangKuGuide.bind(this)),L.Instance.pos(D.RefreshWxCustomAd)}},{key:"onDisable",value:function(){L.Instance.removeListener(D.ShowCloseCangKuGuide)}},{key:"showCloseCangKuGuide",value:function(){O.Instance.showCloseCangKu(this.closeBtn)}},{key:"fitUI",value:function(){this.node.getChildByName("Bottom").setPosition(0,-cc.winSize.height/2,0),this.scr.view.getComponent(v).inverted=!1}},{key:"initCangku",value:(g=u(regeneratorRuntime.mark((function e(t){var n,i,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.cangkuType=t,this.cellPrefab){e.next=8;break}return e.next=4,N.loadRes("ui/Cell_Cangku",T);case 4:this.cellPrefab=e.sent,this.copyCard=p(this.cellPrefab),this.node.addChild(this.copyCard),this.copyCard.active=!1;case 8:if(this&&this.node&&this.node.parent){if(this.cangkuInfo=[],0==this.cangkuType)for(n=0;n<j.instance.homeInfo.length;n++)0==(i=j.instance.homeInfo[n]).matrix.length&&this.cangkuInfo.push(i);else for(o=0;o<j.instance.homeInfo.length;o++)0==(a=j.instance.homeInfo[o]).boatMatrix.length&&a.id>100&&this.cangkuInfo.push(a);this.sortCangkuInfo(),this.refreshCells()}case 9:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"sortCangkuInfo",value:function(){0==this.sortType?this.cangkuInfo=this.cangkuInfo.sort((function(e,t){return e.id>t.id?-1:e.id==t.id&&e.lv>t.lv?-1:1})):this.cangkuInfo=this.cangkuInfo.sort((function(e,t){return e.lv>t.lv?-1:e.lv==t.lv&&e.id>t.id?-1:1}))}},{key:"refreshCells",value:function(){this.scr.content.removeAllChildren();for(var e=0;e<this.cangkuInfo.length;e++){var t=this.cangkuInfo[e],n=p(this.cellPrefab);this.scr.content.addChild(n),this.initCellByInfo(n,t);var i=e%6*110-295,o=-87-110*Math.floor(e/6);n.setPosition(i,o,0)}var a=70+110*Math.ceil(this.cangkuInfo.length/6);this.scr.content.height=a}},{key:"initCellByInfo",value:(f=u(regeneratorRuntime.mark((function e(t,n){var i,o,a,s,c,r,h,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.name=""+n.sid,i=j.instance.getItemConstInfoByID(n.id),o=i.quality,a=1;a<=5;a++)t.getChildByName("ck_quality"+a).active=a==o;if(n.lv>2){for(s=1;s<=3;s++)t.getChildByName("star"+s).active=!1;c=t.getChildByName("starBG"),r=c.getChildByName("Label").getComponent(B),c.active=!0,r.string=Math.floor(n.lv+1).toString()}else{for(t.getChildByName("starBG").active=!1,h=1;h<=3;h++)t.getChildByName("star"+h).active=!0;0==n.lv?(t.getChildByName("star2").active=!1,t.getChildByName("star3").active=!1,t.getChildByName("star1").setPosition(0,42,0)):1==n.lv?(t.getChildByName("star1").setPosition(-15,42,0),t.getChildByName("star2").setPosition(15,42,0),t.getChildByName("star3").active=!1):(t.getChildByName("star3").setPosition(0,42,0),t.getChildByName("star3").setPosition(-30,42,0),t.getChildByName("star3").setPosition(30,42,0))}return e.next=7,N.loadRes("textures/soldierIcom/icon_"+n.id,b);case 7:t.getChildByName("icon").getComponent(w).spriteFrame=e.sent,u=t.getChildByName("upIcon"),t.getChildByName("heroTip").active=n.id>200,u.active=j.instance.isCanUpById(n.id,n.lv);case 11:case"end":return e.stop()}}),e)}))),function(e,t){return f.apply(this,arguments)})},{key:"update",value:function(e){if(this.touch&&(this.touchTimer+=e,this.touchTimer>=.15&&!this.copyCard.active)){for(var t=null,n=0;n<this.scr.content.children.length;n++){var i=this.scr.content.children[n],o=i.getComponent(I).convertToWorldSpaceAR(m.ZERO);if(Math.abs(o.x-this.touch.touch.getUILocation().x)<45&&Math.abs(o.y-this.touch.touch.getUILocation().y)<45){t=i;break}}if(t){this.touchCard=t;var a=parseInt(t.name),s=t.getComponent(I).convertToWorldSpaceAR(m.ZERO),c=j.instance.getItemInfoBySid(a);this.initCellByInfo(this.copyCard,c),this.copyCard.active=!0,this.copyCard.setPosition(s.x+10-cc.winSize.width/2,s.y+10-cc.winSize.height/2,0),this.scr.enabled=!1,0==this.cangkuType?K.instance.initTempItem(c.id,c.sid,c.lv):z.instance.initTempItem(c.id,c.sid,c.lv)}else this.touch=null}}},{key:"touchCellStart",value:function(e){this.touch=e,this.touchCard=null,this.touchTimer=0,this.moveDis=0,this.refreshClickCardInfo()}},{key:"touchCellMove",value:function(e){if(!(y.distance(e.getLocation(),e.getStartLocation())<10)){if(this.touch=null,this.touchCard){var t=e.touch.getUILocation();this.copyCard.active=t.y<=R,this.copyCard.setPosition(t.x+10-cc.winSize.width/2,t.y+10-cc.winSize.height/2,0),0==this.cangkuType?K.instance.moveTempItem(e.touch):z.instance.moveTempItem(e.touch)}this.moveDis+=Math.abs(e.getDeltaX())+Math.abs(e.getDeltaY())}}},{key:"touchCellEnd",value:function(e){if(console.log("celle end"),this.touchCard){if(0==this.cangkuType?K.instance.endTempItem(e.touch):z.instance.endTempItem(e.touch),this.copyCard&&this.copyCard.active){for(var t=null,n=0;n<this.scr.content.children.length;n++){var i=this.scr.content.children[n],o=i.getComponent(I).convertToWorldSpaceAR(m.ZERO);if(Math.abs(o.x-e.touch.getUILocation().x)<45&&Math.abs(o.y-e.touch.getUILocation().y)<45){t=i;break}}if(t){var a=parseInt(this.copyCard.name),s=parseInt(t.name),c=j.instance.getItemInfoBySid(a),r=j.instance.getItemInfoBySid(s);if(c.sid!=r.sid&&c.lv==r.lv&&c.id==r.id&&c.lv<10){var h=j.instance.getBarracks(),u=j.instance.getBuildUpInfoById(h.id).type[1][h.lv]-1;if(c.lv>=u){var l=j.instance.getBarrackLvBySynthLv(u+1)+1;N.ShowTip("Merge after Barracks Lv "+l)}else{c.lv++;for(var d=0;d<j.instance.homeInfo.length;d++)if(j.instance.homeInfo[d].sid==s){j.instance.homeInfo.splice(d,1);break}this.hecheng(),j.instance.saveHomeInfo()}}}else Math.abs(695-e.touch.getUILocation().x)<20&&Math.abs(80-e.touch.getUILocation().y)<20&&this.dropCard()}this.refreshCangku()}this.refreshClickCardEndInfo(),this.touch=null,this.touchCard=null,this.copyCard.active=!1,this.scr.enabled=!0,this.onCardItemClick()}},{key:"onBtnCloseClick",value:function(){O.Instance.TmpGuideId!=A.ShangZhen?(O.Instance.guideCloseCangKu(),this.destroyMine()):N.ShowTip("In Guiding")}},{key:"dropCard",value:(d=u(regeneratorRuntime.mark((function e(){var t,n,i,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(this.copyCard.name),n=j.instance.getItemInfoBySid(t),i=n.id,o=n.lv,a=function(e){if("ok"==e){for(var n=0;n<j.instance.homeInfo.length;n++)if(j.instance.homeInfo[n].sid==t){j.instance.homeInfo.splice(n,1);break}j.instance.saveHomeInfo(),N.ShowTip("Unit dismissed"),this.refreshCangku()}}.bind(this),e.next=7,N.ShowUI("ui/UICangkuWindow",this.node.parent);case 7:e.sent.getComponent(W).init(2,a,i,o);case 10:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"destroyMine",value:function(){C.getScene().emit("HIDE_HOME_BOTTOM",!1);var e=function(){this.node.removeFromParent(),this.node.destroy()}.bind(this);k(this.node).by(.1,{position:new m(0,-500,0)}).call(e).start()}},{key:"onTouchSortClick",value:function(){if(O.Instance.TmpGuideId==A.None){if(this.cellPrefab){this.sortType=0==this.sortType?1:0;var e=this.node.getChildByName("Bottom").getChildByName("Sort");e.getChildByName("ck_sort0").active=0==this.sortType,e.getChildByName("ck_sort1").active=1==this.sortType,this.refreshCangku()}}else N.ShowTip("In Guiding")}},{key:"onTouchStartSoldier",value:function(e){var t=j.instance.getItemInfoBySid(e.sid);this.initCellByInfo(this.copyCard,t)}},{key:"onTouchMoveSoldier",value:function(e,t){var n=t.getUILocation();e.node.active=n.y>R,this.copyCard.active=!e.node.active,this.copyCard.setPosition(n.x-cc.winSize.width/2,n.y-cc.winSize.height/2,0)}},{key:"onTouchEndSoldier",value:function(){this.copyCard.active=!1,this.refreshCangku()}},{key:"onBtnRecoverClick",value:(l=u(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O.Instance.TmpGuideId==A.None){e.next=3;break}return N.ShowTip("In Guiding"),e.abrupt("return");case 3:return t=function(e){"ok"==e&&(0==this.cangkuType?K.instance.recoverAllSoldier():z.instance.recoverAllSoldier(),this.refreshCangku())}.bind(this),e.next=6,N.ShowUI("ui/UICangkuWindow",this.node.parent);case 6:e.sent.getComponent(W).init(1,t);case 9:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"onBtnMergeClick",value:(n=u(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O.Instance.TmpGuideId!=A.ShangZhen){e.next=3;break}return N.ShowTip("In Guiding"),e.abrupt("return");case 3:return t=function(e){"ok"==e&&(this._mergeSoldier(),this.refreshCangku(),N.ShowTip("Merge Successful"))}.bind(this),e.next=6,N.ShowUI("ui/UICangkuWindow",this.node.parent);case 6:e.sent.getComponent(W).init(0,t);case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_mergeSoldier",value:function(){for(var e=[],t=j.instance.getBarracks(),n=j.instance.getBuildUpInfoById(t.id).type[1][t.lv]-1,i=0;i<10;i++)for(var o=0;o<j.instance.homeInfo.length;o++){var a=j.instance.homeInfo[o],s=0==this.cangkuType?0==a.matrix.length:0==a.boatMatrix.length;if(a.id>100&&s&&a.lv<n){if(a.lv==i){for(var c=null,r=0;r<e.length;r++){if((0==this.cangkuType?0==e[r].matrix.length:0==e[r].boatMatrix.length)&&(e[r].sid!=a.sid&&e[r].id==a.id&&e[r].lv==a.lv&&a.lv<9)){c=e[r];break}}c?(c.lv++,j.instance.homeInfo.splice(o,1),o--):(e.push(a),j.instance.homeInfo.splice(o,1),o--)}}else e.push(a),j.instance.homeInfo.splice(o,1),o--}j.instance.homeInfo=e,j.instance.saveHomeInfo()}},{key:"hecheng",value:function(){E.Instance.playOneShot(M.Synthe),G.Instance.synth()}},{key:"onBtnDestroyClick",value:function(){N.ShowTip("Drag the unit here to dismiss")}},{key:"refreshCangku",value:function(){this.initCangku(this.cangkuType)}},{key:"refreshClickCardInfo",value:function(){if(this.clickCardInfo=null,null!=this.touch){for(var e=-1e3,t=0;t<this.scr.content.children.length;t++){var n=this.scr.content.children[t].getComponent(I).convertToWorldSpaceAR(m.ZERO);if(Math.abs(n.x-this.touch.touch.getUILocation().x)<45&&Math.abs(n.y-this.touch.touch.getUILocation().y)<45){e=t;break}}e>=0&&(this.clickCardInfo=this.cangkuInfo[e])}}},{key:"refreshClickCardEndInfo",value:function(){if(this.clickCardEndInfo=null,null!=this.touch){for(var e=-1e3,t=0;t<this.scr.content.children.length;t++){var n=this.scr.content.children[t].getComponent(I).convertToWorldSpaceAR(m.ZERO);if(Math.abs(n.x-this.touch.touch.getUILocation().x)<45&&Math.abs(n.y-this.touch.touch.getUILocation().y)<45){e=t;break}}e>=0&&(this.clickCardEndInfo=this.cangkuInfo[e])}}},{key:"onCardItemClick",value:function(){if(!(this.moveDis>20||null==this.clickCardInfo||this.clickCardEndInfo!=this.clickCardInfo||this.touchTimer>=.2)){if(0==this.cangkuType){var e=j.instance.getItemConstInfoByID(this.clickCardInfo.id),t=K.instance.findPutMatrix(e.type,e.width,e.height,_);t?(this.clickCardInfo.matrix=t,K.instance.createItemInHome(this.clickCardInfo.id,this.clickCardInfo.lv,U.Blue,this.clickCardInfo.sid,t),j.instance.saveHomeInfo()):N.ShowTip("Not enough space")}else{var n=j.instance.getItemConstInfoByID(this.clickCardInfo.id),i=z.instance.findPutMatrix(n.type,H.Instance.getBoatMatrix());i?(this.clickCardInfo.boatMatrix=i,z.instance.createItemInBoat(this.clickCardInfo.id,this.clickCardInfo.lv,U.Blue,this.clickCardInfo.sid,i),P.Instance.checkViewActive(x.UIGuide)&&P.Instance.hideView(x.UIGuide),j.instance.saveHomeInfo(),O.Instance.guideShangZhen()):N.ShowTip("Not enough space")}this.refreshCangku()}}}]),t}(S)).prototype,"closeBtn",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=n(X.prototype,"scr",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=X))||q)),l._RF.pop()}}}));

System.register("chunks:///UIHome.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Core/Constants/Constant.js","./Tools.js","./Core/Event/EventCode.js","./Core/Event/EventBus.js","./Core/View/UIBase.js","./Core/View/UIManager.js","./Core/AdUitls/AdManager.js","./Core/Utils/SendEventManager.js","./Data/SoldierData.js","./Data/BuildData.js","./Data/GuideData.js","./Data/BattleData.js","./Data/GameData.js","./DataManager.js","./UI/UIBuildInfoTipItem.js","./HomeScene.js","./UI/SoldierStars.js","./UICangKu.js"],(function(e,n){var t,i,o,a,s,d,c,l,u,r,h,p,f,I,g,v,m,S,y,B,w,b,C,T,k,G,_,L,U,M,P,D,E,O,N,V,z,H,j,A,x,R,W,K,J,Z,F,q,Q,X,Y,$,ee,ne,te,ie,oe,ae,se,de,ce,le,ue,re,he,pe,fe,Ie,ge,ve,me,Se,ye,Be,we,be,Ce,Te,ke,Ge,_e;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_dec10:void 0,_dec11:void 0,_dec12:void 0,_dec13:void 0,_dec14:void 0,_dec15:void 0,_dec16:void 0,_dec17:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_descriptor9:void 0,_descriptor10:void 0,_descriptor11:void 0,_descriptor12:void 0,_descriptor13:void 0,_descriptor14:void 0,_descriptor15:void 0,_descriptor16:void 0,_temp:void 0}),{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inherits,o=e.classCallCheck,a=e.possibleConstructorReturn,s=e.getPrototypeOf,d=e.initializerDefineProperty,c=e.assertThisInitialized,l=e.createClass,u=e.get,r=e.asyncToGenerator},function(e){h=e.cclegacy,p=e._decorator,f=e.Node,I=e.LabelComponent,g=e.director,v=e.SpriteComponent,m=e.Vec3,S=e.tween,y=e.find,B=e.CameraComponent,w=e.Prefab,b=e.instantiate},function(e){C=e.default,T=e.ViewType,k=e.LayerType},function(e){G=e.Tools},function(e){_=e.EventCode},function(e){L=e.default},function(e){U=e.UIBase},function(e){M=e.default},function(e){P=e.default},function(e){D=e.default,E=e.EventId},function(e){O=e.default},function(e){N=e.default},function(e){V=e.default,z=e.GuideId},function(e){H=e.default},function(e){j=e.default},function(e){A=e.DataManager},function(e){x=e.UIBuildInfoTipItem},function(e){R=e.HomeScene},function(e){W=e.SoldierStars},function(e){K=e.UICangKu}],execute:function(){h._RF.push({},"07749LyrAlPy4hPSzudBsuV","UIHome",void 0),Ge=p.ccclass,_e=p.property,e("UIHome",(J=Ge("UIHome"),Z=_e(f),F=_e(f),q=_e(f),Q=_e(f),X=_e(f),Y=_e(f),$=_e(I),ee=_e(I),ne=_e(I),te=_e(I),ie=_e(I),oe=_e(f),ae=_e(I),se=_e(I),de=_e(f),ce=_e(x),J((re=t((ue=function(e){function n(){var e,t;o(this,n);for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return t=a(this,(e=s(n)).call.apply(e,[this].concat(l))),d(t,"challengeBtn",re,c(t)),d(t,"btnMain",he,c(t)),d(t,"btnAddDestop",pe,c(t)),d(t,"produce",fe,c(t)),d(t,"btnBuild",Ie,c(t)),d(t,"BtnCangku",ge,c(t)),d(t,"woodLabel",ve,c(t)),d(t,"goldLabel",me,c(t)),d(t,"diamondLabel",Se,c(t)),d(t,"zhaomuLabel",ye,c(t)),d(t,"power",Be,c(t)),d(t,"touchNode",we,c(t)),d(t,"infoNameLabel",be,c(t)),d(t,"infoLvLabel",Ce,c(t)),t.wallMode=!1,t.handleSid=-999,d(t,"buildMoveTips",Te,c(t)),d(t,"buildInfoTipItem",ke,c(t)),t.soldierStars=null,t}var t,h;return i(n,e),l(n,[{key:"onLoad",value:function(){g.getScene().on("HIDE_HOME_BOTTOM",this.hideMenu,this),g.getScene().on("TOUCH_OBJECT",this.handleTouchObject,this),g.getScene().on("OnSoldierStart",this.onSoldierStart,this),g.getScene().on("OnSoldierMove",this.onSoldierMove,this),this.updateMoney(),this.schedule(this.updateMoney,.5)}},{key:"start",value:function(){u(s(n.prototype),"start",this).call(this);var e=this;if(this.touchNode.active=!1,this.createSoldierStar(),this.refreshChallengeBtn(),V.Instance.showBuildMovePanel(),V.Instance.showDefenseSuccessTip(),A.instance.IsScelectMainHouse){var t=A.instance.getMainHouseInfo();this.handleTouchObject(t.sid,this.getPositionByMatrix(t.matrix,t.id)),A.instance.IsScelectMainHouse=!1}"undefined"!=typeof tt&&tt.checkShortcut({success:function(n){console.log("检查桌面图标:"+n.status.exist),e.btnAddDestop.active=!n.status.exist},fail:function(e){console.error("检查桌面图标错误"+e.errMsg)}})}},{key:"onEnable",value:function(){this.challengeBtn.on("click",this.onChallegeClick,this),L.Instance.addListener(_.OnHomeInfoChange,this.onHomeInfonChange.bind(this)),L.Instance.addListener(_.OnBuildUpComplete,this.refreshTipInfo.bind(this)),L.Instance.addListener(_.ShowBuildGuide,this.showBuildBtnGuide.bind(this)),L.Instance.addListener(_.ShowBoatGuide,this.showBoatBtnGuide.bind(this)),L.Instance.addListener(_.RefreshChallengeBtn,this.refreshChallengeBtn.bind(this)),this.refreshBtnCangku(),this.refreshPower()}},{key:"onDisable",value:function(){this.challengeBtn.off("click",this.onChallegeClick,this),L.Instance.removeListener(_.OnHomeInfoChange),L.Instance.removeListener(_.OnBuildUpComplete),L.Instance.removeListener(_.ShowBuildGuide),L.Instance.removeListener(_.ShowBoatGuide),L.Instance.removeListener(_.RefreshChallengeBtn)}},{key:"update",value:function(){A.instance.updateKongTouShow()}},{key:"lateUpdate",value:function(){this.showProduce()}},{key:"onChallegeClick",value:function(){V.Instance.TmpGuideId==z.None?(j.Instance.refreshChallengeLetterTime(),H.Instance.initDefenseEnemys(),M.Instance.showView(T.UIChallengeLetter,k.PANEL),this.refreshChallengeBtn(),D.Instance.sendEvent(E[E.ChallengeLetter],{type:"挑战书icon点击"})):G.ShowTip("In Guiding")}},{key:"refreshChallengeBtn",value:function(){this.challengeBtn.active=0==j.Instance.ChallengeLetterTime&&j.Instance.Level>=C.LockPVP,this.challengeBtn.active&&D.Instance.sendEvent(E[E.ChallengeLetter],{type:"挑战书icon出现"})}},{key:"showBuildBtnGuide",value:function(){V.Instance.showBuildBtnGuide(this.btnBuild)}},{key:"showBoatBtnGuide",value:function(){V.Instance.showBoatBtn(this.btnMain)}},{key:"fitUI",value:function(){var e=this.node.getChildByName("Top"),n=this.node.getChildByName("Bottom"),t=cc.winSize.height/cc.winSize.width>2?60:0;e.setPosition(0,cc.winSize.height/2-t,0),n.setPosition(0,-cc.winSize.height/2,0)}},{key:"updateMoney",value:function(){this.goldLabel.string=G.numberToStrKM(A.instance.gold),this.woodLabel.string=G.numberToStrKM(A.instance.wood),this.diamondLabel.string=G.numberToStrKM(A.instance.diamond),this.zhaomuLabel.string=A.instance.getZhaomuMoneyCount()+""}},{key:"onBtnSetClick",value:function(){V.Instance.TmpGuideId!=z.Guide_GuideSynthTip?(g.getScene().emit("TOUCH_OBJECT",null),M.Instance.showView(T.UISet,k.PANEL)):G.ShowTip("In Guiding")}},{key:"onBtnAddDestopClick",value:function(){var e=this;"undefined"!=typeof tt&&tt.addShortcut({success:function(n){G.ShowTip("添加桌面成功"),e.btnAddDestop.active=!1},fail:function(e){G.ShowTip("添加桌面失败 "+e.errMsg)}})}},{key:"onBtnAddWoodClick",value:function(){V.Instance.TmpGuideId!=z.Guide_GuideSynthTip?A.instance.cheatOpen&&(A.instance.wood+=1e3,G.ShowTip("Cheating 1000 pieces of wood"),this.updateMoney()):G.ShowTip("In Guiding")}},{key:"onBtnAddGoldClick",value:function(){V.Instance.TmpGuideId!=z.Guide_GuideSynthTip?A.instance.cheatOpen&&(A.instance.gold+=1e3,G.ShowTip("Cheating 1000 gold coins"),this.updateMoney()):G.ShowTip("In Guiding")}},{key:"onBtnAddDiamondClick",value:function(){V.Instance.TmpGuideId!=z.Guide_GuideSynthTip?A.instance.cheatOpen&&(A.instance.diamond+=100,G.ShowTip("Cheating 100 Gems"),this.updateMoney()):G.ShowTip("In Guiding")}},{key:"onBtnCangkuClick",value:(h=r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V.Instance.TmpGuideId!=z.Guide_GuideSynthTip){e.next=3;break}return G.ShowTip("In Guiding"),e.abrupt("return");case 3:return M.Instance.showUILoadlingView(!0),g.getScene().emit("TOUCH_OBJECT",null),e.next=7,G.ShowUI("ui/UICangKu",this.node.parent);case 7:e.sent.getComponent(K).initCangku(0),M.Instance.showUILoadlingView(!1),L.Instance.pos(_.RefreshWxCustomAd);case 12:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"onBtnZhaoMuClick",value:function(){if(V.Instance.TmpGuideId!=z.Guide_GuideSynthTip){A.instance.showAndroidTouch(A.instance.AndroidConfig.rate_draw);var e=A.instance.getZhaomuMoneyCount();A.instance.gold>=e?(A.instance.gold-=e,A.instance.zhaomuTimes+=1,M.Instance.showView(T.UIRecruit,k.PANEL)):A.instance.DailyGoldCount>0?M.Instance.showView(T.UIDailyGold,k.TOP):M.Instance.showView(T.UIGoldEnough,k.TOP)}else G.ShowTip("In Guiding")}},{key:"onBtnMainClick",value:function(){V.Instance.TmpGuideId!=z.Guide_GuideSynthTip?(M.Instance.showUILoadlingView(!0),g.getScene().emit("TOUCH_OBJECT",null),G.cleanUnuseRes(),g.loadScene("BoatScene"),V.Instance.guideBackBoat(),D.Instance.sendEvent(E[E.HomeBoatClick])):G.ShowTip("In Guiding")}},{key:"onBtnWallClick",value:function(){V.Instance.TmpGuideId!=z.Guide_GuideSynthTip?(g.getScene().emit("TOUCH_OBJECT",null),this.wallMode=!this.wallMode,g.getScene().emit("WALL_MODE",this.wallMode),D.Instance.sendEvent(E[E.HomeWallClick])):G.ShowTip("In Guiding")}},{key:"onBtnBuildClick",value:function(){V.Instance.TmpGuideId!=z.Guide_GuideSynthTip?(M.Instance.showUILoadlingView(!0),g.getScene().emit("TOUCH_OBJECT",null),G.ShowUI("ui/UIBuilding",this.node.parent),V.Instance.guideBuildBtn(),M.Instance.showUILoadlingView(!1),D.Instance.sendEvent(E[E.HomeBuildClick])):G.ShowTip("In Guiding")}},{key:"onBtnInfoClick",value:function(){V.Instance.TmpGuideId!=z.Guide_GuideSynthTip?M.Instance.showView(T.UIBuildInfo,k.PANEL):G.ShowTip("In Guiding")}},{key:"onBtnLvUpClick",value:function(){V.Instance.TmpGuideId!=z.Guide_GuideSynthTip?this.touchNode.getChildByPath("btn/BtnLvUp").getComponent(v).grayscale||A.instance.getItemInfoBySid(this.handleSid)&&(M.Instance.showView(T.UIBuildUpInfo,k.PANEL),j.Instance.SelectItemSid=this.handleSid,this.handleTouchObject(this.handleSid,new m)):G.ShowTip("In Guiding")}},{key:"onBtnCollectClick",value:function(){V.Instance.TmpGuideId!=z.Guide_GuideSynthTip?M.Instance.showView(T.UICollect,k.TOP):G.ShowTip("In Guiding")}},{key:"onBtnDaimondUpClick",value:function(){if(V.Instance.TmpGuideId!=z.Guide_GuideSynthTip){var e=this.touchNode.getChildByPath("btn/BtnDaimondUp").getChildByName("numLab").getComponent(I),n=parseInt(e.string);if(A.instance.diamond<n)G.ShowTip("Not enough gems");else A.instance.diamond-=n,N.Instance.getBuildingVoDataBySid(this.handleSid)?N.Instance.buildScessBySid(this.handleSid):N.Instance.upScessBySid(this.handleSid),this.refreshTipInfo()}else G.ShowTip("In Guiding")}},{key:"onBtnViewUpClick",value:function(){var e=this;V.Instance.TmpGuideId!=z.Guide_GuideSynthTip?(D.Instance.sendEvent(E[E.BuildingVideoUpBtn],{name:"建筑建造升级时视频立即完成-点击"}),D.Instance.sendEvent(E[E.buildNow_click]),P.createVideo((function(){A.instance.VideoCount++,N.Instance.getBuildingVoDataBySid(e.handleSid)?N.Instance.buildScessBySid(e.handleSid):N.Instance.upScessBySid(e.handleSid),e.refreshTipInfo(),D.Instance.sendEvent(E[E.buildNow_clickOk]),D.Instance.sendEvent(E[E.buildNow_complete]),D.Instance.sendEvent(E[E.BuildingVideoUpBtn],{name:"建筑建造升级时视频立即完成-完成"})}),(function(){D.Instance.sendEvent(E[E.buildNow_clickOk])}))):G.ShowTip("In Guiding")}},{key:"hideMenu",value:function(e){var n=this.node.getChildByName("Bottom");S(n).stop(),e?S(n).to(.1,{position:new m(0,-cc.winSize.height/2-500,0)}).start():S(n).to(.1,{position:new m(0,-cc.winSize.height/2,0)}).start()}},{key:"handleTouchObject",value:function(e,n){this.handleSid=e;var t=A.instance.getItemInfoBySid(e);if(j.Instance.SelectItemSid=e,t){this.buildInfoTipItem.setHomeInfo(t);var i=this.getPositionByMatrix(t.matrix,t.id);this.buildMoveTips.position=i,this.buildMoveTips.active=!0,5==t.id&&this.produce.active&&M.Instance.showView(T.UICollect,k.TOP),t.id<100?(this.touchNode.active=!0,this.refreshTouchInfo()):(this.touchNode.active=!1,this.buildMoveTips.active=!1,this.buildInfoTipItem.hide())}else this.touchNode.active=!1,this.buildMoveTips.active=!1,this.buildInfoTipItem.hide();this.soldierStars&&this.soldierStars.hide()}},{key:"getPositionByMatrix",value:function(e,n){return 1==n||2==n?this.getWorldPosByMatrix(e[2],e[3]):this.getWorldPosByMatrix(e[8],e[9])}},{key:"getWorldPosByMatrix",value:function(e,n){return new m(e-12,0,n-12)}},{key:"showSoldierStars",value:function(e,n){this.soldierStars.setHomeInfo(e);var t=y("Rotate/Camera").getComponent(B),i=y("Canvas"),o=G.getScreenPos(n,t,i);this.soldierStars.node.setWorldPosition(o.x,o.y+100,0)}},{key:"createSoldierStar",value:(t=r(regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.loadRes("ui/SoldierStars",w);case 2:n=e.sent,t=b(n),this.node.parent.addChild(t),this.soldierStars=t.getComponent(W),t.active=!1;case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"onSoldierStart",value:function(e,n){this.showSoldierStars(A.instance.getItemInfoBySid(e),n)}},{key:"onSoldierMove",value:function(e,n){this.showSoldierStars(A.instance.getItemInfoBySid(e),n)}},{key:"onHomeInfonChange",value:function(){this.refreshBtnCangku(),this.refreshPower()}},{key:"refreshBtnCangku",value:function(){var e=A.instance.getInCaKuDatas(0);this.BtnCangku.getComponentInChildren(I).string=""+e.length,this.BtnCangku.children[1].active=A.instance.ishasUpItem(0)}},{key:"refreshTouchInfo",value:function(){var e=this.touchNode.getChildByPath("btn/BtnDaimondUp"),n=this.touchNode.getChildByPath("btn/BtnViewUp"),t=this.touchNode.getChildByPath("btn/BtnLvUp"),i=this.touchNode.getChildByPath("btn/BtnCollect"),o=A.instance.getItemInfoBySid(this.handleSid),a=A.instance.getItemConstInfoByID(o.id);this.infoNameLabel.string=a.name,this.infoLvLabel.string="(Lv."+Math.floor(o.lv+1)+")";var s=N.Instance.getBuildUpVoDataBySid(this.handleSid),d=N.Instance.getBuildingVoDataBySid(this.handleSid);t.getComponent(v).grayscale=null!=s||null!=d;var c=N.Instance.getBuildingVoDataBySid(o.sid),l=N.Instance.getBuildUpVoDataBySid(o.sid);if(c||l){n.active=!0;var u=e.getChildByName("numLab").getComponent(I),r=null!=c?N.Instance.getBuildReduceTimeBySid(o.sid):N.Instance.getReduceTimeBySid(o.sid);u.string=""+N.Instance.getBuildSucessNeedDaimondByTime(r)}else n.active=!1,e.active=!1;if(e.active=!1,t.active=!n.active,i.active=5==o.id,i.active){var h=N.Instance.getGoldMineProduce();i.getComponent(v).grayscale=!(h[0]>0||h[1]>0)}n.active&&(D.Instance.sendEvent(E[E.BuildingVideoUpBtn],{name:"建筑建造升级时视频立即完成-出现"}),D.Instance.sendEvent(E[E.buildNow_appear]))}},{key:"refreshTipInfo",value:function(){this.buildInfoTipItem.node.active&&this.buildInfoTipItem.refreshUI(),this.touchNode.active&&this.refreshTouchInfo()}},{key:"refreshPower",value:function(){for(var e=0,n=A.instance.getHomeItems(),t=0;t<n.length;t++)e+=O.Instance.getPowerById(n[t].id,n[t].lv);this.power.string=e+""}},{key:"showProduce",value:function(){var e=N.Instance.getGoldMineProduce();if(e[0]>0&&e[1]>0&&!this.wallMode){if(this.produce.active=!0,null==R.instance.goldMine)return;var n=G.getScreenPos(R.instance.goldMine.node,R.instance.camera,y("Canvas")),t=1-R.instance.camera.node.position.z/100;this.produce.setScale(t,t,1),this.produce.setWorldPosition(new m(n.x,n.y+50*t))}else this.produce.active=!1}}]),n}(U)).prototype,"challengeBtn",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(ue.prototype,"btnMain",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(ue.prototype,"btnAddDestop",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(ue.prototype,"produce",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=t(ue.prototype,"btnBuild",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(ue.prototype,"BtnCangku",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(ue.prototype,"woodLabel",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=t(ue.prototype,"goldLabel",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(ue.prototype,"diamondLabel",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=t(ue.prototype,"zhaomuLabel",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Be=t(ue.prototype,"power",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=t(ue.prototype,"touchNode",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(ue.prototype,"infoNameLabel",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=t(ue.prototype,"infoLvLabel",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=t(ue.prototype,"buildMoveTips",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=t(ue.prototype,"buildInfoTipItem",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=ue))||le)),h._RF.pop()}}}));

System.register("chunks:///UIMain.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Core/Utils/PlatformUtils.js","./Core/Constants/Constant.js","./Tools.js","./Cfg/LevelCfg.js","./Config.js","./Core/Event/EventCode.js","./Core/Event/EventBus.js","./Core/View/UIBase.js","./Core/View/UIManager.js","./Core/AdUitls/AdManager.js","./Core/Utils/SendEventManager.js","./Data/SoldierData.js","./Data/BuildData.js","./Data/GuideData.js","./Data/BattleData.js","./Data/GameData.js","./Data/PassRewardData.js","./Data/SignInData.js","./Data/TurntableData.js","./DataManager.js","./BoatScene.js","./UI/SoldierStars.js","./UICangKu.js"],(function(e,n){var t,i,o,a,s,c,r,l,u,d,h,I,f,p,g,v,m,w,k,B,C,y,G,b,S,T,L,U,_,N,P,x,V,E,D,M,H,A,O,R,z,F,j,W,Z,K,Q,q,J,X,Y,$,ee,ne,te,ie,oe,ae,se,ce,re,le,ue,de,he,Ie,fe,pe,ge,ve,me,we,ke,Be,Ce,ye,Ge,be,Se,Te,Le,Ue,_e,Ne,Pe,xe,Ve,Ee,De,Me,He,Ae,Oe,Re,ze,Fe,je,We,Ze,Ke,Qe,qe,Je,Xe,Ye,$e;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_dec10:void 0,_dec11:void 0,_dec12:void 0,_dec13:void 0,_dec14:void 0,_dec15:void 0,_dec16:void 0,_dec17:void 0,_dec18:void 0,_dec19:void 0,_dec20:void 0,_dec21:void 0,_dec22:void 0,_dec23:void 0,_dec24:void 0,_dec25:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_descriptor9:void 0,_descriptor10:void 0,_descriptor11:void 0,_descriptor12:void 0,_descriptor13:void 0,_descriptor14:void 0,_descriptor15:void 0,_descriptor16:void 0,_descriptor17:void 0,_descriptor18:void 0,_descriptor19:void 0,_descriptor20:void 0,_descriptor21:void 0,_descriptor22:void 0,_descriptor23:void 0,_descriptor24:void 0,_temp:void 0}),{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inherits,o=e.classCallCheck,a=e.possibleConstructorReturn,s=e.getPrototypeOf,c=e.initializerDefineProperty,r=e.assertThisInitialized,l=e.createClass,u=e.get,d=e.asyncToGenerator},function(e){h=e.cclegacy,I=e._decorator,f=e.Node,p=e.LabelComponent,g=e.director,v=e.loader,m=e.find,w=e.CameraComponent,k=e.Vec3,B=e.tween,C=e.Prefab,y=e.instantiate,G=e.SpriteComponent},function(e){b=e.default},function(e){S=e.default,T=e.ViewType,L=e.LayerType,U=e.GameType,_=e.LevelType},function(e){N=e.Tools},function(e){P=e.default},function(e){x=e.CUR_PLATFORM,V=e.PLATFORM_TYPE},function(e){E=e.EventCode},function(e){D=e.default},function(e){M=e.UIBase},function(e){H=e.default},function(e){A=e.default},function(e){O=e.default,R=e.EventId},function(e){z=e.default},function(e){F=e.default},function(e){j=e.default,W=e.GuideId},function(e){Z=e.default},function(e){K=e.default},function(e){Q=e.default},function(e){q=e.default},function(e){J=e.default},function(e){X=e.DataManager},function(e){Y=e.BoatScene},function(e){$=e.SoldierStars},function(e){ee=e.UICangKu}],execute:function(){h._RF.push({},"b178a7fZUZNUbt88dlrQ4PW","UIMain",void 0),Ye=I.ccclass,$e=I.property,e("UIMain",(ne=Ye("UIMain"),te=$e(f),ie=$e(f),oe=$e(f),ae=$e(f),se=$e(f),ce=$e(f),re=$e(f),le=$e(f),ue=$e(f),de=$e(f),he=$e(f),Ie=$e(f),fe=$e(f),pe=$e(f),ge=$e(f),ve=$e(f),me=$e(p),we=$e(p),ke=$e(f),Be=$e(f),Ce=$e(p),ye=$e(f),Ge=$e(f),be=$e(f),ne((Le=t((Te=function(e){function n(){var e,t;o(this,n);for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return t=a(this,(e=s(n)).call.apply(e,[this].concat(l))),c(t,"levelGiftBtn",Le,r(t)),c(t,"kongTouBtn",Ue,r(t)),c(t,"challengeBtn",_e,r(t)),c(t,"lockHomeBtn",Ne,r(t)),c(t,"lockPvpBtn",Pe,r(t)),c(t,"lockHeroBtn",xe,r(t)),c(t,"drawBtn",Ve,r(t)),c(t,"btnHome",Ee,r(t)),c(t,"btnAddDestop",De,r(t)),c(t,"reward",Me,r(t)),c(t,"startBtn",He,r(t)),c(t,"sigInBtn",Ae,r(t)),c(t,"stages",Oe,r(t)),c(t,"noviceGiftBtn",Re,r(t)),c(t,"BtnCangku",ze,r(t)),c(t,"box",Fe,r(t)),c(t,"power",je,r(t)),c(t,"zhaomuLabel",We,r(t)),c(t,"zhaomuReddot",Ze,r(t)),c(t,"BtnCard",Ke,r(t)),c(t,"levelLab",Qe,r(t)),c(t,"addDestop",qe,r(t)),c(t,"moreBtn",Je,r(t)),c(t,"wxMoreGameBtn",Xe,r(t)),t.handleSid=-999,t.idle_t=0,t.rateBtn=null,t.soldierStars=null,t}var t,h,I;return i(n,e),l(n,[{key:"onLoad",value:function(){this.rateBtn=this.BtnCard.getChildByName("rateBtn"),this.rateBtn.active=b.isQQ,g.getScene().on("HIDE_HOME_BOTTOM",this.hideMenu,this),g.getScene().on("OnSoldierStart",this.onSoldierStart,this),g.getScene().on("OnSoldierMove",this.onSoldierMove,this),g.getScene().on("OnSoldierEnd",this.onSoldierEnd,this),this.fitUI(),this.updateMoney(),this.schedule(this.updateMoney,.5),this.loadPassReweadRes(),this.addDestop&&(this.addDestop.active="undefined"!=typeof qg)}},{key:"loadPassReweadRes",value:function(){v.loadResArray(["textures/home/home_jinbi","textures/home/home_zuanshi","textures/main/main_baoxiang","textures/common/wood","ui/UIPassItem","ui/UIBattleLoading","prefabs/effects/canSynthEffect","prefabs/effects/synthEffect","prefabs/effects/buidingEffect","prefabs/effects/death_blue","prefabs/item0_blue","prefabs/item1_blue","prefabs/item2_blue","prefabs/effects/buildBomb"],null,null,null,(function(){}))}},{key:"start",value:function(){u(s(n.prototype),"start",this).call(this),this.finger=m("Canvas/finger"),this.camera=m("Camera").getComponent(w),this.finger.active=!1,X.instance.IsShowCollect&&K.Instance.Level>=10&&(H.Instance.showView(T.UICollect,L.TOP),X.instance.IsShowCollect=!1),H.Instance.showUILoadlingView(!1),j.Instance.showGuideStartGame(this.startBtn),j.Instance.showGuideZhaoMu(this.BtnCard),j.Instance.showGuideSynthTip(),j.Instance.showHeCheng(),j.Instance.showGuideStartGame1(this.startBtn),j.Instance.showArmys(this.BtnCangku),j.Instance.showGuideVictoryBox(this.reward),j.Instance.showHomeScene(this.btnHome),j.Instance.showVictoryBox(this.box),j.Instance.showStoreBtn(),j.Instance.showBountyTip(),j.Instance.showPVPTip(),this.createSoldierStar(),K.Instance.buyCardBtnPos=this.BtnCard.getWorldPosition(),this.btnHome.active=!0,this.sigInBtn.active=K.Instance.Level>=S.LockSigIn,b.isOppo()||b.isVivo()||K.Instance.Level==S.NoviceGift&&K.Instance.isFirstShowNoviceGift&&(H.Instance.showView(T.UINoviceGift,L.PANEL),K.Instance.setFirstShowNovice()),b.isOppo()||b.isVivo()||K.Instance.Level==S.LockSigIn&&K.Instance.isFirstShowUISign&&(K.Instance.setFirstShowUISign(),H.Instance.showView(T.UISignIn,L.PANEL)),z.Instance.refreshNewLockSoldier(),b.isWx()||b.isQQ?this.wxMoreGameBtn.active=!0:this.wxMoreGameBtn.active=!1,this.kongTouBtn.position=S.Height/S.Width>=2?new k(-195,-286):new k(-307,-515),"undefined"!=typeof tt&&tt.checkShortcut({success:function(e){console.log("检查桌面图标:"+e.status.exist),self.btnAddDestop.active=!e.status.exist},fail:function(e){console.error("检查桌面图标错误"+e.errMsg)}})}},{key:"onBtnTTAddDestopClick",value:function(){var e=this;"undefined"!=typeof tt&&tt.addShortcut({success:function(n){N.ShowTip("添加桌面成功"),e.btnAddDestop.active=!1},fail:function(e){N.ShowTip("添加桌面失败 "+e.errMsg)}})}},{key:"refreshIdleT",value:function(e){if(!this.finger.active&&!(K.Instance.Level>5||K.Instance.Level<4)){for(var n=1;n<this.node.parent.children.length;n++){if(this.node.parent.children[n].active)return}if(this.idle_t+=e,this.idle_t>=5){j.Instance.TmpGuideId==W.None&&this.showFinger(!0);var t=X.instance.gold>=X.instance.getZhaomuMoneyCount()?this.BtnCard.getWorldPosition():this.startBtn.getWorldPosition();this.finger.setWorldPosition(t)}}}},{key:"showFinger",value:function(e){null!=this.finger&&(this.finger.active=e,this.idle_t=0)}},{key:"getOpenId",value:function(){if(window.wx){var e=this;wx.login({success:function(n){n.code?(console.log("------------ login -----------"),console.log(n.code),e.setWxUserInfo(n.code)):console.log("登录失败！"+n.errMsg)}})}}},{key:"getOppoOpenId",value:function(){b.isOppo()&&qg.login({success:function(e){var n=JSON.stringify(e.data);console.log(n),this.setOppoUserInfo(e.data.token)},fail:function(e){console.log(JSON.stringify(e))}})}},{key:"setOppoUserInfo",value:function(e){wx.request({url:"https://play.open.oppomobile.com/instant-game-open/userInfo?pkgName=com.oppo.testgame&timeStamp=1526304757000&token=ccb5ae1cf111de847db508edb90fa633&sign=C26228F50092BC9CA251AF41C4F70022&version=1.0.0",data:{code:e},success:function(e){console.log("-----------request-----------");e.data.session_key;var n=e.data.openid;console.log(e),console.log(n)}})}},{key:"setWxUserInfo",value:function(e){}},{key:"onEnable",value:function(){this.rateBtn.on("click",this.onRateClick,this),this.levelGiftBtn.on("click",this.onLevelGiftClick,this),this.sigInBtn.on("click",this.onSignInClick,this),this.noviceGiftBtn.on("click",this.onNoviceGiftBtnClick,this),this.drawBtn.on("click",this.onDrawClick,this),this.lockHomeBtn.on("click",this.onLockHomeClick,this),this.lockHeroBtn.on("click",this.onLockHeroClick,this),this.lockPvpBtn.on("click",this.onLockPvpClick,this),this.challengeBtn.on("click",this.onChallegeClick,this),this.wxMoreGameBtn.on("click",this.onWxMoreGameClick,this),this.kongTouBtn.on("click",this.onKongTouClick,this),D.Instance.addListener(E.OnHomeInfoChange,this.refreshUI.bind(this)),D.Instance.addListener(E.OnVictoryBoxChange,this.setBoxUI.bind(this)),D.Instance.addListener(E.GuideStartGame1,this.showStartGameGuide.bind(this)),D.Instance.addListener(E.GuideStartGame3,this.showStartGameGuide3.bind(this)),D.Instance.addListener(E.GuideZhaoMu1,this.showZhaoMuGuide.bind(this)),D.Instance.addListener(E.OnShowFinger,this.showFinger.bind(this)),this.refreshUI()}},{key:"onDisable",value:function(){this.rateBtn.off("click",this.onRateClick,this),this.levelGiftBtn.off("click",this.onLevelGiftClick,this),this.sigInBtn.off("click",this.onSignInClick,this),this.noviceGiftBtn.off("click",this.onNoviceGiftBtnClick,this),this.drawBtn.off("click",this.onDrawClick,this),this.lockHomeBtn.off("click",this.onLockHomeClick,this),this.lockHeroBtn.off("click",this.onLockHeroClick,this),this.lockPvpBtn.off("click",this.onLockPvpClick,this),this.challengeBtn.off("click",this.onChallegeClick,this),this.wxMoreGameBtn.off("click",this.onWxMoreGameClick,this),this.kongTouBtn.off("click",this.onKongTouClick,this),D.Instance.removeListener(E.OnVictoryBoxChange),D.Instance.removeListener(E.OnHomeInfoChange),D.Instance.removeListener(E.GuideStartGame1),D.Instance.removeListener(E.GuideStartGame3),D.Instance.removeListener(E.GuideZhaoMu1),D.Instance.removeListener(E.OnShowFinger)}},{key:"onRateClick",value:function(){H.Instance.showView(T.UIRecruitRate,L.TOP)}},{key:"onLevelGiftClick",value:function(){j.Instance.TmpGuideId==W.None?H.Instance.showView(T.UILevelGift,L.PANEL):N.ShowTip("In Guiding")}},{key:"onKongTouClick",value:function(){j.Instance.TmpGuideId==W.None?(H.Instance.showView(T.UIKongTou,L.PANEL),O.Instance.sendEvent(R[R.airdropIcon_click]),O.Instance.sendEvent(R[R.KongTou],{type:"空投礼包icon点击"})):N.ShowTip("In Guiding")}},{key:"onWxMoreGameClick",value:function(){j.Instance.TmpGuideId==W.None?A.showJuZhenCustomAd(!0):N.ShowTip("In Guiding")}},{key:"showZhaoMuGuide",value:function(){j.Instance.showGuideZhaoMu1(this.BtnCard)}},{key:"showStartGameGuide",value:function(){j.Instance.showGuideStartGame1(this.startBtn)}},{key:"showStartGameGuide3",value:function(){j.Instance.showGuideStartGame3(this.startBtn)}},{key:"refreshUI",value:function(){this.refreshRoviceGiftBtn(),this.refreshBtnCangku(),this.refreshPower(),this.refreshSignInBtn(),this.setBoxUI(),this.refreshStages(),this.refreshHomeBtn(),this.refreshRewardPoint(),this.refreshLockBtn(),this.refreshKongTou(),this.refreshLevelGiftBtn(),this.levelLab.string=""+K.Instance.Level}},{key:"refreshKongTou",value:function(){this.kongTouBtn.active=X.instance.kongTouIsShow&&K.Instance.Level>5,this.kongTouBtn.active&&(O.Instance.sendEvent(R[R.KongTou],{type:"空投礼包icon出现"}),O.Instance.sendEvent(R[R.airdropIcon_appear]))}},{key:"refreshRewardPoint",value:function(){var e=Q.Instance.hasRewardData();this.reward.getChildByName("redPoint").active=e,this.reward.getChildByName("saoguang").active=e}},{key:"refreshHomeBtn",value:function(){var e=F.Instance.getGoldMineProduce();this.btnHome.getChildByName("redPoint").active=e[0]>0&&e[1]>0}},{key:"refreshRoviceGiftBtn",value:function(){this.noviceGiftBtn.active=X.instance.NoviceReceiveCount<S.NoviceGiftCount&&K.Instance.Level>=S.NoviceGift}},{key:"update",value:function(e){this.refreshBox(),this.refreshIdleT(e),this.refreshDrawBtn(),this.updateLevelGiftTime(),F.Instance.refreshBuildingUpComplete(),X.instance.updateKongTouShow()}},{key:"fitUI",value:function(){}},{key:"updateMoney",value:function(){this.zhaomuLabel.string=X.instance.getZhaomuMoneyCount()+"",this.zhaomuReddot.active=X.instance.gold>=X.instance.getZhaomuMoneyCount()}},{key:"onDrawClick",value:function(){j.Instance.TmpGuideId==W.None?H.Instance.showView(T.UITurntable,L.PANEL):N.ShowTip("In Guiding")}},{key:"onBtnSetClick",value:function(){j.Instance.TmpGuideId==W.None?(this.showFinger(!1),Y.instance&&Y.instance.hideCreateUICBUpTipPanel(),H.Instance.checkViewActive(T.UIGuide)&&H.Instance.hideView(T.UIGuide),H.Instance.showView(T.UISet,L.PANEL)):N.ShowTip("In Guiding")}},{key:"onBtnAddWoodClick",value:function(){j.Instance.TmpGuideId==W.None?(this.showFinger(!1),X.instance.cheatOpen&&(X.instance.wood+=1e3,N.ShowTip("Cheating 1000 pieces of wood"),this.updateMoney())):N.ShowTip("In Guiding")}},{key:"onBtnAddGoldClick",value:function(){j.Instance.TmpGuideId==W.None?(this.showFinger(!1),Y.instance&&Y.instance.hideCreateUICBUpTipPanel(),H.Instance.showView(T.UIDailyGold,L.TOP),X.instance.cheatOpen&&(X.instance.gold+=1e3,N.ShowTip("Cheating 1000 gold coins"),this.updateMoney())):N.ShowTip("In Guiding")}},{key:"onBtnAddDiamondClick",value:function(){j.Instance.TmpGuideId==W.None?(this.showFinger(!1),Y.instance&&Y.instance.hideCreateUICBUpTipPanel(),H.Instance.showView(T.UIDailyDaimond,L.TOP),X.instance.cheatOpen&&(X.instance.diamond+=100,N.ShowTip("Cheating 100 Gems"),this.updateMoney())):N.ShowTip("In Guiding")}},{key:"hideMenu",value:function(e){Y.instance&&Y.instance.hideCreateUICBUpTipPanel(),H.Instance.checkViewActive(T.UIGuide)&&H.Instance.hideView(T.UIGuide);var n=this.node.getChildByName("Bottom");B(n).stop(),e?B(n).to(.1,{position:new k(0,-cc.winSize.height/2-500,0)}).start():B(n).to(.1,{position:new k(0,-cc.winSize.height/2,0)}).start()}},{key:"onBtnRewardUIClick",value:function(){j.Instance.TmpGuideId==W.None?(this.showFinger(!1),Y.instance&&Y.instance.hideCreateUICBUpTipPanel(),H.Instance.checkViewActive(T.UIGuide)&&H.Instance.hideView(T.UIGuide),H.Instance.showView(T.UIPassReward,L.PANEL),j.Instance.guideVictoryBox(),O.Instance.sendEvent(R[R.PassReward],{type:"闯关奖励入口点击"}),O.Instance.sendEvent(R[R.stageRewardIcon_click])):N.ShowTip("In Guiding")}},{key:"onBtnBoxClick",value:function(){j.Instance.TmpGuideId!=W.Guide_GuideSynthTip?(this.showFinger(!1),Y.instance&&Y.instance.hideCreateUICBUpTipPanel(),H.Instance.checkViewActive(T.UIGuide)&&H.Instance.hideView(T.UIGuide),O.Instance.sendEvent(R[R.VictoryBox],{type:"首页右上角宝箱入口点击"}),O.Instance.sendEvent(R[R.boxIcon_click]),K.Instance.VictoryBoxCount>0&&(j.Instance.guideVictoryBox1(),H.Instance.showView(T.UIVictoryBox,L.PANEL))):N.ShowTip("In Guiding")}},{key:"onBtnHomeClick",value:function(){if(b.isOppo()||j.Instance.TmpGuideId==W.None){if(X.instance.showWxTouch(X.instance.WXConfig.rate_home),X.instance.showQQTouch(X.instance.QQConfig.rate_home),X.instance.showTTTouch(X.instance.TTConfig.rate_home),this.showFinger(!1),Y.instance&&Y.instance.hideCreateUICBUpTipPanel(),H.Instance.checkViewActive(T.UIGuide)&&H.Instance.hideView(T.UIGuide),!K.Instance.IsBebug&&K.Instance.Level<S.LockHome)return N.ShowTip("Unlock Island at Stage."+S.LockHome),void H.Instance.showView(T.UINotice,L.PANEL,1);H.Instance.showUILoadlingView(!0),j.Instance.guideHomeScene(),N.cleanUnuseRes(),g.loadScene("HomeScene"),O.Instance.sendEvent(R[R.BoatHomeClick])}else N.ShowTip("In Guiding")}},{key:"onBtnStartGameClick",value:function(){j.Instance.TmpGuideId==W.None||j.Instance.TmpGuideId==W.Guide_StartGame3||j.Instance.TmpGuideId==W.Guide_StartGame||j.Instance.TmpGuideId==W.Guide_StartGame1?0!=X.instance.getBoatItems().length?(Y.instance&&Y.instance.hideCreateUICBUpTipPanel(),H.Instance.checkViewActive(T.UIGuide)&&H.Instance.hideView(T.UIGuide),K.Instance.GameType=U.Game,j.Instance.guideStartGame(),j.Instance.guideStartGame1(),j.Instance.guideStartGame3(),this.showFinger(!1),j.Instance.TmpGuideId=W.None,O.Instance.sendEvent(R[R.BoatStartClick])):N.ShowTip("No available units"):N.ShowTip("In Guiding")}},{key:"onBtnCangkuClick",value:(I=d(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j.Instance.TmpGuideId==W.None){e.next=3;break}return N.ShowTip("In Guiding"),e.abrupt("return");case 3:return H.Instance.showUILoadlingView(!0),Y.instance&&Y.instance.hideCreateUICBUpTipPanel(),g.getScene().emit("TOUCH_OBJECT",null),e.next=8,N.ShowUI("ui/UICangKu",this.node.parent);case 8:e.sent.getComponent(ee).initCangku(1),j.Instance.guideArmys(new k(100,350)),H.Instance.showUILoadlingView(!1),this.showFinger(!1);case 14:case"end":return e.stop()}}),e,this)}))),function(){return I.apply(this,arguments)})},{key:"onBtnZhaoMuClick",value:function(){if(j.Instance.TmpGuideId==W.None||j.Instance.TmpGuideId==W.Guide_ZhaoMu1||j.Instance.TmpGuideId==W.Guide_ZhaoMu){H.Instance.showUILoadlingView(!0),Y.instance&&Y.instance.hideCreateUICBUpTipPanel(),H.Instance.checkViewActive(T.UIGuide)&&H.Instance.hideView(T.UIGuide);var e=X.instance.getZhaomuMoneyCount();X.instance.gold>=e?(X.instance.gold-=e,X.instance.zhaomuTimes+=1,H.Instance.showView(T.UIRecruit,L.PANEL)):X.instance.DailyGoldCount>0?H.Instance.showView(T.UIDailyGold,L.TOP):H.Instance.showView(T.UIGoldEnough,L.TOP),this.showFinger(!1)}else N.ShowTip("In Guiding")}},{key:"setBoxUI",value:function(){if(this.box){var e=K.Instance.VictoryBoxCount,n=this.box.getChildByName("countLab").getComponent(p);n.string=""+e,n.node.active=e>0,this.box.getChildByName("redPoint").active=e>0}}},{key:"refreshBox",value:function(){if(K.Instance.VictoryBoxCount<=0){this.box.getChildByName("timeLab").active=!1;for(var e=0;e<this.box.children.length;e++)e<this.box.children.length-1?this.box.children[e].active=!1:this.box.children[e].active=!0}else{for(var n=0;n<this.box.children.length;n++)n<this.box.children.length-1?this.box.children[n].active=!0:this.box.children[n].active=!1;var t=K.Instance.getOpenVictoryBoxReduceTime(),i=this.box.getChildByName("timeLab").getComponent(p),o=this.box.getChildByName("openLab");i.string=N.timestampToTime(t),o.active=t<=0,i.node.active=t>0}}},{key:"onSoldierStart",value:function(e,n){var t=X.instance.getItemInfoBySid(e);this.showSoldierStars(t,n)}},{key:"onSoldierMove",value:function(e,n){this.showSoldierStars(X.instance.getItemInfoBySid(e),n)}},{key:"onSoldierEnd",value:function(){null!=this.soldierStars&&(this.soldierStars.hide(),this.idle_t=0,this.showFinger(!1))}},{key:"showSoldierStars",value:function(e,n){this.soldierStars.setHomeInfo(e);var t=m("Canvas"),i=N.getScreenPos(n,this.camera,t);this.soldierStars.node.setWorldPosition(i.x,i.y+100,0)}},{key:"createSoldierStar",value:(h=d(regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.loadRes("ui/SoldierStars",C);case 2:n=e.sent,t=y(n),this.node.parent.addChild(t),this.soldierStars=t.getComponent($),t.active=!1;case 7:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"refreshBtnCangku",value:function(){var e=X.instance.getInCaKuDatas(1);this.BtnCangku.getComponentInChildren(p).string=""+e.length,this.BtnCangku.children[1].active=X.instance.ishasUpItem(1)}},{key:"onNoviceGiftBtnClick",value:function(){j.Instance.TmpGuideId==W.None?H.Instance.showView(T.UINoviceGift,L.PANEL):N.ShowTip("In Guiding")}},{key:"refreshStages",value:(t=d(regeneratorRuntime.mark((function e(){var n,t,i,o,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 3:for(n=K.Instance.Level%10,t=K.Instance.Level-n+1,0==n&&(t=K.Instance.Level-9),i=function(e){var n=a.stages.children[e],i=n.getChildByName("icon").getComponent(G),o=n.getChildByName("typeBg"),s=o.getChildByName("typeIcon").getComponent(G),c=e+t,r=P.Instance.getLevelDataByLevel(c),l=void 0;l=c==K.Instance.Level?"textures/main/main_dangqian":c>K.Instance.Level?"textures/main/main_weitongguo":"textures/main/main_tongguo",N.loadSpriteFrame(l,(function(e){i.getComponent(G).spriteFrame=e})),o.active=!0;var u="",d="";switch(r.type){case _.NONE:o.active=!1;break;case _.COIN:u="textures/main/main_huang",d="textures/main/jinbi1";break;case _.MASONRY:u="textures/main/main_zi",d="textures/main/zanshi";break;case _.BOX:u="textures/main/main_zi",d="textures/main/main_jiangli";break;case _.BOSS:u="textures/main/main_hong",d="textures/main/main_boss"}""!=u&&N.loadSpriteFrame(u,(function(e){o.getComponent(G).spriteFrame=e})),""!=d&&N.loadSpriteFrame(d,(function(e){s.getComponent(G).spriteFrame=e}))},o=0;o<this.stages.children.length;o++)i(o);case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"onSignInClick",value:function(){j.Instance.TmpGuideId==W.None?(H.Instance.showView(T.UISignIn,L.PANEL),O.Instance.sendEvent(R[R.Sign],{type:"签到点击"}),O.Instance.sendEvent(R[R.signIcon_click])):N.ShowTip("In Guiding")}},{key:"refreshPower",value:function(){for(var e=0,n=X.instance.getBoatItems(),t=0;t<n.length;t++)e+=z.Instance.getPowerById(n[t].id,n[t].lv);this.power.string=e+""}},{key:"refreshSignInBtn",value:function(){this.sigInBtn.getChildByName("redPoint").active=!q.Instance.getNowDataSignIned()}},{key:"onLevelClick",value:function(){j.Instance.TmpGuideId==W.None?(N.cleanUnuseRes(),g.loadScene("LevelScene")):N.ShowTip("In Guiding")}},{key:"refreshDrawBtn",value:function(){if(this.drawBtn.active=!(K.Instance.Level<S.LockStore),this.drawBtn.active){var e=J.Instance.getReduceTime();this.drawBtn.getChildByName("redPoint").active=e<=0,this.drawBtn.getChildByName("drawTip").active=e<=0,e>0?(this.drawBtn.getChildByName("drawTLab").active=!0,this.drawBtn.getChildByName("drawTLab").getComponent(p).string=N.timestampToTime1(e)):this.drawBtn.getChildByName("drawTLab").active=!1}}},{key:"onBtnAddDestopClick",value:function(){j.Instance.TmpGuideId==W.None?N.showOppoDestop():N.ShowTip("In Guiding")}},{key:"onBtnMoreGameClick",value:function(){j.Instance.TmpGuideId==W.None||N.ShowTip("In Guiding")}},{key:"refreshLockBtn",value:function(){var e=K.Instance.Level;this.lockHomeBtn.active=e<S.LockHome,this.lockPvpBtn.active=S.LockHome<=e&&e<S.LockPVP;var n=P.Instance.getFirstBoxLevel()+1;this.lockHeroBtn.active=S.LockPVP<=e&&e<n,x==V.ANDROID_HAIWAI_ENGLISH||x==V.iOS_HAIWAI_ENGLISH?(this.lockHomeBtn.getChildByName("lockLab").getComponent(p).string="Unlock at\nStage."+S.LockHome,this.lockHeroBtn.getChildByName("lockLab").getComponent(p).string="Unlock at\nStage."+n,this.lockPvpBtn.getChildByName("lockLab").getComponent(p).string="Unlock at\nStage."+S.LockPVP):(this.lockHomeBtn.getChildByName("lockLab").getComponent(p).string="第"+S.LockHome+"关解锁",this.lockHeroBtn.getChildByName("lockLab").getComponent(p).string="第"+n+"关解锁",this.lockPvpBtn.getChildByName("lockLab").getComponent(p).string="第"+S.LockPVP+"关解锁"),this.challengeBtn.active=0==K.Instance.ChallengeLetterTime&&K.Instance.Level>=S.LockPVP,this.challengeBtn.active&&(O.Instance.sendEvent(R[R.ChallengeLetter],{type:"挑战书icon出现"}),O.Instance.sendEvent(R[R.mailIcon_appear]))}},{key:"onLockHomeClick",value:function(){j.Instance.TmpGuideId==W.None?(O.Instance.sendEvent(R[R.Notice]),H.Instance.showView(T.UINotice,L.PANEL,1)):N.ShowTip("In Guiding")}},{key:"onLockHeroClick",value:function(){j.Instance.TmpGuideId==W.None?(O.Instance.sendEvent(R[R.Notice]),H.Instance.showView(T.UINotice,L.PANEL,2)):N.ShowTip("In Guiding")}},{key:"onLockPvpClick",value:function(){j.Instance.TmpGuideId==W.None?(O.Instance.sendEvent(R[R.Notice]),H.Instance.showView(T.UINotice,L.PANEL,3)):N.ShowTip("In Guiding")}},{key:"onChallegeClick",value:function(){j.Instance.TmpGuideId==W.None?(K.Instance.refreshChallengeLetterTime(),Z.Instance.initDefenseEnemys(),H.Instance.showView(T.UIChallengeLetter,L.PANEL),this.refreshLockBtn(),O.Instance.sendEvent(R[R.ChallengeLetter],{type:"挑战书icon点击"}),O.Instance.sendEvent(R[R.mailIcon_click])):N.ShowTip("In Guiding")}},{key:"refreshLevelGiftBtn",value:function(){var e=K.Instance.getLevelGiftTime();this.levelGiftBtn.active=-1!=K.Instance.getLevelGiftIndex()&&e>0}},{key:"updateLevelGiftTime",value:function(){if(this.levelGiftBtn.active){var e=K.Instance.getLevelGiftTime();this.levelGiftBtn.getComponentInChildren(p).string=N.timestampToTime(e),e<=0&&(this.levelGiftBtn.active=!1,K.Instance.setLevelGiftRecieve())}}}]),n}(M)).prototype,"levelGiftBtn",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=t(Te.prototype,"kongTouBtn",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=t(Te.prototype,"challengeBtn",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=t(Te.prototype,"lockHomeBtn",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=t(Te.prototype,"lockPvpBtn",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=t(Te.prototype,"lockHeroBtn",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ve=t(Te.prototype,"drawBtn",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=t(Te.prototype,"btnHome",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=t(Te.prototype,"btnAddDestop",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=t(Te.prototype,"reward",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),He=t(Te.prototype,"startBtn",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=t(Te.prototype,"sigInBtn",[Ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=t(Te.prototype,"stages",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=t(Te.prototype,"noviceGiftBtn",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=t(Te.prototype,"BtnCangku",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=t(Te.prototype,"box",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),je=t(Te.prototype,"power",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),We=t(Te.prototype,"zhaomuLabel",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ze=t(Te.prototype,"zhaomuReddot",[ke],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ke=t(Te.prototype,"BtnCard",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qe=t(Te.prototype,"levelLab",[Ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qe=t(Te.prototype,"addDestop",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Je=t(Te.prototype,"moreBtn",[Ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xe=t(Te.prototype,"wxMoreGameBtn",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=Te))||Se)),h._RF.pop()}}}));

System.register("chunks:///UIMenu.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Core/Constants/Constant.js","./Core/Utils/AudioManager.js","./Tools.js","./Core/Event/EventCode.js","./Core/Event/EventBus.js","./Core/View/UIManager.js","./Core/Utils/SendEventManager.js","./Data/SoldierData.js","./Data/GuideData.js","./Data/StoreData.js","./Data/PVPData.js","./Data/GameData.js","./Data/TurntableData.js","./DataManager.js","./HomeScene.js","./BoatScene.js"],(function(e,t){var n,i,s,o,a,c,r,u,h,l,d,p,f,I,y,v,B,g,C,w,k,m,S,T,b,U,E,P,_,D,M,V,j,L,N,F,H,R,A,x,z,O,G,W,Q,J,K,X,q,Y,Z,$,ee;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,s=e.classCallCheck,o=e.possibleConstructorReturn,a=e.getPrototypeOf,c=e.initializerDefineProperty,r=e.assertThisInitialized,u=e.createClass},function(e){h=e.cclegacy,l=e._decorator,d=e.Node,p=e.director,f=e.ButtonComponent,I=e.tween,y=e.Vec3,v=e.Component},function(e){B=e.default,g=e.AudioName,C=e.ViewType,w=e.LayerType,k=e.SceneType,m=e.TeamType,S=e.ExChangeType},function(e){T=e.AudioManager},function(e){b=e.Tools},function(e){U=e.EventCode},function(e){E=e.default},function(e){P=e.default},function(e){_=e.default,D=e.EventId},function(e){M=e.default},function(e){V=e.default,j=e.GuideId},function(e){L=e.default},function(e){N=e.default},function(e){F=e.default},function(e){H=e.default},function(e){R=e.DataManager},function(e){A=e.HomeScene},function(e){x=e.BoatScene}],execute:function(){h._RF.push({},"26f614K5BFPTIp96jNj/I7o","UIMenu",void 0),$=l.ccclass,ee=l.property,e("UIMenu",(z=$("UIMenu"),O=ee(d),G=ee(d),W=ee(d),Q=ee(d),z((X=n((K=function(e){function t(){var e,n;s(this,t);for(var i=arguments.length,u=new Array(i),h=0;h<i;h++)u[h]=arguments[h];return(n=o(this,(e=a(t)).call.apply(e,[this].concat(u)))).curIndex=3,n.bgs=[],n.btns=[],n.icons=[],n.words=[],n.highImg=null,c(n,"storeBtn",X,r(n)),c(n,"heroBtn",q,r(n)),c(n,"pvpBtn",Y,r(n)),c(n,"bountyBtn",Z,r(n)),n.posArray=[[-280,-115,25,165,305],[-305,-140,25,165,305],[-305,-165,0,165,305],[-305,-165,-25,140,305],[-305,-165,-25,115,280]],n.funcType=3,n.upFuncType=3,n}return i(t,e),u(t,[{key:"onLoad",value:function(){p.getScene().on("HIDE_HOME_BOTTOM",this.hideMenu,this),this.fitUI(),this.init()}},{key:"start",value:function(){}},{key:"onEnable",value:function(){E.Instance.addListener(U.SetMeniuFunc,this.onClick.bind(this)),E.Instance.addListener(U.RefreshMenuRedPoint,this.refreshBtn.bind(this)),this.refreshBtn(),4!=F.Instance.menuFuncType&&5!=F.Instance.menuFuncType||this.onClick(F.Instance.menuFuncType)}},{key:"onDisable",value:function(){E.Instance.removeListener(U.SetMeniuFunc),E.Instance.removeListener(U.RefreshMenuRedPoint)}},{key:"update",value:function(){this.refreshStore1()}},{key:"fitUI",value:function(){this.node.getChildByName("Bottom").setPosition(0,-cc.winSize.height/2,0)}},{key:"init",value:function(){var e=this.node.getChildByName("Bottom");this.highImg=e.getChildByName("High");for(var t=1;t<=5;t++){var n=e.getChildByName("Btn"+t),i=n.getChildByName("Icon"),s=n.getChildByName("Word"),o=e.getChildByName("BG"+t).getComponent(f);b.addClickEvent(this.node,o,"onBtnClick","UIMenu",t.toString()),this.bgs.push(o.node),this.btns.push(n),this.icons.push(i),this.words.push(s)}}},{key:"onBtnClick",value:function(e,t){if(V.Instance.TmpGuideId==j.None){var n=parseInt(t);T.Instance.playOneShot(g.BtnClick),this.onClick(n),x.instance&&x.instance.hideCreateUICBUpTipPanel(),P.Instance.checkViewActive(C.UIGuide)&&P.Instance.hideView(C.UIGuide)}else b.ShowTip("In Guiding")}},{key:"onClick",value:function(e){switch(E.Instance.checkCode(U.OnShowFinger)&&E.Instance.pos(U.OnShowFinger,!1),e){case 1:if(F.Instance.Level<B.LockStore)return void b.ShowTip("Unlock Shop at Stage "+B.LockStore);break;case 2:case 3:break;case 4:if(!F.Instance.IsBebug&&F.Instance.Level<B.LockBounty)return void b.ShowTip("Unlock Bounty at Stage. "+B.LockBounty);break;case 5:if(!F.Instance.IsBebug&&F.Instance.Level<B.LockPVP)return b.ShowTip("Unlock Arena at Stage."+B.LockPVP),void P.Instance.showView(C.UINotice,w.PANEL,3)}if(this.curIndex!=e){var t=e-1;I(this.highImg).stop();var n=this.posArray[t][t];I(this.highImg).to(.1,{position:new y(n,65,0)}).start();for(var i=0;i<5;i++){I(this.bgs[i]).stop(),I(this.btns[i]).stop(),I(this.icons[i]).stop(),I(this.words[i]).stop();var s=t==i?1:.73,o=t==i?1:.9,a=t==i?33:29,c=t==i?96.6:80,r=t==i?190:140,u=this.posArray[t][i];I(this.icons[i]).to(.1,{scale:new y(s,s,1)}).start(),I(this.icons[i]).to(.1,{position:new y(0,c,0)}).start(),I(this.bgs[i]).to(.1,{width:r}).start(),I(this.bgs[i]).to(.1,{position:new y(u,65,0)}).start(),I(this.btns[i]).to(.1,{position:new y(u,0,0)}).start(),I(this.words[i]).to(.1,{scale:new y(o,o,1)}).start(),I(this.words[i]).to(.1,{position:new y(0,a,0)}).start()}this.curIndex=e,this.handleClickEvent(e)}this.setFuncType(e)}},{key:"setFuncType",value:function(e){if(this.funcType!=e||3==this.funcType){switch(this.funcType){case 1:P.Instance.destoryView(C.UIStore);break;case 2:P.Instance.destoryView(C.UISoldiers);break;case 3:break;case 4:P.Instance.destoryView(C.UIBounty);break;case 5:P.Instance.destoryView(C.UIPVP)}switch(this.funcType=e,this.funcType){case 1:P.Instance.showView(C.UIStore),R.instance.showWxTouch(R.instance.WXConfig.rate_store),R.instance.showTTTouch(R.instance.QQConfig.rate_store),F.Instance.TmpScene==k.BoatScene&&_.Instance.sendEvent(D[D.BoatStoreClick]);break;case 2:P.Instance.showView(C.UISoldiers),F.Instance.TmpScene==k.BoatScene&&_.Instance.sendEvent(D[D.BoatArmysClick]);break;case 3:this.upFuncType==this.funcType&&(A.instance?(b.cleanUnuseRes(),p.loadScene("BoatScene"),P.Instance.showUILoadlingView(!0)):F.Instance.Level>=5&&(b.cleanUnuseRes(),p.loadScene("HomeScene"),P.Instance.showUILoadlingView(!0)),F.Instance.TmpScene==k.BoatScene&&_.Instance.sendEvent(D[D.BoatMainClick]));break;case 4:P.Instance.showView(C.UIBounty),F.Instance.TmpScene==k.BoatScene&&_.Instance.sendEvent(D[D.BoatBountyClick]);break;case 5:P.Instance.showView(C.UIPVP),F.Instance.TmpScene==k.BoatScene&&_.Instance.sendEvent(D[D.BoatPvpClick])}this.upFuncType=this.funcType,F.Instance.menuFuncType=this.funcType}}},{key:"handleClickEvent",value:function(e){p.getScene().emit("TOUCH_OBJECT",null)}},{key:"hideMenu",value:function(e){var t=this.node.getChildByName("Bottom");I(t).stop(),e?I(t).to(.1,{position:new y(0,-cc.winSize.height/2-200,0)}).start():I(t).to(.1,{position:new y(0,-cc.winSize.height/2,0)}).start()}},{key:"getHero",value:function(){var e=b.getRandomInt(0,100)>50?201:202;if(R.instance.getItemsCountByID(e)>0){var t=M.Instance.getHeroCardCountById(e)+1;M.Instance.setHeroCardCountById(e,t),b.ShowTip("Hero card collected")}else p.getScene().emit("CREAT_ITEM",e,m.Blue,0),b.ShowTip("Hero card claimed")}},{key:"refreshBtn",value:function(){var e=this;R.instance.configloadComplete?(this.refreshStoreBtn(),this.refreshHeroBtn(),this.refreshPvpBtn()):setTimeout((function(){e.refreshBtn()}),50)}},{key:"refreshStoreBtn",value:function(){var e=this.storeBtn.getChildByName("redPoint"),t=H.Instance.getReduceTime();e.active=L.Instance.ExChangeDatas[0].type==S.FREE&&!L.Instance.ExChangeDatas[0].isReward||0==t}},{key:"refreshStore1",value:function(){var e=this.storeBtn.getChildByName("redPoint"),t=H.Instance.getReduceTime();e.active=0==t}},{key:"refreshHeroBtn",value:function(){this.heroBtn.getChildByName("redPoint").active=M.Instance.hasCanUpHero()}},{key:"refreshPvpBtn",value:function(){this.pvpBtn.getChildByName("redPoint").active=N.Instance.PvpBoxCount>0}}]),t}(v)).prototype,"storeBtn",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=n(K.prototype,"heroBtn",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=n(K.prototype,"pvpBtn",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=n(K.prototype,"bountyBtn",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=K))||J)),h._RF.pop()}}}));

System.register("chunks:///_virtual/prerequisite-imports:main",["../Core/Utils/PlatformUtils.js","../Core/Constants/Constant.js","../Core/Utils/Dictionary.js","../Core/Utils/AudioManager.js","../UITip.js","../Tools.js","../Cfg/BattleCfg.js","../Cfg/BountyCfg.js","../Cfg/LevelCfg.js","../Cfg/PassRewardCfg.js","../Cfg/TurntableCfg.js","../Config.js","../Core/Utils/List.js","../Core/Event/EventCode.js","../Core/Event/EventBus.js","../Core/View/UIBase.js","../Core/View/UIManager.js","../Core/AdUitls/AdManager.js","../Core/Utils/AndroidUtils.js","../Core/Utils/FileStream.js","../Core/Utils/OppoUtils/effendi_config.js","../Core/Utils/OppoUtils/effendi.js","../Core/Utils/SendEventManager.js","../Core/Utils/ObjectPool.js","../Soldiers/Bullet/Bullet.js","../Soldiers/Effects/EffectBase.js","../Core/Utils/Astar/AstarUitls.js","../Core/Utils/Astar/NavMeshAgent.js","../Data/SoldierData.js","../Soldiers/Bullet/SkillAddBlood.js","../Soldiers/Bullet/Wind.js","../Soldiers/Soldier.js","../UI/UISoldierCardItem.js","../UI/guide/UIGuide.js","../Data/BuildData.js","../Data/GuideData.js","../Data/StoreData.js","../Data/PVPData.js","../Data/BattleData.js","../Data/GameData.js","../Data/BountyData.js","../Data/PassRewardData.js","../Data/SignInData.js","../Data/TurntableData.js","../DataManager.js","../CameraControl.js","../UI/UIBuildInfoTipItem.js","../Scene/Builds/BuildingUpEffect.js","../HomeScene.js","../Item.js","../UI/UICBUpTipPanel.js","../BoatScene.js","../Core/AdUitls/NativeUitls.js","../Core/AdUitls/WxCustomAdUitls/WXCustomAdUitls.js","../Core/Constants/LocalStorageKey.js","../Core/Utils/ButtomClickAudio.js","../Core/Utils/RotaionUitls.js","../Core/Utils/UIUtils/AniPlay.js","../Core/Utils/UIUtils/DiamondUtils.js","../Core/Utils/UIUtils/GoldUtlis.js","../Core/Utils/UIUtils/WoodUtils.js","../Main.js","../ResCleaner.js","../Scene/BattleItem.js","../Scene/Ship.js","../Scene/BattleScene.js","../Scene/BuildMoveTips.js","../Scene/LevelScene.js","../Scene/LevelItem.js","../UI/BattleICardtem.js","../UI/CellCangKu.js","../UI/ChangeLabel.js","../UI/ChangeSprite.js","../UI/SignIn/SignItem.js","../UIOPPONative.js","../UI/SignIn/UISignIn.js","../UI/SoldierStars.js","../UI/UIBattle.js","../UI/UIBattleLoading.js","../UI/UIBountyItem.js","../UI/UIBounty.js","../UI/UIBuildInfo.js","../UI/UIBuildUpInfo.js","../UI/UIChallengeLetter.js","../UI/UICollect.js","../UI/UICongratulations.js","../UI/UICrazyBox.js","../UI/UIDailyDaimond.js","../UI/UIDailyGold.js","../UI/UIDailyWood.js","../UI/UIGetGoods.js","../UI/UIGoldEnough.js","../UI/UIHeroInfo.js","../UI/UIKongTou.js","../UI/UILevelGift.js","../UI/UILevelLockTip.js","../UI/UILoading.js","../UI/UILoadlingView.js","../UI/UILuckItem.js","../UI/UILuck.js","../UI/UIMedal.js","../UI/UINewLock.js","../UI/UINotice.js","../UI/UINoviceGift.js","../UI/UIPassItemInfo.js","../UI/UIPassItem.js","../UI/UIPassReward.js","../UI/UIRecruit.js","../UI/UIRecruitRate.js","../UI/UISet.js","../UI/UIShare.js","../UI/UISoldierInfo.js","../UI/UISoldiers.js","../UI/UITurntable/TurntableBoxItem.js","../UI/UITurntable/UITurntableItem.js","../UI/UITurntable/UITurntable.js","../UI/UIVictory.js","../UI/UIVictoryBox.js","../UI/UIWoodEnough.js","../UI/UIWxMoreGamePanel.js","../UI/pvp/UIPVPItem.js","../UI/pvp/UIPVP.js","../UI/store/ExchangeCardItem.js","../UI/store/StoreCardItem.js","../UI/store/StoreDailyItem.js","../UI/store/StoreExchangeItem.js","../UI/store/UIStore.js","../UIBuilding.js","../UICangkuWindow.js","../UICangKu.js","../UIHome.js","../UIMain.js","../UIMenu.js"],(function(n,t){return{setters:[function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){}],execute:function(){}}}));

(function(r) {
  r('project:///assets/scripts/Core/Utils/PlatformUtils.js', 'chunks:///Core/Utils/PlatformUtils.js');
  r('project:///assets/scripts/Core/Constants/Constant.js', 'chunks:///Core/Constants/Constant.js');
  r('project:///assets/scripts/Core/Utils/Dictionary.js', 'chunks:///Core/Utils/Dictionary.js');
  r('project:///assets/scripts/Core/Utils/AudioManager.js', 'chunks:///Core/Utils/AudioManager.js');
  r('project:///assets/scripts/UITip.js', 'chunks:///UITip.js');
  r('project:///assets/scripts/Tools.js', 'chunks:///Tools.js');
  r('project:///assets/scripts/Cfg/BattleCfg.js', 'chunks:///Cfg/BattleCfg.js');
  r('project:///assets/scripts/Cfg/BountyCfg.js', 'chunks:///Cfg/BountyCfg.js');
  r('project:///assets/scripts/Cfg/LevelCfg.js', 'chunks:///Cfg/LevelCfg.js');
  r('project:///assets/scripts/Cfg/PassRewardCfg.js', 'chunks:///Cfg/PassRewardCfg.js');
  r('project:///assets/scripts/Cfg/TurntableCfg.js', 'chunks:///Cfg/TurntableCfg.js');
  r('project:///assets/scripts/Config.js', 'chunks:///Config.js');
  r('project:///assets/scripts/Core/Utils/List.js', 'chunks:///Core/Utils/List.js');
  r('project:///assets/scripts/Core/Event/EventCode.js', 'chunks:///Core/Event/EventCode.js');
  r('project:///assets/scripts/Core/Event/EventBus.js', 'chunks:///Core/Event/EventBus.js');
  r('project:///assets/scripts/Core/View/UIBase.js', 'chunks:///Core/View/UIBase.js');
  r('project:///assets/scripts/Core/View/UIManager.js', 'chunks:///Core/View/UIManager.js');
  r('project:///assets/scripts/Core/AdUitls/AdManager.js', 'chunks:///Core/AdUitls/AdManager.js');
  r('project:///assets/scripts/Core/Utils/AndroidUtils.js', 'chunks:///Core/Utils/AndroidUtils.js');
  r('project:///assets/scripts/Core/Utils/FileStream.js', 'chunks:///Core/Utils/FileStream.js');
  r('project:///assets/scripts/Core/Utils/OppoUtils/effendi_config.js', 'chunks:///Core/Utils/OppoUtils/effendi_config.js');
  r('project:///assets/scripts/Core/Utils/OppoUtils/effendi.js', 'chunks:///Core/Utils/OppoUtils/effendi.js');
  r('project:///assets/scripts/Core/Utils/SendEventManager.js', 'chunks:///Core/Utils/SendEventManager.js');
  r('project:///assets/scripts/Core/Utils/ObjectPool.js', 'chunks:///Core/Utils/ObjectPool.js');
  r('project:///assets/scripts/Soldiers/Bullet/Bullet.js', 'chunks:///Soldiers/Bullet/Bullet.js');
  r('project:///assets/scripts/Soldiers/Effects/EffectBase.js', 'chunks:///Soldiers/Effects/EffectBase.js');
  r('project:///assets/scripts/Core/Utils/Astar/AstarUitls.js', 'chunks:///Core/Utils/Astar/AstarUitls.js');
  r('project:///assets/scripts/Core/Utils/Astar/NavMeshAgent.js', 'chunks:///Core/Utils/Astar/NavMeshAgent.js');
  r('project:///assets/scripts/Data/SoldierData.js', 'chunks:///Data/SoldierData.js');
  r('project:///assets/scripts/Soldiers/Bullet/SkillAddBlood.js', 'chunks:///Soldiers/Bullet/SkillAddBlood.js');
  r('project:///assets/scripts/Soldiers/Bullet/Wind.js', 'chunks:///Soldiers/Bullet/Wind.js');
  r('project:///assets/scripts/Soldiers/Soldier.js', 'chunks:///Soldiers/Soldier.js');
  r('project:///assets/scripts/UI/UISoldierCardItem.js', 'chunks:///UI/UISoldierCardItem.js');
  r('project:///assets/scripts/UI/guide/UIGuide.js', 'chunks:///UI/guide/UIGuide.js');
  r('project:///assets/scripts/Data/BuildData.js', 'chunks:///Data/BuildData.js');
  r('project:///assets/scripts/Data/GuideData.js', 'chunks:///Data/GuideData.js');
  r('project:///assets/scripts/Data/StoreData.js', 'chunks:///Data/StoreData.js');
  r('project:///assets/scripts/Data/PVPData.js', 'chunks:///Data/PVPData.js');
  r('project:///assets/scripts/Data/BattleData.js', 'chunks:///Data/BattleData.js');
  r('project:///assets/scripts/Data/GameData.js', 'chunks:///Data/GameData.js');
  r('project:///assets/scripts/Data/BountyData.js', 'chunks:///Data/BountyData.js');
  r('project:///assets/scripts/Data/PassRewardData.js', 'chunks:///Data/PassRewardData.js');
  r('project:///assets/scripts/Data/SignInData.js', 'chunks:///Data/SignInData.js');
  r('project:///assets/scripts/Data/TurntableData.js', 'chunks:///Data/TurntableData.js');
  r('project:///assets/scripts/DataManager.js', 'chunks:///DataManager.js');
  r('project:///assets/scripts/CameraControl.js', 'chunks:///CameraControl.js');
  r('project:///assets/scripts/UI/UIBuildInfoTipItem.js', 'chunks:///UI/UIBuildInfoTipItem.js');
  r('project:///assets/scripts/Scene/Builds/BuildingUpEffect.js', 'chunks:///Scene/Builds/BuildingUpEffect.js');
  r('project:///assets/scripts/HomeScene.js', 'chunks:///HomeScene.js');
  r('project:///assets/scripts/Item.js', 'chunks:///Item.js');
  r('project:///assets/scripts/UI/UICBUpTipPanel.js', 'chunks:///UI/UICBUpTipPanel.js');
  r('project:///assets/scripts/BoatScene.js', 'chunks:///BoatScene.js');
  r('project:///assets/scripts/Core/AdUitls/NativeUitls.js', 'chunks:///Core/AdUitls/NativeUitls.js');
  r('project:///assets/scripts/Core/AdUitls/WxCustomAdUitls/WXCustomAdUitls.js', 'chunks:///Core/AdUitls/WxCustomAdUitls/WXCustomAdUitls.js');
  r('project:///assets/scripts/Core/Constants/LocalStorageKey.js', 'chunks:///Core/Constants/LocalStorageKey.js');
  r('project:///assets/scripts/Core/Utils/ButtomClickAudio.js', 'chunks:///Core/Utils/ButtomClickAudio.js');
  r('project:///assets/scripts/Core/Utils/RotaionUitls.js', 'chunks:///Core/Utils/RotaionUitls.js');
  r('project:///assets/scripts/Core/Utils/UIUtils/AniPlay.js', 'chunks:///Core/Utils/UIUtils/AniPlay.js');
  r('project:///assets/scripts/Core/Utils/UIUtils/DiamondUtils.js', 'chunks:///Core/Utils/UIUtils/DiamondUtils.js');
  r('project:///assets/scripts/Core/Utils/UIUtils/GoldUtlis.js', 'chunks:///Core/Utils/UIUtils/GoldUtlis.js');
  r('project:///assets/scripts/Core/Utils/UIUtils/WoodUtils.js', 'chunks:///Core/Utils/UIUtils/WoodUtils.js');
  r('project:///assets/scripts/Main.js', 'chunks:///Main.js');
  r('project:///assets/scripts/ResCleaner.js', 'chunks:///ResCleaner.js');
  r('project:///assets/scripts/Scene/BattleItem.js', 'chunks:///Scene/BattleItem.js');
  r('project:///assets/scripts/Scene/Ship.js', 'chunks:///Scene/Ship.js');
  r('project:///assets/scripts/Scene/BattleScene.js', 'chunks:///Scene/BattleScene.js');
  r('project:///assets/scripts/Scene/BuildMoveTips.js', 'chunks:///Scene/BuildMoveTips.js');
  r('project:///assets/scripts/Scene/LevelScene.js', 'chunks:///Scene/LevelScene.js');
  r('project:///assets/scripts/Scene/LevelItem.js', 'chunks:///Scene/LevelItem.js');
  r('project:///assets/scripts/UI/BattleICardtem.js', 'chunks:///UI/BattleICardtem.js');
  r('project:///assets/scripts/UI/CellCangKu.js', 'chunks:///UI/CellCangKu.js');
  r('project:///assets/scripts/UI/ChangeLabel.js', 'chunks:///UI/ChangeLabel.js');
  r('project:///assets/scripts/UI/ChangeSprite.js', 'chunks:///UI/ChangeSprite.js');
  r('project:///assets/scripts/UI/SignIn/SignItem.js', 'chunks:///UI/SignIn/SignItem.js');
  r('project:///assets/scripts/UIOPPONative.js', 'chunks:///UIOPPONative.js');
  r('project:///assets/scripts/UI/SignIn/UISignIn.js', 'chunks:///UI/SignIn/UISignIn.js');
  r('project:///assets/scripts/UI/SoldierStars.js', 'chunks:///UI/SoldierStars.js');
  r('project:///assets/scripts/UI/UIBattle.js', 'chunks:///UI/UIBattle.js');
  r('project:///assets/scripts/UI/UIBattleLoading.js', 'chunks:///UI/UIBattleLoading.js');
  r('project:///assets/scripts/UI/UIBountyItem.js', 'chunks:///UI/UIBountyItem.js');
  r('project:///assets/scripts/UI/UIBounty.js', 'chunks:///UI/UIBounty.js');
  r('project:///assets/scripts/UI/UIBuildInfo.js', 'chunks:///UI/UIBuildInfo.js');
  r('project:///assets/scripts/UI/UIBuildUpInfo.js', 'chunks:///UI/UIBuildUpInfo.js');
  r('project:///assets/scripts/UI/UIChallengeLetter.js', 'chunks:///UI/UIChallengeLetter.js');
  r('project:///assets/scripts/UI/UICollect.js', 'chunks:///UI/UICollect.js');
  r('project:///assets/scripts/UI/UICongratulations.js', 'chunks:///UI/UICongratulations.js');
  r('project:///assets/scripts/UI/UICrazyBox.js', 'chunks:///UI/UICrazyBox.js');
  r('project:///assets/scripts/UI/UIDailyDaimond.js', 'chunks:///UI/UIDailyDaimond.js');
  r('project:///assets/scripts/UI/UIDailyGold.js', 'chunks:///UI/UIDailyGold.js');
  r('project:///assets/scripts/UI/UIDailyWood.js', 'chunks:///UI/UIDailyWood.js');
  r('project:///assets/scripts/UI/UIGetGoods.js', 'chunks:///UI/UIGetGoods.js');
  r('project:///assets/scripts/UI/UIGoldEnough.js', 'chunks:///UI/UIGoldEnough.js');
  r('project:///assets/scripts/UI/UIHeroInfo.js', 'chunks:///UI/UIHeroInfo.js');
  r('project:///assets/scripts/UI/UIKongTou.js', 'chunks:///UI/UIKongTou.js');
  r('project:///assets/scripts/UI/UILevelGift.js', 'chunks:///UI/UILevelGift.js');
  r('project:///assets/scripts/UI/UILevelLockTip.js', 'chunks:///UI/UILevelLockTip.js');
  r('project:///assets/scripts/UI/UILoading.js', 'chunks:///UI/UILoading.js');
  r('project:///assets/scripts/UI/UILoadlingView.js', 'chunks:///UI/UILoadlingView.js');
  r('project:///assets/scripts/UI/UILuckItem.js', 'chunks:///UI/UILuckItem.js');
  r('project:///assets/scripts/UI/UILuck.js', 'chunks:///UI/UILuck.js');
  r('project:///assets/scripts/UI/UIMedal.js', 'chunks:///UI/UIMedal.js');
  r('project:///assets/scripts/UI/UINewLock.js', 'chunks:///UI/UINewLock.js');
  r('project:///assets/scripts/UI/UINotice.js', 'chunks:///UI/UINotice.js');
  r('project:///assets/scripts/UI/UINoviceGift.js', 'chunks:///UI/UINoviceGift.js');
  r('project:///assets/scripts/UI/UIPassItemInfo.js', 'chunks:///UI/UIPassItemInfo.js');
  r('project:///assets/scripts/UI/UIPassItem.js', 'chunks:///UI/UIPassItem.js');
  r('project:///assets/scripts/UI/UIPassReward.js', 'chunks:///UI/UIPassReward.js');
  r('project:///assets/scripts/UI/UIRecruit.js', 'chunks:///UI/UIRecruit.js');
  r('project:///assets/scripts/UI/UIRecruitRate.js', 'chunks:///UI/UIRecruitRate.js');
  r('project:///assets/scripts/UI/UISet.js', 'chunks:///UI/UISet.js');
  r('project:///assets/scripts/UI/UIShare.js', 'chunks:///UI/UIShare.js');
  r('project:///assets/scripts/UI/UISoldierInfo.js', 'chunks:///UI/UISoldierInfo.js');
  r('project:///assets/scripts/UI/UISoldiers.js', 'chunks:///UI/UISoldiers.js');
  r('project:///assets/scripts/UI/UITurntable/TurntableBoxItem.js', 'chunks:///UI/UITurntable/TurntableBoxItem.js');
  r('project:///assets/scripts/UI/UITurntable/UITurntableItem.js', 'chunks:///UI/UITurntable/UITurntableItem.js');
  r('project:///assets/scripts/UI/UITurntable/UITurntable.js', 'chunks:///UI/UITurntable/UITurntable.js');
  r('project:///assets/scripts/UI/UIVictory.js', 'chunks:///UI/UIVictory.js');
  r('project:///assets/scripts/UI/UIVictoryBox.js', 'chunks:///UI/UIVictoryBox.js');
  r('project:///assets/scripts/UI/UIWoodEnough.js', 'chunks:///UI/UIWoodEnough.js');
  r('project:///assets/scripts/UI/UIWxMoreGamePanel.js', 'chunks:///UI/UIWxMoreGamePanel.js');
  r('project:///assets/scripts/UI/pvp/UIPVPItem.js', 'chunks:///UI/pvp/UIPVPItem.js');
  r('project:///assets/scripts/UI/pvp/UIPVP.js', 'chunks:///UI/pvp/UIPVP.js');
  r('project:///assets/scripts/UI/store/ExchangeCardItem.js', 'chunks:///UI/store/ExchangeCardItem.js');
  r('project:///assets/scripts/UI/store/StoreCardItem.js', 'chunks:///UI/store/StoreCardItem.js');
  r('project:///assets/scripts/UI/store/StoreDailyItem.js', 'chunks:///UI/store/StoreDailyItem.js');
  r('project:///assets/scripts/UI/store/StoreExchangeItem.js', 'chunks:///UI/store/StoreExchangeItem.js');
  r('project:///assets/scripts/UI/store/UIStore.js', 'chunks:///UI/store/UIStore.js');
  r('project:///assets/scripts/UIBuilding.js', 'chunks:///UIBuilding.js');
  r('project:///assets/scripts/UICangkuWindow.js', 'chunks:///UICangkuWindow.js');
  r('project:///assets/scripts/UICangKu.js', 'chunks:///UICangKu.js');
  r('project:///assets/scripts/UIHome.js', 'chunks:///UIHome.js');
  r('project:///assets/scripts/UIMain.js', 'chunks:///UIMain.js');
  r('project:///assets/scripts/UIMenu.js', 'chunks:///UIMenu.js');
  r('virtual:///prerequisite-imports:main', 'chunks:///_virtual/prerequisite-imports:main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    var _m;
    return {
        setters: [function(m) { _m = m; }],
        execute: function () { _export(_m); }
    };
    });
});